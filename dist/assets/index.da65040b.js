(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}})();function Hy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ce={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=Symbol.for("react.element"),Ny=Symbol.for("react.portal"),My=Symbol.for("react.fragment"),Fy=Symbol.for("react.strict_mode"),Ly=Symbol.for("react.profiler"),_y=Symbol.for("react.provider"),ky=Symbol.for("react.context"),Ty=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),Jy=Symbol.for("react.memo"),Uy=Symbol.for("react.lazy"),B4=Symbol.iterator;function Dy(i){return i===null||typeof i!="object"?null:(i=B4&&i[B4]||i["@@iterator"],typeof i=="function"?i:null)}var _p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kp=Object.assign,Tp={};function Ra(i,e,t){this.props=i,this.context=e,this.refs=Tp,this.updater=t||_p}Ra.prototype.isReactComponent={};Ra.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Ra.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Ep(){}Ep.prototype=Ra.prototype;function eA(i,e,t){this.props=i,this.context=e,this.refs=Tp,this.updater=t||_p}var tA=eA.prototype=new Ep;tA.constructor=eA;kp(tA,Ra.prototype);tA.isPureReactComponent=!0;var Z4=Array.isArray,Jp=Object.prototype.hasOwnProperty,nA={current:null},Up={key:!0,ref:!0,__self:!0,__source:!0};function Dp(i,e,t){var n,l={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Jp.call(e,n)&&!Up.hasOwnProperty(n)&&(l[n]=e[n]);var g=arguments.length-2;if(g===1)l.children=t;else if(1<g){for(var r=Array(g),I=0;I<g;I++)r[I]=arguments[I+2];l.children=r}if(i&&i.defaultProps)for(n in g=i.defaultProps,g)l[n]===void 0&&(l[n]=g[n]);return{$$typeof:RI,type:i,key:s,ref:o,props:l,_owner:nA.current}}function Qy(i,e){return{$$typeof:RI,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function iA(i){return typeof i=="object"&&i!==null&&i.$$typeof===RI}function Py(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var v4=/\/+/g;function Uu(i,e){return typeof i=="object"&&i!==null&&i.key!=null?Py(""+i.key):e.toString(36)}function I0(i,e,t,n,l){var s=typeof i;(s==="undefined"||s==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case RI:case Ny:o=!0}}if(o)return o=i,l=l(o),i=n===""?"."+Uu(o,0):n,Z4(l)?(t="",i!=null&&(t=i.replace(v4,"$&/")+"/"),I0(l,e,t,"",function(I){return I})):l!=null&&(iA(l)&&(l=Qy(l,t+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(v4,"$&/")+"/")+i)),e.push(l)),1;if(o=0,n=n===""?".":n+":",Z4(i))for(var g=0;g<i.length;g++){s=i[g];var r=n+Uu(s,g);o+=I0(s,e,t,r,l)}else if(r=Dy(i),typeof r=="function")for(i=r.call(i),g=0;!(s=i.next()).done;)s=s.value,r=n+Uu(s,g++),o+=I0(s,e,t,r,l);else if(s==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $c(i,e,t){if(i==null)return i;var n=[],l=0;return I0(i,n,"","",function(s){return e.call(t,s,l++)}),n}function Oy(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var ui={current:null},c0={transition:null},jy={ReactCurrentDispatcher:ui,ReactCurrentBatchConfig:c0,ReactCurrentOwner:nA};Bt.Children={map:$c,forEach:function(i,e,t){$c(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return $c(i,function(){e++}),e},toArray:function(i){return $c(i,function(e){return e})||[]},only:function(i){if(!iA(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};Bt.Component=Ra;Bt.Fragment=My;Bt.Profiler=Ly;Bt.PureComponent=eA;Bt.StrictMode=Fy;Bt.Suspense=Ey;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jy;Bt.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=kp({},i.props),l=i.key,s=i.ref,o=i._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=nA.current),e.key!==void 0&&(l=""+e.key),i.type&&i.type.defaultProps)var g=i.type.defaultProps;for(r in e)Jp.call(e,r)&&!Up.hasOwnProperty(r)&&(n[r]=e[r]===void 0&&g!==void 0?g[r]:e[r])}var r=arguments.length-2;if(r===1)n.children=t;else if(1<r){g=Array(r);for(var I=0;I<r;I++)g[I]=arguments[I+2];n.children=g}return{$$typeof:RI,type:i.type,key:l,ref:s,props:n,_owner:o}};Bt.createContext=function(i){return i={$$typeof:ky,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:_y,_context:i},i.Consumer=i};Bt.createElement=Dp;Bt.createFactory=function(i){var e=Dp.bind(null,i);return e.type=i,e};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(i){return{$$typeof:Ty,render:i}};Bt.isValidElement=iA;Bt.lazy=function(i){return{$$typeof:Uy,_payload:{_status:-1,_result:i},_init:Oy}};Bt.memo=function(i,e){return{$$typeof:Jy,type:i,compare:e===void 0?null:e}};Bt.startTransition=function(i){var e=c0.transition;c0.transition={};try{i()}finally{c0.transition=e}};Bt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bt.useCallback=function(i,e){return ui.current.useCallback(i,e)};Bt.useContext=function(i){return ui.current.useContext(i)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(i){return ui.current.useDeferredValue(i)};Bt.useEffect=function(i,e){return ui.current.useEffect(i,e)};Bt.useId=function(){return ui.current.useId()};Bt.useImperativeHandle=function(i,e,t){return ui.current.useImperativeHandle(i,e,t)};Bt.useInsertionEffect=function(i,e){return ui.current.useInsertionEffect(i,e)};Bt.useLayoutEffect=function(i,e){return ui.current.useLayoutEffect(i,e)};Bt.useMemo=function(i,e){return ui.current.useMemo(i,e)};Bt.useReducer=function(i,e,t){return ui.current.useReducer(i,e,t)};Bt.useRef=function(i){return ui.current.useRef(i)};Bt.useState=function(i){return ui.current.useState(i)};Bt.useSyncExternalStore=function(i,e,t){return ui.current.useSyncExternalStore(i,e,t)};Bt.useTransition=function(){return ui.current.useTransition()};Bt.version="18.2.0";(function(i){i.exports=Bt})(Ce);var A5={},Qp={exports:{}},Qi={},Pp={exports:{}},Op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(R,Y){var H=R.length;R.push(Y);e:for(;0<H;){var J=H-1>>>1,P=R[J];if(0<l(P,Y))R[J]=Y,R[H]=P,H=J;else break e}}function t(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var Y=R[0],H=R.pop();if(H!==Y){R[0]=H;e:for(var J=0,P=R.length,ne=P>>>1;J<ne;){var fe=2*(J+1)-1,We=R[fe],le=fe+1,_e=R[le];if(0>l(We,H))le<P&&0>l(_e,We)?(R[J]=_e,R[le]=H,J=le):(R[J]=We,R[fe]=H,J=fe);else if(le<P&&0>l(_e,H))R[J]=_e,R[le]=H,J=le;else break e}}return Y}function l(R,Y){var H=R.sortIndex-Y.sortIndex;return H!==0?H:R.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,g=o.now();i.unstable_now=function(){return o.now()-g}}var r=[],I=[],C=1,u=null,d=3,A=!1,m=!1,f=!1,p=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var Y=t(I);Y!==null;){if(Y.callback===null)n(I);else if(Y.startTime<=R)n(I),Y.sortIndex=Y.expirationTime,e(r,Y);else break;Y=t(I)}}function Z(R){if(f=!1,y(R),!m)if(t(r)!==null)m=!0,se(q);else{var Y=t(I);Y!==null&&oe(Z,Y.startTime-R)}}function q(R,Y){m=!1,f&&(f=!1,b(x),x=-1),A=!0;var H=d;try{for(y(Y),u=t(r);u!==null&&(!(u.expirationTime>Y)||R&&!k());){var J=u.callback;if(typeof J=="function"){u.callback=null,d=u.priorityLevel;var P=J(u.expirationTime<=Y);Y=i.unstable_now(),typeof P=="function"?u.callback=P:u===t(r)&&n(r),y(Y)}else n(r);u=t(r)}if(u!==null)var ne=!0;else{var fe=t(I);fe!==null&&oe(Z,fe.startTime-Y),ne=!1}return ne}finally{u=null,d=H,A=!1}}var W=!1,S=null,x=-1,V=5,X=-1;function k(){return!(i.unstable_now()-X<V)}function $(){if(S!==null){var R=i.unstable_now();X=R;var Y=!0;try{Y=S(!0,R)}finally{Y?Q():(W=!1,S=null)}}else W=!1}var Q;if(typeof B=="function")Q=function(){B($)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,te=E.port2;E.port1.onmessage=$,Q=function(){te.postMessage(null)}}else Q=function(){p($,0)};function se(R){S=R,W||(W=!0,Q())}function oe(R,Y){x=p(function(){R(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(R){R.callback=null},i.unstable_continueExecution=function(){m||A||(m=!0,se(q))},i.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<R?Math.floor(1e3/R):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(r)},i.unstable_next=function(R){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var H=d;d=Y;try{return R()}finally{d=H}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(R,Y){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=d;d=R;try{return Y()}finally{d=H}},i.unstable_scheduleCallback=function(R,Y,H){var J=i.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?J+H:J):H=J,R){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=H+P,R={id:C++,callback:Y,priorityLevel:R,startTime:H,expirationTime:P,sortIndex:-1},H>J?(R.sortIndex=H,e(I,R),t(r)===null&&R===t(I)&&(f?(b(x),x=-1):f=!0,oe(Z,H-J))):(R.sortIndex=P,e(r,R),m||A||(m=!0,se(q))),R},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(R){var Y=d;return function(){var H=d;d=Y;try{return R.apply(this,arguments)}finally{d=H}}}})(Op);(function(i){i.exports=Op})(Pp);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=Ce.exports,Ui=Pp.exports;function Ze(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $p=new Set,tI={};function sr(i,e){ma(i,e),ma(i+"Capture",e)}function ma(i,e){for(tI[i]=e,i=0;i<e.length;i++)$p.add(e[i])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h5=Object.prototype.hasOwnProperty,$y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x4={},q4={};function eB(i){return h5.call(q4,i)?!0:h5.call(x4,i)?!1:$y.test(i)?q4[i]=!0:(x4[i]=!0,!1)}function tB(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function nB(i,e,t,n){if(e===null||typeof e>"u"||tB(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function di(i,e,t,n,l,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=l,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Jn[i]=new di(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Jn[e]=new di(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Jn[i]=new di(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Jn[i]=new di(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Jn[i]=new di(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Jn[i]=new di(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Jn[i]=new di(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Jn[i]=new di(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Jn[i]=new di(i,5,!1,i.toLowerCase(),null,!1,!1)});var lA=/[\-:]([a-z])/g;function sA(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(lA,sA);Jn[e]=new di(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(lA,sA);Jn[e]=new di(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(lA,sA);Jn[e]=new di(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Jn[i]=new di(i,1,!1,i.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Jn[i]=new di(i,1,!1,i.toLowerCase(),null,!0,!0)});function oA(i,e,t,n){var l=Jn.hasOwnProperty(e)?Jn[e]:null;(l!==null?l.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nB(e,t,l,n)&&(t=null),n||l===null?eB(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):l.mustUseProperty?i[l.propertyName]=t===null?l.type===3?!1:"":t:(e=l.attributeName,n=l.attributeNamespace,t===null?i.removeAttribute(e):(l=l.type,t=l===3||l===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var Os=jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eC=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),gA=Symbol.for("react.strict_mode"),m5=Symbol.for("react.profiler"),e6=Symbol.for("react.provider"),t6=Symbol.for("react.context"),rA=Symbol.for("react.forward_ref"),p5=Symbol.for("react.suspense"),f5=Symbol.for("react.suspense_list"),aA=Symbol.for("react.memo"),Zo=Symbol.for("react.lazy"),n6=Symbol.for("react.offscreen"),w4=Symbol.iterator;function I1(i){return i===null||typeof i!="object"?null:(i=w4&&i[w4]||i["@@iterator"],typeof i=="function"?i:null)}var rn=Object.assign,Du;function H1(i){if(Du===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Du=e&&e[1]||""}return`
`+Du+i}var Qu=!1;function Pu(i,e){if(!i||Qu)return"";Qu=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(I){var n=I}Reflect.construct(i,[],e)}else{try{e.call()}catch(I){n=I}i.call(e.prototype)}else{try{throw Error()}catch(I){n=I}i()}}catch(I){if(I&&n&&typeof I.stack=="string"){for(var l=I.stack.split(`
`),s=n.stack.split(`
`),o=l.length-1,g=s.length-1;1<=o&&0<=g&&l[o]!==s[g];)g--;for(;1<=o&&0<=g;o--,g--)if(l[o]!==s[g]){if(o!==1||g!==1)do if(o--,g--,0>g||l[o]!==s[g]){var r=`
`+l[o].replace(" at new "," at ");return i.displayName&&r.includes("<anonymous>")&&(r=r.replace("<anonymous>",i.displayName)),r}while(1<=o&&0<=g);break}}}finally{Qu=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?H1(i):""}function iB(i){switch(i.tag){case 5:return H1(i.type);case 16:return H1("Lazy");case 13:return H1("Suspense");case 19:return H1("SuspenseList");case 0:case 2:case 15:return i=Pu(i.type,!1),i;case 11:return i=Pu(i.type.render,!1),i;case 1:return i=Pu(i.type,!0),i;default:return""}}function b5(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Ur:return"Fragment";case Jr:return"Portal";case m5:return"Profiler";case gA:return"StrictMode";case p5:return"Suspense";case f5:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case t6:return(i.displayName||"Context")+".Consumer";case e6:return(i._context.displayName||"Context")+".Provider";case rA:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case aA:return e=i.displayName||null,e!==null?e:b5(i.type)||"Memo";case Zo:e=i._payload,i=i._init;try{return b5(i(e))}catch{}}return null}function lB(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b5(e);case 8:return e===gA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _o(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function i6(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sB(i){var e=i6(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var l=t.get,s=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return l.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function tC(i){i._valueTracker||(i._valueTracker=sB(i))}function l6(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=i6(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function V0(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function G5(i,e){var t=e.checked;return rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:i._wrapperState.initialChecked})}function W4(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=_o(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s6(i,e){e=e.checked,e!=null&&oA(i,"checked",e,!1)}function y5(i,e){s6(i,e);var t=_o(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?B5(i,e.type,t):e.hasOwnProperty("defaultValue")&&B5(i,e.type,_o(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function S4(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function B5(i,e,t){(e!=="number"||V0(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var N1=Array.isArray;function aa(i,e,t,n){if(i=i.options,e){e={};for(var l=0;l<t.length;l++)e["$"+t[l]]=!0;for(t=0;t<i.length;t++)l=e.hasOwnProperty("$"+i[t].value),i[t].selected!==l&&(i[t].selected=l),l&&n&&(i[t].defaultSelected=!0)}else{for(t=""+_o(t),e=null,l=0;l<i.length;l++){if(i[l].value===t){i[l].selected=!0,n&&(i[l].defaultSelected=!0);return}e!==null||i[l].disabled||(e=i[l])}e!==null&&(e.selected=!0)}}function Z5(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return rn({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function V4(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ze(92));if(N1(t)){if(1<t.length)throw Error(Ze(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:_o(t)}}function o6(i,e){var t=_o(e.value),n=_o(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function R4(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function g6(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v5(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?g6(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var nC,r6=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,l){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,l)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(nC=nC||document.createElement("div"),nC.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nC.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function nI(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var _1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oB=["Webkit","ms","Moz","O"];Object.keys(_1).forEach(function(i){oB.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),_1[e]=_1[i]})});function a6(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||_1.hasOwnProperty(i)&&_1[i]?(""+e).trim():e+"px"}function I6(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,l=a6(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,l):i[t]=l}}var gB=rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x5(i,e){if(e){if(gB[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ze(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ze(62))}}function q5(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w5=null;function IA(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var W5=null,Ia=null,ca=null;function X4(i){if(i=zI(i)){if(typeof W5!="function")throw Error(Ze(280));var e=i.stateNode;e&&(e=C2(e),W5(i.stateNode,i.type,e))}}function c6(i){Ia?ca?ca.push(i):ca=[i]:Ia=i}function C6(){if(Ia){var i=Ia,e=ca;if(ca=Ia=null,X4(i),e)for(i=0;i<e.length;i++)X4(e[i])}}function u6(i,e){return i(e)}function d6(){}var Ou=!1;function A6(i,e,t){if(Ou)return i(e,t);Ou=!0;try{return u6(i,e,t)}finally{Ou=!1,(Ia!==null||ca!==null)&&(d6(),C6())}}function iI(i,e){var t=i.stateNode;if(t===null)return null;var n=C2(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Ze(231,e,typeof t));return t}var S5=!1;if(Es)try{var c1={};Object.defineProperty(c1,"passive",{get:function(){S5=!0}}),window.addEventListener("test",c1,c1),window.removeEventListener("test",c1,c1)}catch{S5=!1}function rB(i,e,t,n,l,s,o,g,r){var I=Array.prototype.slice.call(arguments,3);try{e.apply(t,I)}catch(C){this.onError(C)}}var k1=!1,R0=null,X0=!1,V5=null,aB={onError:function(i){k1=!0,R0=i}};function IB(i,e,t,n,l,s,o,g,r){k1=!1,R0=null,rB.apply(aB,arguments)}function cB(i,e,t,n,l,s,o,g,r){if(IB.apply(this,arguments),k1){if(k1){var I=R0;k1=!1,R0=null}else throw Error(Ze(198));X0||(X0=!0,V5=I)}}function or(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,(e.flags&4098)!==0&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function h6(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Y4(i){if(or(i)!==i)throw Error(Ze(188))}function CB(i){var e=i.alternate;if(!e){if(e=or(i),e===null)throw Error(Ze(188));return e!==i?null:i}for(var t=i,n=e;;){var l=t.return;if(l===null)break;var s=l.alternate;if(s===null){if(n=l.return,n!==null){t=n;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===t)return Y4(l),i;if(s===n)return Y4(l),e;s=s.sibling}throw Error(Ze(188))}if(t.return!==n.return)t=l,n=s;else{for(var o=!1,g=l.child;g;){if(g===t){o=!0,t=l,n=s;break}if(g===n){o=!0,n=l,t=s;break}g=g.sibling}if(!o){for(g=s.child;g;){if(g===t){o=!0,t=s,n=l;break}if(g===n){o=!0,n=s,t=l;break}g=g.sibling}if(!o)throw Error(Ze(189))}}if(t.alternate!==n)throw Error(Ze(190))}if(t.tag!==3)throw Error(Ze(188));return t.stateNode.current===t?i:e}function m6(i){return i=CB(i),i!==null?p6(i):null}function p6(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=p6(i);if(e!==null)return e;i=i.sibling}return null}var f6=Ui.unstable_scheduleCallback,z4=Ui.unstable_cancelCallback,uB=Ui.unstable_shouldYield,dB=Ui.unstable_requestPaint,mn=Ui.unstable_now,AB=Ui.unstable_getCurrentPriorityLevel,cA=Ui.unstable_ImmediatePriority,b6=Ui.unstable_UserBlockingPriority,Y0=Ui.unstable_NormalPriority,hB=Ui.unstable_LowPriority,G6=Ui.unstable_IdlePriority,r2=null,Cs=null;function mB(i){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(r2,i,void 0,(i.current.flags&128)===128)}catch{}}var Nl=Math.clz32?Math.clz32:bB,pB=Math.log,fB=Math.LN2;function bB(i){return i>>>=0,i===0?32:31-(pB(i)/fB|0)|0}var iC=64,lC=4194304;function M1(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function z0(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,l=i.suspendedLanes,s=i.pingedLanes,o=t&268435455;if(o!==0){var g=o&~l;g!==0?n=M1(g):(s&=o,s!==0&&(n=M1(s)))}else o=t&~l,o!==0?n=M1(o):s!==0&&(n=M1(s));if(n===0)return 0;if(e!==0&&e!==n&&(e&l)===0&&(l=n&-n,s=e&-e,l>=s||l===16&&(s&4194240)!==0))return e;if((n&4)!==0&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-Nl(e),l=1<<t,n|=i[t],e&=~l;return n}function GB(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yB(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,l=i.expirationTimes,s=i.pendingLanes;0<s;){var o=31-Nl(s),g=1<<o,r=l[o];r===-1?((g&t)===0||(g&n)!==0)&&(l[o]=GB(g,e)):r<=e&&(i.expiredLanes|=g),s&=~g}}function R5(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function y6(){var i=iC;return iC<<=1,(iC&4194240)===0&&(iC=64),i}function ju(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function XI(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-Nl(e),i[e]=t}function BB(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var l=31-Nl(t),s=1<<l;e[l]=0,n[l]=-1,i[l]=-1,t&=~s}}function CA(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-Nl(t),l=1<<n;l&e|i[n]&e&&(i[n]|=e),t&=~l}}var Mt=0;function B6(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Z6,uA,v6,x6,q6,X5=!1,sC=[],Xo=null,Yo=null,zo=null,lI=new Map,sI=new Map,qo=[],ZB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K4(i,e){switch(i){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Yo=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":lI.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sI.delete(e.pointerId)}}function C1(i,e,t,n,l,s){return i===null||i.nativeEvent!==s?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[l]},e!==null&&(e=zI(e),e!==null&&uA(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),i)}function vB(i,e,t,n,l){switch(e){case"focusin":return Xo=C1(Xo,i,e,t,n,l),!0;case"dragenter":return Yo=C1(Yo,i,e,t,n,l),!0;case"mouseover":return zo=C1(zo,i,e,t,n,l),!0;case"pointerover":var s=l.pointerId;return lI.set(s,C1(lI.get(s)||null,i,e,t,n,l)),!0;case"gotpointercapture":return s=l.pointerId,sI.set(s,C1(sI.get(s)||null,i,e,t,n,l)),!0}return!1}function w6(i){var e=Rg(i.target);if(e!==null){var t=or(e);if(t!==null){if(e=t.tag,e===13){if(e=h6(t),e!==null){i.blockedOn=e,q6(i.priority,function(){v6(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function C0(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=Y5(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);w5=n,t.target.dispatchEvent(n),w5=null}else return e=zI(t),e!==null&&uA(e),i.blockedOn=t,!1;e.shift()}return!0}function H4(i,e,t){C0(i)&&t.delete(e)}function xB(){X5=!1,Xo!==null&&C0(Xo)&&(Xo=null),Yo!==null&&C0(Yo)&&(Yo=null),zo!==null&&C0(zo)&&(zo=null),lI.forEach(H4),sI.forEach(H4)}function u1(i,e){i.blockedOn===e&&(i.blockedOn=null,X5||(X5=!0,Ui.unstable_scheduleCallback(Ui.unstable_NormalPriority,xB)))}function oI(i){function e(l){return u1(l,i)}if(0<sC.length){u1(sC[0],i);for(var t=1;t<sC.length;t++){var n=sC[t];n.blockedOn===i&&(n.blockedOn=null)}}for(Xo!==null&&u1(Xo,i),Yo!==null&&u1(Yo,i),zo!==null&&u1(zo,i),lI.forEach(e),sI.forEach(e),t=0;t<qo.length;t++)n=qo[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<qo.length&&(t=qo[0],t.blockedOn===null);)w6(t),t.blockedOn===null&&qo.shift()}var Ca=Os.ReactCurrentBatchConfig,K0=!0;function qB(i,e,t,n){var l=Mt,s=Ca.transition;Ca.transition=null;try{Mt=1,dA(i,e,t,n)}finally{Mt=l,Ca.transition=s}}function wB(i,e,t,n){var l=Mt,s=Ca.transition;Ca.transition=null;try{Mt=4,dA(i,e,t,n)}finally{Mt=l,Ca.transition=s}}function dA(i,e,t,n){if(K0){var l=Y5(i,e,t,n);if(l===null)rd(i,e,n,H0,t),K4(i,n);else if(vB(l,i,e,t,n))n.stopPropagation();else if(K4(i,n),e&4&&-1<ZB.indexOf(i)){for(;l!==null;){var s=zI(l);if(s!==null&&Z6(s),s=Y5(i,e,t,n),s===null&&rd(i,e,n,H0,t),s===l)break;l=s}l!==null&&n.stopPropagation()}else rd(i,e,n,null,t)}}var H0=null;function Y5(i,e,t,n){if(H0=null,i=IA(n),i=Rg(i),i!==null)if(e=or(i),e===null)i=null;else if(t=e.tag,t===13){if(i=h6(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return H0=i,null}function W6(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AB()){case cA:return 1;case b6:return 4;case Y0:case hB:return 16;case G6:return 536870912;default:return 16}default:return 16}}var Wo=null,AA=null,u0=null;function S6(){if(u0)return u0;var i,e=AA,t=e.length,n,l="value"in Wo?Wo.value:Wo.textContent,s=l.length;for(i=0;i<t&&e[i]===l[i];i++);var o=t-i;for(n=1;n<=o&&e[t-n]===l[s-n];n++);return u0=l.slice(i,1<n?1-n:void 0)}function d0(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function oC(){return!0}function N4(){return!1}function Pi(i){function e(t,n,l,s,o){this._reactName=t,this._targetInst=l,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var g in i)i.hasOwnProperty(g)&&(t=i[g],this[g]=t?t(s):s[g]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?oC:N4,this.isPropagationStopped=N4,this}return rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=oC)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=oC)},persist:function(){},isPersistent:oC}),e}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hA=Pi(Xa),YI=rn({},Xa,{view:0,detail:0}),WB=Pi(YI),$u,ed,d1,a2=rn({},YI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mA,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==d1&&(d1&&i.type==="mousemove"?($u=i.screenX-d1.screenX,ed=i.screenY-d1.screenY):ed=$u=0,d1=i),$u)},movementY:function(i){return"movementY"in i?i.movementY:ed}}),M4=Pi(a2),SB=rn({},a2,{dataTransfer:0}),VB=Pi(SB),RB=rn({},YI,{relatedTarget:0}),td=Pi(RB),XB=rn({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),YB=Pi(XB),zB=rn({},Xa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),KB=Pi(zB),HB=rn({},Xa,{data:0}),F4=Pi(HB),NB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LB(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=FB[i])?!!e[i]:!1}function mA(){return LB}var _B=rn({},YI,{key:function(i){if(i.key){var e=NB[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=d0(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?MB[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mA,charCode:function(i){return i.type==="keypress"?d0(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?d0(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),kB=Pi(_B),TB=rn({},a2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L4=Pi(TB),EB=rn({},YI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mA}),JB=Pi(EB),UB=rn({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),DB=Pi(UB),QB=rn({},a2,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),PB=Pi(QB),OB=[9,13,27,32],pA=Es&&"CompositionEvent"in window,T1=null;Es&&"documentMode"in document&&(T1=document.documentMode);var jB=Es&&"TextEvent"in window&&!T1,V6=Es&&(!pA||T1&&8<T1&&11>=T1),_4=String.fromCharCode(32),k4=!1;function R6(i,e){switch(i){case"keyup":return OB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X6(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Dr=!1;function $B(i,e){switch(i){case"compositionend":return X6(e);case"keypress":return e.which!==32?null:(k4=!0,_4);case"textInput":return i=e.data,i===_4&&k4?null:i;default:return null}}function eZ(i,e){if(Dr)return i==="compositionend"||!pA&&R6(i,e)?(i=S6(),u0=AA=Wo=null,Dr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return V6&&e.locale!=="ko"?null:e.data;default:return null}}var tZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T4(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!tZ[i.type]:e==="textarea"}function Y6(i,e,t,n){c6(n),e=N0(e,"onChange"),0<e.length&&(t=new hA("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var E1=null,gI=null;function nZ(i){E6(i,0)}function I2(i){var e=Or(i);if(l6(e))return i}function iZ(i,e){if(i==="change")return e}var z6=!1;if(Es){var nd;if(Es){var id="oninput"in document;if(!id){var E4=document.createElement("div");E4.setAttribute("oninput","return;"),id=typeof E4.oninput=="function"}nd=id}else nd=!1;z6=nd&&(!document.documentMode||9<document.documentMode)}function J4(){E1&&(E1.detachEvent("onpropertychange",K6),gI=E1=null)}function K6(i){if(i.propertyName==="value"&&I2(gI)){var e=[];Y6(e,gI,i,IA(i)),A6(nZ,e)}}function lZ(i,e,t){i==="focusin"?(J4(),E1=e,gI=t,E1.attachEvent("onpropertychange",K6)):i==="focusout"&&J4()}function sZ(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return I2(gI)}function oZ(i,e){if(i==="click")return I2(e)}function gZ(i,e){if(i==="input"||i==="change")return I2(e)}function rZ(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var _l=typeof Object.is=="function"?Object.is:rZ;function rI(i,e){if(_l(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var l=t[n];if(!h5.call(e,l)||!_l(i[l],e[l]))return!1}return!0}function U4(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function D4(i,e){var t=U4(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=U4(t)}}function H6(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?H6(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function N6(){for(var i=window,e=V0();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=V0(i.document)}return e}function fA(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function aZ(i){var e=N6(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&H6(t.ownerDocument.documentElement,t)){if(n!==null&&fA(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var l=t.textContent.length,s=Math.min(n.start,l);n=n.end===void 0?s:Math.min(n.end,l),!i.extend&&s>n&&(l=n,n=s,s=l),l=D4(t,s);var o=D4(t,n);l&&o&&(i.rangeCount!==1||i.anchorNode!==l.node||i.anchorOffset!==l.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(l.node,l.offset),i.removeAllRanges(),s>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var IZ=Es&&"documentMode"in document&&11>=document.documentMode,Qr=null,z5=null,J1=null,K5=!1;function Q4(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;K5||Qr==null||Qr!==V0(n)||(n=Qr,"selectionStart"in n&&fA(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),J1&&rI(J1,n)||(J1=n,n=N0(z5,"onSelect"),0<n.length&&(e=new hA("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=Qr)))}function gC(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Pr={animationend:gC("Animation","AnimationEnd"),animationiteration:gC("Animation","AnimationIteration"),animationstart:gC("Animation","AnimationStart"),transitionend:gC("Transition","TransitionEnd")},ld={},M6={};Es&&(M6=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function c2(i){if(ld[i])return ld[i];if(!Pr[i])return i;var e=Pr[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in M6)return ld[i]=e[t];return i}var F6=c2("animationend"),L6=c2("animationiteration"),_6=c2("animationstart"),k6=c2("transitionend"),T6=new Map,P4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(i,e){T6.set(i,e),sr(e,[i])}for(var sd=0;sd<P4.length;sd++){var od=P4[sd],cZ=od.toLowerCase(),CZ=od[0].toUpperCase()+od.slice(1);Oo(cZ,"on"+CZ)}Oo(F6,"onAnimationEnd");Oo(L6,"onAnimationIteration");Oo(_6,"onAnimationStart");Oo("dblclick","onDoubleClick");Oo("focusin","onFocus");Oo("focusout","onBlur");Oo(k6,"onTransitionEnd");ma("onMouseEnter",["mouseout","mouseover"]);ma("onMouseLeave",["mouseout","mouseover"]);ma("onPointerEnter",["pointerout","pointerover"]);ma("onPointerLeave",["pointerout","pointerover"]);sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sr("onBeforeInput",["compositionend","keypress","textInput","paste"]);sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var F1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(F1));function O4(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,cB(n,e,void 0,i),i.currentTarget=null}function E6(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],l=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var g=n[o],r=g.instance,I=g.currentTarget;if(g=g.listener,r!==s&&l.isPropagationStopped())break e;O4(l,g,I),s=r}else for(o=0;o<n.length;o++){if(g=n[o],r=g.instance,I=g.currentTarget,g=g.listener,r!==s&&l.isPropagationStopped())break e;O4(l,g,I),s=r}}}if(X0)throw i=V5,X0=!1,V5=null,i}function Dt(i,e){var t=e[L5];t===void 0&&(t=e[L5]=new Set);var n=i+"__bubble";t.has(n)||(J6(e,i,2,!1),t.add(n))}function gd(i,e,t){var n=0;e&&(n|=4),J6(t,i,n,e)}var rC="_reactListening"+Math.random().toString(36).slice(2);function aI(i){if(!i[rC]){i[rC]=!0,$p.forEach(function(t){t!=="selectionchange"&&(uZ.has(t)||gd(t,!1,i),gd(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rC]||(e[rC]=!0,gd("selectionchange",!1,e))}}function J6(i,e,t,n){switch(W6(e)){case 1:var l=qB;break;case 4:l=wB;break;default:l=dA}t=l.bind(null,e,t,i),l=void 0,!S5||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),n?l!==void 0?i.addEventListener(e,t,{capture:!0,passive:l}):i.addEventListener(e,t,!0):l!==void 0?i.addEventListener(e,t,{passive:l}):i.addEventListener(e,t,!1)}function rd(i,e,t,n,l){var s=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var g=n.stateNode.containerInfo;if(g===l||g.nodeType===8&&g.parentNode===l)break;if(o===4)for(o=n.return;o!==null;){var r=o.tag;if((r===3||r===4)&&(r=o.stateNode.containerInfo,r===l||r.nodeType===8&&r.parentNode===l))return;o=o.return}for(;g!==null;){if(o=Rg(g),o===null)return;if(r=o.tag,r===5||r===6){n=s=o;continue e}g=g.parentNode}}n=n.return}A6(function(){var I=s,C=IA(t),u=[];e:{var d=T6.get(i);if(d!==void 0){var A=hA,m=i;switch(i){case"keypress":if(d0(t)===0)break e;case"keydown":case"keyup":A=kB;break;case"focusin":m="focus",A=td;break;case"focusout":m="blur",A=td;break;case"beforeblur":case"afterblur":A=td;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=M4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=VB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=JB;break;case F6:case L6:case _6:A=YB;break;case k6:A=DB;break;case"scroll":A=WB;break;case"wheel":A=PB;break;case"copy":case"cut":case"paste":A=KB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=L4}var f=(e&4)!==0,p=!f&&i==="scroll",b=f?d!==null?d+"Capture":null:d;f=[];for(var B=I,y;B!==null;){y=B;var Z=y.stateNode;if(y.tag===5&&Z!==null&&(y=Z,b!==null&&(Z=iI(B,b),Z!=null&&f.push(II(B,Z,y)))),p)break;B=B.return}0<f.length&&(d=new A(d,m,null,t,C),u.push({event:d,listeners:f}))}}if((e&7)===0){e:{if(d=i==="mouseover"||i==="pointerover",A=i==="mouseout"||i==="pointerout",d&&t!==w5&&(m=t.relatedTarget||t.fromElement)&&(Rg(m)||m[Js]))break e;if((A||d)&&(d=C.window===C?C:(d=C.ownerDocument)?d.defaultView||d.parentWindow:window,A?(m=t.relatedTarget||t.toElement,A=I,m=m?Rg(m):null,m!==null&&(p=or(m),m!==p||m.tag!==5&&m.tag!==6)&&(m=null)):(A=null,m=I),A!==m)){if(f=M4,Z="onMouseLeave",b="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(f=L4,Z="onPointerLeave",b="onPointerEnter",B="pointer"),p=A==null?d:Or(A),y=m==null?d:Or(m),d=new f(Z,B+"leave",A,t,C),d.target=p,d.relatedTarget=y,Z=null,Rg(C)===I&&(f=new f(b,B+"enter",m,t,C),f.target=y,f.relatedTarget=p,Z=f),p=Z,A&&m)t:{for(f=A,b=m,B=0,y=f;y;y=Zr(y))B++;for(y=0,Z=b;Z;Z=Zr(Z))y++;for(;0<B-y;)f=Zr(f),B--;for(;0<y-B;)b=Zr(b),y--;for(;B--;){if(f===b||b!==null&&f===b.alternate)break t;f=Zr(f),b=Zr(b)}f=null}else f=null;A!==null&&j4(u,d,A,f,!1),m!==null&&p!==null&&j4(u,p,m,f,!0)}}e:{if(d=I?Or(I):window,A=d.nodeName&&d.nodeName.toLowerCase(),A==="select"||A==="input"&&d.type==="file")var q=iZ;else if(T4(d))if(z6)q=gZ;else{q=sZ;var W=lZ}else(A=d.nodeName)&&A.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(q=oZ);if(q&&(q=q(i,I))){Y6(u,q,t,C);break e}W&&W(i,d,I),i==="focusout"&&(W=d._wrapperState)&&W.controlled&&d.type==="number"&&B5(d,"number",d.value)}switch(W=I?Or(I):window,i){case"focusin":(T4(W)||W.contentEditable==="true")&&(Qr=W,z5=I,J1=null);break;case"focusout":J1=z5=Qr=null;break;case"mousedown":K5=!0;break;case"contextmenu":case"mouseup":case"dragend":K5=!1,Q4(u,t,C);break;case"selectionchange":if(IZ)break;case"keydown":case"keyup":Q4(u,t,C)}var S;if(pA)e:{switch(i){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Dr?R6(i,t)&&(x="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(x="onCompositionStart");x&&(V6&&t.locale!=="ko"&&(Dr||x!=="onCompositionStart"?x==="onCompositionEnd"&&Dr&&(S=S6()):(Wo=C,AA="value"in Wo?Wo.value:Wo.textContent,Dr=!0)),W=N0(I,x),0<W.length&&(x=new F4(x,i,null,t,C),u.push({event:x,listeners:W}),S?x.data=S:(S=X6(t),S!==null&&(x.data=S)))),(S=jB?$B(i,t):eZ(i,t))&&(I=N0(I,"onBeforeInput"),0<I.length&&(C=new F4("onBeforeInput","beforeinput",null,t,C),u.push({event:C,listeners:I}),C.data=S))}E6(u,e)})}function II(i,e,t){return{instance:i,listener:e,currentTarget:t}}function N0(i,e){for(var t=e+"Capture",n=[];i!==null;){var l=i,s=l.stateNode;l.tag===5&&s!==null&&(l=s,s=iI(i,t),s!=null&&n.unshift(II(i,s,l)),s=iI(i,e),s!=null&&n.push(II(i,s,l))),i=i.return}return n}function Zr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function j4(i,e,t,n,l){for(var s=e._reactName,o=[];t!==null&&t!==n;){var g=t,r=g.alternate,I=g.stateNode;if(r!==null&&r===n)break;g.tag===5&&I!==null&&(g=I,l?(r=iI(t,s),r!=null&&o.unshift(II(t,r,g))):l||(r=iI(t,s),r!=null&&o.push(II(t,r,g)))),t=t.return}o.length!==0&&i.push({event:e,listeners:o})}var dZ=/\r\n?/g,AZ=/\u0000|\uFFFD/g;function $4(i){return(typeof i=="string"?i:""+i).replace(dZ,`
`).replace(AZ,"")}function aC(i,e,t){if(e=$4(e),$4(i)!==e&&t)throw Error(Ze(425))}function M0(){}var H5=null,N5=null;function M5(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var F5=typeof setTimeout=="function"?setTimeout:void 0,hZ=typeof clearTimeout=="function"?clearTimeout:void 0,e9=typeof Promise=="function"?Promise:void 0,mZ=typeof queueMicrotask=="function"?queueMicrotask:typeof e9<"u"?function(i){return e9.resolve(null).then(i).catch(pZ)}:F5;function pZ(i){setTimeout(function(){throw i})}function ad(i,e){var t=e,n=0;do{var l=t.nextSibling;if(i.removeChild(t),l&&l.nodeType===8)if(t=l.data,t==="/$"){if(n===0){i.removeChild(l),oI(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=l}while(t);oI(e)}function Ko(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function t9(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),as="__reactFiber$"+Ya,cI="__reactProps$"+Ya,Js="__reactContainer$"+Ya,L5="__reactEvents$"+Ya,fZ="__reactListeners$"+Ya,bZ="__reactHandles$"+Ya;function Rg(i){var e=i[as];if(e)return e;for(var t=i.parentNode;t;){if(e=t[Js]||t[as]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=t9(i);i!==null;){if(t=i[as])return t;i=t9(i)}return e}i=t,t=i.parentNode}return null}function zI(i){return i=i[as]||i[Js],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Or(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Ze(33))}function C2(i){return i[cI]||null}var _5=[],jr=-1;function jo(i){return{current:i}}function Ot(i){0>jr||(i.current=_5[jr],_5[jr]=null,jr--)}function Jt(i,e){jr++,_5[jr]=i.current,i.current=e}var ko={},ii=jo(ko),Si=jo(!1),Qg=ko;function pa(i,e){var t=i.type.contextTypes;if(!t)return ko;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var l={},s;for(s in t)l[s]=e[s];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=l),l}function Vi(i){return i=i.childContextTypes,i!=null}function F0(){Ot(Si),Ot(ii)}function n9(i,e,t){if(ii.current!==ko)throw Error(Ze(168));Jt(ii,e),Jt(Si,t)}function U6(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var l in n)if(!(l in e))throw Error(Ze(108,lB(i)||"Unknown",l));return rn({},t,n)}function L0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ko,Qg=ii.current,Jt(ii,i),Jt(Si,Si.current),!0}function i9(i,e,t){var n=i.stateNode;if(!n)throw Error(Ze(169));t?(i=U6(i,e,Qg),n.__reactInternalMemoizedMergedChildContext=i,Ot(Si),Ot(ii),Jt(ii,i)):Ot(Si),Jt(Si,t)}var Xs=null,u2=!1,Id=!1;function D6(i){Xs===null?Xs=[i]:Xs.push(i)}function GZ(i){u2=!0,D6(i)}function $o(){if(!Id&&Xs!==null){Id=!0;var i=0,e=Mt;try{var t=Xs;for(Mt=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Xs=null,u2=!1}catch(l){throw Xs!==null&&(Xs=Xs.slice(i+1)),f6(cA,$o),l}finally{Mt=e,Id=!1}}return null}var $r=[],ea=0,_0=null,k0=0,dl=[],Al=0,Pg=null,Ks=1,Hs="";function yg(i,e){$r[ea++]=k0,$r[ea++]=_0,_0=i,k0=e}function Q6(i,e,t){dl[Al++]=Ks,dl[Al++]=Hs,dl[Al++]=Pg,Pg=i;var n=Ks;i=Hs;var l=32-Nl(n)-1;n&=~(1<<l),t+=1;var s=32-Nl(e)+l;if(30<s){var o=l-l%5;s=(n&(1<<o)-1).toString(32),n>>=o,l-=o,Ks=1<<32-Nl(e)+l|t<<l|n,Hs=s+i}else Ks=1<<s|t<<l|n,Hs=i}function bA(i){i.return!==null&&(yg(i,1),Q6(i,1,0))}function GA(i){for(;i===_0;)_0=$r[--ea],$r[ea]=null,k0=$r[--ea],$r[ea]=null;for(;i===Pg;)Pg=dl[--Al],dl[Al]=null,Hs=dl[--Al],dl[Al]=null,Ks=dl[--Al],dl[Al]=null}var Ti=null,_i=null,tn=!1,zl=null;function P6(i,e){var t=ml(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function l9(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,Ti=i,_i=Ko(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,Ti=i,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Pg!==null?{id:Ks,overflow:Hs}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ml(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,Ti=i,_i=null,!0):!1;default:return!1}}function k5(i){return(i.mode&1)!==0&&(i.flags&128)===0}function T5(i){if(tn){var e=_i;if(e){var t=e;if(!l9(i,e)){if(k5(i))throw Error(Ze(418));e=Ko(t.nextSibling);var n=Ti;e&&l9(i,e)?P6(n,t):(i.flags=i.flags&-4097|2,tn=!1,Ti=i)}}else{if(k5(i))throw Error(Ze(418));i.flags=i.flags&-4097|2,tn=!1,Ti=i}}}function s9(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ti=i}function IC(i){if(i!==Ti)return!1;if(!tn)return s9(i),tn=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!M5(i.type,i.memoizedProps)),e&&(e=_i)){if(k5(i))throw O6(),Error(Ze(418));for(;e;)P6(i,e),e=Ko(e.nextSibling)}if(s9(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ze(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){_i=Ko(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}_i=null}}else _i=Ti?Ko(i.stateNode.nextSibling):null;return!0}function O6(){for(var i=_i;i;)i=Ko(i.nextSibling)}function fa(){_i=Ti=null,tn=!1}function yA(i){zl===null?zl=[i]:zl.push(i)}var yZ=Os.ReactCurrentBatchConfig;function Xl(i,e){if(i&&i.defaultProps){e=rn({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}var T0=jo(null),E0=null,ta=null,BA=null;function ZA(){BA=ta=E0=null}function vA(i){var e=T0.current;Ot(T0),i._currentValue=e}function E5(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function ua(i,e){E0=i,BA=ta=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&e)!==0&&(wi=!0),i.firstContext=null)}function fl(i){var e=i._currentValue;if(BA!==i)if(i={context:i,memoizedValue:e,next:null},ta===null){if(E0===null)throw Error(Ze(308));ta=i,E0.dependencies={lanes:0,firstContext:i}}else ta=ta.next=i;return e}var Xg=null;function xA(i){Xg===null?Xg=[i]:Xg.push(i)}function j6(i,e,t,n){var l=e.interleaved;return l===null?(t.next=t,xA(e)):(t.next=l.next,l.next=t),e.interleaved=t,Us(i,n)}function Us(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var vo=!1;function qA(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $6(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ks(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Ho(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,(St&2)!==0){var l=n.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),n.pending=e,Us(i,t)}return l=n.interleaved,l===null?(e.next=e,xA(n)):(e.next=l.next,l.next=e),n.interleaved=e,Us(i,t)}function A0(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,CA(i,t)}}function o9(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var l=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?l=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?l=s=e:s=s.next=e}else l=s=e;t={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function J0(i,e,t,n){var l=i.updateQueue;vo=!1;var s=l.firstBaseUpdate,o=l.lastBaseUpdate,g=l.shared.pending;if(g!==null){l.shared.pending=null;var r=g,I=r.next;r.next=null,o===null?s=I:o.next=I,o=r;var C=i.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==o&&(g===null?C.firstBaseUpdate=I:g.next=I,C.lastBaseUpdate=r))}if(s!==null){var u=l.baseState;o=0,C=I=r=null,g=s;do{var d=g.lane,A=g.eventTime;if((n&d)===d){C!==null&&(C=C.next={eventTime:A,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=i,f=g;switch(d=e,A=t,f.tag){case 1:if(m=f.payload,typeof m=="function"){u=m.call(A,u,d);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=f.payload,d=typeof m=="function"?m.call(A,u,d):m,d==null)break e;u=rn({},u,d);break e;case 2:vo=!0}}g.callback!==null&&g.lane!==0&&(i.flags|=64,d=l.effects,d===null?l.effects=[g]:d.push(g))}else A={eventTime:A,lane:d,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(I=C=A,r=u):C=C.next=A,o|=d;if(g=g.next,g===null){if(g=l.shared.pending,g===null)break;d=g,g=d.next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}while(1);if(C===null&&(r=u),l.baseState=r,l.firstBaseUpdate=I,l.lastBaseUpdate=C,e=l.shared.interleaved,e!==null){l=e;do o|=l.lane,l=l.next;while(l!==e)}else s===null&&(l.shared.lanes=0);jg|=o,i.lanes=o,i.memoizedState=u}}function g9(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],l=n.callback;if(l!==null){if(n.callback=null,n=t,typeof l!="function")throw Error(Ze(191,l));l.call(n)}}}var e8=new jp.Component().refs;function J5(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:rn({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var d2={isMounted:function(i){return(i=i._reactInternals)?or(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=Ci(),l=Mo(i),s=ks(n,l);s.payload=e,t!=null&&(s.callback=t),e=Ho(i,s,l),e!==null&&(Ml(e,i,l,n),A0(e,i,l))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=Ci(),l=Mo(i),s=ks(n,l);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ho(i,s,l),e!==null&&(Ml(e,i,l,n),A0(e,i,l))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=Ci(),n=Mo(i),l=ks(t,n);l.tag=2,e!=null&&(l.callback=e),e=Ho(i,l,n),e!==null&&(Ml(e,i,n,t),A0(e,i,n))}};function r9(i,e,t,n,l,s,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!rI(t,n)||!rI(l,s):!0}function t8(i,e,t){var n=!1,l=ko,s=e.contextType;return typeof s=="object"&&s!==null?s=fl(s):(l=Vi(e)?Qg:ii.current,n=e.contextTypes,s=(n=n!=null)?pa(i,l):ko),e=new e(t,s),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=d2,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=s),e}function a9(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&d2.enqueueReplaceState(e,e.state,null)}function U5(i,e,t,n){var l=i.stateNode;l.props=t,l.state=i.memoizedState,l.refs=e8,qA(i);var s=e.contextType;typeof s=="object"&&s!==null?l.context=fl(s):(s=Vi(e)?Qg:ii.current,l.context=pa(i,s)),l.state=i.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(J5(i,e,s,t),l.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(e=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),e!==l.state&&d2.enqueueReplaceState(l,l.state,null),J0(i,t,l,n),l.state=i.memoizedState),typeof l.componentDidMount=="function"&&(i.flags|=4194308)}function A1(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ze(309));var n=t.stateNode}if(!n)throw Error(Ze(147,i));var l=n,s=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var g=l.refs;g===e8&&(g=l.refs={}),o===null?delete g[s]:g[s]=o},e._stringRef=s,e)}if(typeof i!="string")throw Error(Ze(284));if(!t._owner)throw Error(Ze(290,i))}return i}function cC(i,e){throw i=Object.prototype.toString.call(e),Error(Ze(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function I9(i){var e=i._init;return e(i._payload)}function n8(i){function e(b,B){if(i){var y=b.deletions;y===null?(b.deletions=[B],b.flags|=16):y.push(B)}}function t(b,B){if(!i)return null;for(;B!==null;)e(b,B),B=B.sibling;return null}function n(b,B){for(b=new Map;B!==null;)B.key!==null?b.set(B.key,B):b.set(B.index,B),B=B.sibling;return b}function l(b,B){return b=Fo(b,B),b.index=0,b.sibling=null,b}function s(b,B,y){return b.index=y,i?(y=b.alternate,y!==null?(y=y.index,y<B?(b.flags|=2,B):y):(b.flags|=2,B)):(b.flags|=1048576,B)}function o(b){return i&&b.alternate===null&&(b.flags|=2),b}function g(b,B,y,Z){return B===null||B.tag!==6?(B=md(y,b.mode,Z),B.return=b,B):(B=l(B,y),B.return=b,B)}function r(b,B,y,Z){var q=y.type;return q===Ur?C(b,B,y.props.children,Z,y.key):B!==null&&(B.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Zo&&I9(q)===B.type)?(Z=l(B,y.props),Z.ref=A1(b,B,y),Z.return=b,Z):(Z=G0(y.type,y.key,y.props,null,b.mode,Z),Z.ref=A1(b,B,y),Z.return=b,Z)}function I(b,B,y,Z){return B===null||B.tag!==4||B.stateNode.containerInfo!==y.containerInfo||B.stateNode.implementation!==y.implementation?(B=pd(y,b.mode,Z),B.return=b,B):(B=l(B,y.children||[]),B.return=b,B)}function C(b,B,y,Z,q){return B===null||B.tag!==7?(B=Lg(y,b.mode,Z,q),B.return=b,B):(B=l(B,y),B.return=b,B)}function u(b,B,y){if(typeof B=="string"&&B!==""||typeof B=="number")return B=md(""+B,b.mode,y),B.return=b,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case eC:return y=G0(B.type,B.key,B.props,null,b.mode,y),y.ref=A1(b,null,B),y.return=b,y;case Jr:return B=pd(B,b.mode,y),B.return=b,B;case Zo:var Z=B._init;return u(b,Z(B._payload),y)}if(N1(B)||I1(B))return B=Lg(B,b.mode,y,null),B.return=b,B;cC(b,B)}return null}function d(b,B,y,Z){var q=B!==null?B.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return q!==null?null:g(b,B,""+y,Z);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case eC:return y.key===q?r(b,B,y,Z):null;case Jr:return y.key===q?I(b,B,y,Z):null;case Zo:return q=y._init,d(b,B,q(y._payload),Z)}if(N1(y)||I1(y))return q!==null?null:C(b,B,y,Z,null);cC(b,y)}return null}function A(b,B,y,Z,q){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return b=b.get(y)||null,g(B,b,""+Z,q);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case eC:return b=b.get(Z.key===null?y:Z.key)||null,r(B,b,Z,q);case Jr:return b=b.get(Z.key===null?y:Z.key)||null,I(B,b,Z,q);case Zo:var W=Z._init;return A(b,B,y,W(Z._payload),q)}if(N1(Z)||I1(Z))return b=b.get(y)||null,C(B,b,Z,q,null);cC(B,Z)}return null}function m(b,B,y,Z){for(var q=null,W=null,S=B,x=B=0,V=null;S!==null&&x<y.length;x++){S.index>x?(V=S,S=null):V=S.sibling;var X=d(b,S,y[x],Z);if(X===null){S===null&&(S=V);break}i&&S&&X.alternate===null&&e(b,S),B=s(X,B,x),W===null?q=X:W.sibling=X,W=X,S=V}if(x===y.length)return t(b,S),tn&&yg(b,x),q;if(S===null){for(;x<y.length;x++)S=u(b,y[x],Z),S!==null&&(B=s(S,B,x),W===null?q=S:W.sibling=S,W=S);return tn&&yg(b,x),q}for(S=n(b,S);x<y.length;x++)V=A(S,b,x,y[x],Z),V!==null&&(i&&V.alternate!==null&&S.delete(V.key===null?x:V.key),B=s(V,B,x),W===null?q=V:W.sibling=V,W=V);return i&&S.forEach(function(k){return e(b,k)}),tn&&yg(b,x),q}function f(b,B,y,Z){var q=I1(y);if(typeof q!="function")throw Error(Ze(150));if(y=q.call(y),y==null)throw Error(Ze(151));for(var W=q=null,S=B,x=B=0,V=null,X=y.next();S!==null&&!X.done;x++,X=y.next()){S.index>x?(V=S,S=null):V=S.sibling;var k=d(b,S,X.value,Z);if(k===null){S===null&&(S=V);break}i&&S&&k.alternate===null&&e(b,S),B=s(k,B,x),W===null?q=k:W.sibling=k,W=k,S=V}if(X.done)return t(b,S),tn&&yg(b,x),q;if(S===null){for(;!X.done;x++,X=y.next())X=u(b,X.value,Z),X!==null&&(B=s(X,B,x),W===null?q=X:W.sibling=X,W=X);return tn&&yg(b,x),q}for(S=n(b,S);!X.done;x++,X=y.next())X=A(S,b,x,X.value,Z),X!==null&&(i&&X.alternate!==null&&S.delete(X.key===null?x:X.key),B=s(X,B,x),W===null?q=X:W.sibling=X,W=X);return i&&S.forEach(function($){return e(b,$)}),tn&&yg(b,x),q}function p(b,B,y,Z){if(typeof y=="object"&&y!==null&&y.type===Ur&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case eC:e:{for(var q=y.key,W=B;W!==null;){if(W.key===q){if(q=y.type,q===Ur){if(W.tag===7){t(b,W.sibling),B=l(W,y.props.children),B.return=b,b=B;break e}}else if(W.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Zo&&I9(q)===W.type){t(b,W.sibling),B=l(W,y.props),B.ref=A1(b,W,y),B.return=b,b=B;break e}t(b,W);break}else e(b,W);W=W.sibling}y.type===Ur?(B=Lg(y.props.children,b.mode,Z,y.key),B.return=b,b=B):(Z=G0(y.type,y.key,y.props,null,b.mode,Z),Z.ref=A1(b,B,y),Z.return=b,b=Z)}return o(b);case Jr:e:{for(W=y.key;B!==null;){if(B.key===W)if(B.tag===4&&B.stateNode.containerInfo===y.containerInfo&&B.stateNode.implementation===y.implementation){t(b,B.sibling),B=l(B,y.children||[]),B.return=b,b=B;break e}else{t(b,B);break}else e(b,B);B=B.sibling}B=pd(y,b.mode,Z),B.return=b,b=B}return o(b);case Zo:return W=y._init,p(b,B,W(y._payload),Z)}if(N1(y))return m(b,B,y,Z);if(I1(y))return f(b,B,y,Z);cC(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,B!==null&&B.tag===6?(t(b,B.sibling),B=l(B,y),B.return=b,b=B):(t(b,B),B=md(y,b.mode,Z),B.return=b,b=B),o(b)):t(b,B)}return p}var ba=n8(!0),i8=n8(!1),KI={},us=jo(KI),CI=jo(KI),uI=jo(KI);function Yg(i){if(i===KI)throw Error(Ze(174));return i}function wA(i,e){switch(Jt(uI,e),Jt(CI,i),Jt(us,KI),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v5(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=v5(e,i)}Ot(us),Jt(us,e)}function Ga(){Ot(us),Ot(CI),Ot(uI)}function l8(i){Yg(uI.current);var e=Yg(us.current),t=v5(e,i.type);e!==t&&(Jt(CI,i),Jt(us,t))}function WA(i){CI.current===i&&(Ot(us),Ot(CI))}var sn=jo(0);function U0(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cd=[];function SA(){for(var i=0;i<cd.length;i++)cd[i]._workInProgressVersionPrimary=null;cd.length=0}var h0=Os.ReactCurrentDispatcher,Cd=Os.ReactCurrentBatchConfig,Og=0,gn=null,wn=null,Nn=null,D0=!1,U1=!1,dI=0,BZ=0;function On(){throw Error(Ze(321))}function VA(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!_l(i[t],e[t]))return!1;return!0}function RA(i,e,t,n,l,s){if(Og=s,gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,h0.current=i===null||i.memoizedState===null?qZ:wZ,i=t(n,l),U1){s=0;do{if(U1=!1,dI=0,25<=s)throw Error(Ze(301));s+=1,Nn=wn=null,e.updateQueue=null,h0.current=WZ,i=t(n,l)}while(U1)}if(h0.current=Q0,e=wn!==null&&wn.next!==null,Og=0,Nn=wn=gn=null,D0=!1,e)throw Error(Ze(300));return i}function XA(){var i=dI!==0;return dI=0,i}function gs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?gn.memoizedState=Nn=i:Nn=Nn.next=i,Nn}function bl(){if(wn===null){var i=gn.alternate;i=i!==null?i.memoizedState:null}else i=wn.next;var e=Nn===null?gn.memoizedState:Nn.next;if(e!==null)Nn=e,wn=i;else{if(i===null)throw Error(Ze(310));wn=i,i={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Nn===null?gn.memoizedState=Nn=i:Nn=Nn.next=i}return Nn}function AI(i,e){return typeof e=="function"?e(i):e}function ud(i){var e=bl(),t=e.queue;if(t===null)throw Error(Ze(311));t.lastRenderedReducer=i;var n=wn,l=n.baseQueue,s=t.pending;if(s!==null){if(l!==null){var o=l.next;l.next=s.next,s.next=o}n.baseQueue=l=s,t.pending=null}if(l!==null){s=l.next,n=n.baseState;var g=o=null,r=null,I=s;do{var C=I.lane;if((Og&C)===C)r!==null&&(r=r.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),n=I.hasEagerState?I.eagerState:i(n,I.action);else{var u={lane:C,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};r===null?(g=r=u,o=n):r=r.next=u,gn.lanes|=C,jg|=C}I=I.next}while(I!==null&&I!==s);r===null?o=n:r.next=g,_l(n,e.memoizedState)||(wi=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=r,t.lastRenderedState=n}if(i=t.interleaved,i!==null){l=i;do s=l.lane,gn.lanes|=s,jg|=s,l=l.next;while(l!==i)}else l===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function dd(i){var e=bl(),t=e.queue;if(t===null)throw Error(Ze(311));t.lastRenderedReducer=i;var n=t.dispatch,l=t.pending,s=e.memoizedState;if(l!==null){t.pending=null;var o=l=l.next;do s=i(s,o.action),o=o.next;while(o!==l);_l(s,e.memoizedState)||(wi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function s8(){}function o8(i,e){var t=gn,n=bl(),l=e(),s=!_l(n.memoizedState,l);if(s&&(n.memoizedState=l,wi=!0),n=n.queue,YA(a8.bind(null,t,n,i),[i]),n.getSnapshot!==e||s||Nn!==null&&Nn.memoizedState.tag&1){if(t.flags|=2048,hI(9,r8.bind(null,t,n,l,e),void 0,null),Fn===null)throw Error(Ze(349));(Og&30)!==0||g8(t,e,l)}return l}function g8(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function r8(i,e,t,n){e.value=t,e.getSnapshot=n,I8(e)&&c8(i)}function a8(i,e,t){return t(function(){I8(e)&&c8(i)})}function I8(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!_l(i,t)}catch{return!0}}function c8(i){var e=Us(i,1);e!==null&&Ml(e,i,1,-1)}function c9(i){var e=gs();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:AI,lastRenderedState:i},e.queue=i,i=i.dispatch=xZ.bind(null,gn,i),[e.memoizedState,i]}function hI(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=gn.updateQueue,e===null?(e={lastEffect:null,stores:null},gn.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function C8(){return bl().memoizedState}function m0(i,e,t,n){var l=gs();gn.flags|=i,l.memoizedState=hI(1|e,t,void 0,n===void 0?null:n)}function A2(i,e,t,n){var l=bl();n=n===void 0?null:n;var s=void 0;if(wn!==null){var o=wn.memoizedState;if(s=o.destroy,n!==null&&VA(n,o.deps)){l.memoizedState=hI(e,t,s,n);return}}gn.flags|=i,l.memoizedState=hI(1|e,t,s,n)}function C9(i,e){return m0(8390656,8,i,e)}function YA(i,e){return A2(2048,8,i,e)}function u8(i,e){return A2(4,2,i,e)}function d8(i,e){return A2(4,4,i,e)}function A8(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function h8(i,e,t){return t=t!=null?t.concat([i]):null,A2(4,4,A8.bind(null,e,i),t)}function zA(){}function m8(i,e){var t=bl();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&VA(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function p8(i,e){var t=bl();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&VA(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function f8(i,e,t){return(Og&21)===0?(i.baseState&&(i.baseState=!1,wi=!0),i.memoizedState=t):(_l(t,e)||(t=y6(),gn.lanes|=t,jg|=t,i.baseState=!0),e)}function ZZ(i,e){var t=Mt;Mt=t!==0&&4>t?t:4,i(!0);var n=Cd.transition;Cd.transition={};try{i(!1),e()}finally{Mt=t,Cd.transition=n}}function b8(){return bl().memoizedState}function vZ(i,e,t){var n=Mo(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},G8(i))y8(e,t);else if(t=j6(i,e,t,n),t!==null){var l=Ci();Ml(t,i,n,l),B8(t,e,n)}}function xZ(i,e,t){var n=Mo(i),l={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(G8(i))y8(e,l);else{var s=i.alternate;if(i.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,g=s(o,t);if(l.hasEagerState=!0,l.eagerState=g,_l(g,o)){var r=e.interleaved;r===null?(l.next=l,xA(e)):(l.next=r.next,r.next=l),e.interleaved=l;return}}catch{}finally{}t=j6(i,e,l,n),t!==null&&(l=Ci(),Ml(t,i,n,l),B8(t,e,n))}}function G8(i){var e=i.alternate;return i===gn||e!==null&&e===gn}function y8(i,e){U1=D0=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function B8(i,e,t){if((t&4194240)!==0){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,CA(i,t)}}var Q0={readContext:fl,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},qZ={readContext:fl,useCallback:function(i,e){return gs().memoizedState=[i,e===void 0?null:e],i},useContext:fl,useEffect:C9,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,m0(4194308,4,A8.bind(null,e,i),t)},useLayoutEffect:function(i,e){return m0(4194308,4,i,e)},useInsertionEffect:function(i,e){return m0(4,2,i,e)},useMemo:function(i,e){var t=gs();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=gs();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=vZ.bind(null,gn,i),[n.memoizedState,i]},useRef:function(i){var e=gs();return i={current:i},e.memoizedState=i},useState:c9,useDebugValue:zA,useDeferredValue:function(i){return gs().memoizedState=i},useTransition:function(){var i=c9(!1),e=i[0];return i=ZZ.bind(null,i[1]),gs().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=gn,l=gs();if(tn){if(t===void 0)throw Error(Ze(407));t=t()}else{if(t=e(),Fn===null)throw Error(Ze(349));(Og&30)!==0||g8(n,e,t)}l.memoizedState=t;var s={value:t,getSnapshot:e};return l.queue=s,C9(a8.bind(null,n,s,i),[i]),n.flags|=2048,hI(9,r8.bind(null,n,s,t,e),void 0,null),t},useId:function(){var i=gs(),e=Fn.identifierPrefix;if(tn){var t=Hs,n=Ks;t=(n&~(1<<32-Nl(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=dI++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=BZ++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},wZ={readContext:fl,useCallback:m8,useContext:fl,useEffect:YA,useImperativeHandle:h8,useInsertionEffect:u8,useLayoutEffect:d8,useMemo:p8,useReducer:ud,useRef:C8,useState:function(){return ud(AI)},useDebugValue:zA,useDeferredValue:function(i){var e=bl();return f8(e,wn.memoizedState,i)},useTransition:function(){var i=ud(AI)[0],e=bl().memoizedState;return[i,e]},useMutableSource:s8,useSyncExternalStore:o8,useId:b8,unstable_isNewReconciler:!1},WZ={readContext:fl,useCallback:m8,useContext:fl,useEffect:YA,useImperativeHandle:h8,useInsertionEffect:u8,useLayoutEffect:d8,useMemo:p8,useReducer:dd,useRef:C8,useState:function(){return dd(AI)},useDebugValue:zA,useDeferredValue:function(i){var e=bl();return wn===null?e.memoizedState=i:f8(e,wn.memoizedState,i)},useTransition:function(){var i=dd(AI)[0],e=bl().memoizedState;return[i,e]},useMutableSource:s8,useSyncExternalStore:o8,useId:b8,unstable_isNewReconciler:!1};function ya(i,e){try{var t="",n=e;do t+=iB(n),n=n.return;while(n);var l=t}catch(s){l=`
Error generating stack: `+s.message+`
`+s.stack}return{value:i,source:e,stack:l,digest:null}}function Ad(i,e,t){return{value:i,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function D5(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var SZ=typeof WeakMap=="function"?WeakMap:Map;function Z8(i,e,t){t=ks(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){O0||(O0=!0,l3=n),D5(i,e)},t}function v8(i,e,t){t=ks(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var l=e.value;t.payload=function(){return n(l)},t.callback=function(){D5(i,e)}}var s=i.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){D5(i,e),typeof n!="function"&&(No===null?No=new Set([this]):No.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function u9(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new SZ;var l=new Set;n.set(e,l)}else l=n.get(e),l===void 0&&(l=new Set,n.set(e,l));l.has(t)||(l.add(t),i=TZ.bind(null,i,e,t),e.then(i,i))}function d9(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function A9(i,e,t,n,l){return(i.mode&1)===0?(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ks(-1,1),e.tag=2,Ho(t,e,1))),t.lanes|=1),i):(i.flags|=65536,i.lanes=l,i)}var VZ=Os.ReactCurrentOwner,wi=!1;function ai(i,e,t,n){e.child=i===null?i8(e,null,t,n):ba(e,i.child,t,n)}function h9(i,e,t,n,l){t=t.render;var s=e.ref;return ua(e,l),n=RA(i,e,t,n,s,l),t=XA(),i!==null&&!wi?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~l,Ds(i,e,l)):(tn&&t&&bA(e),e.flags|=1,ai(i,e,n,l),e.child)}function m9(i,e,t,n,l){if(i===null){var s=t.type;return typeof s=="function"&&!kA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,x8(i,e,s,n,l)):(i=G0(t.type,null,n,e,e.mode,l),i.ref=e.ref,i.return=e,e.child=i)}if(s=i.child,(i.lanes&l)===0){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:rI,t(o,n)&&i.ref===e.ref)return Ds(i,e,l)}return e.flags|=1,i=Fo(s,n),i.ref=e.ref,i.return=e,e.child=i}function x8(i,e,t,n,l){if(i!==null){var s=i.memoizedProps;if(rI(s,n)&&i.ref===e.ref)if(wi=!1,e.pendingProps=n=s,(i.lanes&l)!==0)(i.flags&131072)!==0&&(wi=!0);else return e.lanes=i.lanes,Ds(i,e,l)}return Q5(i,e,t,n,l)}function q8(i,e,t){var n=e.pendingProps,l=n.children,s=i!==null?i.memoizedState:null;if(n.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(ia,Mi),Mi|=t;else{if((t&1073741824)===0)return i=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Jt(ia,Mi),Mi|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,Jt(ia,Mi),Mi|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,Jt(ia,Mi),Mi|=n;return ai(i,e,l,t),e.child}function w8(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Q5(i,e,t,n,l){var s=Vi(t)?Qg:ii.current;return s=pa(e,s),ua(e,l),t=RA(i,e,t,n,s,l),n=XA(),i!==null&&!wi?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~l,Ds(i,e,l)):(tn&&n&&bA(e),e.flags|=1,ai(i,e,t,l),e.child)}function p9(i,e,t,n,l){if(Vi(t)){var s=!0;L0(e)}else s=!1;if(ua(e,l),e.stateNode===null)p0(i,e),t8(e,t,n),U5(e,t,n,l),n=!0;else if(i===null){var o=e.stateNode,g=e.memoizedProps;o.props=g;var r=o.context,I=t.contextType;typeof I=="object"&&I!==null?I=fl(I):(I=Vi(t)?Qg:ii.current,I=pa(e,I));var C=t.getDerivedStateFromProps,u=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(g!==n||r!==I)&&a9(e,o,n,I),vo=!1;var d=e.memoizedState;o.state=d,J0(e,n,o,l),r=e.memoizedState,g!==n||d!==r||Si.current||vo?(typeof C=="function"&&(J5(e,t,C,n),r=e.memoizedState),(g=vo||r9(e,t,g,n,d,r,I))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=r),o.props=n,o.state=r,o.context=I,n=g):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,$6(i,e),g=e.memoizedProps,I=e.type===e.elementType?g:Xl(e.type,g),o.props=I,u=e.pendingProps,d=o.context,r=t.contextType,typeof r=="object"&&r!==null?r=fl(r):(r=Vi(t)?Qg:ii.current,r=pa(e,r));var A=t.getDerivedStateFromProps;(C=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(g!==u||d!==r)&&a9(e,o,n,r),vo=!1,d=e.memoizedState,o.state=d,J0(e,n,o,l);var m=e.memoizedState;g!==u||d!==m||Si.current||vo?(typeof A=="function"&&(J5(e,t,A,n),m=e.memoizedState),(I=vo||r9(e,t,I,n,d,m,r)||!1)?(C||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,r),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,r)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||g===i.memoizedProps&&d===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||g===i.memoizedProps&&d===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=r,n=I):(typeof o.componentDidUpdate!="function"||g===i.memoizedProps&&d===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||g===i.memoizedProps&&d===i.memoizedState||(e.flags|=1024),n=!1)}return P5(i,e,t,n,s,l)}function P5(i,e,t,n,l,s){w8(i,e);var o=(e.flags&128)!==0;if(!n&&!o)return l&&i9(e,t,!1),Ds(i,e,s);n=e.stateNode,VZ.current=e;var g=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&o?(e.child=ba(e,i.child,null,s),e.child=ba(e,null,g,s)):ai(i,e,g,s),e.memoizedState=n.state,l&&i9(e,t,!0),e.child}function W8(i){var e=i.stateNode;e.pendingContext?n9(i,e.pendingContext,e.pendingContext!==e.context):e.context&&n9(i,e.context,!1),wA(i,e.containerInfo)}function f9(i,e,t,n,l){return fa(),yA(l),e.flags|=256,ai(i,e,t,n),e.child}var O5={dehydrated:null,treeContext:null,retryLane:0};function j5(i){return{baseLanes:i,cachePool:null,transitions:null}}function S8(i,e,t){var n=e.pendingProps,l=sn.current,s=!1,o=(e.flags&128)!==0,g;if((g=o)||(g=i!==null&&i.memoizedState===null?!1:(l&2)!==0),g?(s=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(l|=1),Jt(sn,l&1),i===null)return T5(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((e.mode&1)===0?e.lanes=1:i.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=n.children,i=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=p2(o,n,0,null),i=Lg(i,n,t,null),s.return=e,i.return=e,s.sibling=i,e.child=s,e.child.memoizedState=j5(t),e.memoizedState=O5,i):KA(e,o));if(l=i.memoizedState,l!==null&&(g=l.dehydrated,g!==null))return RZ(i,e,o,n,g,l,t);if(s){s=n.fallback,o=e.mode,l=i.child,g=l.sibling;var r={mode:"hidden",children:n.children};return(o&1)===0&&e.child!==l?(n=e.child,n.childLanes=0,n.pendingProps=r,e.deletions=null):(n=Fo(l,r),n.subtreeFlags=l.subtreeFlags&14680064),g!==null?s=Fo(g,s):(s=Lg(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=i.child.memoizedState,o=o===null?j5(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=i.childLanes&~t,e.memoizedState=O5,n}return s=i.child,i=s.sibling,n=Fo(s,{mode:"visible",children:n.children}),(e.mode&1)===0&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function KA(i,e){return e=p2({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function CC(i,e,t,n){return n!==null&&yA(n),ba(e,i.child,null,t),i=KA(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function RZ(i,e,t,n,l,s,o){if(t)return e.flags&256?(e.flags&=-257,n=Ad(Error(Ze(422))),CC(i,e,o,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(s=n.fallback,l=e.mode,n=p2({mode:"visible",children:n.children},l,0,null),s=Lg(s,l,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,(e.mode&1)!==0&&ba(e,i.child,null,o),e.child.memoizedState=j5(o),e.memoizedState=O5,s);if((e.mode&1)===0)return CC(i,e,o,null);if(l.data==="$!"){if(n=l.nextSibling&&l.nextSibling.dataset,n)var g=n.dgst;return n=g,s=Error(Ze(419)),n=Ad(s,n,void 0),CC(i,e,o,n)}if(g=(o&i.childLanes)!==0,wi||g){if(n=Fn,n!==null){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(n.suspendedLanes|o))!==0?0:l,l!==0&&l!==s.retryLane&&(s.retryLane=l,Us(i,l),Ml(n,i,l,-1))}return _A(),n=Ad(Error(Ze(421))),CC(i,e,o,n)}return l.data==="$?"?(e.flags|=128,e.child=i.child,e=EZ.bind(null,i),l._reactRetry=e,null):(i=s.treeContext,_i=Ko(l.nextSibling),Ti=e,tn=!0,zl=null,i!==null&&(dl[Al++]=Ks,dl[Al++]=Hs,dl[Al++]=Pg,Ks=i.id,Hs=i.overflow,Pg=e),e=KA(e,n.children),e.flags|=4096,e)}function b9(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),E5(i.return,e,t)}function hd(i,e,t,n,l){var s=i.memoizedState;s===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:l}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=l)}function V8(i,e,t){var n=e.pendingProps,l=n.revealOrder,s=n.tail;if(ai(i,e,n.children,t),n=sn.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&b9(i,t,e);else if(i.tag===19)b9(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Jt(sn,n),(e.mode&1)===0)e.memoizedState=null;else switch(l){case"forwards":for(t=e.child,l=null;t!==null;)i=t.alternate,i!==null&&U0(i)===null&&(l=t),t=t.sibling;t=l,t===null?(l=e.child,e.child=null):(l=t.sibling,t.sibling=null),hd(e,!1,l,t,s);break;case"backwards":for(t=null,l=e.child,e.child=null;l!==null;){if(i=l.alternate,i!==null&&U0(i)===null){e.child=l;break}i=l.sibling,l.sibling=t,t=l,l=i}hd(e,!0,t,null,s);break;case"together":hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function p0(i,e){(e.mode&1)===0&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Ds(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),jg|=e.lanes,(t&e.childLanes)===0)return null;if(i!==null&&e.child!==i.child)throw Error(Ze(153));if(e.child!==null){for(i=e.child,t=Fo(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=Fo(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function XZ(i,e,t){switch(e.tag){case 3:W8(e),fa();break;case 5:l8(e);break;case 1:Vi(e.type)&&L0(e);break;case 4:wA(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,l=e.memoizedProps.value;Jt(T0,n._currentValue),n._currentValue=l;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Jt(sn,sn.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?S8(i,e,t):(Jt(sn,sn.current&1),i=Ds(i,e,t),i!==null?i.sibling:null);Jt(sn,sn.current&1);break;case 19:if(n=(t&e.childLanes)!==0,(i.flags&128)!==0){if(n)return V8(i,e,t);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Jt(sn,sn.current),n)break;return null;case 22:case 23:return e.lanes=0,q8(i,e,t)}return Ds(i,e,t)}var R8,$5,X8,Y8;R8=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};$5=function(){};X8=function(i,e,t,n){var l=i.memoizedProps;if(l!==n){i=e.stateNode,Yg(us.current);var s=null;switch(t){case"input":l=G5(i,l),n=G5(i,n),s=[];break;case"select":l=rn({},l,{value:void 0}),n=rn({},n,{value:void 0}),s=[];break;case"textarea":l=Z5(i,l),n=Z5(i,n),s=[];break;default:typeof l.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=M0)}x5(t,n);var o;t=null;for(I in l)if(!n.hasOwnProperty(I)&&l.hasOwnProperty(I)&&l[I]!=null)if(I==="style"){var g=l[I];for(o in g)g.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(tI.hasOwnProperty(I)?s||(s=[]):(s=s||[]).push(I,null));for(I in n){var r=n[I];if(g=l!=null?l[I]:void 0,n.hasOwnProperty(I)&&r!==g&&(r!=null||g!=null))if(I==="style")if(g){for(o in g)!g.hasOwnProperty(o)||r&&r.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in r)r.hasOwnProperty(o)&&g[o]!==r[o]&&(t||(t={}),t[o]=r[o])}else t||(s||(s=[]),s.push(I,t)),t=r;else I==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,g=g?g.__html:void 0,r!=null&&g!==r&&(s=s||[]).push(I,r)):I==="children"?typeof r!="string"&&typeof r!="number"||(s=s||[]).push(I,""+r):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(tI.hasOwnProperty(I)?(r!=null&&I==="onScroll"&&Dt("scroll",i),s||g===r||(s=[])):(s=s||[]).push(I,r))}t&&(s=s||[]).push("style",t);var I=s;(e.updateQueue=I)&&(e.flags|=4)}};Y8=function(i,e,t,n){t!==n&&(e.flags|=4)};function h1(i,e){if(!tn)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function jn(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var l=i.child;l!==null;)t|=l.lanes|l.childLanes,n|=l.subtreeFlags&14680064,n|=l.flags&14680064,l.return=i,l=l.sibling;else for(l=i.child;l!==null;)t|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=i,l=l.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function YZ(i,e,t){var n=e.pendingProps;switch(GA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(e),null;case 1:return Vi(e.type)&&F0(),jn(e),null;case 3:return n=e.stateNode,Ga(),Ot(Si),Ot(ii),SA(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(IC(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,zl!==null&&(g3(zl),zl=null))),$5(i,e),jn(e),null;case 5:WA(e);var l=Yg(uI.current);if(t=e.type,i!==null&&e.stateNode!=null)X8(i,e,t,n,l),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ze(166));return jn(e),null}if(i=Yg(us.current),IC(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[as]=e,n[cI]=s,i=(e.mode&1)!==0,t){case"dialog":Dt("cancel",n),Dt("close",n);break;case"iframe":case"object":case"embed":Dt("load",n);break;case"video":case"audio":for(l=0;l<F1.length;l++)Dt(F1[l],n);break;case"source":Dt("error",n);break;case"img":case"image":case"link":Dt("error",n),Dt("load",n);break;case"details":Dt("toggle",n);break;case"input":W4(n,s),Dt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Dt("invalid",n);break;case"textarea":V4(n,s),Dt("invalid",n)}x5(t,s),l=null;for(var o in s)if(s.hasOwnProperty(o)){var g=s[o];o==="children"?typeof g=="string"?n.textContent!==g&&(s.suppressHydrationWarning!==!0&&aC(n.textContent,g,i),l=["children",g]):typeof g=="number"&&n.textContent!==""+g&&(s.suppressHydrationWarning!==!0&&aC(n.textContent,g,i),l=["children",""+g]):tI.hasOwnProperty(o)&&g!=null&&o==="onScroll"&&Dt("scroll",n)}switch(t){case"input":tC(n),S4(n,s,!0);break;case"textarea":tC(n),R4(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=M0)}n=l,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=l.nodeType===9?l:l.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=g6(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(t,{is:n.is}):(i=o.createElement(t),t==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,t),i[as]=e,i[cI]=n,R8(i,e,!1,!1),e.stateNode=i;e:{switch(o=q5(t,n),t){case"dialog":Dt("cancel",i),Dt("close",i),l=n;break;case"iframe":case"object":case"embed":Dt("load",i),l=n;break;case"video":case"audio":for(l=0;l<F1.length;l++)Dt(F1[l],i);l=n;break;case"source":Dt("error",i),l=n;break;case"img":case"image":case"link":Dt("error",i),Dt("load",i),l=n;break;case"details":Dt("toggle",i),l=n;break;case"input":W4(i,n),l=G5(i,n),Dt("invalid",i);break;case"option":l=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},l=rn({},n,{value:void 0}),Dt("invalid",i);break;case"textarea":V4(i,n),l=Z5(i,n),Dt("invalid",i);break;default:l=n}x5(t,l),g=l;for(s in g)if(g.hasOwnProperty(s)){var r=g[s];s==="style"?I6(i,r):s==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,r!=null&&r6(i,r)):s==="children"?typeof r=="string"?(t!=="textarea"||r!=="")&&nI(i,r):typeof r=="number"&&nI(i,""+r):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tI.hasOwnProperty(s)?r!=null&&s==="onScroll"&&Dt("scroll",i):r!=null&&oA(i,s,r,o))}switch(t){case"input":tC(i),S4(i,n,!1);break;case"textarea":tC(i),R4(i);break;case"option":n.value!=null&&i.setAttribute("value",""+_o(n.value));break;case"select":i.multiple=!!n.multiple,s=n.value,s!=null?aa(i,!!n.multiple,s,!1):n.defaultValue!=null&&aa(i,!!n.multiple,n.defaultValue,!0);break;default:typeof l.onClick=="function"&&(i.onclick=M0)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jn(e),null;case 6:if(i&&e.stateNode!=null)Y8(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ze(166));if(t=Yg(uI.current),Yg(us.current),IC(e)){if(n=e.stateNode,t=e.memoizedProps,n[as]=e,(s=n.nodeValue!==t)&&(i=Ti,i!==null))switch(i.tag){case 3:aC(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&aC(n.nodeValue,t,(i.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[as]=e,e.stateNode=n}return jn(e),null;case 13:if(Ot(sn),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(tn&&_i!==null&&(e.mode&1)!==0&&(e.flags&128)===0)O6(),fa(),e.flags|=98560,s=!1;else if(s=IC(e),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(Ze(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ze(317));s[as]=e}else fa(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;jn(e),s=!1}else zl!==null&&(g3(zl),zl=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(i===null||(sn.current&1)!==0?Wn===0&&(Wn=3):_A())),e.updateQueue!==null&&(e.flags|=4),jn(e),null);case 4:return Ga(),$5(i,e),i===null&&aI(e.stateNode.containerInfo),jn(e),null;case 10:return vA(e.type._context),jn(e),null;case 17:return Vi(e.type)&&F0(),jn(e),null;case 19:if(Ot(sn),s=e.memoizedState,s===null)return jn(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)h1(s,!1);else{if(Wn!==0||i!==null&&(i.flags&128)!==0)for(i=e.child;i!==null;){if(o=U0(i),o!==null){for(e.flags|=128,h1(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,i=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Jt(sn,sn.current&1|2),e.child}i=i.sibling}s.tail!==null&&mn()>Ba&&(e.flags|=128,n=!0,h1(s,!1),e.lanes=4194304)}else{if(!n)if(i=U0(o),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),h1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!tn)return jn(e),null}else 2*mn()-s.renderingStartTime>Ba&&t!==1073741824&&(e.flags|=128,n=!0,h1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mn(),e.sibling=null,t=sn.current,Jt(sn,n?t&1|2:t&1),e):(jn(e),null);case 22:case 23:return LA(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(Mi&1073741824)!==0&&(jn(e),e.subtreeFlags&6&&(e.flags|=8192)):jn(e),null;case 24:return null;case 25:return null}throw Error(Ze(156,e.tag))}function zZ(i,e){switch(GA(e),e.tag){case 1:return Vi(e.type)&&F0(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Ga(),Ot(Si),Ot(ii),SA(),i=e.flags,(i&65536)!==0&&(i&128)===0?(e.flags=i&-65537|128,e):null;case 5:return WA(e),null;case 13:if(Ot(sn),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Ze(340));fa()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return Ot(sn),null;case 4:return Ga(),null;case 10:return vA(e.type._context),null;case 22:case 23:return LA(),null;case 24:return null;default:return null}}var uC=!1,ni=!1,KZ=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function na(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){cn(i,e,n)}else t.current=null}function e3(i,e,t){try{t()}catch(n){cn(i,e,n)}}var G9=!1;function HZ(i,e){if(H5=K0,i=N6(),fA(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var l=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,g=-1,r=-1,I=0,C=0,u=i,d=null;t:for(;;){for(var A;u!==t||l!==0&&u.nodeType!==3||(g=o+l),u!==s||n!==0&&u.nodeType!==3||(r=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(A=u.firstChild)!==null;)d=u,u=A;for(;;){if(u===i)break t;if(d===t&&++I===l&&(g=o),d===s&&++C===n&&(r=o),(A=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=A}t=g===-1||r===-1?null:{start:g,end:r}}else t=null}t=t||{start:0,end:0}}else t=null;for(N5={focusedElem:i,selectionRange:t},K0=!1,Fe=e;Fe!==null;)if(e=Fe,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,Fe=i;else for(;Fe!==null;){e=Fe;try{var m=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var f=m.memoizedProps,p=m.memoizedState,b=e.stateNode,B=b.getSnapshotBeforeUpdate(e.elementType===e.type?f:Xl(e.type,f),p);b.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ze(163))}}catch(Z){cn(e,e.return,Z)}if(i=e.sibling,i!==null){i.return=e.return,Fe=i;break}Fe=e.return}return m=G9,G9=!1,m}function D1(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&i)===i){var s=l.destroy;l.destroy=void 0,s!==void 0&&e3(e,t,s)}l=l.next}while(l!==n)}}function h2(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function t3(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function z8(i){var e=i.alternate;e!==null&&(i.alternate=null,z8(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[as],delete e[cI],delete e[L5],delete e[fZ],delete e[bZ])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function K8(i){return i.tag===5||i.tag===3||i.tag===4}function y9(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||K8(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function n3(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=M0));else if(n!==4&&(i=i.child,i!==null))for(n3(i,e,t),i=i.sibling;i!==null;)n3(i,e,t),i=i.sibling}function i3(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(i3(i,e,t),i=i.sibling;i!==null;)i3(i,e,t),i=i.sibling}var kn=null,Yl=!1;function uo(i,e,t){for(t=t.child;t!==null;)H8(i,e,t),t=t.sibling}function H8(i,e,t){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(r2,t)}catch{}switch(t.tag){case 5:ni||na(t,e);case 6:var n=kn,l=Yl;kn=null,uo(i,e,t),kn=n,Yl=l,kn!==null&&(Yl?(i=kn,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):kn.removeChild(t.stateNode));break;case 18:kn!==null&&(Yl?(i=kn,t=t.stateNode,i.nodeType===8?ad(i.parentNode,t):i.nodeType===1&&ad(i,t),oI(i)):ad(kn,t.stateNode));break;case 4:n=kn,l=Yl,kn=t.stateNode.containerInfo,Yl=!0,uo(i,e,t),kn=n,Yl=l;break;case 0:case 11:case 14:case 15:if(!ni&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){l=n=n.next;do{var s=l,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&e3(t,e,o),l=l.next}while(l!==n)}uo(i,e,t);break;case 1:if(!ni&&(na(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(g){cn(t,e,g)}uo(i,e,t);break;case 21:uo(i,e,t);break;case 22:t.mode&1?(ni=(n=ni)||t.memoizedState!==null,uo(i,e,t),ni=n):uo(i,e,t);break;default:uo(i,e,t)}}function B9(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new KZ),e.forEach(function(n){var l=JZ.bind(null,i,n);t.has(n)||(t.add(n),n.then(l,l))})}}function ql(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];try{var s=i,o=e,g=o;e:for(;g!==null;){switch(g.tag){case 5:kn=g.stateNode,Yl=!1;break e;case 3:kn=g.stateNode.containerInfo,Yl=!0;break e;case 4:kn=g.stateNode.containerInfo,Yl=!0;break e}g=g.return}if(kn===null)throw Error(Ze(160));H8(s,o,l),kn=null,Yl=!1;var r=l.alternate;r!==null&&(r.return=null),l.return=null}catch(I){cn(l,e,I)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)N8(e,i),e=e.sibling}function N8(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ql(e,i),ns(i),n&4){try{D1(3,i,i.return),h2(3,i)}catch(f){cn(i,i.return,f)}try{D1(5,i,i.return)}catch(f){cn(i,i.return,f)}}break;case 1:ql(e,i),ns(i),n&512&&t!==null&&na(t,t.return);break;case 5:if(ql(e,i),ns(i),n&512&&t!==null&&na(t,t.return),i.flags&32){var l=i.stateNode;try{nI(l,"")}catch(f){cn(i,i.return,f)}}if(n&4&&(l=i.stateNode,l!=null)){var s=i.memoizedProps,o=t!==null?t.memoizedProps:s,g=i.type,r=i.updateQueue;if(i.updateQueue=null,r!==null)try{g==="input"&&s.type==="radio"&&s.name!=null&&s6(l,s),q5(g,o);var I=q5(g,s);for(o=0;o<r.length;o+=2){var C=r[o],u=r[o+1];C==="style"?I6(l,u):C==="dangerouslySetInnerHTML"?r6(l,u):C==="children"?nI(l,u):oA(l,C,u,I)}switch(g){case"input":y5(l,s);break;case"textarea":o6(l,s);break;case"select":var d=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?aa(l,!!s.multiple,A,!1):d!==!!s.multiple&&(s.defaultValue!=null?aa(l,!!s.multiple,s.defaultValue,!0):aa(l,!!s.multiple,s.multiple?[]:"",!1))}l[cI]=s}catch(f){cn(i,i.return,f)}}break;case 6:if(ql(e,i),ns(i),n&4){if(i.stateNode===null)throw Error(Ze(162));l=i.stateNode,s=i.memoizedProps;try{l.nodeValue=s}catch(f){cn(i,i.return,f)}}break;case 3:if(ql(e,i),ns(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{oI(e.containerInfo)}catch(f){cn(i,i.return,f)}break;case 4:ql(e,i),ns(i);break;case 13:ql(e,i),ns(i),l=i.child,l.flags&8192&&(s=l.memoizedState!==null,l.stateNode.isHidden=s,!s||l.alternate!==null&&l.alternate.memoizedState!==null||(MA=mn())),n&4&&B9(i);break;case 22:if(C=t!==null&&t.memoizedState!==null,i.mode&1?(ni=(I=ni)||C,ql(e,i),ni=I):ql(e,i),ns(i),n&8192){if(I=i.memoizedState!==null,(i.stateNode.isHidden=I)&&!C&&(i.mode&1)!==0)for(Fe=i,C=i.child;C!==null;){for(u=Fe=C;Fe!==null;){switch(d=Fe,A=d.child,d.tag){case 0:case 11:case 14:case 15:D1(4,d,d.return);break;case 1:na(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(f){cn(n,t,f)}}break;case 5:na(d,d.return);break;case 22:if(d.memoizedState!==null){v9(u);continue}}A!==null?(A.return=d,Fe=A):v9(u)}C=C.sibling}e:for(C=null,u=i;;){if(u.tag===5){if(C===null){C=u;try{l=u.stateNode,I?(s=l.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(g=u.stateNode,r=u.memoizedProps.style,o=r!=null&&r.hasOwnProperty("display")?r.display:null,g.style.display=a6("display",o))}catch(f){cn(i,i.return,f)}}}else if(u.tag===6){if(C===null)try{u.stateNode.nodeValue=I?"":u.memoizedProps}catch(f){cn(i,i.return,f)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===i)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break e;for(;u.sibling===null;){if(u.return===null||u.return===i)break e;C===u&&(C=null),u=u.return}C===u&&(C=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ql(e,i),ns(i),n&4&&B9(i);break;case 21:break;default:ql(e,i),ns(i)}}function ns(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(K8(t)){var n=t;break e}t=t.return}throw Error(Ze(160))}switch(n.tag){case 5:var l=n.stateNode;n.flags&32&&(nI(l,""),n.flags&=-33);var s=y9(i);i3(i,s,l);break;case 3:case 4:var o=n.stateNode.containerInfo,g=y9(i);n3(i,g,o);break;default:throw Error(Ze(161))}}catch(r){cn(i,i.return,r)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function NZ(i,e,t){Fe=i,M8(i)}function M8(i,e,t){for(var n=(i.mode&1)!==0;Fe!==null;){var l=Fe,s=l.child;if(l.tag===22&&n){var o=l.memoizedState!==null||uC;if(!o){var g=l.alternate,r=g!==null&&g.memoizedState!==null||ni;g=uC;var I=ni;if(uC=o,(ni=r)&&!I)for(Fe=l;Fe!==null;)o=Fe,r=o.child,o.tag===22&&o.memoizedState!==null?x9(l):r!==null?(r.return=o,Fe=r):x9(l);for(;s!==null;)Fe=s,M8(s),s=s.sibling;Fe=l,uC=g,ni=I}Z9(i)}else(l.subtreeFlags&8772)!==0&&s!==null?(s.return=l,Fe=s):Z9(i)}}function Z9(i){for(;Fe!==null;){var e=Fe;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:ni||h2(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ni)if(t===null)n.componentDidMount();else{var l=e.elementType===e.type?t.memoizedProps:Xl(e.type,t.memoizedProps);n.componentDidUpdate(l,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&g9(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}g9(e,o,t)}break;case 5:var g=e.stateNode;if(t===null&&e.flags&4){t=g;var r=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":r.autoFocus&&t.focus();break;case"img":r.src&&(t.src=r.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var I=e.alternate;if(I!==null){var C=I.memoizedState;if(C!==null){var u=C.dehydrated;u!==null&&oI(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ze(163))}ni||e.flags&512&&t3(e)}catch(d){cn(e,e.return,d)}}if(e===i){Fe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}}function v9(i){for(;Fe!==null;){var e=Fe;if(e===i){Fe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Fe=t;break}Fe=e.return}}function x9(i){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{h2(4,e)}catch(r){cn(e,t,r)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var l=e.return;try{n.componentDidMount()}catch(r){cn(e,l,r)}}var s=e.return;try{t3(e)}catch(r){cn(e,s,r)}break;case 5:var o=e.return;try{t3(e)}catch(r){cn(e,o,r)}}}catch(r){cn(e,e.return,r)}if(e===i){Fe=null;break}var g=e.sibling;if(g!==null){g.return=e.return,Fe=g;break}Fe=e.return}}var MZ=Math.ceil,P0=Os.ReactCurrentDispatcher,HA=Os.ReactCurrentOwner,pl=Os.ReactCurrentBatchConfig,St=0,Fn=null,Zn=null,En=0,Mi=0,ia=jo(0),Wn=0,mI=null,jg=0,m2=0,NA=0,Q1=null,qi=null,MA=0,Ba=1/0,Rs=null,O0=!1,l3=null,No=null,dC=!1,So=null,j0=0,P1=0,s3=null,f0=-1,b0=0;function Ci(){return(St&6)!==0?mn():f0!==-1?f0:f0=mn()}function Mo(i){return(i.mode&1)===0?1:(St&2)!==0&&En!==0?En&-En:yZ.transition!==null?(b0===0&&(b0=y6()),b0):(i=Mt,i!==0||(i=window.event,i=i===void 0?16:W6(i.type)),i)}function Ml(i,e,t,n){if(50<P1)throw P1=0,s3=null,Error(Ze(185));XI(i,t,n),((St&2)===0||i!==Fn)&&(i===Fn&&((St&2)===0&&(m2|=t),Wn===4&&wo(i,En)),Ri(i,n),t===1&&St===0&&(e.mode&1)===0&&(Ba=mn()+500,u2&&$o()))}function Ri(i,e){var t=i.callbackNode;yB(i,e);var n=z0(i,i===Fn?En:0);if(n===0)t!==null&&z4(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&z4(t),e===1)i.tag===0?GZ(q9.bind(null,i)):D6(q9.bind(null,i)),mZ(function(){(St&6)===0&&$o()}),t=null;else{switch(B6(n)){case 1:t=cA;break;case 4:t=b6;break;case 16:t=Y0;break;case 536870912:t=G6;break;default:t=Y0}t=U8(t,F8.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function F8(i,e){if(f0=-1,b0=0,(St&6)!==0)throw Error(Ze(327));var t=i.callbackNode;if(da()&&i.callbackNode!==t)return null;var n=z0(i,i===Fn?En:0);if(n===0)return null;if((n&30)!==0||(n&i.expiredLanes)!==0||e)e=$0(i,n);else{e=n;var l=St;St|=2;var s=_8();(Fn!==i||En!==e)&&(Rs=null,Ba=mn()+500,Fg(i,e));do try{_Z();break}catch(g){L8(i,g)}while(1);ZA(),P0.current=s,St=l,Zn!==null?e=0:(Fn=null,En=0,e=Wn)}if(e!==0){if(e===2&&(l=R5(i),l!==0&&(n=l,e=o3(i,l))),e===1)throw t=mI,Fg(i,0),wo(i,n),Ri(i,mn()),t;if(e===6)wo(i,n);else{if(l=i.current.alternate,(n&30)===0&&!FZ(l)&&(e=$0(i,n),e===2&&(s=R5(i),s!==0&&(n=s,e=o3(i,s))),e===1))throw t=mI,Fg(i,0),wo(i,n),Ri(i,mn()),t;switch(i.finishedWork=l,i.finishedLanes=n,e){case 0:case 1:throw Error(Ze(345));case 2:Bg(i,qi,Rs);break;case 3:if(wo(i,n),(n&130023424)===n&&(e=MA+500-mn(),10<e)){if(z0(i,0)!==0)break;if(l=i.suspendedLanes,(l&n)!==n){Ci(),i.pingedLanes|=i.suspendedLanes&l;break}i.timeoutHandle=F5(Bg.bind(null,i,qi,Rs),e);break}Bg(i,qi,Rs);break;case 4:if(wo(i,n),(n&4194240)===n)break;for(e=i.eventTimes,l=-1;0<n;){var o=31-Nl(n);s=1<<o,o=e[o],o>l&&(l=o),n&=~s}if(n=l,n=mn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*MZ(n/1960))-n,10<n){i.timeoutHandle=F5(Bg.bind(null,i,qi,Rs),n);break}Bg(i,qi,Rs);break;case 5:Bg(i,qi,Rs);break;default:throw Error(Ze(329))}}}return Ri(i,mn()),i.callbackNode===t?F8.bind(null,i):null}function o3(i,e){var t=Q1;return i.current.memoizedState.isDehydrated&&(Fg(i,e).flags|=256),i=$0(i,e),i!==2&&(e=qi,qi=t,e!==null&&g3(e)),i}function g3(i){qi===null?qi=i:qi.push.apply(qi,i)}function FZ(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var l=t[n],s=l.getSnapshot;l=l.value;try{if(!_l(s(),l))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wo(i,e){for(e&=~NA,e&=~m2,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-Nl(e),n=1<<t;i[t]=-1,e&=~n}}function q9(i){if((St&6)!==0)throw Error(Ze(327));da();var e=z0(i,0);if((e&1)===0)return Ri(i,mn()),null;var t=$0(i,e);if(i.tag!==0&&t===2){var n=R5(i);n!==0&&(e=n,t=o3(i,n))}if(t===1)throw t=mI,Fg(i,0),wo(i,e),Ri(i,mn()),t;if(t===6)throw Error(Ze(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Bg(i,qi,Rs),Ri(i,mn()),null}function FA(i,e){var t=St;St|=1;try{return i(e)}finally{St=t,St===0&&(Ba=mn()+500,u2&&$o())}}function $g(i){So!==null&&So.tag===0&&(St&6)===0&&da();var e=St;St|=1;var t=pl.transition,n=Mt;try{if(pl.transition=null,Mt=1,i)return i()}finally{Mt=n,pl.transition=t,St=e,(St&6)===0&&$o()}}function LA(){Mi=ia.current,Ot(ia)}function Fg(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,hZ(t)),Zn!==null)for(t=Zn.return;t!==null;){var n=t;switch(GA(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&F0();break;case 3:Ga(),Ot(Si),Ot(ii),SA();break;case 5:WA(n);break;case 4:Ga();break;case 13:Ot(sn);break;case 19:Ot(sn);break;case 10:vA(n.type._context);break;case 22:case 23:LA()}t=t.return}if(Fn=i,Zn=i=Fo(i.current,null),En=Mi=e,Wn=0,mI=null,NA=m2=jg=0,qi=Q1=null,Xg!==null){for(e=0;e<Xg.length;e++)if(t=Xg[e],n=t.interleaved,n!==null){t.interleaved=null;var l=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=l,n.next=o}t.pending=n}Xg=null}return i}function L8(i,e){do{var t=Zn;try{if(ZA(),h0.current=Q0,D0){for(var n=gn.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}D0=!1}if(Og=0,Nn=wn=gn=null,U1=!1,dI=0,HA.current=null,t===null||t.return===null){Wn=1,mI=e,Zn=null;break}e:{var s=i,o=t.return,g=t,r=e;if(e=En,g.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){var I=r,C=g,u=C.tag;if((C.mode&1)===0&&(u===0||u===11||u===15)){var d=C.alternate;d?(C.updateQueue=d.updateQueue,C.memoizedState=d.memoizedState,C.lanes=d.lanes):(C.updateQueue=null,C.memoizedState=null)}var A=d9(o);if(A!==null){A.flags&=-257,A9(A,o,g,s,e),A.mode&1&&u9(s,I,e),e=A,r=I;var m=e.updateQueue;if(m===null){var f=new Set;f.add(r),e.updateQueue=f}else m.add(r);break e}else{if((e&1)===0){u9(s,I,e),_A();break e}r=Error(Ze(426))}}else if(tn&&g.mode&1){var p=d9(o);if(p!==null){(p.flags&65536)===0&&(p.flags|=256),A9(p,o,g,s,e),yA(ya(r,g));break e}}s=r=ya(r,g),Wn!==4&&(Wn=2),Q1===null?Q1=[s]:Q1.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=Z8(s,r,e);o9(s,b);break e;case 1:g=r;var B=s.type,y=s.stateNode;if((s.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(No===null||!No.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var Z=v8(s,g,e);o9(s,Z);break e}}s=s.return}while(s!==null)}T8(t)}catch(q){e=q,Zn===t&&t!==null&&(Zn=t=t.return);continue}break}while(1)}function _8(){var i=P0.current;return P0.current=Q0,i===null?Q0:i}function _A(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),Fn===null||(jg&268435455)===0&&(m2&268435455)===0||wo(Fn,En)}function $0(i,e){var t=St;St|=2;var n=_8();(Fn!==i||En!==e)&&(Rs=null,Fg(i,e));do try{LZ();break}catch(l){L8(i,l)}while(1);if(ZA(),St=t,P0.current=n,Zn!==null)throw Error(Ze(261));return Fn=null,En=0,Wn}function LZ(){for(;Zn!==null;)k8(Zn)}function _Z(){for(;Zn!==null&&!uB();)k8(Zn)}function k8(i){var e=J8(i.alternate,i,Mi);i.memoizedProps=i.pendingProps,e===null?T8(i):Zn=e,HA.current=null}function T8(i){var e=i;do{var t=e.alternate;if(i=e.return,(e.flags&32768)===0){if(t=YZ(t,e,Mi),t!==null){Zn=t;return}}else{if(t=zZ(t,e),t!==null){t.flags&=32767,Zn=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Wn=6,Zn=null;return}}if(e=e.sibling,e!==null){Zn=e;return}Zn=e=i}while(e!==null);Wn===0&&(Wn=5)}function Bg(i,e,t){var n=Mt,l=pl.transition;try{pl.transition=null,Mt=1,kZ(i,e,t,n)}finally{pl.transition=l,Mt=n}return null}function kZ(i,e,t,n){do da();while(So!==null);if((St&6)!==0)throw Error(Ze(327));t=i.finishedWork;var l=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Ze(177));i.callbackNode=null,i.callbackPriority=0;var s=t.lanes|t.childLanes;if(BB(i,s),i===Fn&&(Zn=Fn=null,En=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||dC||(dC=!0,U8(Y0,function(){return da(),null})),s=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||s){s=pl.transition,pl.transition=null;var o=Mt;Mt=1;var g=St;St|=4,HA.current=null,HZ(i,t),N8(t,i),aZ(N5),K0=!!H5,N5=H5=null,i.current=t,NZ(t),dB(),St=g,Mt=o,pl.transition=s}else i.current=t;if(dC&&(dC=!1,So=i,j0=l),s=i.pendingLanes,s===0&&(No=null),mB(t.stateNode),Ri(i,mn()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)l=e[t],n(l.value,{componentStack:l.stack,digest:l.digest});if(O0)throw O0=!1,i=l3,l3=null,i;return(j0&1)!==0&&i.tag!==0&&da(),s=i.pendingLanes,(s&1)!==0?i===s3?P1++:(P1=0,s3=i):P1=0,$o(),null}function da(){if(So!==null){var i=B6(j0),e=pl.transition,t=Mt;try{if(pl.transition=null,Mt=16>i?16:i,So===null)var n=!1;else{if(i=So,So=null,j0=0,(St&6)!==0)throw Error(Ze(331));var l=St;for(St|=4,Fe=i.current;Fe!==null;){var s=Fe,o=s.child;if((Fe.flags&16)!==0){var g=s.deletions;if(g!==null){for(var r=0;r<g.length;r++){var I=g[r];for(Fe=I;Fe!==null;){var C=Fe;switch(C.tag){case 0:case 11:case 15:D1(8,C,s)}var u=C.child;if(u!==null)u.return=C,Fe=u;else for(;Fe!==null;){C=Fe;var d=C.sibling,A=C.return;if(z8(C),C===I){Fe=null;break}if(d!==null){d.return=A,Fe=d;break}Fe=A}}}var m=s.alternate;if(m!==null){var f=m.child;if(f!==null){m.child=null;do{var p=f.sibling;f.sibling=null,f=p}while(f!==null)}}Fe=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,Fe=o;else e:for(;Fe!==null;){if(s=Fe,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:D1(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Fe=b;break e}Fe=s.return}}var B=i.current;for(Fe=B;Fe!==null;){o=Fe;var y=o.child;if((o.subtreeFlags&2064)!==0&&y!==null)y.return=o,Fe=y;else e:for(o=B;Fe!==null;){if(g=Fe,(g.flags&2048)!==0)try{switch(g.tag){case 0:case 11:case 15:h2(9,g)}}catch(q){cn(g,g.return,q)}if(g===o){Fe=null;break e}var Z=g.sibling;if(Z!==null){Z.return=g.return,Fe=Z;break e}Fe=g.return}}if(St=l,$o(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(r2,i)}catch{}n=!0}return n}finally{Mt=t,pl.transition=e}}return!1}function w9(i,e,t){e=ya(t,e),e=Z8(i,e,1),i=Ho(i,e,1),e=Ci(),i!==null&&(XI(i,1,e),Ri(i,e))}function cn(i,e,t){if(i.tag===3)w9(i,i,t);else for(;e!==null;){if(e.tag===3){w9(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(No===null||!No.has(n))){i=ya(t,i),i=v8(e,i,1),e=Ho(e,i,1),i=Ci(),e!==null&&(XI(e,1,i),Ri(e,i));break}}e=e.return}}function TZ(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=Ci(),i.pingedLanes|=i.suspendedLanes&t,Fn===i&&(En&t)===t&&(Wn===4||Wn===3&&(En&130023424)===En&&500>mn()-MA?Fg(i,0):NA|=t),Ri(i,e)}function E8(i,e){e===0&&((i.mode&1)===0?e=1:(e=lC,lC<<=1,(lC&130023424)===0&&(lC=4194304)));var t=Ci();i=Us(i,e),i!==null&&(XI(i,e,t),Ri(i,t))}function EZ(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),E8(i,t)}function JZ(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,l=i.memoizedState;l!==null&&(t=l.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(Ze(314))}n!==null&&n.delete(e),E8(i,t)}var J8;J8=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Si.current)wi=!0;else{if((i.lanes&t)===0&&(e.flags&128)===0)return wi=!1,XZ(i,e,t);wi=(i.flags&131072)!==0}else wi=!1,tn&&(e.flags&1048576)!==0&&Q6(e,k0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;p0(i,e),i=e.pendingProps;var l=pa(e,ii.current);ua(e,t),l=RA(null,e,n,i,l,t);var s=XA();return e.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vi(n)?(s=!0,L0(e)):s=!1,e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,qA(e),l.updater=d2,e.stateNode=l,l._reactInternals=e,U5(e,n,i,t),e=P5(null,e,n,!0,s,t)):(e.tag=0,tn&&s&&bA(e),ai(null,e,l,t),e=e.child),e;case 16:n=e.elementType;e:{switch(p0(i,e),i=e.pendingProps,l=n._init,n=l(n._payload),e.type=n,l=e.tag=DZ(n),i=Xl(n,i),l){case 0:e=Q5(null,e,n,i,t);break e;case 1:e=p9(null,e,n,i,t);break e;case 11:e=h9(null,e,n,i,t);break e;case 14:e=m9(null,e,n,Xl(n.type,i),t);break e}throw Error(Ze(306,n,""))}return e;case 0:return n=e.type,l=e.pendingProps,l=e.elementType===n?l:Xl(n,l),Q5(i,e,n,l,t);case 1:return n=e.type,l=e.pendingProps,l=e.elementType===n?l:Xl(n,l),p9(i,e,n,l,t);case 3:e:{if(W8(e),i===null)throw Error(Ze(387));n=e.pendingProps,s=e.memoizedState,l=s.element,$6(i,e),J0(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){l=ya(Error(Ze(423)),e),e=f9(i,e,n,t,l);break e}else if(n!==l){l=ya(Error(Ze(424)),e),e=f9(i,e,n,t,l);break e}else for(_i=Ko(e.stateNode.containerInfo.firstChild),Ti=e,tn=!0,zl=null,t=i8(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(fa(),n===l){e=Ds(i,e,t);break e}ai(i,e,n,t)}e=e.child}return e;case 5:return l8(e),i===null&&T5(e),n=e.type,l=e.pendingProps,s=i!==null?i.memoizedProps:null,o=l.children,M5(n,l)?o=null:s!==null&&M5(n,s)&&(e.flags|=32),w8(i,e),ai(i,e,o,t),e.child;case 6:return i===null&&T5(e),null;case 13:return S8(i,e,t);case 4:return wA(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=ba(e,null,n,t):ai(i,e,n,t),e.child;case 11:return n=e.type,l=e.pendingProps,l=e.elementType===n?l:Xl(n,l),h9(i,e,n,l,t);case 7:return ai(i,e,e.pendingProps,t),e.child;case 8:return ai(i,e,e.pendingProps.children,t),e.child;case 12:return ai(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,l=e.pendingProps,s=e.memoizedProps,o=l.value,Jt(T0,n._currentValue),n._currentValue=o,s!==null)if(_l(s.value,o)){if(s.children===l.children&&!Si.current){e=Ds(i,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var g=s.dependencies;if(g!==null){o=s.child;for(var r=g.firstContext;r!==null;){if(r.context===n){if(s.tag===1){r=ks(-1,t&-t),r.tag=2;var I=s.updateQueue;if(I!==null){I=I.shared;var C=I.pending;C===null?r.next=r:(r.next=C.next,C.next=r),I.pending=r}}s.lanes|=t,r=s.alternate,r!==null&&(r.lanes|=t),E5(s.return,t,e),g.lanes|=t;break}r=r.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ze(341));o.lanes|=t,g=o.alternate,g!==null&&(g.lanes|=t),E5(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ai(i,e,l.children,t),e=e.child}return e;case 9:return l=e.type,n=e.pendingProps.children,ua(e,t),l=fl(l),n=n(l),e.flags|=1,ai(i,e,n,t),e.child;case 14:return n=e.type,l=Xl(n,e.pendingProps),l=Xl(n.type,l),m9(i,e,n,l,t);case 15:return x8(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,l=e.pendingProps,l=e.elementType===n?l:Xl(n,l),p0(i,e),e.tag=1,Vi(n)?(i=!0,L0(e)):i=!1,ua(e,t),t8(e,n,l),U5(e,n,l,t),P5(null,e,n,!0,i,t);case 19:return V8(i,e,t);case 22:return q8(i,e,t)}throw Error(Ze(156,e.tag))};function U8(i,e){return f6(i,e)}function UZ(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ml(i,e,t,n){return new UZ(i,e,t,n)}function kA(i){return i=i.prototype,!(!i||!i.isReactComponent)}function DZ(i){if(typeof i=="function")return kA(i)?1:0;if(i!=null){if(i=i.$$typeof,i===rA)return 11;if(i===aA)return 14}return 2}function Fo(i,e){var t=i.alternate;return t===null?(t=ml(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function G0(i,e,t,n,l,s){var o=2;if(n=i,typeof i=="function")kA(i)&&(o=1);else if(typeof i=="string")o=5;else e:switch(i){case Ur:return Lg(t.children,l,s,e);case gA:o=8,l|=8;break;case m5:return i=ml(12,t,e,l|2),i.elementType=m5,i.lanes=s,i;case p5:return i=ml(13,t,e,l),i.elementType=p5,i.lanes=s,i;case f5:return i=ml(19,t,e,l),i.elementType=f5,i.lanes=s,i;case n6:return p2(t,l,s,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case e6:o=10;break e;case t6:o=9;break e;case rA:o=11;break e;case aA:o=14;break e;case Zo:o=16,n=null;break e}throw Error(Ze(130,i==null?i:typeof i,""))}return e=ml(o,t,e,l),e.elementType=i,e.type=n,e.lanes=s,e}function Lg(i,e,t,n){return i=ml(7,i,n,e),i.lanes=t,i}function p2(i,e,t,n){return i=ml(22,i,n,e),i.elementType=n6,i.lanes=t,i.stateNode={isHidden:!1},i}function md(i,e,t){return i=ml(6,i,null,e),i.lanes=t,i}function pd(i,e,t){return e=ml(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function QZ(i,e,t,n,l){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ju(0),this.expirationTimes=ju(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ju(0),this.identifierPrefix=n,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function TA(i,e,t,n,l,s,o,g,r){return i=new QZ(i,e,t,g,r),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ml(3,null,null,e),i.current=s,s.stateNode=i,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},qA(s),i}function PZ(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function D8(i){if(!i)return ko;i=i._reactInternals;e:{if(or(i)!==i||i.tag!==1)throw Error(Ze(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ze(171))}if(i.tag===1){var t=i.type;if(Vi(t))return U6(i,t,e)}return e}function Q8(i,e,t,n,l,s,o,g,r){return i=TA(t,n,!0,i,l,s,o,g,r),i.context=D8(null),t=i.current,n=Ci(),l=Mo(t),s=ks(n,l),s.callback=e!=null?e:null,Ho(t,s,l),i.current.lanes=l,XI(i,l,n),Ri(i,n),i}function f2(i,e,t,n){var l=e.current,s=Ci(),o=Mo(l);return t=D8(t),e.context===null?e.context=t:e.pendingContext=t,e=ks(s,o),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Ho(l,e,o),i!==null&&(Ml(i,l,o,s),A0(i,l,o)),o}function e2(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function W9(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function EA(i,e){W9(i,e),(i=i.alternate)&&W9(i,e)}function OZ(){return null}var P8=typeof reportError=="function"?reportError:function(i){console.error(i)};function JA(i){this._internalRoot=i}b2.prototype.render=JA.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Ze(409));f2(i,e,null,null)};b2.prototype.unmount=JA.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;$g(function(){f2(null,i,null,null)}),e[Js]=null}};function b2(i){this._internalRoot=i}b2.prototype.unstable_scheduleHydration=function(i){if(i){var e=x6();i={blockedOn:null,target:i,priority:e};for(var t=0;t<qo.length&&e!==0&&e<qo[t].priority;t++);qo.splice(t,0,i),t===0&&w6(i)}};function UA(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function G2(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function S9(){}function jZ(i,e,t,n,l){if(l){if(typeof n=="function"){var s=n;n=function(){var I=e2(o);s.call(I)}}var o=Q8(e,n,i,0,null,!1,!1,"",S9);return i._reactRootContainer=o,i[Js]=o.current,aI(i.nodeType===8?i.parentNode:i),$g(),o}for(;l=i.lastChild;)i.removeChild(l);if(typeof n=="function"){var g=n;n=function(){var I=e2(r);g.call(I)}}var r=TA(i,0,!1,null,null,!1,!1,"",S9);return i._reactRootContainer=r,i[Js]=r.current,aI(i.nodeType===8?i.parentNode:i),$g(function(){f2(e,r,t,n)}),r}function y2(i,e,t,n,l){var s=t._reactRootContainer;if(s){var o=s;if(typeof l=="function"){var g=l;l=function(){var r=e2(o);g.call(r)}}f2(e,o,i,l)}else o=jZ(t,e,i,l,n);return e2(o)}Z6=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=M1(e.pendingLanes);t!==0&&(CA(e,t|1),Ri(e,mn()),(St&6)===0&&(Ba=mn()+500,$o()))}break;case 13:$g(function(){var n=Us(i,1);if(n!==null){var l=Ci();Ml(n,i,1,l)}}),EA(i,1)}};uA=function(i){if(i.tag===13){var e=Us(i,134217728);if(e!==null){var t=Ci();Ml(e,i,134217728,t)}EA(i,134217728)}};v6=function(i){if(i.tag===13){var e=Mo(i),t=Us(i,e);if(t!==null){var n=Ci();Ml(t,i,e,n)}EA(i,e)}};x6=function(){return Mt};q6=function(i,e){var t=Mt;try{return Mt=i,e()}finally{Mt=t}};W5=function(i,e,t){switch(e){case"input":if(y5(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var l=C2(n);if(!l)throw Error(Ze(90));l6(n),y5(n,l)}}}break;case"textarea":o6(i,t);break;case"select":e=t.value,e!=null&&aa(i,!!t.multiple,e,!1)}};u6=FA;d6=$g;var $Z={usingClientEntryPoint:!1,Events:[zI,Or,C2,c6,C6,FA]},m1={findFiberByHostInstance:Rg,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ev={bundleType:m1.bundleType,version:m1.version,rendererPackageName:m1.rendererPackageName,rendererConfig:m1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=m6(i),i===null?null:i.stateNode},findFiberByHostInstance:m1.findFiberByHostInstance||OZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var AC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!AC.isDisabled&&AC.supportsFiber)try{r2=AC.inject(ev),Cs=AC}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$Z;Qi.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!UA(e))throw Error(Ze(200));return PZ(i,e,null,t)};Qi.createRoot=function(i,e){if(!UA(i))throw Error(Ze(299));var t=!1,n="",l=P8;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=TA(i,1,!1,null,null,t,!1,n,l),i[Js]=e.current,aI(i.nodeType===8?i.parentNode:i),new JA(e)};Qi.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Ze(188)):(i=Object.keys(i).join(","),Error(Ze(268,i)));return i=m6(e),i=i===null?null:i.stateNode,i};Qi.flushSync=function(i){return $g(i)};Qi.hydrate=function(i,e,t){if(!G2(e))throw Error(Ze(200));return y2(null,i,e,!0,t)};Qi.hydrateRoot=function(i,e,t){if(!UA(i))throw Error(Ze(405));var n=t!=null&&t.hydratedSources||null,l=!1,s="",o=P8;if(t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Q8(e,null,i,1,t!=null?t:null,l,!1,s,o),i[Js]=e.current,aI(i),n)for(i=0;i<n.length;i++)t=n[i],l=t._getVersion,l=l(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,l]:e.mutableSourceEagerHydrationData.push(t,l);return new b2(e)};Qi.render=function(i,e,t){if(!G2(e))throw Error(Ze(200));return y2(null,i,e,!1,t)};Qi.unmountComponentAtNode=function(i){if(!G2(i))throw Error(Ze(40));return i._reactRootContainer?($g(function(){y2(null,null,i,!1,function(){i._reactRootContainer=null,i[Js]=null})}),!0):!1};Qi.unstable_batchedUpdates=FA;Qi.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!G2(t))throw Error(Ze(200));if(i==null||i._reactInternals===void 0)throw Error(Ze(38));return y2(i,e,t,!1,n)};Qi.version="18.2.0-next-9e3b772b8-20220608";(function(i){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),i.exports=Qi})(Qp);var O8,V9=Qp.exports;O8=A5.createRoot=V9.createRoot,A5.hydrateRoot=V9.hydrateRoot;/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const B2="146",Zg={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},j8=0,r3=1,$8=2,tv=3,nv=0,DA=1,QA=2,la=3,To=0,Ei=1,Hl=2,Ts=0,_g=1,t2=2,a3=3,I3=4,ef=5,wg=100,tf=101,nf=102,c3=103,C3=104,lf=200,sf=201,of=202,gf=203,PA=204,OA=205,rf=206,af=207,If=208,cf=209,Cf=210,uf=0,df=1,Af=2,n2=3,hf=4,mf=5,pf=6,ff=7,HI=0,bf=1,Gf=2,Fl=0,yf=1,Bf=2,Zf=3,jA=4,vf=5,Z2=300,Eo=301,Jo=302,pI=303,fI=304,za=306,Uo=1e3,Tn=1001,Za=1002,pn=1003,bI=1004,iv=1004,GI=1005,lv=1005,Pt=1006,v2=1007,sv=1007,js=1008,ov=1008,Do=1009,xf=1010,qf=1011,$A=1012,wf=1013,Vo=1014,Ns=1015,er=1016,Wf=1017,Sf=1018,kg=1020,Vf=1021,Rf=1022,Li=1023,Xf=1024,Yf=1025,Lo=1026,tr=1027,zf=1028,Kf=1029,Hf=1030,Nf=1031,Mf=1033,y0=33776,B0=33777,Z0=33778,v0=33779,u3=35840,d3=35841,A3=35842,h3=35843,Ff=36196,m3=37492,p3=37496,f3=37808,b3=37809,G3=37810,y3=37811,B3=37812,Z3=37813,v3=37814,x3=37815,q3=37816,w3=37817,W3=37818,S3=37819,V3=37820,R3=37821,X3=36492,Lf=2200,_f=2201,kf=2202,va=2300,nr=2301,x0=2302,zg=2400,Kg=2401,yI=2402,x2=2500,eh=2501,gv=0,Tf=1,th=2,Qs=3e3,Yt=3001,Ef=3200,Jf=3201,$s=0,Uf=1,rv="",rs="srgb",Ro="srgb-linear",av=0,q0=7680,Iv=7681,cv=7682,Cv=7683,uv=34055,dv=34056,Av=5386,hv=512,mv=513,pv=514,fv=515,bv=516,Gv=517,yv=518,Df=519,BI=35044,Qf=35048,Bv=35040,Zv=35045,vv=35049,xv=35041,qv=35046,wv=35050,Wv=35042,Sv="100",Y3="300 es",i2=1035;class hs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const l=this._listeners[e];if(l!==void 0){const s=l.indexOf(t);s!==-1&&l.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const l=n.slice(0);for(let s=0,o=l.length;s<o;s++)l[s].call(this,e);e.target=null}}}const $n=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let R9=1234567;const Tg=Math.PI/180,ZI=180/Math.PI;function Ji(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return($n[i&255]+$n[i>>8&255]+$n[i>>16&255]+$n[i>>24&255]+"-"+$n[e&255]+$n[e>>8&255]+"-"+$n[e>>16&15|64]+$n[e>>24&255]+"-"+$n[t&63|128]+$n[t>>8&255]+"-"+$n[t>>16&255]+$n[t>>24&255]+$n[n&255]+$n[n>>8&255]+$n[n>>16&255]+$n[n>>24&255]).toLowerCase()}function fn(i,e,t){return Math.max(e,Math.min(t,i))}function nh(i,e){return(i%e+e)%e}function Vv(i,e,t,n,l){return n+(i-e)*(l-n)/(t-e)}function Rv(i,e,t){return i!==e?(t-i)/(e-i):0}function O1(i,e,t){return(1-t)*i+t*e}function Xv(i,e,t,n){return O1(i,e,1-Math.exp(-t*n))}function Yv(i,e=1){return e-Math.abs(nh(i,e*2)-e)}function zv(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function Kv(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function Hv(i,e){return i+Math.floor(Math.random()*(e-i+1))}function Nv(i,e){return i+Math.random()*(e-i)}function Mv(i){return i*(.5-Math.random())}function Fv(i){i!==void 0&&(R9=i);let e=R9+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Lv(i){return i*Tg}function _v(i){return i*ZI}function z3(i){return(i&i-1)===0&&i!==0}function Pf(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function l2(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function kv(i,e,t,n,l){const s=Math.cos,o=Math.sin,g=s(t/2),r=o(t/2),I=s((e+n)/2),C=o((e+n)/2),u=s((e-n)/2),d=o((e-n)/2),A=s((n-e)/2),m=o((n-e)/2);switch(l){case"XYX":i.set(g*C,r*u,r*d,g*I);break;case"YZY":i.set(r*d,g*C,r*u,g*I);break;case"ZXZ":i.set(r*u,r*d,g*C,g*I);break;case"XZX":i.set(g*C,r*m,r*A,g*I);break;case"YXY":i.set(r*A,g*C,r*m,g*I);break;case"ZYZ":i.set(r*m,r*A,g*C,g*I);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+l)}}function Ms(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Tt(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}var Of=Object.freeze({__proto__:null,DEG2RAD:Tg,RAD2DEG:ZI,generateUUID:Ji,clamp:fn,euclideanModulo:nh,mapLinear:Vv,inverseLerp:Rv,lerp:O1,damp:Xv,pingpong:Yv,smoothstep:zv,smootherstep:Kv,randInt:Hv,randFloat:Nv,randFloatSpread:Mv,seededRandom:Fv,degToRad:Lv,radToDeg:_v,isPowerOfTwo:z3,ceilPowerOfTwo:Pf,floorPowerOfTwo:l2,setQuaternionFromProperEuler:kv,normalize:Tt,denormalize:Ms});class me{constructor(e=0,t=0){me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,l=e.elements;return this.x=l[0]*t+l[3]*n+l[6],this.y=l[1]*t+l[4]*n+l[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),l=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*l+e.x,this.y=s*l+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wi{constructor(){Wi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,l,s,o,g,r,I){const C=this.elements;return C[0]=e,C[1]=l,C[2]=g,C[3]=t,C[4]=s,C[5]=r,C[6]=n,C[7]=o,C[8]=I,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,l=t.elements,s=this.elements,o=n[0],g=n[3],r=n[6],I=n[1],C=n[4],u=n[7],d=n[2],A=n[5],m=n[8],f=l[0],p=l[3],b=l[6],B=l[1],y=l[4],Z=l[7],q=l[2],W=l[5],S=l[8];return s[0]=o*f+g*B+r*q,s[3]=o*p+g*y+r*W,s[6]=o*b+g*Z+r*S,s[1]=I*f+C*B+u*q,s[4]=I*p+C*y+u*W,s[7]=I*b+C*Z+u*S,s[2]=d*f+A*B+m*q,s[5]=d*p+A*y+m*W,s[8]=d*b+A*Z+m*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],l=e[2],s=e[3],o=e[4],g=e[5],r=e[6],I=e[7],C=e[8];return t*o*C-t*g*I-n*s*C+n*g*r+l*s*I-l*o*r}invert(){const e=this.elements,t=e[0],n=e[1],l=e[2],s=e[3],o=e[4],g=e[5],r=e[6],I=e[7],C=e[8],u=C*o-g*I,d=g*r-C*s,A=I*s-o*r,m=t*u+n*d+l*A;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const f=1/m;return e[0]=u*f,e[1]=(l*I-C*n)*f,e[2]=(g*n-l*o)*f,e[3]=d*f,e[4]=(C*t-l*r)*f,e[5]=(l*s-g*t)*f,e[6]=A*f,e[7]=(n*r-I*t)*f,e[8]=(o*t-n*s)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,l,s,o,g){const r=Math.cos(s),I=Math.sin(s);return this.set(n*r,n*I,-n*(r*o+I*g)+o+e,-l*I,l*r,-l*(-I*o+r*g)+g+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),l=this.elements,s=l[0],o=l[3],g=l[6],r=l[1],I=l[4],C=l[7];return l[0]=t*s+n*r,l[3]=t*o+n*I,l[6]=t*g+n*C,l[1]=-n*s+t*r,l[4]=-n*o+t*I,l[7]=-n*g+t*C,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let l=0;l<9;l++)if(t[l]!==n[l])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function jf(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const Tv={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function sa(i,e){return new Tv[i](e)}function vI(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Eg(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function w0(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const fd={[rs]:{[Ro]:Eg},[Ro]:{[rs]:w0}},cl={legacyMode:!0,get workingColorSpace(){return Ro},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.legacyMode||e===t||!e||!t)return i;if(fd[e]&&fd[e][t]!==void 0){const n=fd[e][t];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}},$f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qn={r:0,g:0,b:0},wl={h:0,s:0,l:0},hC={h:0,s:0,l:0};function bd(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}function mC(i,e){return e.r=i.r,e.g=i.g,e.b=i.b,e}class Ve{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=rs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,cl.toWorkingColorSpace(this,t),this}setRGB(e,t,n,l=Ro){return this.r=e,this.g=t,this.b=n,cl.toWorkingColorSpace(this,l),this}setHSL(e,t,n,l=Ro){if(e=nh(e,1),t=fn(t,0,1),n=fn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=bd(o,s,e+1/3),this.g=bd(o,s,e),this.b=bd(o,s,e-1/3)}return cl.toWorkingColorSpace(this,l),this}setStyle(e,t=rs){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let l;if(l=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=l[1],g=l[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,cl.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,cl.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g)){const r=parseFloat(s[1])/360,I=parseFloat(s[2])/100,C=parseFloat(s[3])/100;return n(s[4]),this.setHSL(r,I,C,t)}break}}else if(l=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=l[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,cl.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,cl.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=rs){const n=$f[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Eg(e.r),this.g=Eg(e.g),this.b=Eg(e.b),this}copyLinearToSRGB(e){return this.r=w0(e.r),this.g=w0(e.g),this.b=w0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=rs){return cl.fromWorkingColorSpace(mC(this,qn),e),fn(qn.r*255,0,255)<<16^fn(qn.g*255,0,255)<<8^fn(qn.b*255,0,255)<<0}getHexString(e=rs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ro){cl.fromWorkingColorSpace(mC(this,qn),t);const n=qn.r,l=qn.g,s=qn.b,o=Math.max(n,l,s),g=Math.min(n,l,s);let r,I;const C=(g+o)/2;if(g===o)r=0,I=0;else{const u=o-g;switch(I=C<=.5?u/(o+g):u/(2-o-g),o){case n:r=(l-s)/u+(l<s?6:0);break;case l:r=(s-n)/u+2;break;case s:r=(n-l)/u+4;break}r/=6}return e.h=r,e.s=I,e.l=C,e}getRGB(e,t=Ro){return cl.fromWorkingColorSpace(mC(this,qn),t),e.r=qn.r,e.g=qn.g,e.b=qn.b,e}getStyle(e=rs){return cl.fromWorkingColorSpace(mC(this,qn),e),e!==rs?`color(${e} ${qn.r} ${qn.g} ${qn.b})`:`rgb(${qn.r*255|0},${qn.g*255|0},${qn.b*255|0})`}offsetHSL(e,t,n){return this.getHSL(wl),wl.h+=e,wl.s+=t,wl.l+=n,this.setHSL(wl.h,wl.s,wl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(wl),e.getHSL(hC);const n=O1(wl.h,hC.h,t),l=O1(wl.s,hC.s,t),s=O1(wl.l,hC.l,t);return this.setHSL(n,l,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Ve.NAMES=$f;let vr;class ih{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{vr===void 0&&(vr=vI("canvas")),vr.width=e.width,vr.height=e.height;const n=vr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=vr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=vI("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const l=n.getImageData(0,0,e.width,e.height),s=l.data;for(let o=0;o<s.length;o++)s[o]=Eg(s[o]/255)*255;return n.putImageData(l,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Eg(t[n]/255)*255):t[n]=Eg(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Hg{constructor(e=null){this.isSource=!0,this.uuid=Ji(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},l=this.data;if(l!==null){let s;if(Array.isArray(l)){s=[];for(let o=0,g=l.length;o<g;o++)l[o].isDataTexture?s.push(Gd(l[o].image)):s.push(Gd(l[o]))}else s=Gd(l);n.url=s}return t||(e.images[this.uuid]=n),n}}function Gd(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?ih.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ev=0;class un extends hs{constructor(e=un.DEFAULT_IMAGE,t=un.DEFAULT_MAPPING,n=Tn,l=Tn,s=Pt,o=js,g=Li,r=Do,I=1,C=Qs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ev++}),this.uuid=Ji(),this.name="",this.source=new Hg(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=l,this.magFilter=s,this.minFilter=o,this.anisotropy=I,this.format=g,this.internalFormat=null,this.type=r,this.offset=new me(0,0),this.repeat=new me(1,1),this.center=new me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=C,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Z2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Uo:e.x=e.x-Math.floor(e.x);break;case Tn:e.x=e.x<0?0:1;break;case Za:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Uo:e.y=e.y-Math.floor(e.y);break;case Tn:e.y=e.y<0?0:1;break;case Za:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}un.DEFAULT_IMAGE=null;un.DEFAULT_MAPPING=Z2;class Nt{constructor(e=0,t=0,n=0,l=1){Nt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=l}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,l){return this.x=e,this.y=t,this.z=n,this.w=l,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,l=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*l+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*l+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*l+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*l+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,l,s;const r=e.elements,I=r[0],C=r[4],u=r[8],d=r[1],A=r[5],m=r[9],f=r[2],p=r[6],b=r[10];if(Math.abs(C-d)<.01&&Math.abs(u-f)<.01&&Math.abs(m-p)<.01){if(Math.abs(C+d)<.1&&Math.abs(u+f)<.1&&Math.abs(m+p)<.1&&Math.abs(I+A+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(I+1)/2,Z=(A+1)/2,q=(b+1)/2,W=(C+d)/4,S=(u+f)/4,x=(m+p)/4;return y>Z&&y>q?y<.01?(n=0,l=.707106781,s=.707106781):(n=Math.sqrt(y),l=W/n,s=S/n):Z>q?Z<.01?(n=.707106781,l=0,s=.707106781):(l=Math.sqrt(Z),n=W/l,s=x/l):q<.01?(n=.707106781,l=.707106781,s=0):(s=Math.sqrt(q),n=S/s,l=x/s),this.set(n,l,s,t),this}let B=Math.sqrt((p-m)*(p-m)+(u-f)*(u-f)+(d-C)*(d-C));return Math.abs(B)<.001&&(B=1),this.x=(p-m)/B,this.y=(u-f)/B,this.z=(d-C)/B,this.w=Math.acos((I+A+b-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Di extends hs{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Nt(0,0,e,t),this.scissorTest=!1,this.viewport=new Nt(0,0,e,t);const l={width:e,height:t,depth:1};this.texture=new un(l,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Pt,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Hg(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class NI extends un{constructor(e=null,t=1,n=1,l=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:l},this.magFilter=pn,this.minFilter=pn,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Jv extends Di{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new NI(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class q2 extends un{constructor(e=null,t=1,n=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:l},this.magFilter=pn,this.minFilter=pn,this.wrapR=Tn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Uv extends Di{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new q2(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Dv extends Di{constructor(e=1,t=1,n=1,l={}){super(e,t,l),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let l=0,s=this.texture.length;l<s;l++)this.texture[l].image.width=e,this.texture[l].image.height=t,this.texture[l].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class bn{constructor(e=0,t=0,n=0,l=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=l}static slerpFlat(e,t,n,l,s,o,g){let r=n[l+0],I=n[l+1],C=n[l+2],u=n[l+3];const d=s[o+0],A=s[o+1],m=s[o+2],f=s[o+3];if(g===0){e[t+0]=r,e[t+1]=I,e[t+2]=C,e[t+3]=u;return}if(g===1){e[t+0]=d,e[t+1]=A,e[t+2]=m,e[t+3]=f;return}if(u!==f||r!==d||I!==A||C!==m){let p=1-g;const b=r*d+I*A+C*m+u*f,B=b>=0?1:-1,y=1-b*b;if(y>Number.EPSILON){const q=Math.sqrt(y),W=Math.atan2(q,b*B);p=Math.sin(p*W)/q,g=Math.sin(g*W)/q}const Z=g*B;if(r=r*p+d*Z,I=I*p+A*Z,C=C*p+m*Z,u=u*p+f*Z,p===1-g){const q=1/Math.sqrt(r*r+I*I+C*C+u*u);r*=q,I*=q,C*=q,u*=q}}e[t]=r,e[t+1]=I,e[t+2]=C,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,l,s,o){const g=n[l],r=n[l+1],I=n[l+2],C=n[l+3],u=s[o],d=s[o+1],A=s[o+2],m=s[o+3];return e[t]=g*m+C*u+r*A-I*d,e[t+1]=r*m+C*d+I*u-g*A,e[t+2]=I*m+C*A+g*d-r*u,e[t+3]=C*m-g*u-r*d-I*A,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,l){return this._x=e,this._y=t,this._z=n,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,l=e._y,s=e._z,o=e._order,g=Math.cos,r=Math.sin,I=g(n/2),C=g(l/2),u=g(s/2),d=r(n/2),A=r(l/2),m=r(s/2);switch(o){case"XYZ":this._x=d*C*u+I*A*m,this._y=I*A*u-d*C*m,this._z=I*C*m+d*A*u,this._w=I*C*u-d*A*m;break;case"YXZ":this._x=d*C*u+I*A*m,this._y=I*A*u-d*C*m,this._z=I*C*m-d*A*u,this._w=I*C*u+d*A*m;break;case"ZXY":this._x=d*C*u-I*A*m,this._y=I*A*u+d*C*m,this._z=I*C*m+d*A*u,this._w=I*C*u-d*A*m;break;case"ZYX":this._x=d*C*u-I*A*m,this._y=I*A*u+d*C*m,this._z=I*C*m-d*A*u,this._w=I*C*u+d*A*m;break;case"YZX":this._x=d*C*u+I*A*m,this._y=I*A*u+d*C*m,this._z=I*C*m-d*A*u,this._w=I*C*u-d*A*m;break;case"XZY":this._x=d*C*u-I*A*m,this._y=I*A*u-d*C*m,this._z=I*C*m+d*A*u,this._w=I*C*u+d*A*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,l=Math.sin(n);return this._x=e.x*l,this._y=e.y*l,this._z=e.z*l,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],l=t[4],s=t[8],o=t[1],g=t[5],r=t[9],I=t[2],C=t[6],u=t[10],d=n+g+u;if(d>0){const A=.5/Math.sqrt(d+1);this._w=.25/A,this._x=(C-r)*A,this._y=(s-I)*A,this._z=(o-l)*A}else if(n>g&&n>u){const A=2*Math.sqrt(1+n-g-u);this._w=(C-r)/A,this._x=.25*A,this._y=(l+o)/A,this._z=(s+I)/A}else if(g>u){const A=2*Math.sqrt(1+g-n-u);this._w=(s-I)/A,this._x=(l+o)/A,this._y=.25*A,this._z=(r+C)/A}else{const A=2*Math.sqrt(1+u-n-g);this._w=(o-l)/A,this._x=(s+I)/A,this._y=(r+C)/A,this._z=.25*A}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const l=Math.min(1,t/n);return this.slerp(e,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,l=e._y,s=e._z,o=e._w,g=t._x,r=t._y,I=t._z,C=t._w;return this._x=n*C+o*g+l*I-s*r,this._y=l*C+o*r+s*g-n*I,this._z=s*C+o*I+n*r-l*g,this._w=o*C-n*g-l*r-s*I,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,l=this._y,s=this._z,o=this._w;let g=o*e._w+n*e._x+l*e._y+s*e._z;if(g<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,g=-g):this.copy(e),g>=1)return this._w=o,this._x=n,this._y=l,this._z=s,this;const r=1-g*g;if(r<=Number.EPSILON){const A=1-t;return this._w=A*o+t*this._w,this._x=A*n+t*this._x,this._y=A*l+t*this._y,this._z=A*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const I=Math.sqrt(r),C=Math.atan2(I,g),u=Math.sin((1-t)*C)/I,d=Math.sin(t*C)/I;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=l*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),l=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(l),n*Math.sin(s),n*Math.cos(s),t*Math.sin(l))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,n=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(X9.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(X9.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,l=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*l,this.y=s[1]*t+s[4]*n+s[7]*l,this.z=s[2]*t+s[5]*n+s[8]*l,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,l=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*l+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*l+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*l+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*l+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,l=this.z,s=e.x,o=e.y,g=e.z,r=e.w,I=r*t+o*l-g*n,C=r*n+g*t-s*l,u=r*l+s*n-o*t,d=-s*t-o*n-g*l;return this.x=I*r+d*-s+C*-g-u*-o,this.y=C*r+d*-o+u*-s-I*-g,this.z=u*r+d*-g+I*-o-C*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,l=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*l,this.y=s[1]*t+s[5]*n+s[9]*l,this.z=s[2]*t+s[6]*n+s[10]*l,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,l=e.y,s=e.z,o=t.x,g=t.y,r=t.z;return this.x=l*r-s*g,this.y=s*o-n*r,this.z=n*g-l*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return yd.copy(this).projectOnVector(e),this.sub(yd)}reflect(e){return this.sub(yd.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(fn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,l=this.z-e.z;return t*t+n*n+l*l}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const l=Math.sin(t)*e;return this.x=l*Math.sin(n),this.y=Math.cos(t)*e,this.z=l*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),l=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=l,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const yd=new K,X9=new bn;class eg{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,l=1/0,s=-1/0,o=-1/0,g=-1/0;for(let r=0,I=e.length;r<I;r+=3){const C=e[r],u=e[r+1],d=e[r+2];C<t&&(t=C),u<n&&(n=u),d<l&&(l=d),C>s&&(s=C),u>o&&(o=u),d>g&&(g=d)}return this.min.set(t,n,l),this.max.set(s,o,g),this}setFromBufferAttribute(e){let t=1/0,n=1/0,l=1/0,s=-1/0,o=-1/0,g=-1/0;for(let r=0,I=e.count;r<I;r++){const C=e.getX(r),u=e.getY(r),d=e.getZ(r);C<t&&(t=C),u<n&&(n=u),d<l&&(l=d),C>s&&(s=C),u>o&&(o=u),d>g&&(g=d)}return this.min.set(t,n,l),this.max.set(s,o,g),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=dg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0)if(t&&n.attributes!=null&&n.attributes.position!==void 0){const s=n.attributes.position;for(let o=0,g=s.count;o<g;o++)dg.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(dg)}else n.boundingBox===null&&n.computeBoundingBox(),Bd.copy(n.boundingBox),Bd.applyMatrix4(e.matrixWorld),this.union(Bd);const l=e.children;for(let s=0,o=l.length;s<o;s++)this.expandByObject(l[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,dg),dg.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(p1),pC.subVectors(this.max,p1),xr.subVectors(e.a,p1),qr.subVectors(e.b,p1),wr.subVectors(e.c,p1),Ao.subVectors(qr,xr),ho.subVectors(wr,qr),Ag.subVectors(xr,wr);let t=[0,-Ao.z,Ao.y,0,-ho.z,ho.y,0,-Ag.z,Ag.y,Ao.z,0,-Ao.x,ho.z,0,-ho.x,Ag.z,0,-Ag.x,-Ao.y,Ao.x,0,-ho.y,ho.x,0,-Ag.y,Ag.x,0];return!Zd(t,xr,qr,wr,pC)||(t=[1,0,0,0,1,0,0,0,1],!Zd(t,xr,qr,wr,pC))?!1:(fC.crossVectors(Ao,ho),t=[fC.x,fC.y,fC.z],Zd(t,xr,qr,wr,pC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return dg.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(dg).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(xs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),xs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),xs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),xs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),xs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),xs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),xs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),xs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(xs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const xs=[new K,new K,new K,new K,new K,new K,new K,new K],dg=new K,Bd=new eg,xr=new K,qr=new K,wr=new K,Ao=new K,ho=new K,Ag=new K,p1=new K,pC=new K,fC=new K,hg=new K;function Zd(i,e,t,n,l){for(let s=0,o=i.length-3;s<=o;s+=3){hg.fromArray(i,s);const g=l.x*Math.abs(hg.x)+l.y*Math.abs(hg.y)+l.z*Math.abs(hg.z),r=e.dot(hg),I=t.dot(hg),C=n.dot(hg);if(Math.max(-Math.max(r,I,C),Math.min(r,I,C))>g)return!1}return!0}const Qv=new eg,f1=new K,vd=new K;class tg{constructor(e=new K,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Qv.setFromPoints(e).getCenter(n);let l=0;for(let s=0,o=e.length;s<o;s++)l=Math.max(l,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(l),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;f1.subVectors(e,this.center);const t=f1.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),l=(n-this.radius)*.5;this.center.addScaledVector(f1,l/n),this.radius+=l}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vd.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(f1.copy(e.center).add(vd)),this.expandByPoint(f1.copy(e.center).sub(vd))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const qs=new K,xd=new K,bC=new K,mo=new K,qd=new K,GC=new K,wd=new K;class MI{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,qs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=qs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(qs.copy(this.direction).multiplyScalar(t).add(this.origin),qs.distanceToSquared(e))}distanceSqToSegment(e,t,n,l){xd.copy(e).add(t).multiplyScalar(.5),bC.copy(t).sub(e).normalize(),mo.copy(this.origin).sub(xd);const s=e.distanceTo(t)*.5,o=-this.direction.dot(bC),g=mo.dot(this.direction),r=-mo.dot(bC),I=mo.lengthSq(),C=Math.abs(1-o*o);let u,d,A,m;if(C>0)if(u=o*r-g,d=o*g-r,m=s*C,u>=0)if(d>=-m)if(d<=m){const f=1/C;u*=f,d*=f,A=u*(u+o*d+2*g)+d*(o*u+d+2*r)+I}else d=s,u=Math.max(0,-(o*d+g)),A=-u*u+d*(d+2*r)+I;else d=-s,u=Math.max(0,-(o*d+g)),A=-u*u+d*(d+2*r)+I;else d<=-m?(u=Math.max(0,-(-o*s+g)),d=u>0?-s:Math.min(Math.max(-s,-r),s),A=-u*u+d*(d+2*r)+I):d<=m?(u=0,d=Math.min(Math.max(-s,-r),s),A=d*(d+2*r)+I):(u=Math.max(0,-(o*s+g)),d=u>0?s:Math.min(Math.max(-s,-r),s),A=-u*u+d*(d+2*r)+I);else d=o>0?-s:s,u=Math.max(0,-(o*d+g)),A=-u*u+d*(d+2*r)+I;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),l&&l.copy(bC).multiplyScalar(d).add(xd),A}intersectSphere(e,t){qs.subVectors(e.center,this.origin);const n=qs.dot(this.direction),l=qs.dot(qs)-n*n,s=e.radius*e.radius;if(l>s)return null;const o=Math.sqrt(s-l),g=n-o,r=n+o;return g<0&&r<0?null:g<0?this.at(r,t):this.at(g,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,l,s,o,g,r;const I=1/this.direction.x,C=1/this.direction.y,u=1/this.direction.z,d=this.origin;return I>=0?(n=(e.min.x-d.x)*I,l=(e.max.x-d.x)*I):(n=(e.max.x-d.x)*I,l=(e.min.x-d.x)*I),C>=0?(s=(e.min.y-d.y)*C,o=(e.max.y-d.y)*C):(s=(e.max.y-d.y)*C,o=(e.min.y-d.y)*C),n>o||s>l||((s>n||isNaN(n))&&(n=s),(o<l||isNaN(l))&&(l=o),u>=0?(g=(e.min.z-d.z)*u,r=(e.max.z-d.z)*u):(g=(e.max.z-d.z)*u,r=(e.min.z-d.z)*u),n>r||g>l)||((g>n||n!==n)&&(n=g),(r<l||l!==l)&&(l=r),l<0)?null:this.at(n>=0?n:l,t)}intersectsBox(e){return this.intersectBox(e,qs)!==null}intersectTriangle(e,t,n,l,s){qd.subVectors(t,e),GC.subVectors(n,e),wd.crossVectors(qd,GC);let o=this.direction.dot(wd),g;if(o>0){if(l)return null;g=1}else if(o<0)g=-1,o=-o;else return null;mo.subVectors(this.origin,e);const r=g*this.direction.dot(GC.crossVectors(mo,GC));if(r<0)return null;const I=g*this.direction.dot(qd.cross(mo));if(I<0||r+I>o)return null;const C=-g*mo.dot(wd);return C<0?null:this.at(C/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class st{constructor(){st.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,l,s,o,g,r,I,C,u,d,A,m,f,p){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=l,b[1]=s,b[5]=o,b[9]=g,b[13]=r,b[2]=I,b[6]=C,b[10]=u,b[14]=d,b[3]=A,b[7]=m,b[11]=f,b[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new st().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,l=1/Wr.setFromMatrixColumn(e,0).length(),s=1/Wr.setFromMatrixColumn(e,1).length(),o=1/Wr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*l,t[1]=n[1]*l,t[2]=n[2]*l,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,l=e.y,s=e.z,o=Math.cos(n),g=Math.sin(n),r=Math.cos(l),I=Math.sin(l),C=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const d=o*C,A=o*u,m=g*C,f=g*u;t[0]=r*C,t[4]=-r*u,t[8]=I,t[1]=A+m*I,t[5]=d-f*I,t[9]=-g*r,t[2]=f-d*I,t[6]=m+A*I,t[10]=o*r}else if(e.order==="YXZ"){const d=r*C,A=r*u,m=I*C,f=I*u;t[0]=d+f*g,t[4]=m*g-A,t[8]=o*I,t[1]=o*u,t[5]=o*C,t[9]=-g,t[2]=A*g-m,t[6]=f+d*g,t[10]=o*r}else if(e.order==="ZXY"){const d=r*C,A=r*u,m=I*C,f=I*u;t[0]=d-f*g,t[4]=-o*u,t[8]=m+A*g,t[1]=A+m*g,t[5]=o*C,t[9]=f-d*g,t[2]=-o*I,t[6]=g,t[10]=o*r}else if(e.order==="ZYX"){const d=o*C,A=o*u,m=g*C,f=g*u;t[0]=r*C,t[4]=m*I-A,t[8]=d*I+f,t[1]=r*u,t[5]=f*I+d,t[9]=A*I-m,t[2]=-I,t[6]=g*r,t[10]=o*r}else if(e.order==="YZX"){const d=o*r,A=o*I,m=g*r,f=g*I;t[0]=r*C,t[4]=f-d*u,t[8]=m*u+A,t[1]=u,t[5]=o*C,t[9]=-g*C,t[2]=-I*C,t[6]=A*u+m,t[10]=d-f*u}else if(e.order==="XZY"){const d=o*r,A=o*I,m=g*r,f=g*I;t[0]=r*C,t[4]=-u,t[8]=I*C,t[1]=d*u+f,t[5]=o*C,t[9]=A*u-m,t[2]=m*u-A,t[6]=g*C,t[10]=f*u+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Pv,e,Ov)}lookAt(e,t,n){const l=this.elements;return Hi.subVectors(e,t),Hi.lengthSq()===0&&(Hi.z=1),Hi.normalize(),po.crossVectors(n,Hi),po.lengthSq()===0&&(Math.abs(n.z)===1?Hi.x+=1e-4:Hi.z+=1e-4,Hi.normalize(),po.crossVectors(n,Hi)),po.normalize(),yC.crossVectors(Hi,po),l[0]=po.x,l[4]=yC.x,l[8]=Hi.x,l[1]=po.y,l[5]=yC.y,l[9]=Hi.y,l[2]=po.z,l[6]=yC.z,l[10]=Hi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,l=t.elements,s=this.elements,o=n[0],g=n[4],r=n[8],I=n[12],C=n[1],u=n[5],d=n[9],A=n[13],m=n[2],f=n[6],p=n[10],b=n[14],B=n[3],y=n[7],Z=n[11],q=n[15],W=l[0],S=l[4],x=l[8],V=l[12],X=l[1],k=l[5],$=l[9],Q=l[13],E=l[2],te=l[6],se=l[10],oe=l[14],R=l[3],Y=l[7],H=l[11],J=l[15];return s[0]=o*W+g*X+r*E+I*R,s[4]=o*S+g*k+r*te+I*Y,s[8]=o*x+g*$+r*se+I*H,s[12]=o*V+g*Q+r*oe+I*J,s[1]=C*W+u*X+d*E+A*R,s[5]=C*S+u*k+d*te+A*Y,s[9]=C*x+u*$+d*se+A*H,s[13]=C*V+u*Q+d*oe+A*J,s[2]=m*W+f*X+p*E+b*R,s[6]=m*S+f*k+p*te+b*Y,s[10]=m*x+f*$+p*se+b*H,s[14]=m*V+f*Q+p*oe+b*J,s[3]=B*W+y*X+Z*E+q*R,s[7]=B*S+y*k+Z*te+q*Y,s[11]=B*x+y*$+Z*se+q*H,s[15]=B*V+y*Q+Z*oe+q*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],l=e[8],s=e[12],o=e[1],g=e[5],r=e[9],I=e[13],C=e[2],u=e[6],d=e[10],A=e[14],m=e[3],f=e[7],p=e[11],b=e[15];return m*(+s*r*u-l*I*u-s*g*d+n*I*d+l*g*A-n*r*A)+f*(+t*r*A-t*I*d+s*o*d-l*o*A+l*I*C-s*r*C)+p*(+t*I*u-t*g*A-s*o*u+n*o*A+s*g*C-n*I*C)+b*(-l*g*C-t*r*u+t*g*d+l*o*u-n*o*d+n*r*C)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const l=this.elements;return e.isVector3?(l[12]=e.x,l[13]=e.y,l[14]=e.z):(l[12]=e,l[13]=t,l[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],l=e[2],s=e[3],o=e[4],g=e[5],r=e[6],I=e[7],C=e[8],u=e[9],d=e[10],A=e[11],m=e[12],f=e[13],p=e[14],b=e[15],B=u*p*I-f*d*I+f*r*A-g*p*A-u*r*b+g*d*b,y=m*d*I-C*p*I-m*r*A+o*p*A+C*r*b-o*d*b,Z=C*f*I-m*u*I+m*g*A-o*f*A-C*g*b+o*u*b,q=m*u*r-C*f*r-m*g*d+o*f*d+C*g*p-o*u*p,W=t*B+n*y+l*Z+s*q;if(W===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/W;return e[0]=B*S,e[1]=(f*d*s-u*p*s-f*l*A+n*p*A+u*l*b-n*d*b)*S,e[2]=(g*p*s-f*r*s+f*l*I-n*p*I-g*l*b+n*r*b)*S,e[3]=(u*r*s-g*d*s-u*l*I+n*d*I+g*l*A-n*r*A)*S,e[4]=y*S,e[5]=(C*p*s-m*d*s+m*l*A-t*p*A-C*l*b+t*d*b)*S,e[6]=(m*r*s-o*p*s-m*l*I+t*p*I+o*l*b-t*r*b)*S,e[7]=(o*d*s-C*r*s+C*l*I-t*d*I-o*l*A+t*r*A)*S,e[8]=Z*S,e[9]=(m*u*s-C*f*s-m*n*A+t*f*A+C*n*b-t*u*b)*S,e[10]=(o*f*s-m*g*s+m*n*I-t*f*I-o*n*b+t*g*b)*S,e[11]=(C*g*s-o*u*s-C*n*I+t*u*I+o*n*A-t*g*A)*S,e[12]=q*S,e[13]=(C*f*l-m*u*l+m*n*d-t*f*d-C*n*p+t*u*p)*S,e[14]=(m*g*l-o*f*l-m*n*r+t*f*r+o*n*p-t*g*p)*S,e[15]=(o*u*l-C*g*l+C*n*r-t*u*r-o*n*d+t*g*d)*S,this}scale(e){const t=this.elements,n=e.x,l=e.y,s=e.z;return t[0]*=n,t[4]*=l,t[8]*=s,t[1]*=n,t[5]*=l,t[9]*=s,t[2]*=n,t[6]*=l,t[10]*=s,t[3]*=n,t[7]*=l,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],l=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,l))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),l=Math.sin(t),s=1-n,o=e.x,g=e.y,r=e.z,I=s*o,C=s*g;return this.set(I*o+n,I*g-l*r,I*r+l*g,0,I*g+l*r,C*g+n,C*r-l*o,0,I*r-l*g,C*r+l*o,s*r*r+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,l,s,o){return this.set(1,n,s,0,e,1,o,0,t,l,1,0,0,0,0,1),this}compose(e,t,n){const l=this.elements,s=t._x,o=t._y,g=t._z,r=t._w,I=s+s,C=o+o,u=g+g,d=s*I,A=s*C,m=s*u,f=o*C,p=o*u,b=g*u,B=r*I,y=r*C,Z=r*u,q=n.x,W=n.y,S=n.z;return l[0]=(1-(f+b))*q,l[1]=(A+Z)*q,l[2]=(m-y)*q,l[3]=0,l[4]=(A-Z)*W,l[5]=(1-(d+b))*W,l[6]=(p+B)*W,l[7]=0,l[8]=(m+y)*S,l[9]=(p-B)*S,l[10]=(1-(d+f))*S,l[11]=0,l[12]=e.x,l[13]=e.y,l[14]=e.z,l[15]=1,this}decompose(e,t,n){const l=this.elements;let s=Wr.set(l[0],l[1],l[2]).length();const o=Wr.set(l[4],l[5],l[6]).length(),g=Wr.set(l[8],l[9],l[10]).length();this.determinant()<0&&(s=-s),e.x=l[12],e.y=l[13],e.z=l[14],Wl.copy(this);const I=1/s,C=1/o,u=1/g;return Wl.elements[0]*=I,Wl.elements[1]*=I,Wl.elements[2]*=I,Wl.elements[4]*=C,Wl.elements[5]*=C,Wl.elements[6]*=C,Wl.elements[8]*=u,Wl.elements[9]*=u,Wl.elements[10]*=u,t.setFromRotationMatrix(Wl),n.x=s,n.y=o,n.z=g,this}makePerspective(e,t,n,l,s,o){const g=this.elements,r=2*s/(t-e),I=2*s/(n-l),C=(t+e)/(t-e),u=(n+l)/(n-l),d=-(o+s)/(o-s),A=-2*o*s/(o-s);return g[0]=r,g[4]=0,g[8]=C,g[12]=0,g[1]=0,g[5]=I,g[9]=u,g[13]=0,g[2]=0,g[6]=0,g[10]=d,g[14]=A,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(e,t,n,l,s,o){const g=this.elements,r=1/(t-e),I=1/(n-l),C=1/(o-s),u=(t+e)*r,d=(n+l)*I,A=(o+s)*C;return g[0]=2*r,g[4]=0,g[8]=0,g[12]=-u,g[1]=0,g[5]=2*I,g[9]=0,g[13]=-d,g[2]=0,g[6]=0,g[10]=-2*C,g[14]=-A,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let l=0;l<16;l++)if(t[l]!==n[l])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Wr=new K,Wl=new st,Pv=new K(0,0,0),Ov=new K(1,1,1),po=new K,yC=new K,Hi=new K,Y9=new st,z9=new bn;class gr{constructor(e=0,t=0,n=0,l=gr.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=l}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,l=this._order){return this._x=e,this._y=t,this._z=n,this._order=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const l=e.elements,s=l[0],o=l[4],g=l[8],r=l[1],I=l[5],C=l[9],u=l[2],d=l[6],A=l[10];switch(t){case"XYZ":this._y=Math.asin(fn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-C,A),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,I),this._z=0);break;case"YXZ":this._x=Math.asin(-fn(C,-1,1)),Math.abs(C)<.9999999?(this._y=Math.atan2(g,A),this._z=Math.atan2(r,I)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(fn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,A),this._z=Math.atan2(-o,I)):(this._y=0,this._z=Math.atan2(r,s));break;case"ZYX":this._y=Math.asin(-fn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,A),this._z=Math.atan2(r,s)):(this._x=0,this._z=Math.atan2(-o,I));break;case"YZX":this._z=Math.asin(fn(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(-C,I),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(g,A));break;case"XZY":this._z=Math.asin(-fn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,I),this._y=Math.atan2(g,s)):(this._x=Math.atan2(-C,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Y9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Y9,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return z9.setFromEuler(this),this.setFromQuaternion(z9,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}gr.DefaultOrder="XYZ";gr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Jg{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let jv=0;const K9=new K,Sr=new bn,ws=new st,BC=new K,b1=new K,$v=new K,ex=new bn,H9=new K(1,0,0),N9=new K(0,1,0),M9=new K(0,0,1),tx={type:"added"},F9={type:"removed"};class yt extends hs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:jv++}),this.uuid=Ji(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yt.DefaultUp.clone();const e=new K,t=new gr,n=new bn,l=new K(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:l},modelViewMatrix:{value:new st},normalMatrix:{value:new Wi}}),this.matrix=new st,this.matrixWorld=new st,this.matrixAutoUpdate=yt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=yt.DefaultMatrixWorldAutoUpdate,this.layers=new Jg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Sr.setFromAxisAngle(e,t),this.quaternion.multiply(Sr),this}rotateOnWorldAxis(e,t){return Sr.setFromAxisAngle(e,t),this.quaternion.premultiply(Sr),this}rotateX(e){return this.rotateOnAxis(H9,e)}rotateY(e){return this.rotateOnAxis(N9,e)}rotateZ(e){return this.rotateOnAxis(M9,e)}translateOnAxis(e,t){return K9.copy(e).applyQuaternion(this.quaternion),this.position.add(K9.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(H9,e)}translateY(e){return this.translateOnAxis(N9,e)}translateZ(e){return this.translateOnAxis(M9,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ws.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?BC.copy(e):BC.set(e,t,n);const l=this.parent;this.updateWorldMatrix(!0,!1),b1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ws.lookAt(b1,BC,this.up):ws.lookAt(BC,b1,this.up),this.quaternion.setFromRotationMatrix(ws),l&&(ws.extractRotation(l.matrixWorld),Sr.setFromRotationMatrix(ws),this.quaternion.premultiply(Sr.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(tx)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(F9)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(F9)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ws.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ws.multiply(e.parent.matrixWorld)),e.applyMatrix4(ws),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,l=this.children.length;n<l;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(b1,e,$v),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(b1,ex,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,l=t.length;n<l;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,l=t.length;n<l;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,l=t.length;n<l;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const l=this.children;for(let s=0,o=l.length;s<o;s++){const g=l[s];g.matrixWorldAutoUpdate===!0&&g.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const l={};l.uuid=this.uuid,l.type=this.type,this.name!==""&&(l.name=this.name),this.castShadow===!0&&(l.castShadow=!0),this.receiveShadow===!0&&(l.receiveShadow=!0),this.visible===!1&&(l.visible=!1),this.frustumCulled===!1&&(l.frustumCulled=!1),this.renderOrder!==0&&(l.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(l.userData=this.userData),l.layers=this.layers.mask,l.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(l.matrixAutoUpdate=!1),this.isInstancedMesh&&(l.type="InstancedMesh",l.count=this.count,l.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(l.instanceColor=this.instanceColor.toJSON()));function s(g,r){return g[r.uuid]===void 0&&(g[r.uuid]=r.toJSON(e)),r.uuid}if(this.isScene)this.background&&(this.background.isColor?l.background=this.background.toJSON():this.background.isTexture&&(l.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(l.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){l.geometry=s(e.geometries,this.geometry);const g=this.geometry.parameters;if(g!==void 0&&g.shapes!==void 0){const r=g.shapes;if(Array.isArray(r))for(let I=0,C=r.length;I<C;I++){const u=r[I];s(e.shapes,u)}else s(e.shapes,r)}}if(this.isSkinnedMesh&&(l.bindMode=this.bindMode,l.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),l.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const g=[];for(let r=0,I=this.material.length;r<I;r++)g.push(s(e.materials,this.material[r]));l.material=g}else l.material=s(e.materials,this.material);if(this.children.length>0){l.children=[];for(let g=0;g<this.children.length;g++)l.children.push(this.children[g].toJSON(e).object)}if(this.animations.length>0){l.animations=[];for(let g=0;g<this.animations.length;g++){const r=this.animations[g];l.animations.push(s(e.animations,r))}}if(t){const g=o(e.geometries),r=o(e.materials),I=o(e.textures),C=o(e.images),u=o(e.shapes),d=o(e.skeletons),A=o(e.animations),m=o(e.nodes);g.length>0&&(n.geometries=g),r.length>0&&(n.materials=r),I.length>0&&(n.textures=I),C.length>0&&(n.images=C),u.length>0&&(n.shapes=u),d.length>0&&(n.skeletons=d),A.length>0&&(n.animations=A),m.length>0&&(n.nodes=m)}return n.object=l,n;function o(g){const r=[];for(const I in g){const C=g[I];delete C.metadata,r.push(C)}return r}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const l=e.children[n];this.add(l.clone())}return this}}yt.DefaultUp=new K(0,1,0);yt.DefaultMatrixAutoUpdate=!0;yt.DefaultMatrixWorldAutoUpdate=!0;const Sl=new K,Ws=new K,Wd=new K,Ss=new K,Vr=new K,Rr=new K,L9=new K,Sd=new K,Vd=new K,Rd=new K;class hl{constructor(e=new K,t=new K,n=new K){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,l){l.subVectors(n,t),Sl.subVectors(e,t),l.cross(Sl);const s=l.lengthSq();return s>0?l.multiplyScalar(1/Math.sqrt(s)):l.set(0,0,0)}static getBarycoord(e,t,n,l,s){Sl.subVectors(l,t),Ws.subVectors(n,t),Wd.subVectors(e,t);const o=Sl.dot(Sl),g=Sl.dot(Ws),r=Sl.dot(Wd),I=Ws.dot(Ws),C=Ws.dot(Wd),u=o*I-g*g;if(u===0)return s.set(-2,-1,-1);const d=1/u,A=(I*r-g*C)*d,m=(o*C-g*r)*d;return s.set(1-A-m,m,A)}static containsPoint(e,t,n,l){return this.getBarycoord(e,t,n,l,Ss),Ss.x>=0&&Ss.y>=0&&Ss.x+Ss.y<=1}static getUV(e,t,n,l,s,o,g,r){return this.getBarycoord(e,t,n,l,Ss),r.set(0,0),r.addScaledVector(s,Ss.x),r.addScaledVector(o,Ss.y),r.addScaledVector(g,Ss.z),r}static isFrontFacing(e,t,n,l){return Sl.subVectors(n,t),Ws.subVectors(e,t),Sl.cross(Ws).dot(l)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,l){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[l]),this}setFromAttributeAndIndices(e,t,n,l){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,l),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Sl.subVectors(this.c,this.b),Ws.subVectors(this.a,this.b),Sl.cross(Ws).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return hl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return hl.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,l,s){return hl.getUV(e,this.a,this.b,this.c,t,n,l,s)}containsPoint(e){return hl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return hl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,l=this.b,s=this.c;let o,g;Vr.subVectors(l,n),Rr.subVectors(s,n),Sd.subVectors(e,n);const r=Vr.dot(Sd),I=Rr.dot(Sd);if(r<=0&&I<=0)return t.copy(n);Vd.subVectors(e,l);const C=Vr.dot(Vd),u=Rr.dot(Vd);if(C>=0&&u<=C)return t.copy(l);const d=r*u-C*I;if(d<=0&&r>=0&&C<=0)return o=r/(r-C),t.copy(n).addScaledVector(Vr,o);Rd.subVectors(e,s);const A=Vr.dot(Rd),m=Rr.dot(Rd);if(m>=0&&A<=m)return t.copy(s);const f=A*I-r*m;if(f<=0&&I>=0&&m<=0)return g=I/(I-m),t.copy(n).addScaledVector(Rr,g);const p=C*m-A*u;if(p<=0&&u-C>=0&&A-m>=0)return L9.subVectors(s,l),g=(u-C)/(u-C+(A-m)),t.copy(l).addScaledVector(L9,g);const b=1/(p+f+d);return o=f*b,g=d*b,t.copy(n).addScaledVector(Vr,o).addScaledVector(Rr,g)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let nx=0;class vn extends hs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nx++}),this.uuid=Ji(),this.name="",this.type="Material",this.blending=_g,this.side=To,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=PA,this.blendDst=OA,this.blendEquation=wg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=n2,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Df,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=q0,this.stencilZFail=q0,this.stencilZPass=q0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const l=this[t];if(l===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}l&&l.isColor?l.set(n):l&&l.isVector3&&n&&n.isVector3?l.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_g&&(n.blending=this.blending),this.side!==To&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function l(s){const o=[];for(const g in s){const r=s[g];delete r.metadata,o.push(r)}return o}if(t){const s=l(e.textures),o=l(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const l=t.length;n=new Array(l);for(let s=0;s!==l;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ki extends vn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=HI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Bn=new K,ZC=new me;class Ft{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=BI,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let l=0,s=this.itemSize;l<s;l++)this.array[e+l]=t.array[n+l];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)ZC.fromBufferAttribute(this,t),ZC.applyMatrix3(e),this.setXY(t,ZC.x,ZC.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Bn.fromBufferAttribute(this,t),Bn.applyMatrix3(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Bn.fromBufferAttribute(this,t),Bn.applyMatrix4(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Bn.fromBufferAttribute(this,t),Bn.applyNormalMatrix(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Bn.fromBufferAttribute(this,t),Bn.transformDirection(e),this.setXYZ(t,Bn.x,Bn.y,Bn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),n=Tt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,l){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),n=Tt(n,this.array),l=Tt(l,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=l,this}setXYZW(e,t,n,l,s){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),n=Tt(n,this.array),l=Tt(l,this.array),s=Tt(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=l,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==BI&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class ix extends Ft{constructor(e,t,n){super(new Int8Array(e),t,n)}}class lx extends Ft{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class sx extends Ft{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class ox extends Ft{constructor(e,t,n){super(new Int16Array(e),t,n)}}class lh extends Ft{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class gx extends Ft{constructor(e,t,n){super(new Int32Array(e),t,n)}}class sh extends Ft{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class rx extends Ft{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class ke extends Ft{constructor(e,t,n){super(new Float32Array(e),t,n)}}class ax extends Ft{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Ix=0;const Il=new st,Xd=new yt,Xr=new K,Ni=new eg,G1=new eg,Hn=new K;class ut extends hs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ix++}),this.uuid=Ji(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jf(e)?sh:lh)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Wi().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const l=this.attributes.tangent;return l!==void 0&&(l.transformDirection(e),l.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Il.makeRotationFromQuaternion(e),this.applyMatrix4(Il),this}rotateX(e){return Il.makeRotationX(e),this.applyMatrix4(Il),this}rotateY(e){return Il.makeRotationY(e),this.applyMatrix4(Il),this}rotateZ(e){return Il.makeRotationZ(e),this.applyMatrix4(Il),this}translate(e,t,n){return Il.makeTranslation(e,t,n),this.applyMatrix4(Il),this}scale(e,t,n){return Il.makeScale(e,t,n),this.applyMatrix4(Il),this}lookAt(e){return Xd.lookAt(e),Xd.updateMatrix(),this.applyMatrix4(Xd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xr).negate(),this.translate(Xr.x,Xr.y,Xr.z),this}setFromPoints(e){const t=[];for(let n=0,l=e.length;n<l;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ke(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new eg);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,l=t.length;n<l;n++){const s=t[n];Ni.setFromBufferAttribute(s),this.morphTargetsRelative?(Hn.addVectors(this.boundingBox.min,Ni.min),this.boundingBox.expandByPoint(Hn),Hn.addVectors(this.boundingBox.max,Ni.max),this.boundingBox.expandByPoint(Hn)):(this.boundingBox.expandByPoint(Ni.min),this.boundingBox.expandByPoint(Ni.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new tg);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new K,1/0);return}if(e){const n=this.boundingSphere.center;if(Ni.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const g=t[s];G1.setFromBufferAttribute(g),this.morphTargetsRelative?(Hn.addVectors(Ni.min,G1.min),Ni.expandByPoint(Hn),Hn.addVectors(Ni.max,G1.max),Ni.expandByPoint(Hn)):(Ni.expandByPoint(G1.min),Ni.expandByPoint(G1.max))}Ni.getCenter(n);let l=0;for(let s=0,o=e.count;s<o;s++)Hn.fromBufferAttribute(e,s),l=Math.max(l,n.distanceToSquared(Hn));if(t)for(let s=0,o=t.length;s<o;s++){const g=t[s],r=this.morphTargetsRelative;for(let I=0,C=g.count;I<C;I++)Hn.fromBufferAttribute(g,I),r&&(Xr.fromBufferAttribute(e,I),Hn.add(Xr)),l=Math.max(l,n.distanceToSquared(Hn))}this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,l=t.position.array,s=t.normal.array,o=t.uv.array,g=l.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ft(new Float32Array(4*g),4));const r=this.getAttribute("tangent").array,I=[],C=[];for(let X=0;X<g;X++)I[X]=new K,C[X]=new K;const u=new K,d=new K,A=new K,m=new me,f=new me,p=new me,b=new K,B=new K;function y(X,k,$){u.fromArray(l,X*3),d.fromArray(l,k*3),A.fromArray(l,$*3),m.fromArray(o,X*2),f.fromArray(o,k*2),p.fromArray(o,$*2),d.sub(u),A.sub(u),f.sub(m),p.sub(m);const Q=1/(f.x*p.y-p.x*f.y);!isFinite(Q)||(b.copy(d).multiplyScalar(p.y).addScaledVector(A,-f.y).multiplyScalar(Q),B.copy(A).multiplyScalar(f.x).addScaledVector(d,-p.x).multiplyScalar(Q),I[X].add(b),I[k].add(b),I[$].add(b),C[X].add(B),C[k].add(B),C[$].add(B))}let Z=this.groups;Z.length===0&&(Z=[{start:0,count:n.length}]);for(let X=0,k=Z.length;X<k;++X){const $=Z[X],Q=$.start,E=$.count;for(let te=Q,se=Q+E;te<se;te+=3)y(n[te+0],n[te+1],n[te+2])}const q=new K,W=new K,S=new K,x=new K;function V(X){S.fromArray(s,X*3),x.copy(S);const k=I[X];q.copy(k),q.sub(S.multiplyScalar(S.dot(k))).normalize(),W.crossVectors(x,k);const Q=W.dot(C[X])<0?-1:1;r[X*4]=q.x,r[X*4+1]=q.y,r[X*4+2]=q.z,r[X*4+3]=Q}for(let X=0,k=Z.length;X<k;++X){const $=Z[X],Q=$.start,E=$.count;for(let te=Q,se=Q+E;te<se;te+=3)V(n[te+0]),V(n[te+1]),V(n[te+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ft(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,A=n.count;d<A;d++)n.setXYZ(d,0,0,0);const l=new K,s=new K,o=new K,g=new K,r=new K,I=new K,C=new K,u=new K;if(e)for(let d=0,A=e.count;d<A;d+=3){const m=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);l.fromBufferAttribute(t,m),s.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),C.subVectors(o,s),u.subVectors(l,s),C.cross(u),g.fromBufferAttribute(n,m),r.fromBufferAttribute(n,f),I.fromBufferAttribute(n,p),g.add(C),r.add(C),I.add(C),n.setXYZ(m,g.x,g.y,g.z),n.setXYZ(f,r.x,r.y,r.z),n.setXYZ(p,I.x,I.y,I.z)}else for(let d=0,A=t.count;d<A;d+=3)l.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),C.subVectors(o,s),u.subVectors(l,s),C.cross(u),n.setXYZ(d+0,C.x,C.y,C.z),n.setXYZ(d+1,C.x,C.y,C.z),n.setXYZ(d+2,C.x,C.y,C.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Hn.fromBufferAttribute(e,t),Hn.normalize(),e.setXYZ(t,Hn.x,Hn.y,Hn.z)}toNonIndexed(){function e(g,r){const I=g.array,C=g.itemSize,u=g.normalized,d=new I.constructor(r.length*C);let A=0,m=0;for(let f=0,p=r.length;f<p;f++){g.isInterleavedBufferAttribute?A=r[f]*g.data.stride+g.offset:A=r[f]*C;for(let b=0;b<C;b++)d[m++]=I[A++]}return new Ft(d,C,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ut,n=this.index.array,l=this.attributes;for(const g in l){const r=l[g],I=e(r,n);t.setAttribute(g,I)}const s=this.morphAttributes;for(const g in s){const r=[],I=s[g];for(let C=0,u=I.length;C<u;C++){const d=I[C],A=e(d,n);r.push(A)}t.morphAttributes[g]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let g=0,r=o.length;g<r;g++){const I=o[g];t.addGroup(I.start,I.count,I.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const r=this.parameters;for(const I in r)r[I]!==void 0&&(e[I]=r[I]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const r in n){const I=n[r];e.data.attributes[r]=I.toJSON(e.data)}const l={};let s=!1;for(const r in this.morphAttributes){const I=this.morphAttributes[r],C=[];for(let u=0,d=I.length;u<d;u++){const A=I[u];C.push(A.toJSON(e.data))}C.length>0&&(l[r]=C,s=!0)}s&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const g=this.boundingSphere;return g!==null&&(e.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const l=e.attributes;for(const I in l){const C=l[I];this.setAttribute(I,C.clone(t))}const s=e.morphAttributes;for(const I in s){const C=[],u=s[I];for(let d=0,A=u.length;d<A;d++)C.push(u[d].clone(t));this.morphAttributes[I]=C}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let I=0,C=o.length;I<C;I++){const u=o[I];this.addGroup(u.start,u.count,u.materialIndex)}const g=e.boundingBox;g!==null&&(this.boundingBox=g.clone());const r=e.boundingSphere;return r!==null&&(this.boundingSphere=r.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const _9=new st,Yr=new MI,Yd=new tg,fo=new K,bo=new K,Go=new K,zd=new K,Kd=new K,Hd=new K,vC=new K,xC=new K,qC=new K,wC=new me,WC=new me,SC=new me,Nd=new K,VC=new K;class Mn extends yt{constructor(e=new ut,t=new ki){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const l=t[n[0]];if(l!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=l.length;s<o;s++){const g=l[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=s}}}}raycast(e,t){const n=this.geometry,l=this.material,s=this.matrixWorld;if(l===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Yd.copy(n.boundingSphere),Yd.applyMatrix4(s),e.ray.intersectsSphere(Yd)===!1)||(_9.copy(s).invert(),Yr.copy(e.ray).applyMatrix4(_9),n.boundingBox!==null&&Yr.intersectsBox(n.boundingBox)===!1))return;let o;const g=n.index,r=n.attributes.position,I=n.morphAttributes.position,C=n.morphTargetsRelative,u=n.attributes.uv,d=n.attributes.uv2,A=n.groups,m=n.drawRange;if(g!==null)if(Array.isArray(l))for(let f=0,p=A.length;f<p;f++){const b=A[f],B=l[b.materialIndex],y=Math.max(b.start,m.start),Z=Math.min(g.count,Math.min(b.start+b.count,m.start+m.count));for(let q=y,W=Z;q<W;q+=3){const S=g.getX(q),x=g.getX(q+1),V=g.getX(q+2);o=RC(this,B,e,Yr,r,I,C,u,d,S,x,V),o&&(o.faceIndex=Math.floor(q/3),o.face.materialIndex=b.materialIndex,t.push(o))}}else{const f=Math.max(0,m.start),p=Math.min(g.count,m.start+m.count);for(let b=f,B=p;b<B;b+=3){const y=g.getX(b),Z=g.getX(b+1),q=g.getX(b+2);o=RC(this,l,e,Yr,r,I,C,u,d,y,Z,q),o&&(o.faceIndex=Math.floor(b/3),t.push(o))}}else if(r!==void 0)if(Array.isArray(l))for(let f=0,p=A.length;f<p;f++){const b=A[f],B=l[b.materialIndex],y=Math.max(b.start,m.start),Z=Math.min(r.count,Math.min(b.start+b.count,m.start+m.count));for(let q=y,W=Z;q<W;q+=3){const S=q,x=q+1,V=q+2;o=RC(this,B,e,Yr,r,I,C,u,d,S,x,V),o&&(o.faceIndex=Math.floor(q/3),o.face.materialIndex=b.materialIndex,t.push(o))}}else{const f=Math.max(0,m.start),p=Math.min(r.count,m.start+m.count);for(let b=f,B=p;b<B;b+=3){const y=b,Z=b+1,q=b+2;o=RC(this,l,e,Yr,r,I,C,u,d,y,Z,q),o&&(o.faceIndex=Math.floor(b/3),t.push(o))}}}}function cx(i,e,t,n,l,s,o,g){let r;if(e.side===Ei?r=n.intersectTriangle(o,s,l,!0,g):r=n.intersectTriangle(l,s,o,e.side!==Hl,g),r===null)return null;VC.copy(g),VC.applyMatrix4(i.matrixWorld);const I=t.ray.origin.distanceTo(VC);return I<t.near||I>t.far?null:{distance:I,point:VC.clone(),object:i}}function RC(i,e,t,n,l,s,o,g,r,I,C,u){fo.fromBufferAttribute(l,I),bo.fromBufferAttribute(l,C),Go.fromBufferAttribute(l,u);const d=i.morphTargetInfluences;if(s&&d){vC.set(0,0,0),xC.set(0,0,0),qC.set(0,0,0);for(let m=0,f=s.length;m<f;m++){const p=d[m],b=s[m];p!==0&&(zd.fromBufferAttribute(b,I),Kd.fromBufferAttribute(b,C),Hd.fromBufferAttribute(b,u),o?(vC.addScaledVector(zd,p),xC.addScaledVector(Kd,p),qC.addScaledVector(Hd,p)):(vC.addScaledVector(zd.sub(fo),p),xC.addScaledVector(Kd.sub(bo),p),qC.addScaledVector(Hd.sub(Go),p)))}fo.add(vC),bo.add(xC),Go.add(qC)}i.isSkinnedMesh&&(i.boneTransform(I,fo),i.boneTransform(C,bo),i.boneTransform(u,Go));const A=cx(i,e,t,n,fo,bo,Go,Nd);if(A){g&&(wC.fromBufferAttribute(g,I),WC.fromBufferAttribute(g,C),SC.fromBufferAttribute(g,u),A.uv=hl.getUV(Nd,fo,bo,Go,wC,WC,SC,new me)),r&&(wC.fromBufferAttribute(r,I),WC.fromBufferAttribute(r,C),SC.fromBufferAttribute(r,u),A.uv2=hl.getUV(Nd,fo,bo,Go,wC,WC,SC,new me));const m={a:I,b:C,c:u,normal:new K,materialIndex:0};hl.getNormal(fo,bo,Go,m.normal),A.face=m}return A}class ng extends ut{constructor(e=1,t=1,n=1,l=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:l,heightSegments:s,depthSegments:o};const g=this;l=Math.floor(l),s=Math.floor(s),o=Math.floor(o);const r=[],I=[],C=[],u=[];let d=0,A=0;m("z","y","x",-1,-1,n,t,e,o,s,0),m("z","y","x",1,-1,n,t,-e,o,s,1),m("x","z","y",1,1,e,n,t,l,o,2),m("x","z","y",1,-1,e,n,-t,l,o,3),m("x","y","z",1,-1,e,t,n,l,s,4),m("x","y","z",-1,-1,e,t,-n,l,s,5),this.setIndex(r),this.setAttribute("position",new ke(I,3)),this.setAttribute("normal",new ke(C,3)),this.setAttribute("uv",new ke(u,2));function m(f,p,b,B,y,Z,q,W,S,x,V){const X=Z/S,k=q/x,$=Z/2,Q=q/2,E=W/2,te=S+1,se=x+1;let oe=0,R=0;const Y=new K;for(let H=0;H<se;H++){const J=H*k-Q;for(let P=0;P<te;P++){const ne=P*X-$;Y[f]=ne*B,Y[p]=J*y,Y[b]=E,I.push(Y.x,Y.y,Y.z),Y[f]=0,Y[p]=0,Y[b]=W>0?1:-1,C.push(Y.x,Y.y,Y.z),u.push(P/S),u.push(1-H/x),oe+=1}}for(let H=0;H<x;H++)for(let J=0;J<S;J++){const P=d+J+te*H,ne=d+J+te*(H+1),fe=d+(J+1)+te*(H+1),We=d+(J+1)+te*H;r.push(P,ne,We),r.push(ne,fe,We),R+=6}g.addGroup(A,R,V),A+=R,d+=oe}}static fromJSON(e){return new ng(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function xa(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const l=i[t][n];l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?e[t][n]=l.clone():Array.isArray(l)?e[t][n]=l.slice():e[t][n]=l}}return e}function ri(i){const e={};for(let t=0;t<i.length;t++){const n=xa(i[t]);for(const l in n)e[l]=n[l]}return e}function Cx(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}const eb={clone:xa,merge:ri};var ux=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,dx=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class kl extends vn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ux,this.fragmentShader=dx,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=xa(e.uniforms),this.uniformsGroups=Cx(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const l in this.uniforms){const o=this.uniforms[l].value;o&&o.isTexture?t.uniforms[l]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[l]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[l]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[l]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[l]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[l]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[l]={type:"m4",value:o.toArray()}:t.uniforms[l]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const l in this.extensions)this.extensions[l]===!0&&(n[l]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class FI extends yt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new st,this.projectionMatrix=new st,this.projectionMatrixInverse=new st}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Et extends FI{constructor(e=50,t=1,n=.1,l=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=l,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=ZI*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Tg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ZI*2*Math.atan(Math.tan(Tg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,l,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=l,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Tg*.5*this.fov)/this.zoom,n=2*t,l=this.aspect*n,s=-.5*l;const o=this.view;if(this.view!==null&&this.view.enabled){const r=o.fullWidth,I=o.fullHeight;s+=o.offsetX*l/r,t-=o.offsetY*n/I,l*=o.width/r,n*=o.height/I}const g=this.filmOffset;g!==0&&(s+=e*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+l,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const zr=90,Kr=1;class tb extends yt{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const l=new Et(zr,Kr,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new K(1,0,0)),this.add(l);const s=new Et(zr,Kr,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new K(-1,0,0)),this.add(s);const o=new Et(zr,Kr,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new K(0,1,0)),this.add(o);const g=new Et(zr,Kr,e,t);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(new K(0,-1,0)),this.add(g);const r=new Et(zr,Kr,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new K(0,0,1)),this.add(r);const I=new Et(zr,Kr,e,t);I.layers=this.layers,I.up.set(0,-1,0),I.lookAt(new K(0,0,-1)),this.add(I)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[l,s,o,g,r,I]=this.children,C=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=Fl,e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,l),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,g),e.setRenderTarget(n,4),e.render(t,r),n.texture.generateMipmaps=A,e.setRenderTarget(n,5),e.render(t,I),e.setRenderTarget(C),e.toneMapping=u,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class LI extends un{constructor(e,t,n,l,s,o,g,r,I,C){e=e!==void 0?e:[],t=t!==void 0?t:Eo,super(e,t,n,l,s,o,g,r,I,C),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class nb extends Di{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},l=[n,n,n,n,n,n];this.texture=new LI(l,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Pt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},l=new ng(5,5,5),s=new kl({name:"CubemapFromEquirect",uniforms:xa(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ei,blending:Ts});s.uniforms.tEquirect.value=t;const o=new Mn(l,s),g=t.minFilter;return t.minFilter===js&&(t.minFilter=Pt),new tb(1,10,this).update(e,o),t.minFilter=g,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,l){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,l);e.setRenderTarget(s)}}const Md=new K,Ax=new K,hx=new Wi;class xo{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,l){return this.normal.set(e,t,n),this.constant=l,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const l=Md.subVectors(n,t).cross(Ax.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(l,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Md),l=this.normal.dot(n);if(l===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/l;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||hx.getNormalMatrix(e),l=this.coplanarPoint(Md).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-l.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hr=new tg,XC=new K;class w2{constructor(e=new xo,t=new xo,n=new xo,l=new xo,s=new xo,o=new xo){this.planes=[e,t,n,l,s,o]}set(e,t,n,l,s,o){const g=this.planes;return g[0].copy(e),g[1].copy(t),g[2].copy(n),g[3].copy(l),g[4].copy(s),g[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,l=n[0],s=n[1],o=n[2],g=n[3],r=n[4],I=n[5],C=n[6],u=n[7],d=n[8],A=n[9],m=n[10],f=n[11],p=n[12],b=n[13],B=n[14],y=n[15];return t[0].setComponents(g-l,u-r,f-d,y-p).normalize(),t[1].setComponents(g+l,u+r,f+d,y+p).normalize(),t[2].setComponents(g+s,u+I,f+A,y+b).normalize(),t[3].setComponents(g-s,u-I,f-A,y-b).normalize(),t[4].setComponents(g-o,u-C,f-m,y-B).normalize(),t[5].setComponents(g+o,u+C,f+m,y+B).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Hr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Hr)}intersectsSprite(e){return Hr.center.set(0,0,0),Hr.radius=.7071067811865476,Hr.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hr)}intersectsSphere(e){const t=this.planes,n=e.center,l=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<l)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const l=t[n];if(XC.x=l.normal.x>0?e.max.x:e.min.x,XC.y=l.normal.y>0?e.max.y:e.min.y,XC.z=l.normal.z>0?e.max.z:e.min.z,l.distanceToPoint(XC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ib(){let i=null,e=!1,t=null,n=null;function l(s,o){t(s,o),n=i.requestAnimationFrame(l)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(l),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function mx(i,e){const t=e.isWebGL2,n=new WeakMap;function l(I,C){const u=I.array,d=I.usage,A=i.createBuffer();i.bindBuffer(C,A),i.bufferData(C,u,d),I.onUploadCallback();let m;if(u instanceof Float32Array)m=5126;else if(u instanceof Uint16Array)if(I.isFloat16BufferAttribute)if(t)m=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=5123;else if(u instanceof Int16Array)m=5122;else if(u instanceof Uint32Array)m=5125;else if(u instanceof Int32Array)m=5124;else if(u instanceof Int8Array)m=5120;else if(u instanceof Uint8Array)m=5121;else if(u instanceof Uint8ClampedArray)m=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:A,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:I.version}}function s(I,C,u){const d=C.array,A=C.updateRange;i.bindBuffer(u,I),A.count===-1?i.bufferSubData(u,0,d):(t?i.bufferSubData(u,A.offset*d.BYTES_PER_ELEMENT,d,A.offset,A.count):i.bufferSubData(u,A.offset*d.BYTES_PER_ELEMENT,d.subarray(A.offset,A.offset+A.count)),A.count=-1)}function o(I){return I.isInterleavedBufferAttribute&&(I=I.data),n.get(I)}function g(I){I.isInterleavedBufferAttribute&&(I=I.data);const C=n.get(I);C&&(i.deleteBuffer(C.buffer),n.delete(I))}function r(I,C){if(I.isGLBufferAttribute){const d=n.get(I);(!d||d.version<I.version)&&n.set(I,{buffer:I.buffer,type:I.type,bytesPerElement:I.elementSize,version:I.version});return}I.isInterleavedBufferAttribute&&(I=I.data);const u=n.get(I);u===void 0?n.set(I,l(I,C)):u.version<I.version&&(s(u.buffer,I,C),u.version=I.version)}return{get:o,remove:g,update:r}}class Ka extends ut{constructor(e=1,t=1,n=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:l};const s=e/2,o=t/2,g=Math.floor(n),r=Math.floor(l),I=g+1,C=r+1,u=e/g,d=t/r,A=[],m=[],f=[],p=[];for(let b=0;b<C;b++){const B=b*d-o;for(let y=0;y<I;y++){const Z=y*u-s;m.push(Z,-B,0),f.push(0,0,1),p.push(y/g),p.push(1-b/r)}}for(let b=0;b<r;b++)for(let B=0;B<g;B++){const y=B+I*b,Z=B+I*(b+1),q=B+1+I*(b+1),W=B+1+I*b;A.push(y,Z,W),A.push(Z,q,W)}this.setIndex(A),this.setAttribute("position",new ke(m,3)),this.setAttribute("normal",new ke(f,3)),this.setAttribute("uv",new ke(p,2))}static fromJSON(e){return new Ka(e.width,e.height,e.widthSegments,e.heightSegments)}}var px=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,fx=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bx=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Gx=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,yx=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Bx=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Zx="vec3 transformed = vec3( position );",vx=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xx=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,qx=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,wx=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Wx=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Sx=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Vx=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Rx=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Xx=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Yx=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zx=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Kx=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Hx=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Nx=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Mx=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Fx=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Lx=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,_x=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,kx=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Tx="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ex=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Jx=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ux=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Dx=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Qx=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Px=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ox=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,jx=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$x=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,eq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,nq=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,iq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,sq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,oq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,gq=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,rq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,aq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Iq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Cq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,uq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dq=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Aq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,mq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,bq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Gq=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,yq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Bq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Zq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,xq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,qq=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,wq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Wq=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Sq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Vq=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Rq=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Xq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Yq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zq=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Kq=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Hq=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Nq=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Mq=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Fq=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Lq=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,_q=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,kq=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Tq=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Eq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Jq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Uq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Dq=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Qq=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Pq=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Oq=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,jq=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$q=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ew=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,tw=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nw=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,iw=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,lw=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,sw=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ow=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gw=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,rw=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,aw=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Iw=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,cw=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Cw=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uw=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,dw=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Aw=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const hw=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mw=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,pw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fw=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,bw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Gw=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,yw=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Bw=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Zw=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,vw=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,xw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qw=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ww=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ww=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Sw=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Vw=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rw=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xw=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yw=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zw=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kw=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Hw=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Nw=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mw=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fw=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Lw=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_w=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kw=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tw=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ew=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Jw=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Uw=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Dw=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qw=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ht={alphamap_fragment:px,alphamap_pars_fragment:fx,alphatest_fragment:bx,alphatest_pars_fragment:Gx,aomap_fragment:yx,aomap_pars_fragment:Bx,begin_vertex:Zx,beginnormal_vertex:vx,bsdfs:xx,iridescence_fragment:qx,bumpmap_pars_fragment:wx,clipping_planes_fragment:Wx,clipping_planes_pars_fragment:Sx,clipping_planes_pars_vertex:Vx,clipping_planes_vertex:Rx,color_fragment:Xx,color_pars_fragment:Yx,color_pars_vertex:zx,color_vertex:Kx,common:Hx,cube_uv_reflection_fragment:Nx,defaultnormal_vertex:Mx,displacementmap_pars_vertex:Fx,displacementmap_vertex:Lx,emissivemap_fragment:_x,emissivemap_pars_fragment:kx,encodings_fragment:Tx,encodings_pars_fragment:Ex,envmap_fragment:Jx,envmap_common_pars_fragment:Ux,envmap_pars_fragment:Dx,envmap_pars_vertex:Qx,envmap_physical_pars_fragment:gq,envmap_vertex:Px,fog_vertex:Ox,fog_pars_vertex:jx,fog_fragment:$x,fog_pars_fragment:eq,gradientmap_pars_fragment:tq,lightmap_fragment:nq,lightmap_pars_fragment:iq,lights_lambert_fragment:lq,lights_lambert_pars_fragment:sq,lights_pars_begin:oq,lights_toon_fragment:rq,lights_toon_pars_fragment:aq,lights_phong_fragment:Iq,lights_phong_pars_fragment:cq,lights_physical_fragment:Cq,lights_physical_pars_fragment:uq,lights_fragment_begin:dq,lights_fragment_maps:Aq,lights_fragment_end:hq,logdepthbuf_fragment:mq,logdepthbuf_pars_fragment:pq,logdepthbuf_pars_vertex:fq,logdepthbuf_vertex:bq,map_fragment:Gq,map_pars_fragment:yq,map_particle_fragment:Bq,map_particle_pars_fragment:Zq,metalnessmap_fragment:vq,metalnessmap_pars_fragment:xq,morphcolor_vertex:qq,morphnormal_vertex:wq,morphtarget_pars_vertex:Wq,morphtarget_vertex:Sq,normal_fragment_begin:Vq,normal_fragment_maps:Rq,normal_pars_fragment:Xq,normal_pars_vertex:Yq,normal_vertex:zq,normalmap_pars_fragment:Kq,clearcoat_normal_fragment_begin:Hq,clearcoat_normal_fragment_maps:Nq,clearcoat_pars_fragment:Mq,iridescence_pars_fragment:Fq,output_fragment:Lq,packing:_q,premultiplied_alpha_fragment:kq,project_vertex:Tq,dithering_fragment:Eq,dithering_pars_fragment:Jq,roughnessmap_fragment:Uq,roughnessmap_pars_fragment:Dq,shadowmap_pars_fragment:Qq,shadowmap_pars_vertex:Pq,shadowmap_vertex:Oq,shadowmask_pars_fragment:jq,skinbase_vertex:$q,skinning_pars_vertex:ew,skinning_vertex:tw,skinnormal_vertex:nw,specularmap_fragment:iw,specularmap_pars_fragment:lw,tonemapping_fragment:sw,tonemapping_pars_fragment:ow,transmission_fragment:gw,transmission_pars_fragment:rw,uv_pars_fragment:aw,uv_pars_vertex:Iw,uv_vertex:cw,uv2_pars_fragment:Cw,uv2_pars_vertex:uw,uv2_vertex:dw,worldpos_vertex:Aw,background_vert:hw,background_frag:mw,backgroundCube_vert:pw,backgroundCube_frag:fw,cube_vert:bw,cube_frag:Gw,depth_vert:yw,depth_frag:Bw,distanceRGBA_vert:Zw,distanceRGBA_frag:vw,equirect_vert:xw,equirect_frag:qw,linedashed_vert:ww,linedashed_frag:Ww,meshbasic_vert:Sw,meshbasic_frag:Vw,meshlambert_vert:Rw,meshlambert_frag:Xw,meshmatcap_vert:Yw,meshmatcap_frag:zw,meshnormal_vert:Kw,meshnormal_frag:Hw,meshphong_vert:Nw,meshphong_frag:Mw,meshphysical_vert:Fw,meshphysical_frag:Lw,meshtoon_vert:_w,meshtoon_frag:kw,points_vert:Tw,points_frag:Ew,shadow_vert:Jw,shadow_frag:Uw,sprite_vert:Dw,sprite_frag:Qw},Re={common:{diffuse:{value:new Ve(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wi},uv2Transform:{value:new Wi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ve(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ve(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wi}},sprite:{diffuse:{value:new Ve(16777215)},opacity:{value:1},center:{value:new me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wi}}},Kl={basic:{uniforms:ri([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:ht.meshbasic_vert,fragmentShader:ht.meshbasic_frag},lambert:{uniforms:ri([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Ve(0)}}]),vertexShader:ht.meshlambert_vert,fragmentShader:ht.meshlambert_frag},phong:{uniforms:ri([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Ve(0)},specular:{value:new Ve(1118481)},shininess:{value:30}}]),vertexShader:ht.meshphong_vert,fragmentShader:ht.meshphong_frag},standard:{uniforms:ri([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new Ve(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag},toon:{uniforms:ri([Re.common,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new Ve(0)}}]),vertexShader:ht.meshtoon_vert,fragmentShader:ht.meshtoon_frag},matcap:{uniforms:ri([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:ht.meshmatcap_vert,fragmentShader:ht.meshmatcap_frag},points:{uniforms:ri([Re.points,Re.fog]),vertexShader:ht.points_vert,fragmentShader:ht.points_frag},dashed:{uniforms:ri([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ht.linedashed_vert,fragmentShader:ht.linedashed_frag},depth:{uniforms:ri([Re.common,Re.displacementmap]),vertexShader:ht.depth_vert,fragmentShader:ht.depth_frag},normal:{uniforms:ri([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:ht.meshnormal_vert,fragmentShader:ht.meshnormal_frag},sprite:{uniforms:ri([Re.sprite,Re.fog]),vertexShader:ht.sprite_vert,fragmentShader:ht.sprite_frag},background:{uniforms:{uvTransform:{value:new Wi},t2D:{value:null}},vertexShader:ht.background_vert,fragmentShader:ht.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:ht.backgroundCube_vert,fragmentShader:ht.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ht.cube_vert,fragmentShader:ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ht.equirect_vert,fragmentShader:ht.equirect_frag},distanceRGBA:{uniforms:ri([Re.common,Re.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ht.distanceRGBA_vert,fragmentShader:ht.distanceRGBA_frag},shadow:{uniforms:ri([Re.lights,Re.fog,{color:{value:new Ve(0)},opacity:{value:1}}]),vertexShader:ht.shadow_vert,fragmentShader:ht.shadow_frag}};Kl.physical={uniforms:ri([Kl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new me(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ve(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ve(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ve(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag};function Pw(i,e,t,n,l,s,o){const g=new Ve(0);let r=s===!0?0:1,I,C,u=null,d=0,A=null;function m(p,b){let B=!1,y=b.isScene===!0?b.background:null;y&&y.isTexture&&(y=(b.backgroundBlurriness>0?t:e).get(y));const Z=i.xr,q=Z.getSession&&Z.getSession();q&&q.environmentBlendMode==="additive"&&(y=null),y===null?f(g,r):y&&y.isColor&&(f(y,1),B=!0),(i.autoClear||B)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),y&&(y.isCubeTexture||y.mapping===za)?(C===void 0&&(C=new Mn(new ng(1,1,1),new kl({name:"BackgroundCubeMaterial",uniforms:xa(Kl.backgroundCube.uniforms),vertexShader:Kl.backgroundCube.vertexShader,fragmentShader:Kl.backgroundCube.fragmentShader,side:Ei,depthTest:!1,depthWrite:!1,fog:!1})),C.geometry.deleteAttribute("normal"),C.geometry.deleteAttribute("uv"),C.onBeforeRender=function(W,S,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(C.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(C)),C.material.uniforms.envMap.value=y,C.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,C.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,(u!==y||d!==y.version||A!==i.toneMapping)&&(C.material.needsUpdate=!0,u=y,d=y.version,A=i.toneMapping),C.layers.enableAll(),p.unshift(C,C.geometry,C.material,0,0,null)):y&&y.isTexture&&(I===void 0&&(I=new Mn(new Ka(2,2),new kl({name:"BackgroundMaterial",uniforms:xa(Kl.background.uniforms),vertexShader:Kl.background.vertexShader,fragmentShader:Kl.background.fragmentShader,side:To,depthTest:!1,depthWrite:!1,fog:!1})),I.geometry.deleteAttribute("normal"),Object.defineProperty(I.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(I)),I.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),I.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||d!==y.version||A!==i.toneMapping)&&(I.material.needsUpdate=!0,u=y,d=y.version,A=i.toneMapping),I.layers.enableAll(),p.unshift(I,I.geometry,I.material,0,0,null))}function f(p,b){n.buffers.color.setClear(p.r,p.g,p.b,b,o)}return{getClearColor:function(){return g},setClearColor:function(p,b=1){g.set(p),r=b,f(g,r)},getClearAlpha:function(){return r},setClearAlpha:function(p){r=p,f(g,r)},render:m}}function Ow(i,e,t,n){const l=i.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,g={},r=p(null);let I=r,C=!1;function u(E,te,se,oe,R){let Y=!1;if(o){const H=f(oe,se,te);I!==H&&(I=H,A(I.object)),Y=b(E,oe,se,R),Y&&B(E,oe,se,R)}else{const H=te.wireframe===!0;(I.geometry!==oe.id||I.program!==se.id||I.wireframe!==H)&&(I.geometry=oe.id,I.program=se.id,I.wireframe=H,Y=!0)}R!==null&&t.update(R,34963),(Y||C)&&(C=!1,x(E,te,se,oe),R!==null&&i.bindBuffer(34963,t.get(R).buffer))}function d(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}function A(E){return n.isWebGL2?i.bindVertexArray(E):s.bindVertexArrayOES(E)}function m(E){return n.isWebGL2?i.deleteVertexArray(E):s.deleteVertexArrayOES(E)}function f(E,te,se){const oe=se.wireframe===!0;let R=g[E.id];R===void 0&&(R={},g[E.id]=R);let Y=R[te.id];Y===void 0&&(Y={},R[te.id]=Y);let H=Y[oe];return H===void 0&&(H=p(d()),Y[oe]=H),H}function p(E){const te=[],se=[],oe=[];for(let R=0;R<l;R++)te[R]=0,se[R]=0,oe[R]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:se,attributeDivisors:oe,object:E,attributes:{},index:null}}function b(E,te,se,oe){const R=I.attributes,Y=te.attributes;let H=0;const J=se.getAttributes();for(const P in J)if(J[P].location>=0){const fe=R[P];let We=Y[P];if(We===void 0&&(P==="instanceMatrix"&&E.instanceMatrix&&(We=E.instanceMatrix),P==="instanceColor"&&E.instanceColor&&(We=E.instanceColor)),fe===void 0||fe.attribute!==We||We&&fe.data!==We.data)return!0;H++}return I.attributesNum!==H||I.index!==oe}function B(E,te,se,oe){const R={},Y=te.attributes;let H=0;const J=se.getAttributes();for(const P in J)if(J[P].location>=0){let fe=Y[P];fe===void 0&&(P==="instanceMatrix"&&E.instanceMatrix&&(fe=E.instanceMatrix),P==="instanceColor"&&E.instanceColor&&(fe=E.instanceColor));const We={};We.attribute=fe,fe&&fe.data&&(We.data=fe.data),R[P]=We,H++}I.attributes=R,I.attributesNum=H,I.index=oe}function y(){const E=I.newAttributes;for(let te=0,se=E.length;te<se;te++)E[te]=0}function Z(E){q(E,0)}function q(E,te){const se=I.newAttributes,oe=I.enabledAttributes,R=I.attributeDivisors;se[E]=1,oe[E]===0&&(i.enableVertexAttribArray(E),oe[E]=1),R[E]!==te&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](E,te),R[E]=te)}function W(){const E=I.newAttributes,te=I.enabledAttributes;for(let se=0,oe=te.length;se<oe;se++)te[se]!==E[se]&&(i.disableVertexAttribArray(se),te[se]=0)}function S(E,te,se,oe,R,Y){n.isWebGL2===!0&&(se===5124||se===5125)?i.vertexAttribIPointer(E,te,se,R,Y):i.vertexAttribPointer(E,te,se,oe,R,Y)}function x(E,te,se,oe){if(n.isWebGL2===!1&&(E.isInstancedMesh||oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const R=oe.attributes,Y=se.getAttributes(),H=te.defaultAttributeValues;for(const J in Y){const P=Y[J];if(P.location>=0){let ne=R[J];if(ne===void 0&&(J==="instanceMatrix"&&E.instanceMatrix&&(ne=E.instanceMatrix),J==="instanceColor"&&E.instanceColor&&(ne=E.instanceColor)),ne!==void 0){const fe=ne.normalized,We=ne.itemSize,le=t.get(ne);if(le===void 0)continue;const _e=le.buffer,Te=le.type,je=le.bytesPerElement;if(ne.isInterleavedBufferAttribute){const Se=ne.data,tt=Se.stride,Ae=ne.offset;if(Se.isInstancedInterleavedBuffer){for(let Ie=0;Ie<P.locationSize;Ie++)q(P.location+Ie,Se.meshPerAttribute);E.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let Ie=0;Ie<P.locationSize;Ie++)Z(P.location+Ie);i.bindBuffer(34962,_e);for(let Ie=0;Ie<P.locationSize;Ie++)S(P.location+Ie,We/P.locationSize,Te,fe,tt*je,(Ae+We/P.locationSize*Ie)*je)}else{if(ne.isInstancedBufferAttribute){for(let Se=0;Se<P.locationSize;Se++)q(P.location+Se,ne.meshPerAttribute);E.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let Se=0;Se<P.locationSize;Se++)Z(P.location+Se);i.bindBuffer(34962,_e);for(let Se=0;Se<P.locationSize;Se++)S(P.location+Se,We/P.locationSize,Te,fe,We*je,We/P.locationSize*Se*je)}}else if(H!==void 0){const fe=H[J];if(fe!==void 0)switch(fe.length){case 2:i.vertexAttrib2fv(P.location,fe);break;case 3:i.vertexAttrib3fv(P.location,fe);break;case 4:i.vertexAttrib4fv(P.location,fe);break;default:i.vertexAttrib1fv(P.location,fe)}}}}W()}function V(){$();for(const E in g){const te=g[E];for(const se in te){const oe=te[se];for(const R in oe)m(oe[R].object),delete oe[R];delete te[se]}delete g[E]}}function X(E){if(g[E.id]===void 0)return;const te=g[E.id];for(const se in te){const oe=te[se];for(const R in oe)m(oe[R].object),delete oe[R];delete te[se]}delete g[E.id]}function k(E){for(const te in g){const se=g[te];if(se[E.id]===void 0)continue;const oe=se[E.id];for(const R in oe)m(oe[R].object),delete oe[R];delete se[E.id]}}function $(){Q(),C=!0,I!==r&&(I=r,A(I.object))}function Q(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:u,reset:$,resetDefaultState:Q,dispose:V,releaseStatesOfGeometry:X,releaseStatesOfProgram:k,initAttributes:y,enableAttribute:Z,disableUnusedAttributes:W}}function jw(i,e,t,n){const l=n.isWebGL2;let s;function o(I){s=I}function g(I,C){i.drawArrays(s,I,C),t.update(C,s,1)}function r(I,C,u){if(u===0)return;let d,A;if(l)d=i,A="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),A="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[A](s,I,C,u),t.update(C,s,u)}this.setMode=o,this.render=g,this.renderInstances=r}function $w(i,e,t){let n;function l(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const S=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(S){if(S==="highp"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";S="mediump"}return S==="mediump"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let g=t.precision!==void 0?t.precision:"highp";const r=s(g);r!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",r,"instead."),g=r);const I=o||e.has("WEBGL_draw_buffers"),C=t.logarithmicDepthBuffer===!0,u=i.getParameter(34930),d=i.getParameter(35660),A=i.getParameter(3379),m=i.getParameter(34076),f=i.getParameter(34921),p=i.getParameter(36347),b=i.getParameter(36348),B=i.getParameter(36349),y=d>0,Z=o||e.has("OES_texture_float"),q=y&&Z,W=o?i.getParameter(36183):0;return{isWebGL2:o,drawBuffers:I,getMaxAnisotropy:l,getMaxPrecision:s,precision:g,logarithmicDepthBuffer:C,maxTextures:u,maxVertexTextures:d,maxTextureSize:A,maxCubemapSize:m,maxAttributes:f,maxVertexUniforms:p,maxVaryings:b,maxFragmentUniforms:B,vertexTextures:y,floatFragmentTextures:Z,floatVertexTextures:q,maxSamples:W}}function eW(i){const e=this;let t=null,n=0,l=!1,s=!1;const o=new xo,g=new Wi,r={value:null,needsUpdate:!1};this.uniform=r,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d,A){const m=u.length!==0||d||n!==0||l;return l=d,t=C(u,A,0),n=u.length,m},this.beginShadows=function(){s=!0,C(null)},this.endShadows=function(){s=!1,I()},this.setState=function(u,d,A){const m=u.clippingPlanes,f=u.clipIntersection,p=u.clipShadows,b=i.get(u);if(!l||m===null||m.length===0||s&&!p)s?C(null):I();else{const B=s?0:n,y=B*4;let Z=b.clippingState||null;r.value=Z,Z=C(m,d,y,A);for(let q=0;q!==y;++q)Z[q]=t[q];b.clippingState=Z,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=B}};function I(){r.value!==t&&(r.value=t,r.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function C(u,d,A,m){const f=u!==null?u.length:0;let p=null;if(f!==0){if(p=r.value,m!==!0||p===null){const b=A+f*4,B=d.matrixWorldInverse;g.getNormalMatrix(B),(p===null||p.length<b)&&(p=new Float32Array(b));for(let y=0,Z=A;y!==f;++y,Z+=4)o.copy(u[y]).applyMatrix4(B,g),o.normal.toArray(p,Z),p[Z+3]=o.constant}r.value=p,r.needsUpdate=!0}return e.numPlanes=f,e.numIntersection=0,p}}function tW(i){let e=new WeakMap;function t(o,g){return g===pI?o.mapping=Eo:g===fI&&(o.mapping=Jo),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const g=o.mapping;if(g===pI||g===fI)if(e.has(o)){const r=e.get(o).texture;return t(r,o.mapping)}else{const r=o.image;if(r&&r.height>0){const I=new nb(r.height/2);return I.fromEquirectangularTexture(i,o),e.set(o,I),o.addEventListener("dispose",l),t(I.texture,o.mapping)}else return null}}return o}function l(o){const g=o.target;g.removeEventListener("dispose",l);const r=e.get(g);r!==void 0&&(e.delete(g),r.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class Ll extends FI{constructor(e=-1,t=1,n=1,l=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=l,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,l,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=l,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let s=n-e,o=n+e,g=l+t,r=l-t;if(this.view!==null&&this.view.enabled){const I=(this.right-this.left)/this.view.fullWidth/this.zoom,C=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=I*this.view.offsetX,o=s+I*this.view.width,g-=C*this.view.offsetY,r=g-C*this.view.height}this.projectionMatrix.makeOrthographic(s,o,g,r,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const oa=4,k9=[.125,.215,.35,.446,.526,.582],Wg=20,Fd=new Ll,T9=new Ve;let Ld=null;const xg=(1+Math.sqrt(5))/2,Nr=1/xg,E9=[new K(1,1,1),new K(-1,1,1),new K(1,1,-1),new K(-1,1,-1),new K(0,xg,Nr),new K(0,xg,-Nr),new K(Nr,0,xg),new K(-Nr,0,xg),new K(xg,Nr,0),new K(-xg,Nr,0)];class K3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,l=100){Ld=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,l,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=D9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=U9(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ld),e.scissorTest=!1,YC(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Eo||e.mapping===Jo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ld=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Pt,minFilter:Pt,generateMipmaps:!1,type:er,format:Li,encoding:Qs,depthBuffer:!1},l=J9(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=J9(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=nW(s)),this._blurMaterial=iW(s,e,t)}return l}_compileMaterial(e){const t=new Mn(this._lodPlanes[0],e);this._renderer.compile(t,Fd)}_sceneToCubeUV(e,t,n,l){const g=new Et(90,1,t,n),r=[1,-1,1,1,1,1],I=[1,1,1,-1,-1,-1],C=this._renderer,u=C.autoClear,d=C.toneMapping;C.getClearColor(T9),C.toneMapping=Fl,C.autoClear=!1;const A=new ki({name:"PMREM.Background",side:Ei,depthWrite:!1,depthTest:!1}),m=new Mn(new ng,A);let f=!1;const p=e.background;p?p.isColor&&(A.color.copy(p),e.background=null,f=!0):(A.color.copy(T9),f=!0);for(let b=0;b<6;b++){const B=b%3;B===0?(g.up.set(0,r[b],0),g.lookAt(I[b],0,0)):B===1?(g.up.set(0,0,r[b]),g.lookAt(0,I[b],0)):(g.up.set(0,r[b],0),g.lookAt(0,0,I[b]));const y=this._cubeSize;YC(l,B*y,b>2?y:0,y,y),C.setRenderTarget(l),f&&C.render(m,g),C.render(e,g)}m.geometry.dispose(),m.material.dispose(),C.toneMapping=d,C.autoClear=u,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,l=e.mapping===Eo||e.mapping===Jo;l?(this._cubemapMaterial===null&&(this._cubemapMaterial=D9()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=U9());const s=l?this._cubemapMaterial:this._equirectMaterial,o=new Mn(this._lodPlanes[0],s),g=s.uniforms;g.envMap.value=e;const r=this._cubeSize;YC(t,0,0,3*r,2*r),n.setRenderTarget(t),n.render(o,Fd)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let l=1;l<this._lodPlanes.length;l++){const s=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]),o=E9[(l-1)%E9.length];this._blur(e,l-1,l,s,o)}t.autoClear=n}_blur(e,t,n,l,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,l,"latitudinal",s),this._halfBlur(o,e,n,n,l,"longitudinal",s)}_halfBlur(e,t,n,l,s,o,g){const r=this._renderer,I=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const C=3,u=new Mn(this._lodPlanes[l],I),d=I.uniforms,A=this._sizeLods[n]-1,m=isFinite(s)?Math.PI/(2*A):2*Math.PI/(2*Wg-1),f=s/m,p=isFinite(s)?1+Math.floor(C*f):Wg;p>Wg&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Wg}`);const b=[];let B=0;for(let S=0;S<Wg;++S){const x=S/f,V=Math.exp(-x*x/2);b.push(V),S===0?B+=V:S<p&&(B+=2*V)}for(let S=0;S<b.length;S++)b[S]=b[S]/B;d.envMap.value=e.texture,d.samples.value=p,d.weights.value=b,d.latitudinal.value=o==="latitudinal",g&&(d.poleAxis.value=g);const{_lodMax:y}=this;d.dTheta.value=m,d.mipInt.value=y-n;const Z=this._sizeLods[l],q=3*Z*(l>y-oa?l-y+oa:0),W=4*(this._cubeSize-Z);YC(t,q,W,3*Z,2*Z),r.setRenderTarget(t),r.render(u,Fd)}}function nW(i){const e=[],t=[],n=[];let l=i;const s=i-oa+1+k9.length;for(let o=0;o<s;o++){const g=Math.pow(2,l);t.push(g);let r=1/g;o>i-oa?r=k9[o-i+oa-1]:o===0&&(r=0),n.push(r);const I=1/(g-2),C=-I,u=1+I,d=[C,C,u,C,u,u,C,C,u,u,C,u],A=6,m=6,f=3,p=2,b=1,B=new Float32Array(f*m*A),y=new Float32Array(p*m*A),Z=new Float32Array(b*m*A);for(let W=0;W<A;W++){const S=W%3*2/3-1,x=W>2?0:-1,V=[S,x,0,S+2/3,x,0,S+2/3,x+1,0,S,x,0,S+2/3,x+1,0,S,x+1,0];B.set(V,f*m*W),y.set(d,p*m*W);const X=[W,W,W,W,W,W];Z.set(X,b*m*W)}const q=new ut;q.setAttribute("position",new Ft(B,f)),q.setAttribute("uv",new Ft(y,p)),q.setAttribute("faceIndex",new Ft(Z,b)),e.push(q),l>oa&&l--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function J9(i,e,t){const n=new Di(i,e,t);return n.texture.mapping=za,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function YC(i,e,t,n,l){i.viewport.set(e,t,n,l),i.scissor.set(e,t,n,l)}function iW(i,e,t){const n=new Float32Array(Wg),l=new K(0,1,0);return new kl({name:"SphericalGaussianBlur",defines:{n:Wg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:oh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ts,depthTest:!1,depthWrite:!1})}function U9(){return new kl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:oh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ts,depthTest:!1,depthWrite:!1})}function D9(){return new kl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:oh(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ts,depthTest:!1,depthWrite:!1})}function oh(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lW(i){let e=new WeakMap,t=null;function n(g){if(g&&g.isTexture){const r=g.mapping,I=r===pI||r===fI,C=r===Eo||r===Jo;if(I||C)if(g.isRenderTargetTexture&&g.needsPMREMUpdate===!0){g.needsPMREMUpdate=!1;let u=e.get(g);return t===null&&(t=new K3(i)),u=I?t.fromEquirectangular(g,u):t.fromCubemap(g,u),e.set(g,u),u.texture}else{if(e.has(g))return e.get(g).texture;{const u=g.image;if(I&&u&&u.height>0||C&&u&&l(u)){t===null&&(t=new K3(i));const d=I?t.fromEquirectangular(g):t.fromCubemap(g);return e.set(g,d),g.addEventListener("dispose",s),d.texture}else return null}}}return g}function l(g){let r=0;const I=6;for(let C=0;C<I;C++)g[C]!==void 0&&r++;return r===I}function s(g){const r=g.target;r.removeEventListener("dispose",s);const I=e.get(r);I!==void 0&&(e.delete(r),I.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function sW(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let l;switch(n){case"WEBGL_depth_texture":l=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=i.getExtension(n)}return e[n]=l,l}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const l=t(n);return l===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),l}}}function oW(i,e,t,n){const l={},s=new WeakMap;function o(u){const d=u.target;d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);d.removeEventListener("dispose",o),delete l[d.id];const A=s.get(d);A&&(e.remove(A),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function g(u,d){return l[d.id]===!0||(d.addEventListener("dispose",o),l[d.id]=!0,t.memory.geometries++),d}function r(u){const d=u.attributes;for(const m in d)e.update(d[m],34962);const A=u.morphAttributes;for(const m in A){const f=A[m];for(let p=0,b=f.length;p<b;p++)e.update(f[p],34962)}}function I(u){const d=[],A=u.index,m=u.attributes.position;let f=0;if(A!==null){const B=A.array;f=A.version;for(let y=0,Z=B.length;y<Z;y+=3){const q=B[y+0],W=B[y+1],S=B[y+2];d.push(q,W,W,S,S,q)}}else{const B=m.array;f=m.version;for(let y=0,Z=B.length/3-1;y<Z;y+=3){const q=y+0,W=y+1,S=y+2;d.push(q,W,W,S,S,q)}}const p=new(jf(d)?sh:lh)(d,1);p.version=f;const b=s.get(u);b&&e.remove(b),s.set(u,p)}function C(u){const d=s.get(u);if(d){const A=u.index;A!==null&&d.version<A.version&&I(u)}else I(u);return s.get(u)}return{get:g,update:r,getWireframeAttribute:C}}function gW(i,e,t,n){const l=n.isWebGL2;let s;function o(d){s=d}let g,r;function I(d){g=d.type,r=d.bytesPerElement}function C(d,A){i.drawElements(s,A,g,d*r),t.update(A,s,1)}function u(d,A,m){if(m===0)return;let f,p;if(l)f=i,p="drawElementsInstanced";else if(f=e.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",f===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[p](s,A,g,d*r,m),t.update(A,s,m)}this.setMode=o,this.setIndex=I,this.render=C,this.renderInstances=u}function rW(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,g){switch(t.calls++,o){case 4:t.triangles+=g*(s/3);break;case 1:t.lines+=g*(s/2);break;case 3:t.lines+=g*(s-1);break;case 2:t.lines+=g*s;break;case 0:t.points+=g*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function l(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:l,update:n}}function aW(i,e){return i[0]-e[0]}function IW(i,e){return Math.abs(e[1])-Math.abs(i[1])}function cW(i,e,t){const n={},l=new Float32Array(8),s=new WeakMap,o=new Nt,g=[];for(let I=0;I<8;I++)g[I]=[I,0];function r(I,C,u,d){const A=I.morphTargetInfluences;if(e.isWebGL2===!0){const f=C.morphAttributes.position||C.morphAttributes.normal||C.morphAttributes.color,p=f!==void 0?f.length:0;let b=s.get(C);if(b===void 0||b.count!==p){let se=function(){E.dispose(),s.delete(C),C.removeEventListener("dispose",se)};var m=se;b!==void 0&&b.texture.dispose();const Z=C.morphAttributes.position!==void 0,q=C.morphAttributes.normal!==void 0,W=C.morphAttributes.color!==void 0,S=C.morphAttributes.position||[],x=C.morphAttributes.normal||[],V=C.morphAttributes.color||[];let X=0;Z===!0&&(X=1),q===!0&&(X=2),W===!0&&(X=3);let k=C.attributes.position.count*X,$=1;k>e.maxTextureSize&&($=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const Q=new Float32Array(k*$*4*p),E=new NI(Q,k,$,p);E.type=Ns,E.needsUpdate=!0;const te=X*4;for(let oe=0;oe<p;oe++){const R=S[oe],Y=x[oe],H=V[oe],J=k*$*4*oe;for(let P=0;P<R.count;P++){const ne=P*te;Z===!0&&(o.fromBufferAttribute(R,P),Q[J+ne+0]=o.x,Q[J+ne+1]=o.y,Q[J+ne+2]=o.z,Q[J+ne+3]=0),q===!0&&(o.fromBufferAttribute(Y,P),Q[J+ne+4]=o.x,Q[J+ne+5]=o.y,Q[J+ne+6]=o.z,Q[J+ne+7]=0),W===!0&&(o.fromBufferAttribute(H,P),Q[J+ne+8]=o.x,Q[J+ne+9]=o.y,Q[J+ne+10]=o.z,Q[J+ne+11]=H.itemSize===4?o.w:1)}}b={count:p,texture:E,size:new me(k,$)},s.set(C,b),C.addEventListener("dispose",se)}let B=0;for(let Z=0;Z<A.length;Z++)B+=A[Z];const y=C.morphTargetsRelative?1:1-B;d.getUniforms().setValue(i,"morphTargetBaseInfluence",y),d.getUniforms().setValue(i,"morphTargetInfluences",A),d.getUniforms().setValue(i,"morphTargetsTexture",b.texture,t),d.getUniforms().setValue(i,"morphTargetsTextureSize",b.size)}else{const f=A===void 0?0:A.length;let p=n[C.id];if(p===void 0||p.length!==f){p=[];for(let q=0;q<f;q++)p[q]=[q,0];n[C.id]=p}for(let q=0;q<f;q++){const W=p[q];W[0]=q,W[1]=A[q]}p.sort(IW);for(let q=0;q<8;q++)q<f&&p[q][1]?(g[q][0]=p[q][0],g[q][1]=p[q][1]):(g[q][0]=Number.MAX_SAFE_INTEGER,g[q][1]=0);g.sort(aW);const b=C.morphAttributes.position,B=C.morphAttributes.normal;let y=0;for(let q=0;q<8;q++){const W=g[q],S=W[0],x=W[1];S!==Number.MAX_SAFE_INTEGER&&x?(b&&C.getAttribute("morphTarget"+q)!==b[S]&&C.setAttribute("morphTarget"+q,b[S]),B&&C.getAttribute("morphNormal"+q)!==B[S]&&C.setAttribute("morphNormal"+q,B[S]),l[q]=x,y+=x):(b&&C.hasAttribute("morphTarget"+q)===!0&&C.deleteAttribute("morphTarget"+q),B&&C.hasAttribute("morphNormal"+q)===!0&&C.deleteAttribute("morphNormal"+q),l[q]=0)}const Z=C.morphTargetsRelative?1:1-y;d.getUniforms().setValue(i,"morphTargetBaseInfluence",Z),d.getUniforms().setValue(i,"morphTargetInfluences",l)}}return{update:r}}function CW(i,e,t,n){let l=new WeakMap;function s(r){const I=n.render.frame,C=r.geometry,u=e.get(r,C);return l.get(u)!==I&&(e.update(u),l.set(u,I)),r.isInstancedMesh&&(r.hasEventListener("dispose",g)===!1&&r.addEventListener("dispose",g),t.update(r.instanceMatrix,34962),r.instanceColor!==null&&t.update(r.instanceColor,34962)),u}function o(){l=new WeakMap}function g(r){const I=r.target;I.removeEventListener("dispose",g),t.remove(I.instanceMatrix),I.instanceColor!==null&&t.remove(I.instanceColor)}return{update:s,dispose:o}}const lb=new un,sb=new NI,ob=new q2,gb=new LI,Q9=[],P9=[],O9=new Float32Array(16),j9=new Float32Array(9),$9=new Float32Array(4);function Ha(i,e,t){const n=i[0];if(n<=0||n>0)return i;const l=e*t;let s=Q9[l];if(s===void 0&&(s=new Float32Array(l),Q9[l]=s),e!==0){n.toArray(s,0);for(let o=1,g=0;o!==e;++o)g+=t,i[o].toArray(s,g)}return s}function Sn(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Vn(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function W2(i,e){let t=P9[e];t===void 0&&(t=new Int32Array(e),P9[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function uW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function dW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sn(t,e))return;i.uniform2fv(this.addr,e),Vn(t,e)}}function AW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Sn(t,e))return;i.uniform3fv(this.addr,e),Vn(t,e)}}function hW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sn(t,e))return;i.uniform4fv(this.addr,e),Vn(t,e)}}function mW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Sn(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Vn(t,e)}else{if(Sn(t,n))return;$9.set(n),i.uniformMatrix2fv(this.addr,!1,$9),Vn(t,n)}}function pW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Sn(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Vn(t,e)}else{if(Sn(t,n))return;j9.set(n),i.uniformMatrix3fv(this.addr,!1,j9),Vn(t,n)}}function fW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Sn(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Vn(t,e)}else{if(Sn(t,n))return;O9.set(n),i.uniformMatrix4fv(this.addr,!1,O9),Vn(t,n)}}function bW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function GW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sn(t,e))return;i.uniform2iv(this.addr,e),Vn(t,e)}}function yW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Sn(t,e))return;i.uniform3iv(this.addr,e),Vn(t,e)}}function BW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sn(t,e))return;i.uniform4iv(this.addr,e),Vn(t,e)}}function ZW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function vW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sn(t,e))return;i.uniform2uiv(this.addr,e),Vn(t,e)}}function xW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Sn(t,e))return;i.uniform3uiv(this.addr,e),Vn(t,e)}}function qW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sn(t,e))return;i.uniform4uiv(this.addr,e),Vn(t,e)}}function wW(i,e,t){const n=this.cache,l=t.allocateTextureUnit();n[0]!==l&&(i.uniform1i(this.addr,l),n[0]=l),t.setTexture2D(e||lb,l)}function WW(i,e,t){const n=this.cache,l=t.allocateTextureUnit();n[0]!==l&&(i.uniform1i(this.addr,l),n[0]=l),t.setTexture3D(e||ob,l)}function SW(i,e,t){const n=this.cache,l=t.allocateTextureUnit();n[0]!==l&&(i.uniform1i(this.addr,l),n[0]=l),t.setTextureCube(e||gb,l)}function VW(i,e,t){const n=this.cache,l=t.allocateTextureUnit();n[0]!==l&&(i.uniform1i(this.addr,l),n[0]=l),t.setTexture2DArray(e||sb,l)}function RW(i){switch(i){case 5126:return uW;case 35664:return dW;case 35665:return AW;case 35666:return hW;case 35674:return mW;case 35675:return pW;case 35676:return fW;case 5124:case 35670:return bW;case 35667:case 35671:return GW;case 35668:case 35672:return yW;case 35669:case 35673:return BW;case 5125:return ZW;case 36294:return vW;case 36295:return xW;case 36296:return qW;case 35678:case 36198:case 36298:case 36306:case 35682:return wW;case 35679:case 36299:case 36307:return WW;case 35680:case 36300:case 36308:case 36293:return SW;case 36289:case 36303:case 36311:case 36292:return VW}}function XW(i,e){i.uniform1fv(this.addr,e)}function YW(i,e){const t=Ha(e,this.size,2);i.uniform2fv(this.addr,t)}function zW(i,e){const t=Ha(e,this.size,3);i.uniform3fv(this.addr,t)}function KW(i,e){const t=Ha(e,this.size,4);i.uniform4fv(this.addr,t)}function HW(i,e){const t=Ha(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function NW(i,e){const t=Ha(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function MW(i,e){const t=Ha(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function FW(i,e){i.uniform1iv(this.addr,e)}function LW(i,e){i.uniform2iv(this.addr,e)}function _W(i,e){i.uniform3iv(this.addr,e)}function kW(i,e){i.uniform4iv(this.addr,e)}function TW(i,e){i.uniform1uiv(this.addr,e)}function EW(i,e){i.uniform2uiv(this.addr,e)}function JW(i,e){i.uniform3uiv(this.addr,e)}function UW(i,e){i.uniform4uiv(this.addr,e)}function DW(i,e,t){const n=this.cache,l=e.length,s=W2(t,l);Sn(n,s)||(i.uniform1iv(this.addr,s),Vn(n,s));for(let o=0;o!==l;++o)t.setTexture2D(e[o]||lb,s[o])}function QW(i,e,t){const n=this.cache,l=e.length,s=W2(t,l);Sn(n,s)||(i.uniform1iv(this.addr,s),Vn(n,s));for(let o=0;o!==l;++o)t.setTexture3D(e[o]||ob,s[o])}function PW(i,e,t){const n=this.cache,l=e.length,s=W2(t,l);Sn(n,s)||(i.uniform1iv(this.addr,s),Vn(n,s));for(let o=0;o!==l;++o)t.setTextureCube(e[o]||gb,s[o])}function OW(i,e,t){const n=this.cache,l=e.length,s=W2(t,l);Sn(n,s)||(i.uniform1iv(this.addr,s),Vn(n,s));for(let o=0;o!==l;++o)t.setTexture2DArray(e[o]||sb,s[o])}function jW(i){switch(i){case 5126:return XW;case 35664:return YW;case 35665:return zW;case 35666:return KW;case 35674:return HW;case 35675:return NW;case 35676:return MW;case 5124:case 35670:return FW;case 35667:case 35671:return LW;case 35668:case 35672:return _W;case 35669:case 35673:return kW;case 5125:return TW;case 36294:return EW;case 36295:return JW;case 36296:return UW;case 35678:case 36198:case 36298:case 36306:case 35682:return DW;case 35679:case 36299:case 36307:return QW;case 35680:case 36300:case 36308:case 36293:return PW;case 36289:case 36303:case 36311:case 36292:return OW}}class $W{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=RW(t.type)}}class eS{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=jW(t.type)}}class tS{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const l=this.seq;for(let s=0,o=l.length;s!==o;++s){const g=l[s];g.setValue(e,t[g.id],n)}}}const _d=/(\w+)(\])?(\[|\.)?/g;function e7(i,e){i.seq.push(e),i.map[e.id]=e}function nS(i,e,t){const n=i.name,l=n.length;for(_d.lastIndex=0;;){const s=_d.exec(n),o=_d.lastIndex;let g=s[1];const r=s[2]==="]",I=s[3];if(r&&(g=g|0),I===void 0||I==="["&&o+2===l){e7(t,I===void 0?new $W(g,i,e):new eS(g,i,e));break}else{let u=t.map[g];u===void 0&&(u=new tS(g),e7(t,u)),t=u}}}class W0{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let l=0;l<n;++l){const s=e.getActiveUniform(t,l),o=e.getUniformLocation(t,s.name);nS(s,o,this)}}setValue(e,t,n,l){const s=this.map[t];s!==void 0&&s.setValue(e,n,l)}setOptional(e,t,n){const l=t[n];l!==void 0&&this.setValue(e,n,l)}static upload(e,t,n,l){for(let s=0,o=t.length;s!==o;++s){const g=t[s],r=n[g.id];r.needsUpdate!==!1&&g.setValue(e,r.value,l)}}static seqWithValue(e,t){const n=[];for(let l=0,s=e.length;l!==s;++l){const o=e[l];o.id in t&&n.push(o)}return n}}function t7(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let iS=0;function lS(i,e){const t=i.split(`
`),n=[],l=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=l;o<s;o++){const g=o+1;n.push(`${g===e?">":" "} ${g}: ${t[o]}`)}return n.join(`
`)}function sS(i){switch(i){case Qs:return["Linear","( value )"];case Yt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function n7(i,e,t){const n=i.getShaderParameter(e,35713),l=i.getShaderInfoLog(e).trim();if(n&&l==="")return"";const s=/ERROR: 0:(\d+)/.exec(l);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+l+`

`+lS(i.getShaderSource(e),o)}else return l}function oS(i,e){const t=sS(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function gS(i,e){let t;switch(e){case yf:t="Linear";break;case Bf:t="Reinhard";break;case Zf:t="OptimizedCineon";break;case jA:t="ACESFilmic";break;case vf:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function rS(i){return[i.extensionDerivatives||!!i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(L1).join(`
`)}function aS(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function IS(i,e){const t={},n=i.getProgramParameter(e,35721);for(let l=0;l<n;l++){const s=i.getActiveAttrib(e,l),o=s.name;let g=1;s.type===35674&&(g=2),s.type===35675&&(g=3),s.type===35676&&(g=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:g}}return t}function L1(i){return i!==""}function i7(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function l7(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const cS=/^[ \t]*#include +<([\w\d./]+)>/gm;function H3(i){return i.replace(cS,CS)}function CS(i,e){const t=ht[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return H3(t)}const uS=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s7(i){return i.replace(uS,dS)}function dS(i,e,t,n){let l="";for(let s=parseInt(e);s<parseInt(t);s++)l+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return l}function o7(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function AS(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===DA?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===QA?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===la&&(e="SHADOWMAP_TYPE_VSM"),e}function hS(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Eo:case Jo:e="ENVMAP_TYPE_CUBE";break;case za:e="ENVMAP_TYPE_CUBE_UV";break}return e}function mS(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Jo:e="ENVMAP_MODE_REFRACTION";break}return e}function pS(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case HI:e="ENVMAP_BLENDING_MULTIPLY";break;case bf:e="ENVMAP_BLENDING_MIX";break;case Gf:e="ENVMAP_BLENDING_ADD";break}return e}function fS(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function bS(i,e,t,n){const l=i.getContext(),s=t.defines;let o=t.vertexShader,g=t.fragmentShader;const r=AS(t),I=hS(t),C=mS(t),u=pS(t),d=fS(t),A=t.isWebGL2?"":rS(t),m=aS(s),f=l.createProgram();let p,b,B=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(p=[m].filter(L1).join(`
`),p.length>0&&(p+=`
`),b=[A,m].filter(L1).join(`
`),b.length>0&&(b+=`
`)):(p=[o7(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+C:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+r:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(L1).join(`
`),b=[A,o7(t),"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+I:"",t.envMap?"#define "+C:"",t.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+r:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Fl?"#define TONE_MAPPING":"",t.toneMapping!==Fl?ht.tonemapping_pars_fragment:"",t.toneMapping!==Fl?gS("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ht.encodings_pars_fragment,oS("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(L1).join(`
`)),o=H3(o),o=i7(o,t),o=l7(o,t),g=H3(g),g=i7(g,t),g=l7(g,t),o=s7(o),g=s7(g),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(B=`#version 300 es
`,p=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,b=["#define varying in",t.glslVersion===Y3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Y3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const y=B+p+o,Z=B+b+g,q=t7(l,35633,y),W=t7(l,35632,Z);if(l.attachShader(f,q),l.attachShader(f,W),t.index0AttributeName!==void 0?l.bindAttribLocation(f,0,t.index0AttributeName):t.morphTargets===!0&&l.bindAttribLocation(f,0,"position"),l.linkProgram(f),i.debug.checkShaderErrors){const V=l.getProgramInfoLog(f).trim(),X=l.getShaderInfoLog(q).trim(),k=l.getShaderInfoLog(W).trim();let $=!0,Q=!0;if(l.getProgramParameter(f,35714)===!1){$=!1;const E=n7(l,q,"vertex"),te=n7(l,W,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(f,35715)+`

Program Info Log: `+V+`
`+E+`
`+te)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(X===""||k==="")&&(Q=!1);Q&&(this.diagnostics={runnable:$,programLog:V,vertexShader:{log:X,prefix:p},fragmentShader:{log:k,prefix:b}})}l.deleteShader(q),l.deleteShader(W);let S;this.getUniforms=function(){return S===void 0&&(S=new W0(l,f)),S};let x;return this.getAttributes=function(){return x===void 0&&(x=IS(l,f)),x},this.destroy=function(){n.releaseStatesOfProgram(this),l.deleteProgram(f),this.program=void 0},this.name=t.shaderName,this.id=iS++,this.cacheKey=e,this.usedTimes=1,this.program=f,this.vertexShader=q,this.fragmentShader=W,this}let GS=0;class yS{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,l=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(l)===!1&&(o.add(l),l.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new BS(e),t.set(e,n)),n}}class BS{constructor(e){this.id=GS++,this.code=e,this.usedTimes=0}}function ZS(i,e,t,n,l,s,o){const g=new Jg,r=new yS,I=[],C=l.isWebGL2,u=l.logarithmicDepthBuffer,d=l.vertexTextures;let A=l.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(x,V,X,k,$){const Q=k.fog,E=$.geometry,te=x.isMeshStandardMaterial?k.environment:null,se=(x.isMeshStandardMaterial?t:e).get(x.envMap||te),oe=!!se&&se.mapping===za?se.image.height:null,R=m[x.type];x.precision!==null&&(A=l.getMaxPrecision(x.precision),A!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",A,"instead."));const Y=E.morphAttributes.position||E.morphAttributes.normal||E.morphAttributes.color,H=Y!==void 0?Y.length:0;let J=0;E.morphAttributes.position!==void 0&&(J=1),E.morphAttributes.normal!==void 0&&(J=2),E.morphAttributes.color!==void 0&&(J=3);let P,ne,fe,We;if(R){const tt=Kl[R];P=tt.vertexShader,ne=tt.fragmentShader}else P=x.vertexShader,ne=x.fragmentShader,r.update(x),fe=r.getVertexShaderID(x),We=r.getFragmentShaderID(x);const le=i.getRenderTarget(),_e=x.alphaTest>0,Te=x.clearcoat>0,je=x.iridescence>0;return{isWebGL2:C,shaderID:R,shaderName:x.type,vertexShader:P,fragmentShader:ne,defines:x.defines,customVertexShaderID:fe,customFragmentShaderID:We,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:A,instancing:$.isInstancedMesh===!0,instancingColor:$.isInstancedMesh===!0&&$.instanceColor!==null,supportsVertexTextures:d,outputEncoding:le===null?i.outputEncoding:le.isXRRenderTarget===!0?le.texture.encoding:Qs,map:!!x.map,matcap:!!x.matcap,envMap:!!se,envMapMode:se&&se.mapping,envMapCubeUVHeight:oe,lightMap:!!x.lightMap,aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:x.normalMapType===Uf,tangentSpaceNormalMap:x.normalMapType===$s,decodeVideoTexture:!!x.map&&x.map.isVideoTexture===!0&&x.map.encoding===Yt,clearcoat:Te,clearcoatMap:Te&&!!x.clearcoatMap,clearcoatRoughnessMap:Te&&!!x.clearcoatRoughnessMap,clearcoatNormalMap:Te&&!!x.clearcoatNormalMap,iridescence:je,iridescenceMap:je&&!!x.iridescenceMap,iridescenceThicknessMap:je&&!!x.iridescenceThicknessMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,specularIntensityMap:!!x.specularIntensityMap,specularColorMap:!!x.specularColorMap,opaque:x.transparent===!1&&x.blending===_g,alphaMap:!!x.alphaMap,alphaTest:_e,gradientMap:!!x.gradientMap,sheen:x.sheen>0,sheenColorMap:!!x.sheenColorMap,sheenRoughnessMap:!!x.sheenRoughnessMap,transmission:x.transmission>0,transmissionMap:!!x.transmissionMap,thicknessMap:!!x.thicknessMap,combine:x.combine,vertexTangents:!!x.normalMap&&!!E.attributes.tangent,vertexColors:x.vertexColors,vertexAlphas:x.vertexColors===!0&&!!E.attributes.color&&E.attributes.color.itemSize===4,vertexUvs:!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatMap||!!x.clearcoatRoughnessMap||!!x.clearcoatNormalMap||!!x.iridescenceMap||!!x.iridescenceThicknessMap||!!x.displacementMap||!!x.transmissionMap||!!x.thicknessMap||!!x.specularIntensityMap||!!x.specularColorMap||!!x.sheenColorMap||!!x.sheenRoughnessMap,uvsVertexOnly:!(!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatNormalMap||!!x.iridescenceMap||!!x.iridescenceThicknessMap||x.transmission>0||!!x.transmissionMap||!!x.thicknessMap||!!x.specularIntensityMap||!!x.specularColorMap||x.sheen>0||!!x.sheenColorMap||!!x.sheenRoughnessMap)&&!!x.displacementMap,fog:!!Q,useFog:x.fog===!0,fogExp2:Q&&Q.isFogExp2,flatShading:!!x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:u,skinning:$.isSkinnedMesh===!0,morphTargets:E.morphAttributes.position!==void 0,morphNormals:E.morphAttributes.normal!==void 0,morphColors:E.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:J,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numSpotLightMaps:V.spotLightMap.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numSpotLightShadowsWithMaps:V.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:x.dithering,shadowMapEnabled:i.shadowMap.enabled&&X.length>0,shadowMapType:i.shadowMap.type,toneMapping:x.toneMapped?i.toneMapping:Fl,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===Hl,flipSided:x.side===Ei,useDepthPacking:!!x.depthPacking,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.fragDepth,extensionDrawBuffers:x.extensions&&x.extensions.drawBuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:C||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:C||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:C||n.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}}function p(x){const V=[];if(x.shaderID?V.push(x.shaderID):(V.push(x.customVertexShaderID),V.push(x.customFragmentShaderID)),x.defines!==void 0)for(const X in x.defines)V.push(X),V.push(x.defines[X]);return x.isRawShaderMaterial===!1&&(b(V,x),B(V,x),V.push(i.outputEncoding)),V.push(x.customProgramCacheKey),V.join()}function b(x,V){x.push(V.precision),x.push(V.outputEncoding),x.push(V.envMapMode),x.push(V.envMapCubeUVHeight),x.push(V.combine),x.push(V.vertexUvs),x.push(V.fogExp2),x.push(V.sizeAttenuation),x.push(V.morphTargetsCount),x.push(V.morphAttributeCount),x.push(V.numDirLights),x.push(V.numPointLights),x.push(V.numSpotLights),x.push(V.numSpotLightMaps),x.push(V.numHemiLights),x.push(V.numRectAreaLights),x.push(V.numDirLightShadows),x.push(V.numPointLightShadows),x.push(V.numSpotLightShadows),x.push(V.numSpotLightShadowsWithMaps),x.push(V.shadowMapType),x.push(V.toneMapping),x.push(V.numClippingPlanes),x.push(V.numClipIntersection),x.push(V.depthPacking)}function B(x,V){g.disableAll(),V.isWebGL2&&g.enable(0),V.supportsVertexTextures&&g.enable(1),V.instancing&&g.enable(2),V.instancingColor&&g.enable(3),V.map&&g.enable(4),V.matcap&&g.enable(5),V.envMap&&g.enable(6),V.lightMap&&g.enable(7),V.aoMap&&g.enable(8),V.emissiveMap&&g.enable(9),V.bumpMap&&g.enable(10),V.normalMap&&g.enable(11),V.objectSpaceNormalMap&&g.enable(12),V.tangentSpaceNormalMap&&g.enable(13),V.clearcoat&&g.enable(14),V.clearcoatMap&&g.enable(15),V.clearcoatRoughnessMap&&g.enable(16),V.clearcoatNormalMap&&g.enable(17),V.iridescence&&g.enable(18),V.iridescenceMap&&g.enable(19),V.iridescenceThicknessMap&&g.enable(20),V.displacementMap&&g.enable(21),V.specularMap&&g.enable(22),V.roughnessMap&&g.enable(23),V.metalnessMap&&g.enable(24),V.gradientMap&&g.enable(25),V.alphaMap&&g.enable(26),V.alphaTest&&g.enable(27),V.vertexColors&&g.enable(28),V.vertexAlphas&&g.enable(29),V.vertexUvs&&g.enable(30),V.vertexTangents&&g.enable(31),V.uvsVertexOnly&&g.enable(32),x.push(g.mask),g.disableAll(),V.fog&&g.enable(0),V.useFog&&g.enable(1),V.flatShading&&g.enable(2),V.logarithmicDepthBuffer&&g.enable(3),V.skinning&&g.enable(4),V.morphTargets&&g.enable(5),V.morphNormals&&g.enable(6),V.morphColors&&g.enable(7),V.premultipliedAlpha&&g.enable(8),V.shadowMapEnabled&&g.enable(9),V.physicallyCorrectLights&&g.enable(10),V.doubleSided&&g.enable(11),V.flipSided&&g.enable(12),V.useDepthPacking&&g.enable(13),V.dithering&&g.enable(14),V.specularIntensityMap&&g.enable(15),V.specularColorMap&&g.enable(16),V.transmission&&g.enable(17),V.transmissionMap&&g.enable(18),V.thicknessMap&&g.enable(19),V.sheen&&g.enable(20),V.sheenColorMap&&g.enable(21),V.sheenRoughnessMap&&g.enable(22),V.decodeVideoTexture&&g.enable(23),V.opaque&&g.enable(24),x.push(g.mask)}function y(x){const V=m[x.type];let X;if(V){const k=Kl[V];X=eb.clone(k.uniforms)}else X=x.uniforms;return X}function Z(x,V){let X;for(let k=0,$=I.length;k<$;k++){const Q=I[k];if(Q.cacheKey===V){X=Q,++X.usedTimes;break}}return X===void 0&&(X=new bS(i,V,x,s),I.push(X)),X}function q(x){if(--x.usedTimes===0){const V=I.indexOf(x);I[V]=I[I.length-1],I.pop(),x.destroy()}}function W(x){r.remove(x)}function S(){r.dispose()}return{getParameters:f,getProgramCacheKey:p,getUniforms:y,acquireProgram:Z,releaseProgram:q,releaseShaderCache:W,programs:I,dispose:S}}function vS(){let i=new WeakMap;function e(s){let o=i.get(s);return o===void 0&&(o={},i.set(s,o)),o}function t(s){i.delete(s)}function n(s,o,g){i.get(s)[o]=g}function l(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:l}}function xS(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function g7(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function r7(){const i=[];let e=0;const t=[],n=[],l=[];function s(){e=0,t.length=0,n.length=0,l.length=0}function o(u,d,A,m,f,p){let b=i[e];return b===void 0?(b={id:u.id,object:u,geometry:d,material:A,groupOrder:m,renderOrder:u.renderOrder,z:f,group:p},i[e]=b):(b.id=u.id,b.object=u,b.geometry=d,b.material=A,b.groupOrder=m,b.renderOrder=u.renderOrder,b.z=f,b.group=p),e++,b}function g(u,d,A,m,f,p){const b=o(u,d,A,m,f,p);A.transmission>0?n.push(b):A.transparent===!0?l.push(b):t.push(b)}function r(u,d,A,m,f,p){const b=o(u,d,A,m,f,p);A.transmission>0?n.unshift(b):A.transparent===!0?l.unshift(b):t.unshift(b)}function I(u,d){t.length>1&&t.sort(u||xS),n.length>1&&n.sort(d||g7),l.length>1&&l.sort(d||g7)}function C(){for(let u=e,d=i.length;u<d;u++){const A=i[u];if(A.id===null)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.group=null}}return{opaque:t,transmissive:n,transparent:l,init:s,push:g,unshift:r,finish:C,sort:I}}function qS(){let i=new WeakMap;function e(n,l){const s=i.get(n);let o;return s===void 0?(o=new r7,i.set(n,[o])):l>=s.length?(o=new r7,s.push(o)):o=s[l],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function wS(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new Ve};break;case"SpotLight":t={position:new K,direction:new K,color:new Ve,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new Ve,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new Ve,groundColor:new Ve};break;case"RectAreaLight":t={color:new Ve,position:new K,halfWidth:new K,halfHeight:new K};break}return i[e.id]=t,t}}}function WS(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let SS=0;function VS(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function RS(i,e){const t=new wS,n=WS(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let C=0;C<9;C++)l.probe.push(new K);const s=new K,o=new st,g=new st;function r(C,u){let d=0,A=0,m=0;for(let k=0;k<9;k++)l.probe[k].set(0,0,0);let f=0,p=0,b=0,B=0,y=0,Z=0,q=0,W=0,S=0,x=0;C.sort(VS);const V=u!==!0?Math.PI:1;for(let k=0,$=C.length;k<$;k++){const Q=C[k],E=Q.color,te=Q.intensity,se=Q.distance,oe=Q.shadow&&Q.shadow.map?Q.shadow.map.texture:null;if(Q.isAmbientLight)d+=E.r*te*V,A+=E.g*te*V,m+=E.b*te*V;else if(Q.isLightProbe)for(let R=0;R<9;R++)l.probe[R].addScaledVector(Q.sh.coefficients[R],te);else if(Q.isDirectionalLight){const R=t.get(Q);if(R.color.copy(Q.color).multiplyScalar(Q.intensity*V),Q.castShadow){const Y=Q.shadow,H=n.get(Q);H.shadowBias=Y.bias,H.shadowNormalBias=Y.normalBias,H.shadowRadius=Y.radius,H.shadowMapSize=Y.mapSize,l.directionalShadow[f]=H,l.directionalShadowMap[f]=oe,l.directionalShadowMatrix[f]=Q.shadow.matrix,Z++}l.directional[f]=R,f++}else if(Q.isSpotLight){const R=t.get(Q);R.position.setFromMatrixPosition(Q.matrixWorld),R.color.copy(E).multiplyScalar(te*V),R.distance=se,R.coneCos=Math.cos(Q.angle),R.penumbraCos=Math.cos(Q.angle*(1-Q.penumbra)),R.decay=Q.decay,l.spot[b]=R;const Y=Q.shadow;if(Q.map&&(l.spotLightMap[S]=Q.map,S++,Y.updateMatrices(Q),Q.castShadow&&x++),l.spotLightMatrix[b]=Y.matrix,Q.castShadow){const H=n.get(Q);H.shadowBias=Y.bias,H.shadowNormalBias=Y.normalBias,H.shadowRadius=Y.radius,H.shadowMapSize=Y.mapSize,l.spotShadow[b]=H,l.spotShadowMap[b]=oe,W++}b++}else if(Q.isRectAreaLight){const R=t.get(Q);R.color.copy(E).multiplyScalar(te),R.halfWidth.set(Q.width*.5,0,0),R.halfHeight.set(0,Q.height*.5,0),l.rectArea[B]=R,B++}else if(Q.isPointLight){const R=t.get(Q);if(R.color.copy(Q.color).multiplyScalar(Q.intensity*V),R.distance=Q.distance,R.decay=Q.decay,Q.castShadow){const Y=Q.shadow,H=n.get(Q);H.shadowBias=Y.bias,H.shadowNormalBias=Y.normalBias,H.shadowRadius=Y.radius,H.shadowMapSize=Y.mapSize,H.shadowCameraNear=Y.camera.near,H.shadowCameraFar=Y.camera.far,l.pointShadow[p]=H,l.pointShadowMap[p]=oe,l.pointShadowMatrix[p]=Q.shadow.matrix,q++}l.point[p]=R,p++}else if(Q.isHemisphereLight){const R=t.get(Q);R.skyColor.copy(Q.color).multiplyScalar(te*V),R.groundColor.copy(Q.groundColor).multiplyScalar(te*V),l.hemi[y]=R,y++}}B>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(l.rectAreaLTC1=Re.LTC_FLOAT_1,l.rectAreaLTC2=Re.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(l.rectAreaLTC1=Re.LTC_HALF_1,l.rectAreaLTC2=Re.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=d,l.ambient[1]=A,l.ambient[2]=m;const X=l.hash;(X.directionalLength!==f||X.pointLength!==p||X.spotLength!==b||X.rectAreaLength!==B||X.hemiLength!==y||X.numDirectionalShadows!==Z||X.numPointShadows!==q||X.numSpotShadows!==W||X.numSpotMaps!==S)&&(l.directional.length=f,l.spot.length=b,l.rectArea.length=B,l.point.length=p,l.hemi.length=y,l.directionalShadow.length=Z,l.directionalShadowMap.length=Z,l.pointShadow.length=q,l.pointShadowMap.length=q,l.spotShadow.length=W,l.spotShadowMap.length=W,l.directionalShadowMatrix.length=Z,l.pointShadowMatrix.length=q,l.spotLightMatrix.length=W+S-x,l.spotLightMap.length=S,l.numSpotLightShadowsWithMaps=x,X.directionalLength=f,X.pointLength=p,X.spotLength=b,X.rectAreaLength=B,X.hemiLength=y,X.numDirectionalShadows=Z,X.numPointShadows=q,X.numSpotShadows=W,X.numSpotMaps=S,l.version=SS++)}function I(C,u){let d=0,A=0,m=0,f=0,p=0;const b=u.matrixWorldInverse;for(let B=0,y=C.length;B<y;B++){const Z=C[B];if(Z.isDirectionalLight){const q=l.directional[d];q.direction.setFromMatrixPosition(Z.matrixWorld),s.setFromMatrixPosition(Z.target.matrixWorld),q.direction.sub(s),q.direction.transformDirection(b),d++}else if(Z.isSpotLight){const q=l.spot[m];q.position.setFromMatrixPosition(Z.matrixWorld),q.position.applyMatrix4(b),q.direction.setFromMatrixPosition(Z.matrixWorld),s.setFromMatrixPosition(Z.target.matrixWorld),q.direction.sub(s),q.direction.transformDirection(b),m++}else if(Z.isRectAreaLight){const q=l.rectArea[f];q.position.setFromMatrixPosition(Z.matrixWorld),q.position.applyMatrix4(b),g.identity(),o.copy(Z.matrixWorld),o.premultiply(b),g.extractRotation(o),q.halfWidth.set(Z.width*.5,0,0),q.halfHeight.set(0,Z.height*.5,0),q.halfWidth.applyMatrix4(g),q.halfHeight.applyMatrix4(g),f++}else if(Z.isPointLight){const q=l.point[A];q.position.setFromMatrixPosition(Z.matrixWorld),q.position.applyMatrix4(b),A++}else if(Z.isHemisphereLight){const q=l.hemi[p];q.direction.setFromMatrixPosition(Z.matrixWorld),q.direction.transformDirection(b),p++}}}return{setup:r,setupView:I,state:l}}function a7(i,e){const t=new RS(i,e),n=[],l=[];function s(){n.length=0,l.length=0}function o(u){n.push(u)}function g(u){l.push(u)}function r(u){t.setup(n,u)}function I(u){t.setupView(n,u)}return{init:s,state:{lightsArray:n,shadowsArray:l,lights:t},setupLights:r,setupLightsView:I,pushLight:o,pushShadow:g}}function XS(i,e){let t=new WeakMap;function n(s,o=0){const g=t.get(s);let r;return g===void 0?(r=new a7(i,e),t.set(s,[r])):o>=g.length?(r=new a7(i,e),g.push(r)):r=g[o],r}function l(){t=new WeakMap}return{get:n,dispose:l}}class gh extends vn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ef,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class rh extends vn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new K,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const YS=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,zS=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function KS(i,e,t){let n=new w2;const l=new me,s=new me,o=new Nt,g=new gh({depthPacking:Jf}),r=new rh,I={},C=t.maxTextureSize,u={0:Ei,1:To,2:Hl},d=new kl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new me},radius:{value:4}},vertexShader:YS,fragmentShader:zS}),A=d.clone();A.defines.HORIZONTAL_PASS=1;const m=new ut;m.setAttribute("position",new Ft(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new Mn(m,d),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=DA,this.render=function(Z,q,W){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||Z.length===0)return;const S=i.getRenderTarget(),x=i.getActiveCubeFace(),V=i.getActiveMipmapLevel(),X=i.state;X.setBlending(Ts),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);for(let k=0,$=Z.length;k<$;k++){const Q=Z[k],E=Q.shadow;if(E===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(E.autoUpdate===!1&&E.needsUpdate===!1)continue;l.copy(E.mapSize);const te=E.getFrameExtents();if(l.multiply(te),s.copy(E.mapSize),(l.x>C||l.y>C)&&(l.x>C&&(s.x=Math.floor(C/te.x),l.x=s.x*te.x,E.mapSize.x=s.x),l.y>C&&(s.y=Math.floor(C/te.y),l.y=s.y*te.y,E.mapSize.y=s.y)),E.map===null){const oe=this.type!==la?{minFilter:pn,magFilter:pn}:{};E.map=new Di(l.x,l.y,oe),E.map.texture.name=Q.name+".shadowMap",E.camera.updateProjectionMatrix()}i.setRenderTarget(E.map),i.clear();const se=E.getViewportCount();for(let oe=0;oe<se;oe++){const R=E.getViewport(oe);o.set(s.x*R.x,s.y*R.y,s.x*R.z,s.y*R.w),X.viewport(o),E.updateMatrices(Q,oe),n=E.getFrustum(),y(q,W,E.camera,Q,this.type)}E.isPointLightShadow!==!0&&this.type===la&&b(E,W),E.needsUpdate=!1}p.needsUpdate=!1,i.setRenderTarget(S,x,V)};function b(Z,q){const W=e.update(f);d.defines.VSM_SAMPLES!==Z.blurSamples&&(d.defines.VSM_SAMPLES=Z.blurSamples,A.defines.VSM_SAMPLES=Z.blurSamples,d.needsUpdate=!0,A.needsUpdate=!0),Z.mapPass===null&&(Z.mapPass=new Di(l.x,l.y)),d.uniforms.shadow_pass.value=Z.map.texture,d.uniforms.resolution.value=Z.mapSize,d.uniforms.radius.value=Z.radius,i.setRenderTarget(Z.mapPass),i.clear(),i.renderBufferDirect(q,null,W,d,f,null),A.uniforms.shadow_pass.value=Z.mapPass.texture,A.uniforms.resolution.value=Z.mapSize,A.uniforms.radius.value=Z.radius,i.setRenderTarget(Z.map),i.clear(),i.renderBufferDirect(q,null,W,A,f,null)}function B(Z,q,W,S,x,V){let X=null;const k=W.isPointLight===!0?Z.customDistanceMaterial:Z.customDepthMaterial;if(k!==void 0?X=k:X=W.isPointLight===!0?r:g,i.localClippingEnabled&&q.clipShadows===!0&&Array.isArray(q.clippingPlanes)&&q.clippingPlanes.length!==0||q.displacementMap&&q.displacementScale!==0||q.alphaMap&&q.alphaTest>0){const $=X.uuid,Q=q.uuid;let E=I[$];E===void 0&&(E={},I[$]=E);let te=E[Q];te===void 0&&(te=X.clone(),E[Q]=te),X=te}return X.visible=q.visible,X.wireframe=q.wireframe,V===la?X.side=q.shadowSide!==null?q.shadowSide:q.side:X.side=q.shadowSide!==null?q.shadowSide:u[q.side],X.alphaMap=q.alphaMap,X.alphaTest=q.alphaTest,X.clipShadows=q.clipShadows,X.clippingPlanes=q.clippingPlanes,X.clipIntersection=q.clipIntersection,X.displacementMap=q.displacementMap,X.displacementScale=q.displacementScale,X.displacementBias=q.displacementBias,X.wireframeLinewidth=q.wireframeLinewidth,X.linewidth=q.linewidth,W.isPointLight===!0&&X.isMeshDistanceMaterial===!0&&(X.referencePosition.setFromMatrixPosition(W.matrixWorld),X.nearDistance=S,X.farDistance=x),X}function y(Z,q,W,S,x){if(Z.visible===!1)return;if(Z.layers.test(q.layers)&&(Z.isMesh||Z.isLine||Z.isPoints)&&(Z.castShadow||Z.receiveShadow&&x===la)&&(!Z.frustumCulled||n.intersectsObject(Z))){Z.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,Z.matrixWorld);const k=e.update(Z),$=Z.material;if(Array.isArray($)){const Q=k.groups;for(let E=0,te=Q.length;E<te;E++){const se=Q[E],oe=$[se.materialIndex];if(oe&&oe.visible){const R=B(Z,oe,S,W.near,W.far,x);i.renderBufferDirect(W,null,k,R,Z,se)}}}else if($.visible){const Q=B(Z,$,S,W.near,W.far,x);i.renderBufferDirect(W,null,k,Q,Z,null)}}const X=Z.children;for(let k=0,$=X.length;k<$;k++)y(X[k],q,W,S,x)}}function HS(i,e,t){const n=t.isWebGL2;function l(){let U=!1;const ce=new Nt;let be=null;const Me=new Nt(0,0,0,0);return{setMask:function(Qe){be!==Qe&&!U&&(i.colorMask(Qe,Qe,Qe,Qe),be=Qe)},setLocked:function(Qe){U=Qe},setClear:function(Qe,wt,dn,Rn,Ul){Ul===!0&&(Qe*=Rn,wt*=Rn,dn*=Rn),ce.set(Qe,wt,dn,Rn),Me.equals(ce)===!1&&(i.clearColor(Qe,wt,dn,Rn),Me.copy(ce))},reset:function(){U=!1,be=null,Me.set(-1,0,0,0)}}}function s(){let U=!1,ce=null,be=null,Me=null;return{setTest:function(Qe){Qe?_e(2929):Te(2929)},setMask:function(Qe){ce!==Qe&&!U&&(i.depthMask(Qe),ce=Qe)},setFunc:function(Qe){if(be!==Qe){switch(Qe){case uf:i.depthFunc(512);break;case df:i.depthFunc(519);break;case Af:i.depthFunc(513);break;case n2:i.depthFunc(515);break;case hf:i.depthFunc(514);break;case mf:i.depthFunc(518);break;case pf:i.depthFunc(516);break;case ff:i.depthFunc(517);break;default:i.depthFunc(515)}be=Qe}},setLocked:function(Qe){U=Qe},setClear:function(Qe){Me!==Qe&&(i.clearDepth(Qe),Me=Qe)},reset:function(){U=!1,ce=null,be=null,Me=null}}}function o(){let U=!1,ce=null,be=null,Me=null,Qe=null,wt=null,dn=null,Rn=null,Ul=null;return{setTest:function(_t){U||(_t?_e(2960):Te(2960))},setMask:function(_t){ce!==_t&&!U&&(i.stencilMask(_t),ce=_t)},setFunc:function(_t,Oi,hi){(be!==_t||Me!==Oi||Qe!==hi)&&(i.stencilFunc(_t,Oi,hi),be=_t,Me=Oi,Qe=hi)},setOp:function(_t,Oi,hi){(wt!==_t||dn!==Oi||Rn!==hi)&&(i.stencilOp(_t,Oi,hi),wt=_t,dn=Oi,Rn=hi)},setLocked:function(_t){U=_t},setClear:function(_t){Ul!==_t&&(i.clearStencil(_t),Ul=_t)},reset:function(){U=!1,ce=null,be=null,Me=null,Qe=null,wt=null,dn=null,Rn=null,Ul=null}}}const g=new l,r=new s,I=new o,C=new WeakMap,u=new WeakMap;let d={},A={},m=new WeakMap,f=[],p=null,b=!1,B=null,y=null,Z=null,q=null,W=null,S=null,x=null,V=!1,X=null,k=null,$=null,Q=null,E=null;const te=i.getParameter(35661);let se=!1,oe=0;const R=i.getParameter(7938);R.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(R)[1]),se=oe>=1):R.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),se=oe>=2);let Y=null,H={};const J=i.getParameter(3088),P=i.getParameter(2978),ne=new Nt().fromArray(J),fe=new Nt().fromArray(P);function We(U,ce,be){const Me=new Uint8Array(4),Qe=i.createTexture();i.bindTexture(U,Qe),i.texParameteri(U,10241,9728),i.texParameteri(U,10240,9728);for(let wt=0;wt<be;wt++)i.texImage2D(ce+wt,0,6408,1,1,0,6408,5121,Me);return Qe}const le={};le[3553]=We(3553,3553,1),le[34067]=We(34067,34069,6),g.setClear(0,0,0,1),r.setClear(1),I.setClear(0),_e(2929),r.setFunc(n2),Xe(!1),ot(r3),_e(2884),ve(Ts);function _e(U){d[U]!==!0&&(i.enable(U),d[U]=!0)}function Te(U){d[U]!==!1&&(i.disable(U),d[U]=!1)}function je(U,ce){return A[U]!==ce?(i.bindFramebuffer(U,ce),A[U]=ce,n&&(U===36009&&(A[36160]=ce),U===36160&&(A[36009]=ce)),!0):!1}function Se(U,ce){let be=f,Me=!1;if(U)if(be=m.get(ce),be===void 0&&(be=[],m.set(ce,be)),U.isWebGLMultipleRenderTargets){const Qe=U.texture;if(be.length!==Qe.length||be[0]!==36064){for(let wt=0,dn=Qe.length;wt<dn;wt++)be[wt]=36064+wt;be.length=Qe.length,Me=!0}}else be[0]!==36064&&(be[0]=36064,Me=!0);else be[0]!==1029&&(be[0]=1029,Me=!0);Me&&(t.isWebGL2?i.drawBuffers(be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(be))}function tt(U){return p!==U?(i.useProgram(U),p=U,!0):!1}const Ae={[wg]:32774,[tf]:32778,[nf]:32779};if(n)Ae[c3]=32775,Ae[C3]=32776;else{const U=e.get("EXT_blend_minmax");U!==null&&(Ae[c3]=U.MIN_EXT,Ae[C3]=U.MAX_EXT)}const Ie={[lf]:0,[sf]:1,[of]:768,[PA]:770,[Cf]:776,[If]:774,[rf]:772,[gf]:769,[OA]:771,[cf]:775,[af]:773};function ve(U,ce,be,Me,Qe,wt,dn,Rn){if(U===Ts){b===!0&&(Te(3042),b=!1);return}if(b===!1&&(_e(3042),b=!0),U!==ef){if(U!==B||Rn!==V){if((y!==wg||W!==wg)&&(i.blendEquation(32774),y=wg,W=wg),Rn)switch(U){case _g:i.blendFuncSeparate(1,771,1,771);break;case t2:i.blendFunc(1,1);break;case a3:i.blendFuncSeparate(0,769,0,1);break;case I3:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",U);break}else switch(U){case _g:i.blendFuncSeparate(770,771,1,771);break;case t2:i.blendFunc(770,1);break;case a3:i.blendFuncSeparate(0,769,0,1);break;case I3:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",U);break}Z=null,q=null,S=null,x=null,B=U,V=Rn}return}Qe=Qe||ce,wt=wt||be,dn=dn||Me,(ce!==y||Qe!==W)&&(i.blendEquationSeparate(Ae[ce],Ae[Qe]),y=ce,W=Qe),(be!==Z||Me!==q||wt!==S||dn!==x)&&(i.blendFuncSeparate(Ie[be],Ie[Me],Ie[wt],Ie[dn]),Z=be,q=Me,S=wt,x=dn),B=U,V=null}function Ne(U,ce){U.side===Hl?Te(2884):_e(2884);let be=U.side===Ei;ce&&(be=!be),Xe(be),U.blending===_g&&U.transparent===!1?ve(Ts):ve(U.blending,U.blendEquation,U.blendSrc,U.blendDst,U.blendEquationAlpha,U.blendSrcAlpha,U.blendDstAlpha,U.premultipliedAlpha),r.setFunc(U.depthFunc),r.setTest(U.depthTest),r.setMask(U.depthWrite),g.setMask(U.colorWrite);const Me=U.stencilWrite;I.setTest(Me),Me&&(I.setMask(U.stencilWriteMask),I.setFunc(U.stencilFunc,U.stencilRef,U.stencilFuncMask),I.setOp(U.stencilFail,U.stencilZFail,U.stencilZPass)),Oe(U.polygonOffset,U.polygonOffsetFactor,U.polygonOffsetUnits),U.alphaToCoverage===!0?_e(32926):Te(32926)}function Xe(U){X!==U&&(U?i.frontFace(2304):i.frontFace(2305),X=U)}function ot(U){U!==j8?(_e(2884),U!==k&&(U===r3?i.cullFace(1029):U===$8?i.cullFace(1028):i.cullFace(1032))):Te(2884),k=U}function $e(U){U!==$&&(se&&i.lineWidth(U),$=U)}function Oe(U,ce,be){U?(_e(32823),(Q!==ce||E!==be)&&(i.polygonOffset(ce,be),Q=ce,E=be)):Te(32823)}function vt(U){U?_e(3089):Te(3089)}function zt(U){U===void 0&&(U=33984+te-1),Y!==U&&(i.activeTexture(U),Y=U)}function _(U,ce,be){be===void 0&&(Y===null?be=33984+te-1:be=Y);let Me=H[be];Me===void 0&&(Me={type:void 0,texture:void 0},H[be]=Me),(Me.type!==U||Me.texture!==ce)&&(Y!==be&&(i.activeTexture(be),Y=be),i.bindTexture(U,ce||le[U]),Me.type=U,Me.texture=ce)}function z(){const U=H[Y];U!==void 0&&U.type!==void 0&&(i.bindTexture(U.type,null),U.type=void 0,U.texture=void 0)}function ge(){try{i.compressedTexImage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function ye(){try{i.compressedTexImage3D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function qe(){try{i.texSubImage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function Ye(){try{i.texSubImage3D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function lt(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function ze(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function he(){try{i.texStorage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function Ee(){try{i.texStorage3D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function T(){try{i.texImage2D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function re(){try{i.texImage3D.apply(i,arguments)}catch(U){console.error("THREE.WebGLState:",U)}}function Ge(U){ne.equals(U)===!1&&(i.scissor(U.x,U.y,U.z,U.w),ne.copy(U))}function we(U){fe.equals(U)===!1&&(i.viewport(U.x,U.y,U.z,U.w),fe.copy(U))}function nt(U,ce){let be=u.get(ce);be===void 0&&(be=new WeakMap,u.set(ce,be));let Me=be.get(U);Me===void 0&&(Me=i.getUniformBlockIndex(ce,U.name),be.set(U,Me))}function pt(U,ce){const Me=u.get(ce).get(U);C.get(U)!==Me&&(i.uniformBlockBinding(ce,Me,U.__bindingPointIndex),C.set(U,Me))}function Ut(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),n===!0&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},Y=null,H={},A={},m=new WeakMap,f=[],p=null,b=!1,B=null,y=null,Z=null,q=null,W=null,S=null,x=null,V=!1,X=null,k=null,$=null,Q=null,E=null,ne.set(0,0,i.canvas.width,i.canvas.height),fe.set(0,0,i.canvas.width,i.canvas.height),g.reset(),r.reset(),I.reset()}return{buffers:{color:g,depth:r,stencil:I},enable:_e,disable:Te,bindFramebuffer:je,drawBuffers:Se,useProgram:tt,setBlending:ve,setMaterial:Ne,setFlipSided:Xe,setCullFace:ot,setLineWidth:$e,setPolygonOffset:Oe,setScissorTest:vt,activeTexture:zt,bindTexture:_,unbindTexture:z,compressedTexImage2D:ge,compressedTexImage3D:ye,texImage2D:T,texImage3D:re,updateUBOMapping:nt,uniformBlockBinding:pt,texStorage2D:he,texStorage3D:Ee,texSubImage2D:qe,texSubImage3D:Ye,compressedTexSubImage2D:lt,compressedTexSubImage3D:ze,scissor:Ge,viewport:we,reset:Ut}}function NS(i,e,t,n,l,s,o){const g=l.isWebGL2,r=l.maxTextures,I=l.maxCubemapSize,C=l.maxTextureSize,u=l.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,A=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),m=new WeakMap;let f;const p=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function B(_,z){return b?new OffscreenCanvas(_,z):vI("canvas")}function y(_,z,ge,ye){let qe=1;if((_.width>ye||_.height>ye)&&(qe=ye/Math.max(_.width,_.height)),qe<1||z===!0)if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap){const Ye=z?l2:Math.floor,lt=Ye(qe*_.width),ze=Ye(qe*_.height);f===void 0&&(f=B(lt,ze));const he=ge?B(lt,ze):f;return he.width=lt,he.height=ze,he.getContext("2d").drawImage(_,0,0,lt,ze),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+_.width+"x"+_.height+") to ("+lt+"x"+ze+")."),he}else return"data"in _&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+_.width+"x"+_.height+")."),_;return _}function Z(_){return z3(_.width)&&z3(_.height)}function q(_){return g?!1:_.wrapS!==Tn||_.wrapT!==Tn||_.minFilter!==pn&&_.minFilter!==Pt}function W(_,z){return _.generateMipmaps&&z&&_.minFilter!==pn&&_.minFilter!==Pt}function S(_){i.generateMipmap(_)}function x(_,z,ge,ye,qe=!1){if(g===!1)return z;if(_!==null){if(i[_]!==void 0)return i[_];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+_+"'")}let Ye=z;return z===6403&&(ge===5126&&(Ye=33326),ge===5131&&(Ye=33325),ge===5121&&(Ye=33321)),z===33319&&(ge===5126&&(Ye=33328),ge===5131&&(Ye=33327),ge===5121&&(Ye=33323)),z===6408&&(ge===5126&&(Ye=34836),ge===5131&&(Ye=34842),ge===5121&&(Ye=ye===Yt&&qe===!1?35907:32856),ge===32819&&(Ye=32854),ge===32820&&(Ye=32855)),(Ye===33325||Ye===33326||Ye===33327||Ye===33328||Ye===34842||Ye===34836)&&e.get("EXT_color_buffer_float"),Ye}function V(_,z,ge){return W(_,ge)===!0||_.isFramebufferTexture&&_.minFilter!==pn&&_.minFilter!==Pt?Math.log2(Math.max(z.width,z.height))+1:_.mipmaps!==void 0&&_.mipmaps.length>0?_.mipmaps.length:_.isCompressedTexture&&Array.isArray(_.image)?z.mipmaps.length:1}function X(_){return _===pn||_===bI||_===GI?9728:9729}function k(_){const z=_.target;z.removeEventListener("dispose",k),Q(z),z.isVideoTexture&&m.delete(z)}function $(_){const z=_.target;z.removeEventListener("dispose",$),te(z)}function Q(_){const z=n.get(_);if(z.__webglInit===void 0)return;const ge=_.source,ye=p.get(ge);if(ye){const qe=ye[z.__cacheKey];qe.usedTimes--,qe.usedTimes===0&&E(_),Object.keys(ye).length===0&&p.delete(ge)}n.remove(_)}function E(_){const z=n.get(_);i.deleteTexture(z.__webglTexture);const ge=_.source,ye=p.get(ge);delete ye[z.__cacheKey],o.memory.textures--}function te(_){const z=_.texture,ge=n.get(_),ye=n.get(z);if(ye.__webglTexture!==void 0&&(i.deleteTexture(ye.__webglTexture),o.memory.textures--),_.depthTexture&&_.depthTexture.dispose(),_.isWebGLCubeRenderTarget)for(let qe=0;qe<6;qe++)i.deleteFramebuffer(ge.__webglFramebuffer[qe]),ge.__webglDepthbuffer&&i.deleteRenderbuffer(ge.__webglDepthbuffer[qe]);else{if(i.deleteFramebuffer(ge.__webglFramebuffer),ge.__webglDepthbuffer&&i.deleteRenderbuffer(ge.__webglDepthbuffer),ge.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ge.__webglMultisampledFramebuffer),ge.__webglColorRenderbuffer)for(let qe=0;qe<ge.__webglColorRenderbuffer.length;qe++)ge.__webglColorRenderbuffer[qe]&&i.deleteRenderbuffer(ge.__webglColorRenderbuffer[qe]);ge.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ge.__webglDepthRenderbuffer)}if(_.isWebGLMultipleRenderTargets)for(let qe=0,Ye=z.length;qe<Ye;qe++){const lt=n.get(z[qe]);lt.__webglTexture&&(i.deleteTexture(lt.__webglTexture),o.memory.textures--),n.remove(z[qe])}n.remove(z),n.remove(_)}let se=0;function oe(){se=0}function R(){const _=se;return _>=r&&console.warn("THREE.WebGLTextures: Trying to use "+_+" texture units while this GPU supports only "+r),se+=1,_}function Y(_){const z=[];return z.push(_.wrapS),z.push(_.wrapT),z.push(_.wrapR||0),z.push(_.magFilter),z.push(_.minFilter),z.push(_.anisotropy),z.push(_.internalFormat),z.push(_.format),z.push(_.type),z.push(_.generateMipmaps),z.push(_.premultiplyAlpha),z.push(_.flipY),z.push(_.unpackAlignment),z.push(_.encoding),z.join()}function H(_,z){const ge=n.get(_);if(_.isVideoTexture&&vt(_),_.isRenderTargetTexture===!1&&_.version>0&&ge.__version!==_.version){const ye=_.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Te(ge,_,z);return}}t.bindTexture(3553,ge.__webglTexture,33984+z)}function J(_,z){const ge=n.get(_);if(_.version>0&&ge.__version!==_.version){Te(ge,_,z);return}t.bindTexture(35866,ge.__webglTexture,33984+z)}function P(_,z){const ge=n.get(_);if(_.version>0&&ge.__version!==_.version){Te(ge,_,z);return}t.bindTexture(32879,ge.__webglTexture,33984+z)}function ne(_,z){const ge=n.get(_);if(_.version>0&&ge.__version!==_.version){je(ge,_,z);return}t.bindTexture(34067,ge.__webglTexture,33984+z)}const fe={[Uo]:10497,[Tn]:33071,[Za]:33648},We={[pn]:9728,[bI]:9984,[GI]:9986,[Pt]:9729,[v2]:9985,[js]:9987};function le(_,z,ge){if(ge?(i.texParameteri(_,10242,fe[z.wrapS]),i.texParameteri(_,10243,fe[z.wrapT]),(_===32879||_===35866)&&i.texParameteri(_,32882,fe[z.wrapR]),i.texParameteri(_,10240,We[z.magFilter]),i.texParameteri(_,10241,We[z.minFilter])):(i.texParameteri(_,10242,33071),i.texParameteri(_,10243,33071),(_===32879||_===35866)&&i.texParameteri(_,32882,33071),(z.wrapS!==Tn||z.wrapT!==Tn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(_,10240,X(z.magFilter)),i.texParameteri(_,10241,X(z.minFilter)),z.minFilter!==pn&&z.minFilter!==Pt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ye=e.get("EXT_texture_filter_anisotropic");if(z.type===Ns&&e.has("OES_texture_float_linear")===!1||g===!1&&z.type===er&&e.has("OES_texture_half_float_linear")===!1)return;(z.anisotropy>1||n.get(z).__currentAnisotropy)&&(i.texParameterf(_,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,l.getMaxAnisotropy())),n.get(z).__currentAnisotropy=z.anisotropy)}}function _e(_,z){let ge=!1;_.__webglInit===void 0&&(_.__webglInit=!0,z.addEventListener("dispose",k));const ye=z.source;let qe=p.get(ye);qe===void 0&&(qe={},p.set(ye,qe));const Ye=Y(z);if(Ye!==_.__cacheKey){qe[Ye]===void 0&&(qe[Ye]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ge=!0),qe[Ye].usedTimes++;const lt=qe[_.__cacheKey];lt!==void 0&&(qe[_.__cacheKey].usedTimes--,lt.usedTimes===0&&E(z)),_.__cacheKey=Ye,_.__webglTexture=qe[Ye].texture}return ge}function Te(_,z,ge){let ye=3553;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(ye=35866),z.isData3DTexture&&(ye=32879);const qe=_e(_,z),Ye=z.source;t.bindTexture(ye,_.__webglTexture,33984+ge);const lt=n.get(Ye);if(Ye.version!==lt.__version||qe===!0){t.activeTexture(33984+ge),i.pixelStorei(37440,z.flipY),i.pixelStorei(37441,z.premultiplyAlpha),i.pixelStorei(3317,z.unpackAlignment),i.pixelStorei(37443,0);const ze=q(z)&&Z(z.image)===!1;let he=y(z.image,ze,!1,C);he=zt(z,he);const Ee=Z(he)||g,T=s.convert(z.format,z.encoding);let re=s.convert(z.type),Ge=x(z.internalFormat,T,re,z.encoding,z.isVideoTexture);le(ye,z,Ee);let we;const nt=z.mipmaps,pt=g&&z.isVideoTexture!==!0,Ut=lt.__version===void 0||qe===!0,U=V(z,he,Ee);if(z.isDepthTexture)Ge=6402,g?z.type===Ns?Ge=36012:z.type===Vo?Ge=33190:z.type===kg?Ge=35056:Ge=33189:z.type===Ns&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),z.format===Lo&&Ge===6402&&z.type!==$A&&z.type!==Vo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),z.type=Vo,re=s.convert(z.type)),z.format===tr&&Ge===6402&&(Ge=34041,z.type!==kg&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),z.type=kg,re=s.convert(z.type))),Ut&&(pt?t.texStorage2D(3553,1,Ge,he.width,he.height):t.texImage2D(3553,0,Ge,he.width,he.height,0,T,re,null));else if(z.isDataTexture)if(nt.length>0&&Ee){pt&&Ut&&t.texStorage2D(3553,U,Ge,nt[0].width,nt[0].height);for(let ce=0,be=nt.length;ce<be;ce++)we=nt[ce],pt?t.texSubImage2D(3553,ce,0,0,we.width,we.height,T,re,we.data):t.texImage2D(3553,ce,Ge,we.width,we.height,0,T,re,we.data);z.generateMipmaps=!1}else pt?(Ut&&t.texStorage2D(3553,U,Ge,he.width,he.height),t.texSubImage2D(3553,0,0,0,he.width,he.height,T,re,he.data)):t.texImage2D(3553,0,Ge,he.width,he.height,0,T,re,he.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){pt&&Ut&&t.texStorage3D(35866,U,Ge,nt[0].width,nt[0].height,he.depth);for(let ce=0,be=nt.length;ce<be;ce++)we=nt[ce],z.format!==Li?T!==null?pt?t.compressedTexSubImage3D(35866,ce,0,0,0,we.width,we.height,he.depth,T,we.data,0,0):t.compressedTexImage3D(35866,ce,Ge,we.width,we.height,he.depth,0,we.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?t.texSubImage3D(35866,ce,0,0,0,we.width,we.height,he.depth,T,re,we.data):t.texImage3D(35866,ce,Ge,we.width,we.height,he.depth,0,T,re,we.data)}else{pt&&Ut&&t.texStorage2D(3553,U,Ge,nt[0].width,nt[0].height);for(let ce=0,be=nt.length;ce<be;ce++)we=nt[ce],z.format!==Li?T!==null?pt?t.compressedTexSubImage2D(3553,ce,0,0,we.width,we.height,T,we.data):t.compressedTexImage2D(3553,ce,Ge,we.width,we.height,0,we.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?t.texSubImage2D(3553,ce,0,0,we.width,we.height,T,re,we.data):t.texImage2D(3553,ce,Ge,we.width,we.height,0,T,re,we.data)}else if(z.isDataArrayTexture)pt?(Ut&&t.texStorage3D(35866,U,Ge,he.width,he.height,he.depth),t.texSubImage3D(35866,0,0,0,0,he.width,he.height,he.depth,T,re,he.data)):t.texImage3D(35866,0,Ge,he.width,he.height,he.depth,0,T,re,he.data);else if(z.isData3DTexture)pt?(Ut&&t.texStorage3D(32879,U,Ge,he.width,he.height,he.depth),t.texSubImage3D(32879,0,0,0,0,he.width,he.height,he.depth,T,re,he.data)):t.texImage3D(32879,0,Ge,he.width,he.height,he.depth,0,T,re,he.data);else if(z.isFramebufferTexture){if(Ut)if(pt)t.texStorage2D(3553,U,Ge,he.width,he.height);else{let ce=he.width,be=he.height;for(let Me=0;Me<U;Me++)t.texImage2D(3553,Me,Ge,ce,be,0,T,re,null),ce>>=1,be>>=1}}else if(nt.length>0&&Ee){pt&&Ut&&t.texStorage2D(3553,U,Ge,nt[0].width,nt[0].height);for(let ce=0,be=nt.length;ce<be;ce++)we=nt[ce],pt?t.texSubImage2D(3553,ce,0,0,T,re,we):t.texImage2D(3553,ce,Ge,T,re,we);z.generateMipmaps=!1}else pt?(Ut&&t.texStorage2D(3553,U,Ge,he.width,he.height),t.texSubImage2D(3553,0,0,0,T,re,he)):t.texImage2D(3553,0,Ge,T,re,he);W(z,Ee)&&S(ye),lt.__version=Ye.version,z.onUpdate&&z.onUpdate(z)}_.__version=z.version}function je(_,z,ge){if(z.image.length!==6)return;const ye=_e(_,z),qe=z.source;t.bindTexture(34067,_.__webglTexture,33984+ge);const Ye=n.get(qe);if(qe.version!==Ye.__version||ye===!0){t.activeTexture(33984+ge),i.pixelStorei(37440,z.flipY),i.pixelStorei(37441,z.premultiplyAlpha),i.pixelStorei(3317,z.unpackAlignment),i.pixelStorei(37443,0);const lt=z.isCompressedTexture||z.image[0].isCompressedTexture,ze=z.image[0]&&z.image[0].isDataTexture,he=[];for(let ce=0;ce<6;ce++)!lt&&!ze?he[ce]=y(z.image[ce],!1,!0,I):he[ce]=ze?z.image[ce].image:z.image[ce],he[ce]=zt(z,he[ce]);const Ee=he[0],T=Z(Ee)||g,re=s.convert(z.format,z.encoding),Ge=s.convert(z.type),we=x(z.internalFormat,re,Ge,z.encoding),nt=g&&z.isVideoTexture!==!0,pt=Ye.__version===void 0||ye===!0;let Ut=V(z,Ee,T);le(34067,z,T);let U;if(lt){nt&&pt&&t.texStorage2D(34067,Ut,we,Ee.width,Ee.height);for(let ce=0;ce<6;ce++){U=he[ce].mipmaps;for(let be=0;be<U.length;be++){const Me=U[be];z.format!==Li?re!==null?nt?t.compressedTexSubImage2D(34069+ce,be,0,0,Me.width,Me.height,re,Me.data):t.compressedTexImage2D(34069+ce,be,we,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nt?t.texSubImage2D(34069+ce,be,0,0,Me.width,Me.height,re,Ge,Me.data):t.texImage2D(34069+ce,be,we,Me.width,Me.height,0,re,Ge,Me.data)}}}else{U=z.mipmaps,nt&&pt&&(U.length>0&&Ut++,t.texStorage2D(34067,Ut,we,he[0].width,he[0].height));for(let ce=0;ce<6;ce++)if(ze){nt?t.texSubImage2D(34069+ce,0,0,0,he[ce].width,he[ce].height,re,Ge,he[ce].data):t.texImage2D(34069+ce,0,we,he[ce].width,he[ce].height,0,re,Ge,he[ce].data);for(let be=0;be<U.length;be++){const Qe=U[be].image[ce].image;nt?t.texSubImage2D(34069+ce,be+1,0,0,Qe.width,Qe.height,re,Ge,Qe.data):t.texImage2D(34069+ce,be+1,we,Qe.width,Qe.height,0,re,Ge,Qe.data)}}else{nt?t.texSubImage2D(34069+ce,0,0,0,re,Ge,he[ce]):t.texImage2D(34069+ce,0,we,re,Ge,he[ce]);for(let be=0;be<U.length;be++){const Me=U[be];nt?t.texSubImage2D(34069+ce,be+1,0,0,re,Ge,Me.image[ce]):t.texImage2D(34069+ce,be+1,we,re,Ge,Me.image[ce])}}}W(z,T)&&S(34067),Ye.__version=qe.version,z.onUpdate&&z.onUpdate(z)}_.__version=z.version}function Se(_,z,ge,ye,qe){const Ye=s.convert(ge.format,ge.encoding),lt=s.convert(ge.type),ze=x(ge.internalFormat,Ye,lt,ge.encoding);n.get(z).__hasExternalTextures||(qe===32879||qe===35866?t.texImage3D(qe,0,ze,z.width,z.height,z.depth,0,Ye,lt,null):t.texImage2D(qe,0,ze,z.width,z.height,0,Ye,lt,null)),t.bindFramebuffer(36160,_),Oe(z)?d.framebufferTexture2DMultisampleEXT(36160,ye,qe,n.get(ge).__webglTexture,0,$e(z)):(qe===3553||qe>=34069&&qe<=34074)&&i.framebufferTexture2D(36160,ye,qe,n.get(ge).__webglTexture,0),t.bindFramebuffer(36160,null)}function tt(_,z,ge){if(i.bindRenderbuffer(36161,_),z.depthBuffer&&!z.stencilBuffer){let ye=33189;if(ge||Oe(z)){const qe=z.depthTexture;qe&&qe.isDepthTexture&&(qe.type===Ns?ye=36012:qe.type===Vo&&(ye=33190));const Ye=$e(z);Oe(z)?d.renderbufferStorageMultisampleEXT(36161,Ye,ye,z.width,z.height):i.renderbufferStorageMultisample(36161,Ye,ye,z.width,z.height)}else i.renderbufferStorage(36161,ye,z.width,z.height);i.framebufferRenderbuffer(36160,36096,36161,_)}else if(z.depthBuffer&&z.stencilBuffer){const ye=$e(z);ge&&Oe(z)===!1?i.renderbufferStorageMultisample(36161,ye,35056,z.width,z.height):Oe(z)?d.renderbufferStorageMultisampleEXT(36161,ye,35056,z.width,z.height):i.renderbufferStorage(36161,34041,z.width,z.height),i.framebufferRenderbuffer(36160,33306,36161,_)}else{const ye=z.isWebGLMultipleRenderTargets===!0?z.texture:[z.texture];for(let qe=0;qe<ye.length;qe++){const Ye=ye[qe],lt=s.convert(Ye.format,Ye.encoding),ze=s.convert(Ye.type),he=x(Ye.internalFormat,lt,ze,Ye.encoding),Ee=$e(z);ge&&Oe(z)===!1?i.renderbufferStorageMultisample(36161,Ee,he,z.width,z.height):Oe(z)?d.renderbufferStorageMultisampleEXT(36161,Ee,he,z.width,z.height):i.renderbufferStorage(36161,he,z.width,z.height)}}i.bindRenderbuffer(36161,null)}function Ae(_,z){if(z&&z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,_),!(z.depthTexture&&z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(z.depthTexture).__webglTexture||z.depthTexture.image.width!==z.width||z.depthTexture.image.height!==z.height)&&(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0),H(z.depthTexture,0);const ye=n.get(z.depthTexture).__webglTexture,qe=$e(z);if(z.depthTexture.format===Lo)Oe(z)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,ye,0,qe):i.framebufferTexture2D(36160,36096,3553,ye,0);else if(z.depthTexture.format===tr)Oe(z)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,ye,0,qe):i.framebufferTexture2D(36160,33306,3553,ye,0);else throw new Error("Unknown depthTexture format")}function Ie(_){const z=n.get(_),ge=_.isWebGLCubeRenderTarget===!0;if(_.depthTexture&&!z.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");Ae(z.__webglFramebuffer,_)}else if(ge){z.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)t.bindFramebuffer(36160,z.__webglFramebuffer[ye]),z.__webglDepthbuffer[ye]=i.createRenderbuffer(),tt(z.__webglDepthbuffer[ye],_,!1)}else t.bindFramebuffer(36160,z.__webglFramebuffer),z.__webglDepthbuffer=i.createRenderbuffer(),tt(z.__webglDepthbuffer,_,!1);t.bindFramebuffer(36160,null)}function ve(_,z,ge){const ye=n.get(_);z!==void 0&&Se(ye.__webglFramebuffer,_,_.texture,36064,3553),ge!==void 0&&Ie(_)}function Ne(_){const z=_.texture,ge=n.get(_),ye=n.get(z);_.addEventListener("dispose",$),_.isWebGLMultipleRenderTargets!==!0&&(ye.__webglTexture===void 0&&(ye.__webglTexture=i.createTexture()),ye.__version=z.version,o.memory.textures++);const qe=_.isWebGLCubeRenderTarget===!0,Ye=_.isWebGLMultipleRenderTargets===!0,lt=Z(_)||g;if(qe){ge.__webglFramebuffer=[];for(let ze=0;ze<6;ze++)ge.__webglFramebuffer[ze]=i.createFramebuffer()}else{if(ge.__webglFramebuffer=i.createFramebuffer(),Ye)if(l.drawBuffers){const ze=_.texture;for(let he=0,Ee=ze.length;he<Ee;he++){const T=n.get(ze[he]);T.__webglTexture===void 0&&(T.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&_.samples>0&&Oe(_)===!1){const ze=Ye?z:[z];ge.__webglMultisampledFramebuffer=i.createFramebuffer(),ge.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ge.__webglMultisampledFramebuffer);for(let he=0;he<ze.length;he++){const Ee=ze[he];ge.__webglColorRenderbuffer[he]=i.createRenderbuffer(),i.bindRenderbuffer(36161,ge.__webglColorRenderbuffer[he]);const T=s.convert(Ee.format,Ee.encoding),re=s.convert(Ee.type),Ge=x(Ee.internalFormat,T,re,Ee.encoding,_.isXRRenderTarget===!0),we=$e(_);i.renderbufferStorageMultisample(36161,we,Ge,_.width,_.height),i.framebufferRenderbuffer(36160,36064+he,36161,ge.__webglColorRenderbuffer[he])}i.bindRenderbuffer(36161,null),_.depthBuffer&&(ge.__webglDepthRenderbuffer=i.createRenderbuffer(),tt(ge.__webglDepthRenderbuffer,_,!0)),t.bindFramebuffer(36160,null)}}if(qe){t.bindTexture(34067,ye.__webglTexture),le(34067,z,lt);for(let ze=0;ze<6;ze++)Se(ge.__webglFramebuffer[ze],_,z,36064,34069+ze);W(z,lt)&&S(34067),t.unbindTexture()}else if(Ye){const ze=_.texture;for(let he=0,Ee=ze.length;he<Ee;he++){const T=ze[he],re=n.get(T);t.bindTexture(3553,re.__webglTexture),le(3553,T,lt),Se(ge.__webglFramebuffer,_,T,36064+he,3553),W(T,lt)&&S(3553)}t.unbindTexture()}else{let ze=3553;(_.isWebGL3DRenderTarget||_.isWebGLArrayRenderTarget)&&(g?ze=_.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ze,ye.__webglTexture),le(ze,z,lt),Se(ge.__webglFramebuffer,_,z,36064,ze),W(z,lt)&&S(ze),t.unbindTexture()}_.depthBuffer&&Ie(_)}function Xe(_){const z=Z(_)||g,ge=_.isWebGLMultipleRenderTargets===!0?_.texture:[_.texture];for(let ye=0,qe=ge.length;ye<qe;ye++){const Ye=ge[ye];if(W(Ye,z)){const lt=_.isWebGLCubeRenderTarget?34067:3553,ze=n.get(Ye).__webglTexture;t.bindTexture(lt,ze),S(lt),t.unbindTexture()}}}function ot(_){if(g&&_.samples>0&&Oe(_)===!1){const z=_.isWebGLMultipleRenderTargets?_.texture:[_.texture],ge=_.width,ye=_.height;let qe=16384;const Ye=[],lt=_.stencilBuffer?33306:36096,ze=n.get(_),he=_.isWebGLMultipleRenderTargets===!0;if(he)for(let Ee=0;Ee<z.length;Ee++)t.bindFramebuffer(36160,ze.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ee,36161,null),t.bindFramebuffer(36160,ze.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ee,3553,null,0);t.bindFramebuffer(36008,ze.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ze.__webglFramebuffer);for(let Ee=0;Ee<z.length;Ee++){Ye.push(36064+Ee),_.depthBuffer&&Ye.push(lt);const T=ze.__ignoreDepthValues!==void 0?ze.__ignoreDepthValues:!1;if(T===!1&&(_.depthBuffer&&(qe|=256),_.stencilBuffer&&(qe|=1024)),he&&i.framebufferRenderbuffer(36008,36064,36161,ze.__webglColorRenderbuffer[Ee]),T===!0&&(i.invalidateFramebuffer(36008,[lt]),i.invalidateFramebuffer(36009,[lt])),he){const re=n.get(z[Ee]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,re,0)}i.blitFramebuffer(0,0,ge,ye,0,0,ge,ye,qe,9728),A&&i.invalidateFramebuffer(36008,Ye)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),he)for(let Ee=0;Ee<z.length;Ee++){t.bindFramebuffer(36160,ze.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ee,36161,ze.__webglColorRenderbuffer[Ee]);const T=n.get(z[Ee]).__webglTexture;t.bindFramebuffer(36160,ze.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ee,3553,T,0)}t.bindFramebuffer(36009,ze.__webglMultisampledFramebuffer)}}function $e(_){return Math.min(u,_.samples)}function Oe(_){const z=n.get(_);return g&&_.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function vt(_){const z=o.render.frame;m.get(_)!==z&&(m.set(_,z),_.update())}function zt(_,z){const ge=_.encoding,ye=_.format,qe=_.type;return _.isCompressedTexture===!0||_.isVideoTexture===!0||_.format===i2||ge!==Qs&&(ge===Yt?g===!1?e.has("EXT_sRGB")===!0&&ye===Li?(_.format=i2,_.minFilter=Pt,_.generateMipmaps=!1):z=ih.sRGBToLinear(z):(ye!==Li||qe!==Do)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ge)),z}this.allocateTextureUnit=R,this.resetTextureUnits=oe,this.setTexture2D=H,this.setTexture2DArray=J,this.setTexture3D=P,this.setTextureCube=ne,this.rebindTextures=ve,this.setupRenderTarget=Ne,this.updateRenderTargetMipmap=Xe,this.updateMultisampleRenderTarget=ot,this.setupDepthRenderbuffer=Ie,this.setupFrameBufferTexture=Se,this.useMultisampledRTT=Oe}function rb(i,e,t){const n=t.isWebGL2;function l(s,o=null){let g;if(s===Do)return 5121;if(s===Wf)return 32819;if(s===Sf)return 32820;if(s===xf)return 5120;if(s===qf)return 5122;if(s===$A)return 5123;if(s===wf)return 5124;if(s===Vo)return 5125;if(s===Ns)return 5126;if(s===er)return n?5131:(g=e.get("OES_texture_half_float"),g!==null?g.HALF_FLOAT_OES:null);if(s===Vf)return 6406;if(s===Li)return 6408;if(s===Xf)return 6409;if(s===Yf)return 6410;if(s===Lo)return 6402;if(s===tr)return 34041;if(s===zf)return 6403;if(s===Rf)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===i2)return g=e.get("EXT_sRGB"),g!==null?g.SRGB_ALPHA_EXT:null;if(s===Kf)return 36244;if(s===Hf)return 33319;if(s===Nf)return 33320;if(s===Mf)return 36249;if(s===y0||s===B0||s===Z0||s===v0)if(o===Yt)if(g=e.get("WEBGL_compressed_texture_s3tc_srgb"),g!==null){if(s===y0)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===B0)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Z0)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===v0)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(g=e.get("WEBGL_compressed_texture_s3tc"),g!==null){if(s===y0)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===B0)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Z0)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===v0)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===u3||s===d3||s===A3||s===h3)if(g=e.get("WEBGL_compressed_texture_pvrtc"),g!==null){if(s===u3)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===d3)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===A3)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===h3)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Ff)return g=e.get("WEBGL_compressed_texture_etc1"),g!==null?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===m3||s===p3)if(g=e.get("WEBGL_compressed_texture_etc"),g!==null){if(s===m3)return o===Yt?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(s===p3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===f3||s===b3||s===G3||s===y3||s===B3||s===Z3||s===v3||s===x3||s===q3||s===w3||s===W3||s===S3||s===V3||s===R3)if(g=e.get("WEBGL_compressed_texture_astc"),g!==null){if(s===f3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===b3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===G3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===y3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===B3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Z3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===v3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===x3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===q3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===w3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===W3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===S3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===V3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===R3)return o===Yt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===X3)if(g=e.get("EXT_texture_compression_bptc"),g!==null){if(s===X3)return o===Yt?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===kg?n?34042:(g=e.get("WEBGL_depth_texture"),g!==null?g.UNSIGNED_INT_24_8_WEBGL:null):i[s]!==void 0?i[s]:null}return{convert:l}}class ab extends Et{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Fs extends yt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const MS={type:"move"};class kd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Fs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Fs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Fs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let l=null,s=null,o=null;const g=this._targetRay,r=this._grip,I=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(I&&e.hand){o=!0;for(const f of e.hand.values()){const p=t.getJointPose(f,n);if(I.joints[f.jointName]===void 0){const B=new Fs;B.matrixAutoUpdate=!1,B.visible=!1,I.joints[f.jointName]=B,I.add(B)}const b=I.joints[f.jointName];p!==null&&(b.matrix.fromArray(p.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=p.radius),b.visible=p!==null}const C=I.joints["index-finger-tip"],u=I.joints["thumb-tip"],d=C.position.distanceTo(u.position),A=.02,m=.005;I.inputState.pinching&&d>A+m?(I.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!I.inputState.pinching&&d<=A-m&&(I.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else r!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(r.matrix.fromArray(s.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),s.linearVelocity?(r.hasLinearVelocity=!0,r.linearVelocity.copy(s.linearVelocity)):r.hasLinearVelocity=!1,s.angularVelocity?(r.hasAngularVelocity=!0,r.angularVelocity.copy(s.angularVelocity)):r.hasAngularVelocity=!1));g!==null&&(l=t.getPose(e.targetRaySpace,n),l===null&&s!==null&&(l=s),l!==null&&(g.matrix.fromArray(l.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),l.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(l.linearVelocity)):g.hasLinearVelocity=!1,l.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(l.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(MS)))}return g!==null&&(g.visible=l!==null),r!==null&&(r.visible=s!==null),I!==null&&(I.visible=o!==null),this}}class Ib extends un{constructor(e,t,n,l,s,o,g,r,I,C){if(C=C!==void 0?C:Lo,C!==Lo&&C!==tr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&C===Lo&&(n=Vo),n===void 0&&C===tr&&(n=kg),super(null,l,s,o,g,r,C,n,I),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=g!==void 0?g:pn,this.minFilter=r!==void 0?r:pn,this.flipY=!1,this.generateMipmaps=!1}}class FS extends hs{constructor(e,t){super();const n=this;let l=null,s=1,o=null,g="local-floor",r=null,I=null,C=null,u=null,d=null,A=null;const m=t.getContextAttributes();let f=null,p=null;const b=[],B=[],y=new Et;y.layers.enable(1),y.viewport=new Nt;const Z=new Et;Z.layers.enable(2),Z.viewport=new Nt;const q=[y,Z],W=new ab;W.layers.enable(1),W.layers.enable(2);let S=null,x=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let H=b[Y];return H===void 0&&(H=new kd,b[Y]=H),H.getTargetRaySpace()},this.getControllerGrip=function(Y){let H=b[Y];return H===void 0&&(H=new kd,b[Y]=H),H.getGripSpace()},this.getHand=function(Y){let H=b[Y];return H===void 0&&(H=new kd,b[Y]=H),H.getHandSpace()};function V(Y){const H=B.indexOf(Y.inputSource);if(H===-1)return;const J=b[H];J!==void 0&&J.dispatchEvent({type:Y.type,data:Y.inputSource})}function X(){l.removeEventListener("select",V),l.removeEventListener("selectstart",V),l.removeEventListener("selectend",V),l.removeEventListener("squeeze",V),l.removeEventListener("squeezestart",V),l.removeEventListener("squeezeend",V),l.removeEventListener("end",X),l.removeEventListener("inputsourceschange",k);for(let Y=0;Y<b.length;Y++){const H=B[Y];H!==null&&(B[Y]=null,b[Y].disconnect(H))}S=null,x=null,e.setRenderTarget(f),d=null,u=null,C=null,l=null,p=null,R.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){g=Y,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return r||o},this.setReferenceSpace=function(Y){r=Y},this.getBaseLayer=function(){return u!==null?u:d},this.getBinding=function(){return C},this.getFrame=function(){return A},this.getSession=function(){return l},this.setSession=async function(Y){if(l=Y,l!==null){if(f=e.getRenderTarget(),l.addEventListener("select",V),l.addEventListener("selectstart",V),l.addEventListener("selectend",V),l.addEventListener("squeeze",V),l.addEventListener("squeezestart",V),l.addEventListener("squeezeend",V),l.addEventListener("end",X),l.addEventListener("inputsourceschange",k),m.xrCompatible!==!0&&await t.makeXRCompatible(),l.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const H={antialias:l.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(l,t,H),l.updateRenderState({baseLayer:d}),p=new Di(d.framebufferWidth,d.framebufferHeight,{format:Li,type:Do,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let H=null,J=null,P=null;m.depth&&(P=m.stencil?35056:33190,H=m.stencil?tr:Lo,J=m.stencil?kg:Vo);const ne={colorFormat:32856,depthFormat:P,scaleFactor:s};C=new XRWebGLBinding(l,t),u=C.createProjectionLayer(ne),l.updateRenderState({layers:[u]}),p=new Di(u.textureWidth,u.textureHeight,{format:Li,type:Do,depthTexture:new Ib(u.textureWidth,u.textureHeight,J,void 0,void 0,void 0,void 0,void 0,void 0,H),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const fe=e.properties.get(p);fe.__ignoreDepthValues=u.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(1),r=null,o=await l.requestReferenceSpace(g),R.setContext(l),R.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function k(Y){for(let H=0;H<Y.removed.length;H++){const J=Y.removed[H],P=B.indexOf(J);P>=0&&(B[P]=null,b[P].dispatchEvent({type:"disconnected",data:J}))}for(let H=0;H<Y.added.length;H++){const J=Y.added[H];let P=B.indexOf(J);if(P===-1){for(let fe=0;fe<b.length;fe++)if(fe>=B.length){B.push(J),P=fe;break}else if(B[fe]===null){B[fe]=J,P=fe;break}if(P===-1)break}const ne=b[P];ne&&ne.dispatchEvent({type:"connected",data:J})}}const $=new K,Q=new K;function E(Y,H,J){$.setFromMatrixPosition(H.matrixWorld),Q.setFromMatrixPosition(J.matrixWorld);const P=$.distanceTo(Q),ne=H.projectionMatrix.elements,fe=J.projectionMatrix.elements,We=ne[14]/(ne[10]-1),le=ne[14]/(ne[10]+1),_e=(ne[9]+1)/ne[5],Te=(ne[9]-1)/ne[5],je=(ne[8]-1)/ne[0],Se=(fe[8]+1)/fe[0],tt=We*je,Ae=We*Se,Ie=P/(-je+Se),ve=Ie*-je;H.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(ve),Y.translateZ(Ie),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert();const Ne=We+Ie,Xe=le+Ie,ot=tt-ve,$e=Ae+(P-ve),Oe=_e*le/Xe*Ne,vt=Te*le/Xe*Ne;Y.projectionMatrix.makePerspective(ot,$e,Oe,vt,Ne,Xe)}function te(Y,H){H===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(H.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(l===null)return;W.near=Z.near=y.near=Y.near,W.far=Z.far=y.far=Y.far,(S!==W.near||x!==W.far)&&(l.updateRenderState({depthNear:W.near,depthFar:W.far}),S=W.near,x=W.far);const H=Y.parent,J=W.cameras;te(W,H);for(let ne=0;ne<J.length;ne++)te(J[ne],H);W.matrixWorld.decompose(W.position,W.quaternion,W.scale),Y.matrix.copy(W.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale);const P=Y.children;for(let ne=0,fe=P.length;ne<fe;ne++)P[ne].updateMatrixWorld(!0);J.length===2?E(W,y,Z):W.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return W},this.getFoveation=function(){if(u!==null)return u.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(Y){u!==null&&(u.fixedFoveation=Y),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=Y)};let se=null;function oe(Y,H){if(I=H.getViewerPose(r||o),A=H,I!==null){const J=I.views;d!==null&&(e.setRenderTargetFramebuffer(p,d.framebuffer),e.setRenderTarget(p));let P=!1;J.length!==W.cameras.length&&(W.cameras.length=0,P=!0);for(let ne=0;ne<J.length;ne++){const fe=J[ne];let We=null;if(d!==null)We=d.getViewport(fe);else{const _e=C.getViewSubImage(u,fe);We=_e.viewport,ne===0&&(e.setRenderTargetTextures(p,_e.colorTexture,u.ignoreDepthValues?void 0:_e.depthStencilTexture),e.setRenderTarget(p))}let le=q[ne];le===void 0&&(le=new Et,le.layers.enable(ne),le.viewport=new Nt,q[ne]=le),le.matrix.fromArray(fe.transform.matrix),le.projectionMatrix.fromArray(fe.projectionMatrix),le.viewport.set(We.x,We.y,We.width,We.height),ne===0&&W.matrix.copy(le.matrix),P===!0&&W.cameras.push(le)}}for(let J=0;J<b.length;J++){const P=B[J],ne=b[J];P!==null&&ne!==void 0&&ne.update(P,H,r||o)}se&&se(Y,H),A=null}const R=new ib;R.setAnimationLoop(oe),this.setAnimationLoop=function(Y){se=Y},this.dispose=function(){}}}function LS(i,e){function t(f,p){f.fogColor.value.copy(p.color),p.isFog?(f.fogNear.value=p.near,f.fogFar.value=p.far):p.isFogExp2&&(f.fogDensity.value=p.density)}function n(f,p,b,B,y){p.isMeshBasicMaterial||p.isMeshLambertMaterial?l(f,p):p.isMeshToonMaterial?(l(f,p),C(f,p)):p.isMeshPhongMaterial?(l(f,p),I(f,p)):p.isMeshStandardMaterial?(l(f,p),u(f,p),p.isMeshPhysicalMaterial&&d(f,p,y)):p.isMeshMatcapMaterial?(l(f,p),A(f,p)):p.isMeshDepthMaterial?l(f,p):p.isMeshDistanceMaterial?(l(f,p),m(f,p)):p.isMeshNormalMaterial?l(f,p):p.isLineBasicMaterial?(s(f,p),p.isLineDashedMaterial&&o(f,p)):p.isPointsMaterial?g(f,p,b,B):p.isSpriteMaterial?r(f,p):p.isShadowMaterial?(f.color.value.copy(p.color),f.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function l(f,p){f.opacity.value=p.opacity,p.color&&f.diffuse.value.copy(p.color),p.emissive&&f.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(f.map.value=p.map),p.alphaMap&&(f.alphaMap.value=p.alphaMap),p.bumpMap&&(f.bumpMap.value=p.bumpMap,f.bumpScale.value=p.bumpScale,p.side===Ei&&(f.bumpScale.value*=-1)),p.displacementMap&&(f.displacementMap.value=p.displacementMap,f.displacementScale.value=p.displacementScale,f.displacementBias.value=p.displacementBias),p.emissiveMap&&(f.emissiveMap.value=p.emissiveMap),p.normalMap&&(f.normalMap.value=p.normalMap,f.normalScale.value.copy(p.normalScale),p.side===Ei&&f.normalScale.value.negate()),p.specularMap&&(f.specularMap.value=p.specularMap),p.alphaTest>0&&(f.alphaTest.value=p.alphaTest);const b=e.get(p).envMap;if(b&&(f.envMap.value=b,f.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,f.reflectivity.value=p.reflectivity,f.ior.value=p.ior,f.refractionRatio.value=p.refractionRatio),p.lightMap){f.lightMap.value=p.lightMap;const Z=i.physicallyCorrectLights!==!0?Math.PI:1;f.lightMapIntensity.value=p.lightMapIntensity*Z}p.aoMap&&(f.aoMap.value=p.aoMap,f.aoMapIntensity.value=p.aoMapIntensity);let B;p.map?B=p.map:p.specularMap?B=p.specularMap:p.displacementMap?B=p.displacementMap:p.normalMap?B=p.normalMap:p.bumpMap?B=p.bumpMap:p.roughnessMap?B=p.roughnessMap:p.metalnessMap?B=p.metalnessMap:p.alphaMap?B=p.alphaMap:p.emissiveMap?B=p.emissiveMap:p.clearcoatMap?B=p.clearcoatMap:p.clearcoatNormalMap?B=p.clearcoatNormalMap:p.clearcoatRoughnessMap?B=p.clearcoatRoughnessMap:p.iridescenceMap?B=p.iridescenceMap:p.iridescenceThicknessMap?B=p.iridescenceThicknessMap:p.specularIntensityMap?B=p.specularIntensityMap:p.specularColorMap?B=p.specularColorMap:p.transmissionMap?B=p.transmissionMap:p.thicknessMap?B=p.thicknessMap:p.sheenColorMap?B=p.sheenColorMap:p.sheenRoughnessMap&&(B=p.sheenRoughnessMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),f.uvTransform.value.copy(B.matrix));let y;p.aoMap?y=p.aoMap:p.lightMap&&(y=p.lightMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),f.uv2Transform.value.copy(y.matrix))}function s(f,p){f.diffuse.value.copy(p.color),f.opacity.value=p.opacity}function o(f,p){f.dashSize.value=p.dashSize,f.totalSize.value=p.dashSize+p.gapSize,f.scale.value=p.scale}function g(f,p,b,B){f.diffuse.value.copy(p.color),f.opacity.value=p.opacity,f.size.value=p.size*b,f.scale.value=B*.5,p.map&&(f.map.value=p.map),p.alphaMap&&(f.alphaMap.value=p.alphaMap),p.alphaTest>0&&(f.alphaTest.value=p.alphaTest);let y;p.map?y=p.map:p.alphaMap&&(y=p.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),f.uvTransform.value.copy(y.matrix))}function r(f,p){f.diffuse.value.copy(p.color),f.opacity.value=p.opacity,f.rotation.value=p.rotation,p.map&&(f.map.value=p.map),p.alphaMap&&(f.alphaMap.value=p.alphaMap),p.alphaTest>0&&(f.alphaTest.value=p.alphaTest);let b;p.map?b=p.map:p.alphaMap&&(b=p.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),f.uvTransform.value.copy(b.matrix))}function I(f,p){f.specular.value.copy(p.specular),f.shininess.value=Math.max(p.shininess,1e-4)}function C(f,p){p.gradientMap&&(f.gradientMap.value=p.gradientMap)}function u(f,p){f.roughness.value=p.roughness,f.metalness.value=p.metalness,p.roughnessMap&&(f.roughnessMap.value=p.roughnessMap),p.metalnessMap&&(f.metalnessMap.value=p.metalnessMap),e.get(p).envMap&&(f.envMapIntensity.value=p.envMapIntensity)}function d(f,p,b){f.ior.value=p.ior,p.sheen>0&&(f.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),f.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(f.sheenColorMap.value=p.sheenColorMap),p.sheenRoughnessMap&&(f.sheenRoughnessMap.value=p.sheenRoughnessMap)),p.clearcoat>0&&(f.clearcoat.value=p.clearcoat,f.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(f.clearcoatMap.value=p.clearcoatMap),p.clearcoatRoughnessMap&&(f.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap),p.clearcoatNormalMap&&(f.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),f.clearcoatNormalMap.value=p.clearcoatNormalMap,p.side===Ei&&f.clearcoatNormalScale.value.negate())),p.iridescence>0&&(f.iridescence.value=p.iridescence,f.iridescenceIOR.value=p.iridescenceIOR,f.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],f.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(f.iridescenceMap.value=p.iridescenceMap),p.iridescenceThicknessMap&&(f.iridescenceThicknessMap.value=p.iridescenceThicknessMap)),p.transmission>0&&(f.transmission.value=p.transmission,f.transmissionSamplerMap.value=b.texture,f.transmissionSamplerSize.value.set(b.width,b.height),p.transmissionMap&&(f.transmissionMap.value=p.transmissionMap),f.thickness.value=p.thickness,p.thicknessMap&&(f.thicknessMap.value=p.thicknessMap),f.attenuationDistance.value=p.attenuationDistance,f.attenuationColor.value.copy(p.attenuationColor)),f.specularIntensity.value=p.specularIntensity,f.specularColor.value.copy(p.specularColor),p.specularIntensityMap&&(f.specularIntensityMap.value=p.specularIntensityMap),p.specularColorMap&&(f.specularColorMap.value=p.specularColorMap)}function A(f,p){p.matcap&&(f.matcap.value=p.matcap)}function m(f,p){f.referencePosition.value.copy(p.referencePosition),f.nearDistance.value=p.nearDistance,f.farDistance.value=p.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function _S(i,e,t,n){let l={},s={},o=[];const g=t.isWebGL2?i.getParameter(35375):0;function r(B,y){const Z=y.program;n.uniformBlockBinding(B,Z)}function I(B,y){let Z=l[B.id];Z===void 0&&(m(B),Z=C(B),l[B.id]=Z,B.addEventListener("dispose",p));const q=y.program;n.updateUBOMapping(B,q);const W=e.render.frame;s[B.id]!==W&&(d(B),s[B.id]=W)}function C(B){const y=u();B.__bindingPointIndex=y;const Z=i.createBuffer(),q=B.__size,W=B.usage;return i.bindBuffer(35345,Z),i.bufferData(35345,q,W),i.bindBuffer(35345,null),i.bindBufferBase(35345,y,Z),Z}function u(){for(let B=0;B<g;B++)if(o.indexOf(B)===-1)return o.push(B),B;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(B){const y=l[B.id],Z=B.uniforms,q=B.__cache;i.bindBuffer(35345,y);for(let W=0,S=Z.length;W<S;W++){const x=Z[W];if(A(x,W,q)===!0){const V=x.value,X=x.__offset;typeof V=="number"?(x.__data[0]=V,i.bufferSubData(35345,X,x.__data)):(x.value.isMatrix3?(x.__data[0]=x.value.elements[0],x.__data[1]=x.value.elements[1],x.__data[2]=x.value.elements[2],x.__data[3]=x.value.elements[0],x.__data[4]=x.value.elements[3],x.__data[5]=x.value.elements[4],x.__data[6]=x.value.elements[5],x.__data[7]=x.value.elements[0],x.__data[8]=x.value.elements[6],x.__data[9]=x.value.elements[7],x.__data[10]=x.value.elements[8],x.__data[11]=x.value.elements[0]):V.toArray(x.__data),i.bufferSubData(35345,X,x.__data))}}i.bindBuffer(35345,null)}function A(B,y,Z){const q=B.value;if(Z[y]===void 0)return typeof q=="number"?Z[y]=q:Z[y]=q.clone(),!0;if(typeof q=="number"){if(Z[y]!==q)return Z[y]=q,!0}else{const W=Z[y];if(W.equals(q)===!1)return W.copy(q),!0}return!1}function m(B){const y=B.uniforms;let Z=0;const q=16;let W=0;for(let S=0,x=y.length;S<x;S++){const V=y[S],X=f(V);if(V.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=Z,S>0){W=Z%q;const k=q-W;W!==0&&k-X.boundary<0&&(Z+=q-W,V.__offset=Z)}Z+=X.storage}return W=Z%q,W>0&&(Z+=q-W),B.__size=Z,B.__cache={},this}function f(B){const y=B.value,Z={boundary:0,storage:0};return typeof y=="number"?(Z.boundary=4,Z.storage=4):y.isVector2?(Z.boundary=8,Z.storage=8):y.isVector3||y.isColor?(Z.boundary=16,Z.storage=12):y.isVector4?(Z.boundary=16,Z.storage=16):y.isMatrix3?(Z.boundary=48,Z.storage=48):y.isMatrix4?(Z.boundary=64,Z.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),Z}function p(B){const y=B.target;y.removeEventListener("dispose",p);const Z=o.indexOf(y.__bindingPointIndex);o.splice(Z,1),i.deleteBuffer(l[y.id]),delete l[y.id],delete s[y.id]}function b(){for(const B in l)i.deleteBuffer(l[B]);o=[],l={},s={}}return{bind:r,update:I,dispose:b}}function kS(){const i=vI("canvas");return i.style.display="block",i}function ah(i={}){this.isWebGLRenderer=!0;const e=i.canvas!==void 0?i.canvas:kS(),t=i.context!==void 0?i.context:null,n=i.depth!==void 0?i.depth:!0,l=i.stencil!==void 0?i.stencil:!0,s=i.antialias!==void 0?i.antialias:!1,o=i.premultipliedAlpha!==void 0?i.premultipliedAlpha:!0,g=i.preserveDrawingBuffer!==void 0?i.preserveDrawingBuffer:!1,r=i.powerPreference!==void 0?i.powerPreference:"default",I=i.failIfMajorPerformanceCaveat!==void 0?i.failIfMajorPerformanceCaveat:!1;let C;t!==null?C=t.getContextAttributes().alpha:C=i.alpha!==void 0?i.alpha:!1;let u=null,d=null;const A=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Qs,this.physicallyCorrectLights=!1,this.toneMapping=Fl,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const f=this;let p=!1,b=0,B=0,y=null,Z=-1,q=null;const W=new Nt,S=new Nt;let x=null,V=e.width,X=e.height,k=1,$=null,Q=null;const E=new Nt(0,0,V,X),te=new Nt(0,0,V,X);let se=!1;const oe=new w2;let R=!1,Y=!1,H=null;const J=new st,P=new me,ne=new K,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function We(){return y===null?k:1}let le=t;function _e(N,ee){for(let de=0;de<N.length;de++){const j=N[de],pe=e.getContext(j,ee);if(pe!==null)return pe}return null}try{const N={alpha:!0,depth:n,stencil:l,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:g,powerPreference:r,failIfMajorPerformanceCaveat:I};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${B2}`),e.addEventListener("webglcontextlost",Ge,!1),e.addEventListener("webglcontextrestored",we,!1),e.addEventListener("webglcontextcreationerror",nt,!1),le===null){const ee=["webgl2","webgl","experimental-webgl"];if(f.isWebGL1Renderer===!0&&ee.shift(),le=_e(ee,N),le===null)throw _e(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}le.getShaderPrecisionFormat===void 0&&(le.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}let Te,je,Se,tt,Ae,Ie,ve,Ne,Xe,ot,$e,Oe,vt,zt,_,z,ge,ye,qe,Ye,lt,ze,he,Ee;function T(){Te=new sW(le),je=new $w(le,Te,i),Te.init(je),ze=new rb(le,Te,je),Se=new HS(le,Te,je),tt=new rW,Ae=new vS,Ie=new NS(le,Te,Se,Ae,je,ze,tt),ve=new tW(f),Ne=new lW(f),Xe=new mx(le,je),he=new Ow(le,Te,Xe,je),ot=new oW(le,Xe,tt,he),$e=new CW(le,ot,Xe,tt),qe=new cW(le,je,Ie),z=new eW(Ae),Oe=new ZS(f,ve,Ne,Te,je,he,z),vt=new LS(f,Ae),zt=new qS,_=new XS(Te,je),ye=new Pw(f,ve,Ne,Se,$e,C,o),ge=new KS(f,$e,je),Ee=new _S(le,tt,je,Se),Ye=new jw(le,Te,tt,je),lt=new gW(le,Te,tt,je),tt.programs=Oe.programs,f.capabilities=je,f.extensions=Te,f.properties=Ae,f.renderLists=zt,f.shadowMap=ge,f.state=Se,f.info=tt}T();const re=new FS(f,le);this.xr=re,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){const N=Te.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=Te.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(N){N!==void 0&&(k=N,this.setSize(V,X,!1))},this.getSize=function(N){return N.set(V,X)},this.setSize=function(N,ee,de){if(re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=N,X=ee,e.width=Math.floor(N*k),e.height=Math.floor(ee*k),de!==!1&&(e.style.width=N+"px",e.style.height=ee+"px"),this.setViewport(0,0,N,ee)},this.getDrawingBufferSize=function(N){return N.set(V*k,X*k).floor()},this.setDrawingBufferSize=function(N,ee,de){V=N,X=ee,k=de,e.width=Math.floor(N*de),e.height=Math.floor(ee*de),this.setViewport(0,0,N,ee)},this.getCurrentViewport=function(N){return N.copy(W)},this.getViewport=function(N){return N.copy(E)},this.setViewport=function(N,ee,de,j){N.isVector4?E.set(N.x,N.y,N.z,N.w):E.set(N,ee,de,j),Se.viewport(W.copy(E).multiplyScalar(k).floor())},this.getScissor=function(N){return N.copy(te)},this.setScissor=function(N,ee,de,j){N.isVector4?te.set(N.x,N.y,N.z,N.w):te.set(N,ee,de,j),Se.scissor(S.copy(te).multiplyScalar(k).floor())},this.getScissorTest=function(){return se},this.setScissorTest=function(N){Se.setScissorTest(se=N)},this.setOpaqueSort=function(N){$=N},this.setTransparentSort=function(N){Q=N},this.getClearColor=function(N){return N.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor.apply(ye,arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha.apply(ye,arguments)},this.clear=function(N=!0,ee=!0,de=!0){let j=0;N&&(j|=16384),ee&&(j|=256),de&&(j|=1024),le.clear(j)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ge,!1),e.removeEventListener("webglcontextrestored",we,!1),e.removeEventListener("webglcontextcreationerror",nt,!1),zt.dispose(),_.dispose(),Ae.dispose(),ve.dispose(),Ne.dispose(),$e.dispose(),he.dispose(),Ee.dispose(),Oe.dispose(),re.dispose(),re.removeEventListener("sessionstart",Me),re.removeEventListener("sessionend",Qe),H&&(H.dispose(),H=null),wt.stop()};function Ge(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1;const N=tt.autoReset,ee=ge.enabled,de=ge.autoUpdate,j=ge.needsUpdate,pe=ge.type;T(),tt.autoReset=N,ge.enabled=ee,ge.autoUpdate=de,ge.needsUpdate=j,ge.type=pe}function nt(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function pt(N){const ee=N.target;ee.removeEventListener("dispose",pt),Ut(ee)}function Ut(N){U(N),Ae.remove(N)}function U(N){const ee=Ae.get(N).programs;ee!==void 0&&(ee.forEach(function(de){Oe.releaseProgram(de)}),N.isShaderMaterial&&Oe.releaseShaderCache(N))}this.renderBufferDirect=function(N,ee,de,j,pe,et){ee===null&&(ee=fe);const rt=pe.isMesh&&pe.matrixWorld.determinant()<0,dt=_2(N,ee,de,j,pe);Se.setMaterial(j,rt);let ct=de.index;const Wt=de.attributes.position;if(ct===null){if(Wt===void 0||Wt.count===0)return}else if(ct.count===0)return;let ft=1;j.wireframe===!0&&(ct=ot.getWireframeAttribute(de),ft=2),he.setup(pe,j,dt,de,ct);let Zt,jt=Ye;ct!==null&&(Zt=Xe.get(ct),jt=lt,jt.setIndex(Zt));const ms=ct!==null?ct.count:Wt.count,io=de.drawRange.start*ft,lo=de.drawRange.count*ft,mi=et!==null?et.start*ft:0,Gt=et!==null?et.count*ft:1/0,Dl=Math.max(io,mi),$t=Math.min(ms,io+lo,mi+Gt)-1,pi=Math.max(0,$t-Dl+1);if(pi!==0){if(pe.isMesh)j.wireframe===!0?(Se.setLineWidth(j.wireframeLinewidth*We()),jt.setMode(1)):jt.setMode(4);else if(pe.isLine){let ji=j.linewidth;ji===void 0&&(ji=1),Se.setLineWidth(ji*We()),pe.isLineSegments?jt.setMode(1):pe.isLineLoop?jt.setMode(2):jt.setMode(3)}else pe.isPoints?jt.setMode(0):pe.isSprite&&jt.setMode(4);if(pe.isInstancedMesh)jt.renderInstances(Dl,pi,pe.count);else if(de.isInstancedBufferGeometry){const ji=Math.min(de.instanceCount,de._maxInstanceCount);jt.renderInstances(Dl,pi,ji)}else jt.render(Dl,pi)}},this.compile=function(N,ee){function de(j,pe,et){j.transparent===!0&&j.side===Hl?(j.side=Ei,j.needsUpdate=!0,hi(j,pe,et),j.side=To,j.needsUpdate=!0,hi(j,pe,et),j.side=Hl):hi(j,pe,et)}d=_.get(N),d.init(),m.push(d),N.traverseVisible(function(j){j.isLight&&j.layers.test(ee.layers)&&(d.pushLight(j),j.castShadow&&d.pushShadow(j))}),d.setupLights(f.physicallyCorrectLights),N.traverse(function(j){const pe=j.material;if(pe)if(Array.isArray(pe))for(let et=0;et<pe.length;et++){const rt=pe[et];de(rt,N,j)}else de(pe,N,j)}),m.pop(),d=null};let ce=null;function be(N){ce&&ce(N)}function Me(){wt.stop()}function Qe(){wt.start()}const wt=new ib;wt.setAnimationLoop(be),typeof self<"u"&&wt.setContext(self),this.setAnimationLoop=function(N){ce=N,re.setAnimationLoop(N),N===null?wt.stop():wt.start()},re.addEventListener("sessionstart",Me),re.addEventListener("sessionend",Qe),this.render=function(N,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(p===!0)return;N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),re.enabled===!0&&re.isPresenting===!0&&(re.cameraAutoUpdate===!0&&re.updateCamera(ee),ee=re.getCamera()),N.isScene===!0&&N.onBeforeRender(f,N,ee,y),d=_.get(N,m.length),d.init(),m.push(d),J.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),oe.setFromProjectionMatrix(J),Y=this.localClippingEnabled,R=z.init(this.clippingPlanes,Y,ee),u=zt.get(N,A.length),u.init(),A.push(u),dn(N,ee,0,f.sortObjects),u.finish(),f.sortObjects===!0&&u.sort($,Q),R===!0&&z.beginShadows();const de=d.state.shadowsArray;if(ge.render(de,N,ee),R===!0&&z.endShadows(),this.info.autoReset===!0&&this.info.reset(),ye.render(u,N),d.setupLights(f.physicallyCorrectLights),ee.isArrayCamera){const j=ee.cameras;for(let pe=0,et=j.length;pe<et;pe++){const rt=j[pe];Rn(u,N,rt,rt.viewport)}}else Rn(u,N,ee);y!==null&&(Ie.updateMultisampleRenderTarget(y),Ie.updateRenderTargetMipmap(y)),N.isScene===!0&&N.onAfterRender(f,N,ee),he.resetDefaultState(),Z=-1,q=null,m.pop(),m.length>0?d=m[m.length-1]:d=null,A.pop(),A.length>0?u=A[A.length-1]:u=null};function dn(N,ee,de,j){if(N.visible===!1)return;if(N.layers.test(ee.layers)){if(N.isGroup)de=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(ee);else if(N.isLight)d.pushLight(N),N.castShadow&&d.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||oe.intersectsSprite(N)){j&&ne.setFromMatrixPosition(N.matrixWorld).applyMatrix4(J);const rt=$e.update(N),dt=N.material;dt.visible&&u.push(N,rt,dt,de,ne.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(N.isSkinnedMesh&&N.skeleton.frame!==tt.render.frame&&(N.skeleton.update(),N.skeleton.frame=tt.render.frame),!N.frustumCulled||oe.intersectsObject(N))){j&&ne.setFromMatrixPosition(N.matrixWorld).applyMatrix4(J);const rt=$e.update(N),dt=N.material;if(Array.isArray(dt)){const ct=rt.groups;for(let Wt=0,ft=ct.length;Wt<ft;Wt++){const Zt=ct[Wt],jt=dt[Zt.materialIndex];jt&&jt.visible&&u.push(N,rt,jt,de,ne.z,Zt)}}else dt.visible&&u.push(N,rt,dt,de,ne.z,null)}}const et=N.children;for(let rt=0,dt=et.length;rt<dt;rt++)dn(et[rt],ee,de,j)}function Rn(N,ee,de,j){const pe=N.opaque,et=N.transmissive,rt=N.transparent;d.setupLightsView(de),et.length>0&&Ul(pe,ee,de),j&&Se.viewport(W.copy(j)),pe.length>0&&_t(pe,ee,de),et.length>0&&_t(et,ee,de),rt.length>0&&_t(rt,ee,de),Se.buffers.depth.setTest(!0),Se.buffers.depth.setMask(!0),Se.buffers.color.setMask(!0),Se.setPolygonOffset(!1)}function Ul(N,ee,de){const j=je.isWebGL2;H===null&&(H=new Di(1,1,{generateMipmaps:!0,type:Te.has("EXT_color_buffer_half_float")?er:Do,minFilter:js,samples:j&&s===!0?4:0})),f.getDrawingBufferSize(P),j?H.setSize(P.x,P.y):H.setSize(l2(P.x),l2(P.y));const pe=f.getRenderTarget();f.setRenderTarget(H),f.clear();const et=f.toneMapping;f.toneMapping=Fl,_t(N,ee,de),f.toneMapping=et,Ie.updateMultisampleRenderTarget(H),Ie.updateRenderTargetMipmap(H),f.setRenderTarget(pe)}function _t(N,ee,de){const j=ee.isScene===!0?ee.overrideMaterial:null;for(let pe=0,et=N.length;pe<et;pe++){const rt=N[pe],dt=rt.object,ct=rt.geometry,Wt=j===null?rt.material:j,ft=rt.group;dt.layers.test(de.layers)&&Oi(dt,ee,de,ct,Wt,ft)}}function Oi(N,ee,de,j,pe,et){N.onBeforeRender(f,ee,de,j,pe,et),N.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),pe.onBeforeRender(f,ee,de,j,N,et),pe.transparent===!0&&pe.side===Hl?(pe.side=Ei,pe.needsUpdate=!0,f.renderBufferDirect(de,ee,j,pe,N,et),pe.side=To,pe.needsUpdate=!0,f.renderBufferDirect(de,ee,j,pe,N,et),pe.side=Hl):f.renderBufferDirect(de,ee,j,pe,N,et),N.onAfterRender(f,ee,de,j,pe,et)}function hi(N,ee,de){ee.isScene!==!0&&(ee=fe);const j=Ae.get(N),pe=d.state.lights,et=d.state.shadowsArray,rt=pe.state.version,dt=Oe.getParameters(N,pe.state,et,ee,de),ct=Oe.getProgramCacheKey(dt);let Wt=j.programs;j.environment=N.isMeshStandardMaterial?ee.environment:null,j.fog=ee.fog,j.envMap=(N.isMeshStandardMaterial?Ne:ve).get(N.envMap||j.environment),Wt===void 0&&(N.addEventListener("dispose",pt),Wt=new Map,j.programs=Wt);let ft=Wt.get(ct);if(ft!==void 0){if(j.currentProgram===ft&&j.lightsStateVersion===rt)return ic(N,dt),ft}else dt.uniforms=Oe.getUniforms(N),N.onBuild(de,dt,f),N.onBeforeCompile(dt,f),ft=Oe.acquireProgram(dt,ct),Wt.set(ct,ft),j.uniforms=dt.uniforms;const Zt=j.uniforms;(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(Zt.clippingPlanes=z.uniform),ic(N,dt),j.needsLights=Ta(N),j.lightsStateVersion=rt,j.needsLights&&(Zt.ambientLightColor.value=pe.state.ambient,Zt.lightProbe.value=pe.state.probe,Zt.directionalLights.value=pe.state.directional,Zt.directionalLightShadows.value=pe.state.directionalShadow,Zt.spotLights.value=pe.state.spot,Zt.spotLightShadows.value=pe.state.spotShadow,Zt.rectAreaLights.value=pe.state.rectArea,Zt.ltc_1.value=pe.state.rectAreaLTC1,Zt.ltc_2.value=pe.state.rectAreaLTC2,Zt.pointLights.value=pe.state.point,Zt.pointLightShadows.value=pe.state.pointShadow,Zt.hemisphereLights.value=pe.state.hemi,Zt.directionalShadowMap.value=pe.state.directionalShadowMap,Zt.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,Zt.spotShadowMap.value=pe.state.spotShadowMap,Zt.spotLightMatrix.value=pe.state.spotLightMatrix,Zt.spotLightMap.value=pe.state.spotLightMap,Zt.pointShadowMap.value=pe.state.pointShadowMap,Zt.pointShadowMatrix.value=pe.state.pointShadowMatrix);const jt=ft.getUniforms(),ms=W0.seqWithValue(jt.seq,Zt);return j.currentProgram=ft,j.uniformsList=ms,ft}function ic(N,ee){const de=Ae.get(N);de.outputEncoding=ee.outputEncoding,de.instancing=ee.instancing,de.skinning=ee.skinning,de.morphTargets=ee.morphTargets,de.morphNormals=ee.morphNormals,de.morphColors=ee.morphColors,de.morphTargetsCount=ee.morphTargetsCount,de.numClippingPlanes=ee.numClippingPlanes,de.numIntersection=ee.numClipIntersection,de.vertexAlphas=ee.vertexAlphas,de.vertexTangents=ee.vertexTangents,de.toneMapping=ee.toneMapping}function _2(N,ee,de,j,pe){ee.isScene!==!0&&(ee=fe),Ie.resetTextureUnits();const et=ee.fog,rt=j.isMeshStandardMaterial?ee.environment:null,dt=y===null?f.outputEncoding:y.isXRRenderTarget===!0?y.texture.encoding:Qs,ct=(j.isMeshStandardMaterial?Ne:ve).get(j.envMap||rt),Wt=j.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,ft=!!j.normalMap&&!!de.attributes.tangent,Zt=!!de.morphAttributes.position,jt=!!de.morphAttributes.normal,ms=!!de.morphAttributes.color,io=j.toneMapped?f.toneMapping:Fl,lo=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,mi=lo!==void 0?lo.length:0,Gt=Ae.get(j),Dl=d.state.lights;if(R===!0&&(Y===!0||N!==q)){const Kt=N===q&&j.id===Z;z.setState(j,N,Kt)}let $t=!1;j.version===Gt.__version?(Gt.needsLights&&Gt.lightsStateVersion!==Dl.state.version||Gt.outputEncoding!==dt||pe.isInstancedMesh&&Gt.instancing===!1||!pe.isInstancedMesh&&Gt.instancing===!0||pe.isSkinnedMesh&&Gt.skinning===!1||!pe.isSkinnedMesh&&Gt.skinning===!0||Gt.envMap!==ct||j.fog===!0&&Gt.fog!==et||Gt.numClippingPlanes!==void 0&&(Gt.numClippingPlanes!==z.numPlanes||Gt.numIntersection!==z.numIntersection)||Gt.vertexAlphas!==Wt||Gt.vertexTangents!==ft||Gt.morphTargets!==Zt||Gt.morphNormals!==jt||Gt.morphColors!==ms||Gt.toneMapping!==io||je.isWebGL2===!0&&Gt.morphTargetsCount!==mi)&&($t=!0):($t=!0,Gt.__version=j.version);let pi=Gt.currentProgram;$t===!0&&(pi=hi(j,ee,pe));let ji=!1,$i=!1,el=!1;const Ct=pi.getUniforms(),xt=Gt.uniforms;if(Se.useProgram(pi.program)&&(ji=!0,$i=!0,el=!0),j.id!==Z&&(Z=j.id,$i=!0),ji||q!==N){if(Ct.setValue(le,"projectionMatrix",N.projectionMatrix),je.logarithmicDepthBuffer&&Ct.setValue(le,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),q!==N&&(q=N,$i=!0,el=!0),j.isShaderMaterial||j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshStandardMaterial||j.envMap){const Kt=Ct.map.cameraPosition;Kt!==void 0&&Kt.setValue(le,ne.setFromMatrixPosition(N.matrixWorld))}(j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshLambertMaterial||j.isMeshBasicMaterial||j.isMeshStandardMaterial||j.isShaderMaterial)&&Ct.setValue(le,"isOrthographic",N.isOrthographicCamera===!0),(j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshLambertMaterial||j.isMeshBasicMaterial||j.isMeshStandardMaterial||j.isShaderMaterial||j.isShadowMaterial||pe.isSkinnedMesh)&&Ct.setValue(le,"viewMatrix",N.matrixWorldInverse)}if(pe.isSkinnedMesh){Ct.setOptional(le,pe,"bindMatrix"),Ct.setOptional(le,pe,"bindMatrixInverse");const Kt=pe.skeleton;Kt&&(je.floatVertexTextures?(Kt.boneTexture===null&&Kt.computeBoneTexture(),Ct.setValue(le,"boneTexture",Kt.boneTexture,Ie),Ct.setValue(le,"boneTextureSize",Kt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const tl=de.morphAttributes;if((tl.position!==void 0||tl.normal!==void 0||tl.color!==void 0&&je.isWebGL2===!0)&&qe.update(pe,de,j,pi),($i||Gt.receiveShadow!==pe.receiveShadow)&&(Gt.receiveShadow=pe.receiveShadow,Ct.setValue(le,"receiveShadow",pe.receiveShadow)),j.isMeshGouraudMaterial&&j.envMap!==null&&(xt.envMap.value=ct,xt.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),$i&&(Ct.setValue(le,"toneMappingExposure",f.toneMappingExposure),Gt.needsLights&&lc(xt,el),et&&j.fog===!0&&vt.refreshFogUniforms(xt,et),vt.refreshMaterialUniforms(xt,j,k,X,H),W0.upload(le,Gt.uniformsList,xt,Ie)),j.isShaderMaterial&&j.uniformsNeedUpdate===!0&&(W0.upload(le,Gt.uniformsList,xt,Ie),j.uniformsNeedUpdate=!1),j.isSpriteMaterial&&Ct.setValue(le,"center",pe.center),Ct.setValue(le,"modelViewMatrix",pe.modelViewMatrix),Ct.setValue(le,"normalMatrix",pe.normalMatrix),Ct.setValue(le,"modelMatrix",pe.matrixWorld),j.isShaderMaterial||j.isRawShaderMaterial){const Kt=j.uniformsGroups;for(let Xn=0,ps=Kt.length;Xn<ps;Xn++)if(je.isWebGL2){const fs=Kt[Xn];Ee.update(fs,pi),Ee.bind(fs,pi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return pi}function lc(N,ee){N.ambientLightColor.needsUpdate=ee,N.lightProbe.needsUpdate=ee,N.directionalLights.needsUpdate=ee,N.directionalLightShadows.needsUpdate=ee,N.pointLights.needsUpdate=ee,N.pointLightShadows.needsUpdate=ee,N.spotLights.needsUpdate=ee,N.spotLightShadows.needsUpdate=ee,N.rectAreaLights.needsUpdate=ee,N.hemisphereLights.needsUpdate=ee}function Ta(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(N,ee,de){Ae.get(N.texture).__webglTexture=ee,Ae.get(N.depthTexture).__webglTexture=de;const j=Ae.get(N);j.__hasExternalTextures=!0,j.__hasExternalTextures&&(j.__autoAllocateDepthBuffer=de===void 0,j.__autoAllocateDepthBuffer||Te.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),j.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,ee){const de=Ae.get(N);de.__webglFramebuffer=ee,de.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(N,ee=0,de=0){y=N,b=ee,B=de;let j=!0,pe=null,et=!1,rt=!1;if(N){const ct=Ae.get(N);ct.__useDefaultFramebuffer!==void 0?(Se.bindFramebuffer(36160,null),j=!1):ct.__webglFramebuffer===void 0?Ie.setupRenderTarget(N):ct.__hasExternalTextures&&Ie.rebindTextures(N,Ae.get(N.texture).__webglTexture,Ae.get(N.depthTexture).__webglTexture);const Wt=N.texture;(Wt.isData3DTexture||Wt.isDataArrayTexture||Wt.isCompressedArrayTexture)&&(rt=!0);const ft=Ae.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(pe=ft[ee],et=!0):je.isWebGL2&&N.samples>0&&Ie.useMultisampledRTT(N)===!1?pe=Ae.get(N).__webglMultisampledFramebuffer:pe=ft,W.copy(N.viewport),S.copy(N.scissor),x=N.scissorTest}else W.copy(E).multiplyScalar(k).floor(),S.copy(te).multiplyScalar(k).floor(),x=se;if(Se.bindFramebuffer(36160,pe)&&je.drawBuffers&&j&&Se.drawBuffers(N,pe),Se.viewport(W),Se.scissor(S),Se.setScissorTest(x),et){const ct=Ae.get(N.texture);le.framebufferTexture2D(36160,36064,34069+ee,ct.__webglTexture,de)}else if(rt){const ct=Ae.get(N.texture),Wt=ee||0;le.framebufferTextureLayer(36160,36064,ct.__webglTexture,de||0,Wt)}Z=-1},this.readRenderTargetPixels=function(N,ee,de,j,pe,et,rt){if(!(N&&N.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=Ae.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&rt!==void 0&&(dt=dt[rt]),dt){Se.bindFramebuffer(36160,dt);try{const ct=N.texture,Wt=ct.format,ft=ct.type;if(Wt!==Li&&ze.convert(Wt)!==le.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Zt=ft===er&&(Te.has("EXT_color_buffer_half_float")||je.isWebGL2&&Te.has("EXT_color_buffer_float"));if(ft!==Do&&ze.convert(ft)!==le.getParameter(35738)&&!(ft===Ns&&(je.isWebGL2||Te.has("OES_texture_float")||Te.has("WEBGL_color_buffer_float")))&&!Zt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=N.width-j&&de>=0&&de<=N.height-pe&&le.readPixels(ee,de,j,pe,ze.convert(Wt),ze.convert(ft),et)}finally{const ct=y!==null?Ae.get(y).__webglFramebuffer:null;Se.bindFramebuffer(36160,ct)}}},this.copyFramebufferToTexture=function(N,ee,de=0){const j=Math.pow(2,-de),pe=Math.floor(ee.image.width*j),et=Math.floor(ee.image.height*j);Ie.setTexture2D(ee,0),le.copyTexSubImage2D(3553,de,0,0,N.x,N.y,pe,et),Se.unbindTexture()},this.copyTextureToTexture=function(N,ee,de,j=0){const pe=ee.image.width,et=ee.image.height,rt=ze.convert(de.format),dt=ze.convert(de.type);Ie.setTexture2D(de,0),le.pixelStorei(37440,de.flipY),le.pixelStorei(37441,de.premultiplyAlpha),le.pixelStorei(3317,de.unpackAlignment),ee.isDataTexture?le.texSubImage2D(3553,j,N.x,N.y,pe,et,rt,dt,ee.image.data):ee.isCompressedTexture?le.compressedTexSubImage2D(3553,j,N.x,N.y,ee.mipmaps[0].width,ee.mipmaps[0].height,rt,ee.mipmaps[0].data):le.texSubImage2D(3553,j,N.x,N.y,rt,dt,ee.image),j===0&&de.generateMipmaps&&le.generateMipmap(3553),Se.unbindTexture()},this.copyTextureToTexture3D=function(N,ee,de,j,pe=0){if(f.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const et=N.max.x-N.min.x+1,rt=N.max.y-N.min.y+1,dt=N.max.z-N.min.z+1,ct=ze.convert(j.format),Wt=ze.convert(j.type);let ft;if(j.isData3DTexture)Ie.setTexture3D(j,0),ft=32879;else if(j.isDataArrayTexture)Ie.setTexture2DArray(j,0),ft=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}le.pixelStorei(37440,j.flipY),le.pixelStorei(37441,j.premultiplyAlpha),le.pixelStorei(3317,j.unpackAlignment);const Zt=le.getParameter(3314),jt=le.getParameter(32878),ms=le.getParameter(3316),io=le.getParameter(3315),lo=le.getParameter(32877),mi=de.isCompressedTexture?de.mipmaps[0]:de.image;le.pixelStorei(3314,mi.width),le.pixelStorei(32878,mi.height),le.pixelStorei(3316,N.min.x),le.pixelStorei(3315,N.min.y),le.pixelStorei(32877,N.min.z),de.isDataTexture||de.isData3DTexture?le.texSubImage3D(ft,pe,ee.x,ee.y,ee.z,et,rt,dt,ct,Wt,mi.data):de.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),le.compressedTexSubImage3D(ft,pe,ee.x,ee.y,ee.z,et,rt,dt,ct,mi.data)):le.texSubImage3D(ft,pe,ee.x,ee.y,ee.z,et,rt,dt,ct,Wt,mi),le.pixelStorei(3314,Zt),le.pixelStorei(32878,jt),le.pixelStorei(3316,ms),le.pixelStorei(3315,io),le.pixelStorei(32877,lo),pe===0&&j.generateMipmaps&&le.generateMipmap(ft),Se.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?Ie.setTextureCube(N,0):N.isData3DTexture?Ie.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?Ie.setTexture2DArray(N,0):Ie.setTexture2D(N,0),Se.unbindTexture()},this.resetState=function(){b=0,B=0,y=null,Se.reset(),he.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class cb extends ah{}cb.prototype.isWebGL1Renderer=!0;class S2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ve(e),this.density=t}clone(){return new S2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class V2{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ve(e),this.near=t,this.far=n}clone(){return new V2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ih extends yt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class _I{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=BI,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ji()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let l=0,s=this.stride;l<s;l++)this.array[e+l]=t.array[n+l];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ji()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ji()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const gi=new K;class Qo{constructor(e,t,n,l=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=l===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)gi.fromBufferAttribute(this,t),gi.applyMatrix4(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)gi.fromBufferAttribute(this,t),gi.applyNormalMatrix(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)gi.fromBufferAttribute(this,t),gi.transformDirection(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}setX(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ms(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ms(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ms(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ms(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),n=Tt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,l){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),n=Tt(n,this.array),l=Tt(l,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=l,this}setXYZW(e,t,n,l,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),n=Tt(n,this.array),l=Tt(l,this.array),s=Tt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=l,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const l=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[l+s])}return new Ft(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const l=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[l+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ch extends vn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Mr;const y1=new K,Fr=new K,Lr=new K,_r=new me,B1=new me,Cb=new st,zC=new K,Z1=new K,KC=new K,I7=new me,Td=new me,c7=new me;class ub extends yt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Mr===void 0){Mr=new ut;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new _I(t,5);Mr.setIndex([0,1,2,0,2,3]),Mr.setAttribute("position",new Qo(n,3,0,!1)),Mr.setAttribute("uv",new Qo(n,2,3,!1))}this.geometry=Mr,this.material=e!==void 0?e:new ch,this.center=new me(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fr.setFromMatrixScale(this.matrixWorld),Cb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Lr.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Fr.multiplyScalar(-Lr.z);const n=this.material.rotation;let l,s;n!==0&&(s=Math.cos(n),l=Math.sin(n));const o=this.center;HC(zC.set(-.5,-.5,0),Lr,o,Fr,l,s),HC(Z1.set(.5,-.5,0),Lr,o,Fr,l,s),HC(KC.set(.5,.5,0),Lr,o,Fr,l,s),I7.set(0,0),Td.set(1,0),c7.set(1,1);let g=e.ray.intersectTriangle(zC,Z1,KC,!1,y1);if(g===null&&(HC(Z1.set(-.5,.5,0),Lr,o,Fr,l,s),Td.set(0,1),g=e.ray.intersectTriangle(zC,KC,Z1,!1,y1),g===null))return;const r=e.ray.origin.distanceTo(y1);r<e.near||r>e.far||t.push({distance:r,point:y1.clone(),uv:hl.getUV(y1,zC,Z1,KC,I7,Td,c7,new me),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function HC(i,e,t,n,l,s){_r.subVectors(i,t).addScalar(.5).multiply(n),l!==void 0?(B1.x=s*_r.x-l*_r.y,B1.y=l*_r.x+s*_r.y):B1.copy(_r),i.copy(e),i.x+=B1.x,i.y+=B1.y,i.applyMatrix4(Cb)}const NC=new K,C7=new K;class db extends yt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,l=t.length;n<l;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let l;for(l=0;l<n.length&&!(t<n[l].distance);l++);return n.splice(l,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,l;for(n=1,l=t.length;n<l&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){NC.setFromMatrixPosition(this.matrixWorld);const l=e.ray.origin.distanceTo(NC);this.getObjectForDistance(l).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){NC.setFromMatrixPosition(e.matrixWorld),C7.setFromMatrixPosition(this.matrixWorld);const n=NC.distanceTo(C7)/e.zoom;t[0].object.visible=!0;let l,s;for(l=1,s=t.length;l<s&&n>=t[l].distance;l++)t[l-1].object.visible=!1,t[l].object.visible=!0;for(this._currentLevel=l-1;l<s;l++)t[l].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let l=0,s=n.length;l<s;l++){const o=n[l];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const u7=new K,d7=new Nt,A7=new Nt,TS=new K,h7=new st;class Ch extends Mn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new st,this.bindMatrixInverse=new st}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Nt,t=this.geometry.attributes.skinWeight;for(let n=0,l=t.count;n<l;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,l=this.geometry;d7.fromBufferAttribute(l.attributes.skinIndex,e),A7.fromBufferAttribute(l.attributes.skinWeight,e),u7.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=A7.getComponent(s);if(o!==0){const g=d7.getComponent(s);h7.multiplyMatrices(n.bones[g].matrixWorld,n.boneInverses[g]),t.addScaledVector(TS.copy(u7).applyMatrix4(h7),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class R2 extends yt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Aa extends un{constructor(e=null,t=1,n=1,l,s,o,g,r,I=pn,C=pn,u,d){super(null,o,g,r,I,C,l,s,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const m7=new st,ES=new st;class kI{constructor(e=[],t=[]){this.uuid=Ji(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,l=this.bones.length;n<l;n++)this.boneInverses.push(new st)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new st;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,l=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const g=e[s]?e[s].matrixWorld:ES;m7.multiplyMatrices(g,t[s]),m7.toArray(n,s*16)}l!==null&&(l.needsUpdate=!0)}clone(){return new kI(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Pf(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Aa(t,e,e,Li,Ns);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const l=this.bones[t];if(l.name===e)return l}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,l=e.bones.length;n<l;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new R2),this.bones.push(o),this.boneInverses.push(new st().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let l=0,s=t.length;l<s;l++){const o=t[l];e.bones.push(o.uuid);const g=n[l];e.boneInverses.push(g.toArray())}return e}}class qa extends Ft{constructor(e,t,n,l=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=l}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const p7=new st,f7=new st,MC=[],JS=new st,v1=new Mn;class Ug extends Mn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new qa(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let l=0;l<n;l++)this.setMatrixAt(l,JS)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,l=this.count;if(v1.geometry=this.geometry,v1.material=this.material,v1.material!==void 0)for(let s=0;s<l;s++){this.getMatrixAt(s,p7),f7.multiplyMatrices(n,p7),v1.matrixWorld=f7,v1.raycast(e,MC);for(let o=0,g=MC.length;o<g;o++){const r=MC[o];r.instanceId=s,r.object=this,t.push(r)}MC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new qa(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class li extends vn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ve(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const b7=new K,G7=new K,y7=new st,Ed=new MI,FC=new tg;class Ps extends yt{constructor(e=new ut,t=new li){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let l=1,s=t.count;l<s;l++)b7.fromBufferAttribute(t,l-1),G7.fromBufferAttribute(t,l),n[l]=n[l-1],n[l]+=b7.distanceTo(G7);e.setAttribute("lineDistance",new ke(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,l=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),FC.copy(n.boundingSphere),FC.applyMatrix4(l),FC.radius+=s,e.ray.intersectsSphere(FC)===!1)return;y7.copy(l).invert(),Ed.copy(e.ray).applyMatrix4(y7);const g=s/((this.scale.x+this.scale.y+this.scale.z)/3),r=g*g,I=new K,C=new K,u=new K,d=new K,A=this.isLineSegments?2:1,m=n.index,p=n.attributes.position;if(m!==null){const b=Math.max(0,o.start),B=Math.min(m.count,o.start+o.count);for(let y=b,Z=B-1;y<Z;y+=A){const q=m.getX(y),W=m.getX(y+1);if(I.fromBufferAttribute(p,q),C.fromBufferAttribute(p,W),Ed.distanceSqToSegment(I,C,d,u)>r)continue;d.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(d);x<e.near||x>e.far||t.push({distance:x,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const b=Math.max(0,o.start),B=Math.min(p.count,o.start+o.count);for(let y=b,Z=B-1;y<Z;y+=A){if(I.fromBufferAttribute(p,y),C.fromBufferAttribute(p,y+1),Ed.distanceSqToSegment(I,C,d,u)>r)continue;d.applyMatrix4(this.matrixWorld);const W=e.ray.origin.distanceTo(d);W<e.near||W>e.far||t.push({distance:W,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const l=t[n[0]];if(l!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=l.length;s<o;s++){const g=l[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=s}}}}}const B7=new K,Z7=new K;class Tl extends Ps{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let l=0,s=t.count;l<s;l+=2)B7.fromBufferAttribute(t,l),Z7.fromBufferAttribute(t,l+1),n[l]=l===0?0:n[l-1],n[l+1]=n[l]+B7.distanceTo(Z7);e.setAttribute("lineDistance",new ke(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class uh extends Ps{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class X2 extends vn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const v7=new st,N3=new MI,LC=new tg,_C=new K;class dh extends yt{constructor(e=new ut,t=new X2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,l=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),LC.copy(n.boundingSphere),LC.applyMatrix4(l),LC.radius+=s,e.ray.intersectsSphere(LC)===!1)return;v7.copy(l).invert(),N3.copy(e.ray).applyMatrix4(v7);const g=s/((this.scale.x+this.scale.y+this.scale.z)/3),r=g*g,I=n.index,u=n.attributes.position;if(I!==null){const d=Math.max(0,o.start),A=Math.min(I.count,o.start+o.count);for(let m=d,f=A;m<f;m++){const p=I.getX(m);_C.fromBufferAttribute(u,p),x7(_C,p,r,l,e,t,this)}}else{const d=Math.max(0,o.start),A=Math.min(u.count,o.start+o.count);for(let m=d,f=A;m<f;m++)_C.fromBufferAttribute(u,m),x7(_C,m,r,l,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const l=t[n[0]];if(l!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=l.length;s<o;s++){const g=l[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=s}}}}}function x7(i,e,t,n,l,s,o){const g=N3.distanceSqToPoint(i);if(g<t){const r=new K;N3.closestPointToPoint(i,r),r.applyMatrix4(n);const I=l.ray.origin.distanceTo(r);if(I<l.near||I>l.far)return;s.push({distance:I,distanceToRay:Math.sqrt(g),point:r,index:e,face:null,object:o})}}class US extends un{constructor(e,t,n,l,s,o,g,r,I){super(e,t,n,l,s,o,g,r,I),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Pt,this.magFilter=s!==void 0?s:Pt,this.generateMipmaps=!1;const C=this;function u(){C.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class DS extends un{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=pn,this.minFilter=pn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ah extends un{constructor(e,t,n,l,s,o,g,r,I,C,u,d){super(null,o,g,r,I,C,l,s,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class QS extends Ah{constructor(e,t,n,l,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=l,this.wrapR=Tn}}class PS extends un{constructor(e,t,n,l,s,o,g,r,I){super(e,t,n,l,s,o,g,r,I),this.isCanvasTexture=!0,this.needsUpdate=!0}}class El{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,l=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(l),t.push(s),l=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let l=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let g=0,r=s-1,I;for(;g<=r;)if(l=Math.floor(g+(r-g)/2),I=n[l]-o,I<0)g=l+1;else if(I>0)r=l-1;else{r=l;break}if(l=r,n[l]===o)return l/(s-1);const C=n[l],d=n[l+1]-C,A=(o-C)/d;return(l+A)/(s-1)}getTangent(e,t){let l=e-1e-4,s=e+1e-4;l<0&&(l=0),s>1&&(s=1);const o=this.getPoint(l),g=this.getPoint(s),r=t||(o.isVector2?new me:new K);return r.copy(g).sub(o).normalize(),r}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new K,l=[],s=[],o=[],g=new K,r=new st;for(let A=0;A<=e;A++){const m=A/e;l[A]=this.getTangentAt(m,new K)}s[0]=new K,o[0]=new K;let I=Number.MAX_VALUE;const C=Math.abs(l[0].x),u=Math.abs(l[0].y),d=Math.abs(l[0].z);C<=I&&(I=C,n.set(1,0,0)),u<=I&&(I=u,n.set(0,1,0)),d<=I&&n.set(0,0,1),g.crossVectors(l[0],n).normalize(),s[0].crossVectors(l[0],g),o[0].crossVectors(l[0],s[0]);for(let A=1;A<=e;A++){if(s[A]=s[A-1].clone(),o[A]=o[A-1].clone(),g.crossVectors(l[A-1],l[A]),g.length()>Number.EPSILON){g.normalize();const m=Math.acos(fn(l[A-1].dot(l[A]),-1,1));s[A].applyMatrix4(r.makeRotationAxis(g,m))}o[A].crossVectors(l[A],s[A])}if(t===!0){let A=Math.acos(fn(s[0].dot(s[e]),-1,1));A/=e,l[0].dot(g.crossVectors(s[0],s[e]))>0&&(A=-A);for(let m=1;m<=e;m++)s[m].applyMatrix4(r.makeRotationAxis(l[m],A*m)),o[m].crossVectors(l[m],s[m])}return{tangents:l,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Y2 extends El{constructor(e=0,t=0,n=1,l=1,s=0,o=Math.PI*2,g=!1,r=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=l,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=g,this.aRotation=r}getPoint(e,t){const n=t||new me,l=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=l;for(;s>l;)s-=l;s<Number.EPSILON&&(o?s=0:s=l),this.aClockwise===!0&&!o&&(s===l?s=-l:s=s-l);const g=this.aStartAngle+e*s;let r=this.aX+this.xRadius*Math.cos(g),I=this.aY+this.yRadius*Math.sin(g);if(this.aRotation!==0){const C=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=r-this.aX,A=I-this.aY;r=d*C-A*u+this.aX,I=d*u+A*C+this.aY}return n.set(r,I)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Ab extends Y2{constructor(e,t,n,l,s,o){super(e,t,n,n,l,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function hh(){let i=0,e=0,t=0,n=0;function l(s,o,g,r){i=s,e=g,t=-3*s+3*o-2*g-r,n=2*s-2*o+g+r}return{initCatmullRom:function(s,o,g,r,I){l(o,g,I*(g-s),I*(r-o))},initNonuniformCatmullRom:function(s,o,g,r,I,C,u){let d=(o-s)/I-(g-s)/(I+C)+(g-o)/C,A=(g-o)/C-(r-o)/(C+u)+(r-g)/u;d*=C,A*=C,l(o,g,d,A)},calc:function(s){const o=s*s,g=o*s;return i+e*s+t*o+n*g}}}const kC=new K,Jd=new hh,Ud=new hh,Dd=new hh;class hb extends El{constructor(e=[],t=!1,n="centripetal",l=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=l}getPoint(e,t=new K){const n=t,l=this.points,s=l.length,o=(s-(this.closed?0:1))*e;let g=Math.floor(o),r=o-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/s)+1)*s:r===0&&g===s-1&&(g=s-2,r=1);let I,C;this.closed||g>0?I=l[(g-1)%s]:(kC.subVectors(l[0],l[1]).add(l[0]),I=kC);const u=l[g%s],d=l[(g+1)%s];if(this.closed||g+2<s?C=l[(g+2)%s]:(kC.subVectors(l[s-1],l[s-2]).add(l[s-1]),C=kC),this.curveType==="centripetal"||this.curveType==="chordal"){const A=this.curveType==="chordal"?.5:.25;let m=Math.pow(I.distanceToSquared(u),A),f=Math.pow(u.distanceToSquared(d),A),p=Math.pow(d.distanceToSquared(C),A);f<1e-4&&(f=1),m<1e-4&&(m=f),p<1e-4&&(p=f),Jd.initNonuniformCatmullRom(I.x,u.x,d.x,C.x,m,f,p),Ud.initNonuniformCatmullRom(I.y,u.y,d.y,C.y,m,f,p),Dd.initNonuniformCatmullRom(I.z,u.z,d.z,C.z,m,f,p)}else this.curveType==="catmullrom"&&(Jd.initCatmullRom(I.x,u.x,d.x,C.x,this.tension),Ud.initCatmullRom(I.y,u.y,d.y,C.y,this.tension),Dd.initCatmullRom(I.z,u.z,d.z,C.z,this.tension));return n.set(Jd.calc(r),Ud.calc(r),Dd.calc(r)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const l=e.points[t];this.points.push(l.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const l=this.points[t];e.points.push(l.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const l=e.points[t];this.points.push(new K().fromArray(l))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function q7(i,e,t,n,l){const s=(n-e)*.5,o=(l-t)*.5,g=i*i,r=i*g;return(2*t-2*n+s+o)*r+(-3*t+3*n-2*s-o)*g+s*i+t}function OS(i,e){const t=1-i;return t*t*e}function jS(i,e){return 2*(1-i)*i*e}function $S(i,e){return i*i*e}function j1(i,e,t,n){return OS(i,e)+jS(i,t)+$S(i,n)}function eV(i,e){const t=1-i;return t*t*t*e}function tV(i,e){const t=1-i;return 3*t*t*i*e}function nV(i,e){return 3*(1-i)*i*i*e}function iV(i,e){return i*i*i*e}function $1(i,e,t,n,l){return eV(i,e)+tV(i,t)+nV(i,n)+iV(i,l)}class mh extends El{constructor(e=new me,t=new me,n=new me,l=new me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=l}getPoint(e,t=new me){const n=t,l=this.v0,s=this.v1,o=this.v2,g=this.v3;return n.set($1(e,l.x,s.x,o.x,g.x),$1(e,l.y,s.y,o.y,g.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mb extends El{constructor(e=new K,t=new K,n=new K,l=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=l}getPoint(e,t=new K){const n=t,l=this.v0,s=this.v1,o=this.v2,g=this.v3;return n.set($1(e,l.x,s.x,o.x,g.x),$1(e,l.y,s.y,o.y,g.y),$1(e,l.z,s.z,o.z,g.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class z2 extends El{constructor(e=new me,t=new me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new me){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new me;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pb extends El{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ph extends El{constructor(e=new me,t=new me,n=new me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new me){const n=t,l=this.v0,s=this.v1,o=this.v2;return n.set(j1(e,l.x,s.x,o.x),j1(e,l.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fh extends El{constructor(e=new K,t=new K,n=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new K){const n=t,l=this.v0,s=this.v1,o=this.v2;return n.set(j1(e,l.x,s.x,o.x),j1(e,l.y,s.y,o.y),j1(e,l.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bh extends El{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new me){const n=t,l=this.points,s=(l.length-1)*e,o=Math.floor(s),g=s-o,r=l[o===0?o:o-1],I=l[o],C=l[o>l.length-2?l.length-1:o+1],u=l[o>l.length-3?l.length-1:o+2];return n.set(q7(g,r.x,I.x,C.x,u.x),q7(g,r.y,I.y,C.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const l=e.points[t];this.points.push(l.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const l=this.points[t];e.points.push(l.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const l=e.points[t];this.points.push(new me().fromArray(l))}return this}}var Gh=Object.freeze({__proto__:null,ArcCurve:Ab,CatmullRomCurve3:hb,CubicBezierCurve:mh,CubicBezierCurve3:mb,EllipseCurve:Y2,LineCurve:z2,LineCurve3:pb,QuadraticBezierCurve:ph,QuadraticBezierCurve3:fh,SplineCurve:bh});class fb extends El{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new z2(t,e))}getPoint(e,t){const n=e*this.getLength(),l=this.getCurveLengths();let s=0;for(;s<l.length;){if(l[s]>=n){const o=l[s]-n,g=this.curves[s],r=g.getLength(),I=r===0?0:1-o/r;return g.getPointAt(I,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,l=this.curves.length;n<l;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let l=0,s=this.curves;l<s.length;l++){const o=s[l],g=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,r=o.getPoints(g);for(let I=0;I<r.length;I++){const C=r[I];n&&n.equals(C)||(t.push(C),n=C)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const l=e.curves[t];this.curves.push(l.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const l=this.curves[t];e.curves.push(l.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const l=e.curves[t];this.curves.push(new Gh[l.type]().fromJSON(l))}return this}}class xI extends fb{constructor(e){super(),this.type="Path",this.currentPoint=new me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new z2(this.currentPoint.clone(),new me(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,l){const s=new ph(this.currentPoint.clone(),new me(e,t),new me(n,l));return this.curves.push(s),this.currentPoint.set(n,l),this}bezierCurveTo(e,t,n,l,s,o){const g=new mh(this.currentPoint.clone(),new me(e,t),new me(n,l),new me(s,o));return this.curves.push(g),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new bh(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,l,s,o){const g=this.currentPoint.x,r=this.currentPoint.y;return this.absarc(e+g,t+r,n,l,s,o),this}absarc(e,t,n,l,s,o){return this.absellipse(e,t,n,n,l,s,o),this}ellipse(e,t,n,l,s,o,g,r){const I=this.currentPoint.x,C=this.currentPoint.y;return this.absellipse(e+I,t+C,n,l,s,o,g,r),this}absellipse(e,t,n,l,s,o,g,r){const I=new Y2(e,t,n,l,s,o,g,r);if(this.curves.length>0){const u=I.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(I);const C=I.getPoint(1);return this.currentPoint.copy(C),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Na extends ut{constructor(e=[new me(0,-.5),new me(.5,0),new me(0,.5)],t=12,n=0,l=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:l},t=Math.floor(t),l=fn(l,0,Math.PI*2);const s=[],o=[],g=[],r=[],I=[],C=1/t,u=new K,d=new me,A=new K,m=new K,f=new K;let p=0,b=0;for(let B=0;B<=e.length-1;B++)switch(B){case 0:p=e[B+1].x-e[B].x,b=e[B+1].y-e[B].y,A.x=b*1,A.y=-p,A.z=b*0,f.copy(A),A.normalize(),r.push(A.x,A.y,A.z);break;case e.length-1:r.push(f.x,f.y,f.z);break;default:p=e[B+1].x-e[B].x,b=e[B+1].y-e[B].y,A.x=b*1,A.y=-p,A.z=b*0,m.copy(A),A.x+=f.x,A.y+=f.y,A.z+=f.z,A.normalize(),r.push(A.x,A.y,A.z),f.copy(m)}for(let B=0;B<=t;B++){const y=n+B*C*l,Z=Math.sin(y),q=Math.cos(y);for(let W=0;W<=e.length-1;W++){u.x=e[W].x*Z,u.y=e[W].y,u.z=e[W].x*q,o.push(u.x,u.y,u.z),d.x=B/t,d.y=W/(e.length-1),g.push(d.x,d.y);const S=r[3*W+0]*Z,x=r[3*W+1],V=r[3*W+0]*q;I.push(S,x,V)}}for(let B=0;B<t;B++)for(let y=0;y<e.length-1;y++){const Z=y+B*e.length,q=Z,W=Z+e.length,S=Z+e.length+1,x=Z+1;s.push(q,W,x),s.push(S,x,W)}this.setIndex(s),this.setAttribute("position",new ke(o,3)),this.setAttribute("uv",new ke(g,2)),this.setAttribute("normal",new ke(I,3))}static fromJSON(e){return new Na(e.points,e.segments,e.phiStart,e.phiLength)}}class TI extends Na{constructor(e=1,t=1,n=4,l=8){const s=new xI;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),l),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:l}}static fromJSON(e){return new TI(e.radius,e.length,e.capSegments,e.radialSegments)}}class EI extends ut{constructor(e=1,t=8,n=0,l=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:l},t=Math.max(3,t);const s=[],o=[],g=[],r=[],I=new K,C=new me;o.push(0,0,0),g.push(0,0,1),r.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const A=n+u/t*l;I.x=e*Math.cos(A),I.y=e*Math.sin(A),o.push(I.x,I.y,I.z),g.push(0,0,1),C.x=(o[d]/e+1)/2,C.y=(o[d+1]/e+1)/2,r.push(C.x,C.y)}for(let u=1;u<=t;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new ke(o,3)),this.setAttribute("normal",new ke(g,3)),this.setAttribute("uv",new ke(r,2))}static fromJSON(e){return new EI(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class rr extends ut{constructor(e=1,t=1,n=1,l=8,s=1,o=!1,g=0,r=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:l,heightSegments:s,openEnded:o,thetaStart:g,thetaLength:r};const I=this;l=Math.floor(l),s=Math.floor(s);const C=[],u=[],d=[],A=[];let m=0;const f=[],p=n/2;let b=0;B(),o===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(C),this.setAttribute("position",new ke(u,3)),this.setAttribute("normal",new ke(d,3)),this.setAttribute("uv",new ke(A,2));function B(){const Z=new K,q=new K;let W=0;const S=(t-e)/n;for(let x=0;x<=s;x++){const V=[],X=x/s,k=X*(t-e)+e;for(let $=0;$<=l;$++){const Q=$/l,E=Q*r+g,te=Math.sin(E),se=Math.cos(E);q.x=k*te,q.y=-X*n+p,q.z=k*se,u.push(q.x,q.y,q.z),Z.set(te,S,se).normalize(),d.push(Z.x,Z.y,Z.z),A.push(Q,1-X),V.push(m++)}f.push(V)}for(let x=0;x<l;x++)for(let V=0;V<s;V++){const X=f[V][x],k=f[V+1][x],$=f[V+1][x+1],Q=f[V][x+1];C.push(X,k,Q),C.push(k,$,Q),W+=6}I.addGroup(b,W,0),b+=W}function y(Z){const q=m,W=new me,S=new K;let x=0;const V=Z===!0?e:t,X=Z===!0?1:-1;for(let $=1;$<=l;$++)u.push(0,p*X,0),d.push(0,X,0),A.push(.5,.5),m++;const k=m;for(let $=0;$<=l;$++){const E=$/l*r+g,te=Math.cos(E),se=Math.sin(E);S.x=V*se,S.y=p*X,S.z=V*te,u.push(S.x,S.y,S.z),d.push(0,X,0),W.x=te*.5+.5,W.y=se*.5*X+.5,A.push(W.x,W.y),m++}for(let $=0;$<l;$++){const Q=q+$,E=k+$;Z===!0?C.push(E,E+1,Q):C.push(E+1,E,Q),x+=3}I.addGroup(b,x,Z===!0?1:2),b+=x}}static fromJSON(e){return new rr(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class JI extends rr{constructor(e=1,t=1,n=8,l=1,s=!1,o=0,g=Math.PI*2){super(0,e,t,n,l,s,o,g),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:l,openEnded:s,thetaStart:o,thetaLength:g}}static fromJSON(e){return new JI(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class eo extends ut{constructor(e=[],t=[],n=1,l=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:l};const s=[],o=[];g(l),I(n),C(),this.setAttribute("position",new ke(s,3)),this.setAttribute("normal",new ke(s.slice(),3)),this.setAttribute("uv",new ke(o,2)),l===0?this.computeVertexNormals():this.normalizeNormals();function g(B){const y=new K,Z=new K,q=new K;for(let W=0;W<t.length;W+=3)A(t[W+0],y),A(t[W+1],Z),A(t[W+2],q),r(y,Z,q,B)}function r(B,y,Z,q){const W=q+1,S=[];for(let x=0;x<=W;x++){S[x]=[];const V=B.clone().lerp(Z,x/W),X=y.clone().lerp(Z,x/W),k=W-x;for(let $=0;$<=k;$++)$===0&&x===W?S[x][$]=V:S[x][$]=V.clone().lerp(X,$/k)}for(let x=0;x<W;x++)for(let V=0;V<2*(W-x)-1;V++){const X=Math.floor(V/2);V%2===0?(d(S[x][X+1]),d(S[x+1][X]),d(S[x][X])):(d(S[x][X+1]),d(S[x+1][X+1]),d(S[x+1][X]))}}function I(B){const y=new K;for(let Z=0;Z<s.length;Z+=3)y.x=s[Z+0],y.y=s[Z+1],y.z=s[Z+2],y.normalize().multiplyScalar(B),s[Z+0]=y.x,s[Z+1]=y.y,s[Z+2]=y.z}function C(){const B=new K;for(let y=0;y<s.length;y+=3){B.x=s[y+0],B.y=s[y+1],B.z=s[y+2];const Z=p(B)/2/Math.PI+.5,q=b(B)/Math.PI+.5;o.push(Z,1-q)}m(),u()}function u(){for(let B=0;B<o.length;B+=6){const y=o[B+0],Z=o[B+2],q=o[B+4],W=Math.max(y,Z,q),S=Math.min(y,Z,q);W>.9&&S<.1&&(y<.2&&(o[B+0]+=1),Z<.2&&(o[B+2]+=1),q<.2&&(o[B+4]+=1))}}function d(B){s.push(B.x,B.y,B.z)}function A(B,y){const Z=B*3;y.x=e[Z+0],y.y=e[Z+1],y.z=e[Z+2]}function m(){const B=new K,y=new K,Z=new K,q=new K,W=new me,S=new me,x=new me;for(let V=0,X=0;V<s.length;V+=9,X+=6){B.set(s[V+0],s[V+1],s[V+2]),y.set(s[V+3],s[V+4],s[V+5]),Z.set(s[V+6],s[V+7],s[V+8]),W.set(o[X+0],o[X+1]),S.set(o[X+2],o[X+3]),x.set(o[X+4],o[X+5]),q.copy(B).add(y).add(Z).divideScalar(3);const k=p(q);f(W,X+0,B,k),f(S,X+2,y,k),f(x,X+4,Z,k)}}function f(B,y,Z,q){q<0&&B.x===1&&(o[y]=B.x-1),Z.x===0&&Z.z===0&&(o[y]=q/2/Math.PI+.5)}function p(B){return Math.atan2(B.z,-B.x)}function b(B){return Math.atan2(-B.y,Math.sqrt(B.x*B.x+B.z*B.z))}}static fromJSON(e){return new eo(e.vertices,e.indices,e.radius,e.details)}}class UI extends eo{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,l=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-l,-n,0,-l,n,0,l,-n,0,l,n,-l,-n,0,-l,n,0,l,-n,0,l,n,0,-n,0,-l,n,0,-l,-n,0,l,n,0,l],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new UI(e.radius,e.detail)}}const TC=new K,EC=new K,Qd=new K,JC=new hl;class bb extends ut{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const l=Math.pow(10,4),s=Math.cos(Tg*t),o=e.getIndex(),g=e.getAttribute("position"),r=o?o.count:g.count,I=[0,0,0],C=["a","b","c"],u=new Array(3),d={},A=[];for(let m=0;m<r;m+=3){o?(I[0]=o.getX(m),I[1]=o.getX(m+1),I[2]=o.getX(m+2)):(I[0]=m,I[1]=m+1,I[2]=m+2);const{a:f,b:p,c:b}=JC;if(f.fromBufferAttribute(g,I[0]),p.fromBufferAttribute(g,I[1]),b.fromBufferAttribute(g,I[2]),JC.getNormal(Qd),u[0]=`${Math.round(f.x*l)},${Math.round(f.y*l)},${Math.round(f.z*l)}`,u[1]=`${Math.round(p.x*l)},${Math.round(p.y*l)},${Math.round(p.z*l)}`,u[2]=`${Math.round(b.x*l)},${Math.round(b.y*l)},${Math.round(b.z*l)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let B=0;B<3;B++){const y=(B+1)%3,Z=u[B],q=u[y],W=JC[C[B]],S=JC[C[y]],x=`${Z}_${q}`,V=`${q}_${Z}`;V in d&&d[V]?(Qd.dot(d[V].normal)<=s&&(A.push(W.x,W.y,W.z),A.push(S.x,S.y,S.z)),d[V]=null):x in d||(d[x]={index0:I[B],index1:I[y],normal:Qd.clone()})}}for(const m in d)if(d[m]){const{index0:f,index1:p}=d[m];TC.fromBufferAttribute(g,f),EC.fromBufferAttribute(g,p),A.push(TC.x,TC.y,TC.z),A.push(EC.x,EC.y,EC.z)}this.setAttribute("position",new ke(A,3))}}}class Dg extends xI{constructor(e){super(e),this.uuid=Ji(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,l=this.holes.length;n<l;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const l=e.holes[t];this.holes.push(l.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const l=this.holes[t];e.holes.push(l.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const l=e.holes[t];this.holes.push(new xI().fromJSON(l))}return this}}const lV={triangulate:function(i,e,t=2){const n=e&&e.length,l=n?e[0]*t:i.length;let s=Gb(i,0,l,t,!0);const o=[];if(!s||s.next===s.prev)return o;let g,r,I,C,u,d,A;if(n&&(s=aV(i,e,s,t)),i.length>80*t){g=I=i[0],r=C=i[1];for(let m=t;m<l;m+=t)u=i[m],d=i[m+1],u<g&&(g=u),d<r&&(r=d),u>I&&(I=u),d>C&&(C=d);A=Math.max(I-g,C-r),A=A!==0?32767/A:0}return qI(s,o,t,g,r,A,0),o}};function Gb(i,e,t,n,l){let s,o;if(l===bV(i,e,t,n)>0)for(s=e;s<t;s+=n)o=w7(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=w7(s,i[s],i[s+1],o);return o&&K2(o,o.next)&&(WI(o),o=o.next),o}function ir(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(K2(t,t.next)||on(t.prev,t,t.next)===0)){if(WI(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function qI(i,e,t,n,l,s,o){if(!i)return;!o&&s&&dV(i,n,l,s);let g=i,r,I;for(;i.prev!==i.next;){if(r=i.prev,I=i.next,s?oV(i,n,l,s):sV(i)){e.push(r.i/t|0),e.push(i.i/t|0),e.push(I.i/t|0),WI(i),i=I.next,g=I.next;continue}if(i=I,i===g){o?o===1?(i=gV(ir(i),e,t),qI(i,e,t,n,l,s,2)):o===2&&rV(i,e,t,n,l,s):qI(ir(i),e,t,n,l,s,1);break}}}function sV(i){const e=i.prev,t=i,n=i.next;if(on(e,t,n)>=0)return!1;const l=e.x,s=t.x,o=n.x,g=e.y,r=t.y,I=n.y,C=l<s?l<o?l:o:s<o?s:o,u=g<r?g<I?g:I:r<I?r:I,d=l>s?l>o?l:o:s>o?s:o,A=g>r?g>I?g:I:r>I?r:I;let m=n.next;for(;m!==e;){if(m.x>=C&&m.x<=d&&m.y>=u&&m.y<=A&&ga(l,g,s,r,o,I,m.x,m.y)&&on(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function oV(i,e,t,n){const l=i.prev,s=i,o=i.next;if(on(l,s,o)>=0)return!1;const g=l.x,r=s.x,I=o.x,C=l.y,u=s.y,d=o.y,A=g<r?g<I?g:I:r<I?r:I,m=C<u?C<d?C:d:u<d?u:d,f=g>r?g>I?g:I:r>I?r:I,p=C>u?C>d?C:d:u>d?u:d,b=M3(A,m,e,t,n),B=M3(f,p,e,t,n);let y=i.prevZ,Z=i.nextZ;for(;y&&y.z>=b&&Z&&Z.z<=B;){if(y.x>=A&&y.x<=f&&y.y>=m&&y.y<=p&&y!==l&&y!==o&&ga(g,C,r,u,I,d,y.x,y.y)&&on(y.prev,y,y.next)>=0||(y=y.prevZ,Z.x>=A&&Z.x<=f&&Z.y>=m&&Z.y<=p&&Z!==l&&Z!==o&&ga(g,C,r,u,I,d,Z.x,Z.y)&&on(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;y&&y.z>=b;){if(y.x>=A&&y.x<=f&&y.y>=m&&y.y<=p&&y!==l&&y!==o&&ga(g,C,r,u,I,d,y.x,y.y)&&on(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;Z&&Z.z<=B;){if(Z.x>=A&&Z.x<=f&&Z.y>=m&&Z.y<=p&&Z!==l&&Z!==o&&ga(g,C,r,u,I,d,Z.x,Z.y)&&on(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function gV(i,e,t){let n=i;do{const l=n.prev,s=n.next.next;!K2(l,s)&&yb(l,n,n.next,s)&&wI(l,s)&&wI(s,l)&&(e.push(l.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),WI(n),WI(n.next),n=i=s),n=n.next}while(n!==i);return ir(n)}function rV(i,e,t,n,l,s){let o=i;do{let g=o.next.next;for(;g!==o.prev;){if(o.i!==g.i&&mV(o,g)){let r=Bb(o,g);o=ir(o,o.next),r=ir(r,r.next),qI(o,e,t,n,l,s,0),qI(r,e,t,n,l,s,0);return}g=g.next}o=o.next}while(o!==i)}function aV(i,e,t,n){const l=[];let s,o,g,r,I;for(s=0,o=e.length;s<o;s++)g=e[s]*n,r=s<o-1?e[s+1]*n:i.length,I=Gb(i,g,r,n,!1),I===I.next&&(I.steiner=!0),l.push(hV(I));for(l.sort(IV),s=0;s<l.length;s++)t=cV(l[s],t);return t}function IV(i,e){return i.x-e.x}function cV(i,e){const t=CV(i,e);if(!t)return e;const n=Bb(t,i);return ir(n,n.next),ir(t,t.next)}function CV(i,e){let t=e,n=-1/0,l;const s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>n&&(n=d,l=t.x<t.next.x?t:t.next,d===s))return l}t=t.next}while(t!==e);if(!l)return null;const g=l,r=l.x,I=l.y;let C=1/0,u;t=l;do s>=t.x&&t.x>=r&&s!==t.x&&ga(o<I?s:n,o,r,I,o<I?n:s,o,t.x,t.y)&&(u=Math.abs(o-t.y)/(s-t.x),wI(t,i)&&(u<C||u===C&&(t.x>l.x||t.x===l.x&&uV(l,t)))&&(l=t,C=u)),t=t.next;while(t!==g);return l}function uV(i,e){return on(i.prev,i,e.prev)<0&&on(e.next,i,i.next)<0}function dV(i,e,t,n){let l=i;do l.z===0&&(l.z=M3(l.x,l.y,e,t,n)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next;while(l!==i);l.prevZ.nextZ=null,l.prevZ=null,AV(l)}function AV(i){let e,t,n,l,s,o,g,r,I=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,g=0,e=0;e<I&&(g++,n=n.nextZ,!!n);e++);for(r=I;g>0||r>0&&n;)g!==0&&(r===0||!n||t.z<=n.z)?(l=t,t=t.nextZ,g--):(l=n,n=n.nextZ,r--),s?s.nextZ=l:i=l,l.prevZ=s,s=l;t=n}s.nextZ=null,I*=2}while(o>1);return i}function M3(i,e,t,n,l){return i=(i-t)*l|0,e=(e-n)*l|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function hV(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function ga(i,e,t,n,l,s,o,g){return(l-o)*(e-g)>=(i-o)*(s-g)&&(i-o)*(n-g)>=(t-o)*(e-g)&&(t-o)*(s-g)>=(l-o)*(n-g)}function mV(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!pV(i,e)&&(wI(i,e)&&wI(e,i)&&fV(i,e)&&(on(i.prev,i,e.prev)||on(i,e.prev,e))||K2(i,e)&&on(i.prev,i,i.next)>0&&on(e.prev,e,e.next)>0)}function on(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function K2(i,e){return i.x===e.x&&i.y===e.y}function yb(i,e,t,n){const l=DC(on(i,e,t)),s=DC(on(i,e,n)),o=DC(on(t,n,i)),g=DC(on(t,n,e));return!!(l!==s&&o!==g||l===0&&UC(i,t,e)||s===0&&UC(i,n,e)||o===0&&UC(t,i,n)||g===0&&UC(t,e,n))}function UC(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function DC(i){return i>0?1:i<0?-1:0}function pV(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&yb(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function wI(i,e){return on(i.prev,i,i.next)<0?on(i,e,i.next)>=0&&on(i,i.prev,e)>=0:on(i,e,i.prev)<0||on(i,i.next,e)<0}function fV(i,e){let t=i,n=!1;const l=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&l<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function Bb(i,e){const t=new F3(i.i,i.x,i.y),n=new F3(e.i,e.x,e.y),l=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=l,l.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function w7(i,e,t,n){const l=new F3(i,e,t);return n?(l.next=n.next,l.prev=n,n.next.prev=l,n.next=l):(l.prev=l,l.next=l),l}function WI(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function F3(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bV(i,e,t,n){let l=0;for(let s=e,o=t-n;s<t;s+=n)l+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return l}class ds{static area(e){const t=e.length;let n=0;for(let l=t-1,s=0;s<t;l=s++)n+=e[l].x*e[s].y-e[s].x*e[l].y;return n*.5}static isClockWise(e){return ds.area(e)<0}static triangulateShape(e,t){const n=[],l=[],s=[];W7(e),S7(n,e);let o=e.length;t.forEach(W7);for(let r=0;r<t.length;r++)l.push(o),o+=t[r].length,S7(n,t[r]);const g=lV.triangulate(n,l);for(let r=0;r<g.length;r+=3)s.push(g.slice(r,r+3));return s}}function W7(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function S7(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Ma extends ut{constructor(e=new Dg([new me(.5,.5),new me(-.5,.5),new me(-.5,-.5),new me(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,l=[],s=[];for(let g=0,r=e.length;g<r;g++){const I=e[g];o(I)}this.setAttribute("position",new ke(l,3)),this.setAttribute("uv",new ke(s,2)),this.computeVertexNormals();function o(g){const r=[],I=t.curveSegments!==void 0?t.curveSegments:12,C=t.steps!==void 0?t.steps:1,u=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,A=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:A-.1,f=t.bevelOffset!==void 0?t.bevelOffset:0,p=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,B=t.UVGenerator!==void 0?t.UVGenerator:GV;let y,Z=!1,q,W,S,x;b&&(y=b.getSpacedPoints(C),Z=!0,d=!1,q=b.computeFrenetFrames(C,!1),W=new K,S=new K,x=new K),d||(p=0,A=0,m=0,f=0);const V=g.extractPoints(I);let X=V.shape;const k=V.holes;if(!ds.isClockWise(X)){X=X.reverse();for(let Ae=0,Ie=k.length;Ae<Ie;Ae++){const ve=k[Ae];ds.isClockWise(ve)&&(k[Ae]=ve.reverse())}}const Q=ds.triangulateShape(X,k),E=X;for(let Ae=0,Ie=k.length;Ae<Ie;Ae++){const ve=k[Ae];X=X.concat(ve)}function te(Ae,Ie,ve){return Ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ie.clone().multiplyScalar(ve).add(Ae)}const se=X.length,oe=Q.length;function R(Ae,Ie,ve){let Ne,Xe,ot;const $e=Ae.x-Ie.x,Oe=Ae.y-Ie.y,vt=ve.x-Ae.x,zt=ve.y-Ae.y,_=$e*$e+Oe*Oe,z=$e*zt-Oe*vt;if(Math.abs(z)>Number.EPSILON){const ge=Math.sqrt(_),ye=Math.sqrt(vt*vt+zt*zt),qe=Ie.x-Oe/ge,Ye=Ie.y+$e/ge,lt=ve.x-zt/ye,ze=ve.y+vt/ye,he=((lt-qe)*zt-(ze-Ye)*vt)/($e*zt-Oe*vt);Ne=qe+$e*he-Ae.x,Xe=Ye+Oe*he-Ae.y;const Ee=Ne*Ne+Xe*Xe;if(Ee<=2)return new me(Ne,Xe);ot=Math.sqrt(Ee/2)}else{let ge=!1;$e>Number.EPSILON?vt>Number.EPSILON&&(ge=!0):$e<-Number.EPSILON?vt<-Number.EPSILON&&(ge=!0):Math.sign(Oe)===Math.sign(zt)&&(ge=!0),ge?(Ne=-Oe,Xe=$e,ot=Math.sqrt(_)):(Ne=$e,Xe=Oe,ot=Math.sqrt(_/2))}return new me(Ne/ot,Xe/ot)}const Y=[];for(let Ae=0,Ie=E.length,ve=Ie-1,Ne=Ae+1;Ae<Ie;Ae++,ve++,Ne++)ve===Ie&&(ve=0),Ne===Ie&&(Ne=0),Y[Ae]=R(E[Ae],E[ve],E[Ne]);const H=[];let J,P=Y.concat();for(let Ae=0,Ie=k.length;Ae<Ie;Ae++){const ve=k[Ae];J=[];for(let Ne=0,Xe=ve.length,ot=Xe-1,$e=Ne+1;Ne<Xe;Ne++,ot++,$e++)ot===Xe&&(ot=0),$e===Xe&&($e=0),J[Ne]=R(ve[Ne],ve[ot],ve[$e]);H.push(J),P=P.concat(J)}for(let Ae=0;Ae<p;Ae++){const Ie=Ae/p,ve=A*Math.cos(Ie*Math.PI/2),Ne=m*Math.sin(Ie*Math.PI/2)+f;for(let Xe=0,ot=E.length;Xe<ot;Xe++){const $e=te(E[Xe],Y[Xe],Ne);_e($e.x,$e.y,-ve)}for(let Xe=0,ot=k.length;Xe<ot;Xe++){const $e=k[Xe];J=H[Xe];for(let Oe=0,vt=$e.length;Oe<vt;Oe++){const zt=te($e[Oe],J[Oe],Ne);_e(zt.x,zt.y,-ve)}}}const ne=m+f;for(let Ae=0;Ae<se;Ae++){const Ie=d?te(X[Ae],P[Ae],ne):X[Ae];Z?(S.copy(q.normals[0]).multiplyScalar(Ie.x),W.copy(q.binormals[0]).multiplyScalar(Ie.y),x.copy(y[0]).add(S).add(W),_e(x.x,x.y,x.z)):_e(Ie.x,Ie.y,0)}for(let Ae=1;Ae<=C;Ae++)for(let Ie=0;Ie<se;Ie++){const ve=d?te(X[Ie],P[Ie],ne):X[Ie];Z?(S.copy(q.normals[Ae]).multiplyScalar(ve.x),W.copy(q.binormals[Ae]).multiplyScalar(ve.y),x.copy(y[Ae]).add(S).add(W),_e(x.x,x.y,x.z)):_e(ve.x,ve.y,u/C*Ae)}for(let Ae=p-1;Ae>=0;Ae--){const Ie=Ae/p,ve=A*Math.cos(Ie*Math.PI/2),Ne=m*Math.sin(Ie*Math.PI/2)+f;for(let Xe=0,ot=E.length;Xe<ot;Xe++){const $e=te(E[Xe],Y[Xe],Ne);_e($e.x,$e.y,u+ve)}for(let Xe=0,ot=k.length;Xe<ot;Xe++){const $e=k[Xe];J=H[Xe];for(let Oe=0,vt=$e.length;Oe<vt;Oe++){const zt=te($e[Oe],J[Oe],Ne);Z?_e(zt.x,zt.y+y[C-1].y,y[C-1].x+ve):_e(zt.x,zt.y,u+ve)}}}fe(),We();function fe(){const Ae=l.length/3;if(d){let Ie=0,ve=se*Ie;for(let Ne=0;Ne<oe;Ne++){const Xe=Q[Ne];Te(Xe[2]+ve,Xe[1]+ve,Xe[0]+ve)}Ie=C+p*2,ve=se*Ie;for(let Ne=0;Ne<oe;Ne++){const Xe=Q[Ne];Te(Xe[0]+ve,Xe[1]+ve,Xe[2]+ve)}}else{for(let Ie=0;Ie<oe;Ie++){const ve=Q[Ie];Te(ve[2],ve[1],ve[0])}for(let Ie=0;Ie<oe;Ie++){const ve=Q[Ie];Te(ve[0]+se*C,ve[1]+se*C,ve[2]+se*C)}}n.addGroup(Ae,l.length/3-Ae,0)}function We(){const Ae=l.length/3;let Ie=0;le(E,Ie),Ie+=E.length;for(let ve=0,Ne=k.length;ve<Ne;ve++){const Xe=k[ve];le(Xe,Ie),Ie+=Xe.length}n.addGroup(Ae,l.length/3-Ae,1)}function le(Ae,Ie){let ve=Ae.length;for(;--ve>=0;){const Ne=ve;let Xe=ve-1;Xe<0&&(Xe=Ae.length-1);for(let ot=0,$e=C+p*2;ot<$e;ot++){const Oe=se*ot,vt=se*(ot+1),zt=Ie+Ne+Oe,_=Ie+Xe+Oe,z=Ie+Xe+vt,ge=Ie+Ne+vt;je(zt,_,z,ge)}}}function _e(Ae,Ie,ve){r.push(Ae),r.push(Ie),r.push(ve)}function Te(Ae,Ie,ve){Se(Ae),Se(Ie),Se(ve);const Ne=l.length/3,Xe=B.generateTopUV(n,l,Ne-3,Ne-2,Ne-1);tt(Xe[0]),tt(Xe[1]),tt(Xe[2])}function je(Ae,Ie,ve,Ne){Se(Ae),Se(Ie),Se(Ne),Se(Ie),Se(ve),Se(Ne);const Xe=l.length/3,ot=B.generateSideWallUV(n,l,Xe-6,Xe-3,Xe-2,Xe-1);tt(ot[0]),tt(ot[1]),tt(ot[3]),tt(ot[1]),tt(ot[2]),tt(ot[3])}function Se(Ae){l.push(r[Ae*3+0]),l.push(r[Ae*3+1]),l.push(r[Ae*3+2])}function tt(Ae){s.push(Ae.x),s.push(Ae.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return yV(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const g=t[e.shapes[s]];n.push(g)}const l=e.options.extrudePath;return l!==void 0&&(e.options.extrudePath=new Gh[l.type]().fromJSON(l)),new Ma(n,e.options)}}const GV={generateTopUV:function(i,e,t,n,l){const s=e[t*3],o=e[t*3+1],g=e[n*3],r=e[n*3+1],I=e[l*3],C=e[l*3+1];return[new me(s,o),new me(g,r),new me(I,C)]},generateSideWallUV:function(i,e,t,n,l,s){const o=e[t*3],g=e[t*3+1],r=e[t*3+2],I=e[n*3],C=e[n*3+1],u=e[n*3+2],d=e[l*3],A=e[l*3+1],m=e[l*3+2],f=e[s*3],p=e[s*3+1],b=e[s*3+2];return Math.abs(g-C)<Math.abs(o-I)?[new me(o,1-r),new me(I,1-u),new me(d,1-m),new me(f,1-b)]:[new me(g,1-r),new me(C,1-u),new me(A,1-m),new me(p,1-b)]}};function yV(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,l=i.length;n<l;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class DI extends eo{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,l=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(l,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new DI(e.radius,e.detail)}}class Fa extends eo{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],l=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,l,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fa(e.radius,e.detail)}}class QI extends ut{constructor(e=.5,t=1,n=8,l=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:l,thetaStart:s,thetaLength:o},n=Math.max(3,n),l=Math.max(1,l);const g=[],r=[],I=[],C=[];let u=e;const d=(t-e)/l,A=new K,m=new me;for(let f=0;f<=l;f++){for(let p=0;p<=n;p++){const b=s+p/n*o;A.x=u*Math.cos(b),A.y=u*Math.sin(b),r.push(A.x,A.y,A.z),I.push(0,0,1),m.x=(A.x/t+1)/2,m.y=(A.y/t+1)/2,C.push(m.x,m.y)}u+=d}for(let f=0;f<l;f++){const p=f*(n+1);for(let b=0;b<n;b++){const B=b+p,y=B,Z=B+n+1,q=B+n+2,W=B+1;g.push(y,Z,W),g.push(Z,q,W)}}this.setIndex(g),this.setAttribute("position",new ke(r,3)),this.setAttribute("normal",new ke(I,3)),this.setAttribute("uv",new ke(C,2))}static fromJSON(e){return new QI(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class PI extends ut{constructor(e=new Dg([new me(0,.5),new me(-.5,-.5),new me(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],l=[],s=[],o=[];let g=0,r=0;if(Array.isArray(e)===!1)I(e);else for(let C=0;C<e.length;C++)I(e[C]),this.addGroup(g,r,C),g+=r,r=0;this.setIndex(n),this.setAttribute("position",new ke(l,3)),this.setAttribute("normal",new ke(s,3)),this.setAttribute("uv",new ke(o,2));function I(C){const u=l.length/3,d=C.extractPoints(t);let A=d.shape;const m=d.holes;ds.isClockWise(A)===!1&&(A=A.reverse());for(let p=0,b=m.length;p<b;p++){const B=m[p];ds.isClockWise(B)===!0&&(m[p]=B.reverse())}const f=ds.triangulateShape(A,m);for(let p=0,b=m.length;p<b;p++){const B=m[p];A=A.concat(B)}for(let p=0,b=A.length;p<b;p++){const B=A[p];l.push(B.x,B.y,0),s.push(0,0,1),o.push(B.x,B.y)}for(let p=0,b=f.length;p<b;p++){const B=f[p],y=B[0]+u,Z=B[1]+u,q=B[2]+u;n.push(y,Z,q),r+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return BV(t,e)}static fromJSON(e,t){const n=[];for(let l=0,s=e.shapes.length;l<s;l++){const o=t[e.shapes[l]];n.push(o)}return new PI(n,e.curveSegments)}}function BV(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const l=i[t];e.shapes.push(l.uuid)}else e.shapes.push(i.uuid);return e}class La extends ut{constructor(e=1,t=32,n=16,l=0,s=Math.PI*2,o=0,g=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:l,phiLength:s,thetaStart:o,thetaLength:g},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const r=Math.min(o+g,Math.PI);let I=0;const C=[],u=new K,d=new K,A=[],m=[],f=[],p=[];for(let b=0;b<=n;b++){const B=[],y=b/n;let Z=0;b==0&&o==0?Z=.5/t:b==n&&r==Math.PI&&(Z=-.5/t);for(let q=0;q<=t;q++){const W=q/t;u.x=-e*Math.cos(l+W*s)*Math.sin(o+y*g),u.y=e*Math.cos(o+y*g),u.z=e*Math.sin(l+W*s)*Math.sin(o+y*g),m.push(u.x,u.y,u.z),d.copy(u).normalize(),f.push(d.x,d.y,d.z),p.push(W+Z,1-y),B.push(I++)}C.push(B)}for(let b=0;b<n;b++)for(let B=0;B<t;B++){const y=C[b][B+1],Z=C[b][B],q=C[b+1][B],W=C[b+1][B+1];(b!==0||o>0)&&A.push(y,Z,W),(b!==n-1||r<Math.PI)&&A.push(Z,q,W)}this.setIndex(A),this.setAttribute("position",new ke(m,3)),this.setAttribute("normal",new ke(f,3)),this.setAttribute("uv",new ke(p,2))}static fromJSON(e){return new La(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class OI extends eo{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],l=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,l,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OI(e.radius,e.detail)}}class jI extends ut{constructor(e=1,t=.4,n=8,l=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:l,arc:s},n=Math.floor(n),l=Math.floor(l);const o=[],g=[],r=[],I=[],C=new K,u=new K,d=new K;for(let A=0;A<=n;A++)for(let m=0;m<=l;m++){const f=m/l*s,p=A/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),g.push(u.x,u.y,u.z),C.x=e*Math.cos(f),C.y=e*Math.sin(f),d.subVectors(u,C).normalize(),r.push(d.x,d.y,d.z),I.push(m/l),I.push(A/n)}for(let A=1;A<=n;A++)for(let m=1;m<=l;m++){const f=(l+1)*A+m-1,p=(l+1)*(A-1)+m-1,b=(l+1)*(A-1)+m,B=(l+1)*A+m;o.push(f,p,B),o.push(p,b,B)}this.setIndex(o),this.setAttribute("position",new ke(g,3)),this.setAttribute("normal",new ke(r,3)),this.setAttribute("uv",new ke(I,2))}static fromJSON(e){return new jI(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $I extends ut{constructor(e=1,t=.4,n=64,l=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:l,p:s,q:o},n=Math.floor(n),l=Math.floor(l);const g=[],r=[],I=[],C=[],u=new K,d=new K,A=new K,m=new K,f=new K,p=new K,b=new K;for(let y=0;y<=n;++y){const Z=y/n*s*Math.PI*2;B(Z,s,o,e,A),B(Z+.01,s,o,e,m),p.subVectors(m,A),b.addVectors(m,A),f.crossVectors(p,b),b.crossVectors(f,p),f.normalize(),b.normalize();for(let q=0;q<=l;++q){const W=q/l*Math.PI*2,S=-t*Math.cos(W),x=t*Math.sin(W);u.x=A.x+(S*b.x+x*f.x),u.y=A.y+(S*b.y+x*f.y),u.z=A.z+(S*b.z+x*f.z),r.push(u.x,u.y,u.z),d.subVectors(u,A).normalize(),I.push(d.x,d.y,d.z),C.push(y/n),C.push(q/l)}}for(let y=1;y<=n;y++)for(let Z=1;Z<=l;Z++){const q=(l+1)*(y-1)+(Z-1),W=(l+1)*y+(Z-1),S=(l+1)*y+Z,x=(l+1)*(y-1)+Z;g.push(q,W,x),g.push(W,S,x)}this.setIndex(g),this.setAttribute("position",new ke(r,3)),this.setAttribute("normal",new ke(I,3)),this.setAttribute("uv",new ke(C,2));function B(y,Z,q,W,S){const x=Math.cos(y),V=Math.sin(y),X=q/Z*y,k=Math.cos(X);S.x=W*(2+k)*.5*x,S.y=W*(2+k)*V*.5,S.z=W*Math.sin(X)*.5}}static fromJSON(e){return new $I(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ec extends ut{constructor(e=new fh(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,n=1,l=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:l,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const g=new K,r=new K,I=new me;let C=new K;const u=[],d=[],A=[],m=[];f(),this.setIndex(m),this.setAttribute("position",new ke(u,3)),this.setAttribute("normal",new ke(d,3)),this.setAttribute("uv",new ke(A,2));function f(){for(let y=0;y<t;y++)p(y);p(s===!1?t:0),B(),b()}function p(y){C=e.getPointAt(y/t,C);const Z=o.normals[y],q=o.binormals[y];for(let W=0;W<=l;W++){const S=W/l*Math.PI*2,x=Math.sin(S),V=-Math.cos(S);r.x=V*Z.x+x*q.x,r.y=V*Z.y+x*q.y,r.z=V*Z.z+x*q.z,r.normalize(),d.push(r.x,r.y,r.z),g.x=C.x+n*r.x,g.y=C.y+n*r.y,g.z=C.z+n*r.z,u.push(g.x,g.y,g.z)}}function b(){for(let y=1;y<=t;y++)for(let Z=1;Z<=l;Z++){const q=(l+1)*(y-1)+(Z-1),W=(l+1)*y+(Z-1),S=(l+1)*y+Z,x=(l+1)*(y-1)+Z;m.push(q,W,x),m.push(W,S,x)}}function B(){for(let y=0;y<=t;y++)for(let Z=0;Z<=l;Z++)I.x=y/t,I.y=Z/l,A.push(I.x,I.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ec(new Gh[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Zb extends ut{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,l=new K,s=new K;if(e.index!==null){const o=e.attributes.position,g=e.index;let r=e.groups;r.length===0&&(r=[{start:0,count:g.count,materialIndex:0}]);for(let I=0,C=r.length;I<C;++I){const u=r[I],d=u.start,A=u.count;for(let m=d,f=d+A;m<f;m+=3)for(let p=0;p<3;p++){const b=g.getX(m+p),B=g.getX(m+(p+1)%3);l.fromBufferAttribute(o,b),s.fromBufferAttribute(o,B),V7(l,s,n)===!0&&(t.push(l.x,l.y,l.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let g=0,r=o.count/3;g<r;g++)for(let I=0;I<3;I++){const C=3*g+I,u=3*g+(I+1)%3;l.fromBufferAttribute(o,C),s.fromBufferAttribute(o,u),V7(l,s,n)===!0&&(t.push(l.x,l.y,l.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ke(t,3))}}}function V7(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,l=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(l)===!0?!1:(t.add(n),t.add(l),!0)}var R7=Object.freeze({__proto__:null,BoxGeometry:ng,CapsuleGeometry:TI,CircleGeometry:EI,ConeGeometry:JI,CylinderGeometry:rr,DodecahedronGeometry:UI,EdgesGeometry:bb,ExtrudeGeometry:Ma,IcosahedronGeometry:DI,LatheGeometry:Na,OctahedronGeometry:Fa,PlaneGeometry:Ka,PolyhedronGeometry:eo,RingGeometry:QI,ShapeGeometry:PI,SphereGeometry:La,TetrahedronGeometry:OI,TorusGeometry:jI,TorusKnotGeometry:$I,TubeGeometry:ec,WireframeGeometry:Zb});class vb extends vn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ve(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class xb extends kl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _a extends vn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ve(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$s,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class to extends _a{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ve(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ve(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ve(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class qb extends vn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ve(16777215),this.specular=new Ve(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$s,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=HI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wb extends vn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ve(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$s,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Wb extends vn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$s,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Sb extends vn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$s,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=HI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Vb extends vn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ve(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$s,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Rb extends li{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ul(i,e,t){return yh(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function Ng(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function yh(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Xb(i){function e(l,s){return i[l]-i[s]}const t=i.length,n=new Array(t);for(let l=0;l!==t;++l)n[l]=l;return n.sort(e),n}function L3(i,e,t){const n=i.length,l=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const g=t[s]*e;for(let r=0;r!==e;++r)l[o++]=i[g+r]}return l}function Bh(i,e,t,n){let l=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[l++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[l++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[l++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[l++];while(s!==void 0)}function ZV(i,e,t,n,l=30){const s=i.clone();s.name=e;const o=[];for(let r=0;r<s.tracks.length;++r){const I=s.tracks[r],C=I.getValueSize(),u=[],d=[];for(let A=0;A<I.times.length;++A){const m=I.times[A]*l;if(!(m<t||m>=n)){u.push(I.times[A]);for(let f=0;f<C;++f)d.push(I.values[A*C+f])}}u.length!==0&&(I.times=Ng(u,I.times.constructor),I.values=Ng(d,I.values.constructor),o.push(I))}s.tracks=o;let g=1/0;for(let r=0;r<s.tracks.length;++r)g>s.tracks[r].times[0]&&(g=s.tracks[r].times[0]);for(let r=0;r<s.tracks.length;++r)s.tracks[r].shift(-1*g);return s.resetDuration(),s}function vV(i,e=0,t=i,n=30){n<=0&&(n=30);const l=t.tracks.length,s=e/n;for(let o=0;o<l;++o){const g=t.tracks[o],r=g.ValueTypeName;if(r==="bool"||r==="string")continue;const I=i.tracks.find(function(b){return b.name===g.name&&b.ValueTypeName===r});if(I===void 0)continue;let C=0;const u=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(C=u/3);let d=0;const A=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=A/3);const m=g.times.length-1;let f;if(s<=g.times[0]){const b=C,B=u-C;f=ul(g.values,b,B)}else if(s>=g.times[m]){const b=m*u+C,B=b+u-C;f=ul(g.values,b,B)}else{const b=g.createInterpolant(),B=C,y=u-C;b.evaluate(s),f=ul(b.resultBuffer,B,y)}r==="quaternion"&&new bn().fromArray(f).normalize().conjugate().toArray(f);const p=I.times.length;for(let b=0;b<p;++b){const B=b*A+d;if(r==="quaternion")bn.multiplyQuaternionsFlat(I.values,B,f,0,I.values,B);else{const y=A-d*2;for(let Z=0;Z<y;++Z)I.values[B+Z]-=f[Z]}}}return i.blendMode=eh,i}var xV=Object.freeze({__proto__:null,arraySlice:ul,convertArray:Ng,isTypedArray:yh,getKeyframeOrder:Xb,sortedArray:L3,flattenJSON:Bh,subclip:ZV,makeClipAdditive:vV});class ka{constructor(e,t,n,l){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=l!==void 0?l:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,l=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<l)){for(let g=n+2;;){if(l===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===g)break;if(s=l,l=t[++n],e<l)break t}o=t.length;break n}if(!(e>=s)){const g=t[1];e<g&&(n=2,s=g);for(let r=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===r)break;if(l=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const g=n+o>>>1;e<t[g]?o=g:n=g+1}if(l=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(l===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,l)}return this.interpolate_(n,s,e,l)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,l=this.valueSize,s=e*l;for(let o=0;o!==l;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Yb extends ka{constructor(e,t,n,l){super(e,t,n,l),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:zg,endingEnd:zg}}intervalChanged_(e,t,n){const l=this.parameterPositions;let s=e-2,o=e+1,g=l[s],r=l[o];if(g===void 0)switch(this.getSettings_().endingStart){case Kg:s=e,g=2*t-n;break;case yI:s=l.length-2,g=t+l[s]-l[s+1];break;default:s=e,g=n}if(r===void 0)switch(this.getSettings_().endingEnd){case Kg:o=e,r=2*n-t;break;case yI:o=1,r=n+l[1]-l[0];break;default:o=e-1,r=t}const I=(n-t)*.5,C=this.valueSize;this._weightPrev=I/(t-g),this._weightNext=I/(r-n),this._offsetPrev=s*C,this._offsetNext=o*C}interpolate_(e,t,n,l){const s=this.resultBuffer,o=this.sampleValues,g=this.valueSize,r=e*g,I=r-g,C=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,A=this._weightNext,m=(n-t)/(l-t),f=m*m,p=f*m,b=-d*p+2*d*f-d*m,B=(1+d)*p+(-1.5-2*d)*f+(-.5+d)*m+1,y=(-1-A)*p+(1.5+A)*f+.5*m,Z=A*p-A*f;for(let q=0;q!==g;++q)s[q]=b*o[C+q]+B*o[I+q]+y*o[r+q]+Z*o[u+q];return s}}class Zh extends ka{constructor(e,t,n,l){super(e,t,n,l)}interpolate_(e,t,n,l){const s=this.resultBuffer,o=this.sampleValues,g=this.valueSize,r=e*g,I=r-g,C=(n-t)/(l-t),u=1-C;for(let d=0;d!==g;++d)s[d]=o[I+d]*u+o[r+d]*C;return s}}class zb extends ka{constructor(e,t,n,l){super(e,t,n,l)}interpolate_(e){return this.copySampleValue_(e-1)}}class Jl{constructor(e,t,n,l){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ng(t,this.TimeBufferType),this.values=Ng(n,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Ng(e.times,Array),values:Ng(e.values,Array)};const l=e.getInterpolation();l!==e.DefaultInterpolation&&(n.interpolation=l)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new zb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Zh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Yb(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case va:t=this.InterpolantFactoryMethodDiscrete;break;case nr:t=this.InterpolantFactoryMethodLinear;break;case x0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return va;case this.InterpolantFactoryMethodLinear:return nr;case this.InterpolantFactoryMethodSmooth:return x0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,l=t.length;n!==l;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,l=t.length;n!==l;++n)t[n]*=e}return this}trim(e,t){const n=this.times,l=n.length;let s=0,o=l-1;for(;s!==l&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==l){s>=o&&(o=Math.max(o,1),s=o-1);const g=this.getValueSize();this.times=ul(n,s,o),this.values=ul(this.values,s*g,o*g)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,l=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let g=0;g!==s;g++){const r=n[g];if(typeof r=="number"&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,r),e=!1;break}if(o!==null&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,r,o),e=!1;break}o=r}if(l!==void 0&&yh(l))for(let g=0,r=l.length;g!==r;++g){const I=l[g];if(isNaN(I)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,I),e=!1;break}}return e}optimize(){const e=ul(this.times),t=ul(this.values),n=this.getValueSize(),l=this.getInterpolation()===x0,s=e.length-1;let o=1;for(let g=1;g<s;++g){let r=!1;const I=e[g],C=e[g+1];if(I!==C&&(g!==1||I!==e[0]))if(l)r=!0;else{const u=g*n,d=u-n,A=u+n;for(let m=0;m!==n;++m){const f=t[u+m];if(f!==t[d+m]||f!==t[A+m]){r=!0;break}}}if(r){if(g!==o){e[o]=e[g];const u=g*n,d=o*n;for(let A=0;A!==n;++A)t[d+A]=t[u+A]}++o}}if(s>0){e[o]=e[s];for(let g=s*n,r=o*n,I=0;I!==n;++I)t[r+I]=t[g+I];++o}return o!==e.length?(this.times=ul(e,0,o),this.values=ul(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=ul(this.times,0),t=ul(this.values,0),n=this.constructor,l=new n(this.name,e,t);return l.createInterpolant=this.createInterpolant,l}}Jl.prototype.TimeBufferType=Float32Array;Jl.prototype.ValueBufferType=Float32Array;Jl.prototype.DefaultInterpolation=nr;class ar extends Jl{}ar.prototype.ValueTypeName="bool";ar.prototype.ValueBufferType=Array;ar.prototype.DefaultInterpolation=va;ar.prototype.InterpolantFactoryMethodLinear=void 0;ar.prototype.InterpolantFactoryMethodSmooth=void 0;class vh extends Jl{}vh.prototype.ValueTypeName="color";class wa extends Jl{}wa.prototype.ValueTypeName="number";class Kb extends ka{constructor(e,t,n,l){super(e,t,n,l)}interpolate_(e,t,n,l){const s=this.resultBuffer,o=this.sampleValues,g=this.valueSize,r=(n-t)/(l-t);let I=e*g;for(let C=I+g;I!==C;I+=4)bn.slerpFlat(s,0,o,I-g,o,I,r);return s}}class Po extends Jl{InterpolantFactoryMethodLinear(e){return new Kb(this.times,this.values,this.getValueSize(),e)}}Po.prototype.ValueTypeName="quaternion";Po.prototype.DefaultInterpolation=nr;Po.prototype.InterpolantFactoryMethodSmooth=void 0;class Ir extends Jl{}Ir.prototype.ValueTypeName="string";Ir.prototype.ValueBufferType=Array;Ir.prototype.DefaultInterpolation=va;Ir.prototype.InterpolantFactoryMethodLinear=void 0;Ir.prototype.InterpolantFactoryMethodSmooth=void 0;class Wa extends Jl{}Wa.prototype.ValueTypeName="vector";class Sa{constructor(e,t=-1,n,l=x2){this.name=e,this.tracks=n,this.duration=t,this.blendMode=l,this.uuid=Ji(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,l=1/(e.fps||1);for(let o=0,g=n.length;o!==g;++o)t.push(wV(n[o]).scale(l));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,l={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Jl.toJSON(n[s]));return l}static CreateFromMorphTargetSequence(e,t,n,l){const s=t.length,o=[];for(let g=0;g<s;g++){let r=[],I=[];r.push((g+s-1)%s,g,(g+1)%s),I.push(0,1,0);const C=Xb(r);r=L3(r,1,C),I=L3(I,1,C),!l&&r[0]===0&&(r.push(s),I.push(I[0])),o.push(new wa(".morphTargetInfluences["+t[g].name+"]",r,I).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const l=e;n=l.geometry&&l.geometry.animations||l.animations}for(let l=0;l<n.length;l++)if(n[l].name===t)return n[l];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const l={},s=/^([\w-]*?)([\d]+)$/;for(let g=0,r=e.length;g<r;g++){const I=e[g],C=I.name.match(s);if(C&&C.length>1){const u=C[1];let d=l[u];d||(l[u]=d=[]),d.push(I)}}const o=[];for(const g in l)o.push(this.CreateFromMorphTargetSequence(g,l[g],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,d,A,m,f){if(A.length!==0){const p=[],b=[];Bh(A,p,b,m),p.length!==0&&f.push(new u(d,p,b))}},l=[],s=e.name||"default",o=e.fps||30,g=e.blendMode;let r=e.length||-1;const I=e.hierarchy||[];for(let u=0;u<I.length;u++){const d=I[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const A={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let f=0;f<d[m].morphTargets.length;f++)A[d[m].morphTargets[f]]=-1;for(const f in A){const p=[],b=[];for(let B=0;B!==d[m].morphTargets.length;++B){const y=d[m];p.push(y.time),b.push(y.morphTarget===f?1:0)}l.push(new wa(".morphTargetInfluence["+f+"]",p,b))}r=A.length*o}else{const A=".bones["+t[u].name+"]";n(Wa,A+".position",d,"pos",l),n(Po,A+".quaternion",d,"rot",l),n(Wa,A+".scale",d,"scl",l)}}return l.length===0?null:new this(s,r,l,g)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,l=e.length;n!==l;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qV(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return wa;case"vector":case"vector2":case"vector3":case"vector4":return Wa;case"color":return vh;case"quaternion":return Po;case"bool":case"boolean":return ar;case"string":return Ir}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function wV(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=qV(i.type);if(i.times===void 0){const t=[],n=[];Bh(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const lr={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class xh{constructor(e,t,n){const l=this;let s=!1,o=0,g=0,r;const I=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(C){g++,s===!1&&l.onStart!==void 0&&l.onStart(C,o,g),s=!0},this.itemEnd=function(C){o++,l.onProgress!==void 0&&l.onProgress(C,o,g),o===g&&(s=!1,l.onLoad!==void 0&&l.onLoad())},this.itemError=function(C){l.onError!==void 0&&l.onError(C)},this.resolveURL=function(C){return r?r(C):C},this.setURLModifier=function(C){return r=C,this},this.addHandler=function(C,u){return I.push(C,u),this},this.removeHandler=function(C){const u=I.indexOf(C);return u!==-1&&I.splice(u,2),this},this.getHandler=function(C){for(let u=0,d=I.length;u<d;u+=2){const A=I[u],m=I[u+1];if(A.global&&(A.lastIndex=0),A.test(C))return m}return null}}}const ra=new xh;class Ai{constructor(e){this.manager=e!==void 0?e:ra,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(l,s){n.load(e,l,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Vs={};class WV extends Error{constructor(e,t){super(e),this.response=t}}class Gl extends Ai{constructor(e){super(e)}load(e,t,n,l){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=lr.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Vs[e]!==void 0){Vs[e].push({onLoad:t,onProgress:n,onError:l});return}Vs[e]=[],Vs[e].push({onLoad:t,onProgress:n,onError:l});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),g=this.mimeType,r=this.responseType;fetch(o).then(I=>{if(I.status===200||I.status===0){if(I.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||I.body===void 0||I.body.getReader===void 0)return I;const C=Vs[e],u=I.body.getReader(),d=I.headers.get("Content-Length"),A=d?parseInt(d):0,m=A!==0;let f=0;const p=new ReadableStream({start(b){B();function B(){u.read().then(({done:y,value:Z})=>{if(y)b.close();else{f+=Z.byteLength;const q=new ProgressEvent("progress",{lengthComputable:m,loaded:f,total:A});for(let W=0,S=C.length;W<S;W++){const x=C[W];x.onProgress&&x.onProgress(q)}b.enqueue(Z),B()}})}}});return new Response(p)}else throw new WV(`fetch for "${I.url}" responded with ${I.status}: ${I.statusText}`,I)}).then(I=>{switch(r){case"arraybuffer":return I.arrayBuffer();case"blob":return I.blob();case"document":return I.text().then(C=>new DOMParser().parseFromString(C,g));case"json":return I.json();default:if(g===void 0)return I.text();{const u=/charset="?([^;"\s]*)"?/i.exec(g),d=u&&u[1]?u[1].toLowerCase():void 0,A=new TextDecoder(d);return I.arrayBuffer().then(m=>A.decode(m))}}}).then(I=>{lr.add(e,I);const C=Vs[e];delete Vs[e];for(let u=0,d=C.length;u<d;u++){const A=C[u];A.onLoad&&A.onLoad(I)}}).catch(I=>{const C=Vs[e];if(C===void 0)throw this.manager.itemError(e),I;delete Vs[e];for(let u=0,d=C.length;u<d;u++){const A=C[u];A.onError&&A.onError(I)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class SV extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=this,o=new Gl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(g){try{t(s.parse(JSON.parse(g)))}catch(r){l?l(r):console.error(r),s.manager.itemError(e)}},n,l)}parse(e){const t=[];for(let n=0;n<e.length;n++){const l=Sa.parse(e[n]);t.push(l)}return t}}class VV extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=this,o=[],g=new Ah,r=new Gl(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(s.withCredentials);let I=0;function C(u){r.load(e[u],function(d){const A=s.parse(d,!0);o[u]={width:A.width,height:A.height,format:A.format,mipmaps:A.mipmaps},I+=1,I===6&&(A.mipmapCount===1&&(g.minFilter=Pt),g.image=o,g.format=A.format,g.needsUpdate=!0,t&&t(g))},n,l)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)C(u);else r.load(e,function(u){const d=s.parse(u,!0);if(d.isCubemap){const A=d.mipmaps.length/d.mipmapCount;for(let m=0;m<A;m++){o[m]={mipmaps:[]};for(let f=0;f<d.mipmapCount;f++)o[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+f]),o[m].format=d.format,o[m].width=d.width,o[m].height=d.height}g.image=o}else g.image.width=d.width,g.image.height=d.height,g.mipmaps=d.mipmaps;d.mipmapCount===1&&(g.minFilter=Pt),g.format=d.format,g.needsUpdate=!0,t&&t(g)},n,l);return g}}class SI extends Ai{constructor(e){super(e)}load(e,t,n,l){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lr.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const g=vI("img");function r(){C(),lr.add(e,this),t&&t(this),s.manager.itemEnd(e)}function I(u){C(),l&&l(u),s.manager.itemError(e),s.manager.itemEnd(e)}function C(){g.removeEventListener("load",r,!1),g.removeEventListener("error",I,!1)}return g.addEventListener("load",r,!1),g.addEventListener("error",I,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(g.crossOrigin=this.crossOrigin),s.manager.itemStart(e),g.src=e,g}}class RV extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=new LI,o=new SI(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let g=0;function r(I){o.load(e[I],function(C){s.images[I]=C,g++,g===6&&(s.needsUpdate=!0,t&&t(s))},void 0,l)}for(let I=0;I<e.length;++I)r(I);return s}}class XV extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=this,o=new Aa,g=new Gl(this.manager);return g.setResponseType("arraybuffer"),g.setRequestHeader(this.requestHeader),g.setPath(this.path),g.setWithCredentials(s.withCredentials),g.load(e,function(r){const I=s.parse(r);!I||(I.image!==void 0?o.image=I.image:I.data!==void 0&&(o.image.width=I.width,o.image.height=I.height,o.image.data=I.data),o.wrapS=I.wrapS!==void 0?I.wrapS:Tn,o.wrapT=I.wrapT!==void 0?I.wrapT:Tn,o.magFilter=I.magFilter!==void 0?I.magFilter:Pt,o.minFilter=I.minFilter!==void 0?I.minFilter:Pt,o.anisotropy=I.anisotropy!==void 0?I.anisotropy:1,I.encoding!==void 0&&(o.encoding=I.encoding),I.flipY!==void 0&&(o.flipY=I.flipY),I.format!==void 0&&(o.format=I.format),I.type!==void 0&&(o.type=I.type),I.mipmaps!==void 0&&(o.mipmaps=I.mipmaps,o.minFilter=js),I.mipmapCount===1&&(o.minFilter=Pt),I.generateMipmaps!==void 0&&(o.generateMipmaps=I.generateMipmaps),o.needsUpdate=!0,t&&t(o,I))},n,l),o}}class eI extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=new un,o=new SI(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(g){s.image=g,s.needsUpdate=!0,t!==void 0&&t(s)},n,l),s}}class ig extends yt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ve(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Hb extends ig{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yt.DefaultUp),this.updateMatrix(),this.groundColor=new Ve(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Pd=new st,X7=new K,Y7=new K;class qh{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new me(512,512),this.map=null,this.mapPass=null,this.matrix=new st,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new w2,this._frameExtents=new me(1,1),this._viewportCount=1,this._viewports=[new Nt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;X7.setFromMatrixPosition(e.matrixWorld),t.position.copy(X7),Y7.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Y7),t.updateMatrixWorld(),Pd.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Pd)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class YV extends qh{constructor(){super(new Et(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=ZI*2*e.angle*this.focus,l=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||l!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=l,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class wh extends ig{constructor(e,t,n=0,l=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yt.DefaultUp),this.updateMatrix(),this.target=new yt,this.distance=n,this.angle=l,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new YV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const z7=new st,x1=new K,Od=new K;class zV extends qh{constructor(){super(new Et(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new me(4,2),this._viewportCount=6,this._viewports=[new Nt(2,1,1,1),new Nt(0,1,1,1),new Nt(3,1,1,1),new Nt(1,1,1,1),new Nt(3,0,1,1),new Nt(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,l=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),x1.setFromMatrixPosition(e.matrixWorld),n.position.copy(x1),Od.copy(n.position),Od.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Od),n.updateMatrixWorld(),l.makeTranslation(-x1.x,-x1.y,-x1.z),z7.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(z7)}}class Wh extends ig{constructor(e,t,n=0,l=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=l,this.shadow=new zV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class KV extends qh{constructor(){super(new Ll(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Sh extends ig{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yt.DefaultUp),this.updateMatrix(),this.target=new yt,this.shadow=new KV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Nb extends ig{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Mb extends ig{constructor(e,t,n=10,l=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=l}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Fb{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,l=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*l),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*l)),t.addScaledVector(o[5],1.092548*(l*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-l*l)),t}getIrradianceAt(e,t){const n=e.x,l=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*l),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*l),t.addScaledVector(o[5],2*.429043*l*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-l*l)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let l=0;l<9;l++)n[l].fromArray(e,t+l*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let l=0;l<9;l++)n[l].toArray(e,t+l*3);return e}static getBasisAt(e,t){const n=e.x,l=e.y,s=e.z;t[0]=.282095,t[1]=.488603*l,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*l,t[5]=1.092548*l*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-l*l)}}class H2 extends ig{constructor(e=new Fb,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class N2 extends Ai{constructor(e){super(e),this.textures={}}load(e,t,n,l){const s=this,o=new Gl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(g){try{t(s.parse(JSON.parse(g)))}catch(r){l?l(r):console.error(r),s.manager.itemError(e)}},n,l)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const l=N2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(l.uuid=e.uuid),e.name!==void 0&&(l.name=e.name),e.color!==void 0&&l.color!==void 0&&l.color.setHex(e.color),e.roughness!==void 0&&(l.roughness=e.roughness),e.metalness!==void 0&&(l.metalness=e.metalness),e.sheen!==void 0&&(l.sheen=e.sheen),e.sheenColor!==void 0&&(l.sheenColor=new Ve().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(l.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&l.emissive!==void 0&&l.emissive.setHex(e.emissive),e.specular!==void 0&&l.specular!==void 0&&l.specular.setHex(e.specular),e.specularIntensity!==void 0&&(l.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&l.specularColor!==void 0&&l.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(l.shininess=e.shininess),e.clearcoat!==void 0&&(l.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(l.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(l.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(l.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(l.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(l.transmission=e.transmission),e.thickness!==void 0&&(l.thickness=e.thickness),e.attenuationDistance!==void 0&&(l.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&l.attenuationColor!==void 0&&l.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(l.fog=e.fog),e.flatShading!==void 0&&(l.flatShading=e.flatShading),e.blending!==void 0&&(l.blending=e.blending),e.combine!==void 0&&(l.combine=e.combine),e.side!==void 0&&(l.side=e.side),e.shadowSide!==void 0&&(l.shadowSide=e.shadowSide),e.opacity!==void 0&&(l.opacity=e.opacity),e.transparent!==void 0&&(l.transparent=e.transparent),e.alphaTest!==void 0&&(l.alphaTest=e.alphaTest),e.depthTest!==void 0&&(l.depthTest=e.depthTest),e.depthWrite!==void 0&&(l.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(l.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(l.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(l.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(l.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(l.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(l.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(l.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(l.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(l.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(l.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(l.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(l.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(l.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(l.rotation=e.rotation),e.linewidth!==1&&(l.linewidth=e.linewidth),e.dashSize!==void 0&&(l.dashSize=e.dashSize),e.gapSize!==void 0&&(l.gapSize=e.gapSize),e.scale!==void 0&&(l.scale=e.scale),e.polygonOffset!==void 0&&(l.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(l.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(l.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(l.dithering=e.dithering),e.alphaToCoverage!==void 0&&(l.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(l.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(l.visible=e.visible),e.toneMapped!==void 0&&(l.toneMapped=e.toneMapped),e.userData!==void 0&&(l.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?l.vertexColors=e.vertexColors>0:l.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(l.uniforms[s]={},o.type){case"t":l.uniforms[s].value=n(o.value);break;case"c":l.uniforms[s].value=new Ve().setHex(o.value);break;case"v2":l.uniforms[s].value=new me().fromArray(o.value);break;case"v3":l.uniforms[s].value=new K().fromArray(o.value);break;case"v4":l.uniforms[s].value=new Nt().fromArray(o.value);break;case"m3":l.uniforms[s].value=new Wi().fromArray(o.value);break;case"m4":l.uniforms[s].value=new st().fromArray(o.value);break;default:l.uniforms[s].value=o.value}}if(e.defines!==void 0&&(l.defines=e.defines),e.vertexShader!==void 0&&(l.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(l.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(l.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)l.extensions[s]=e.extensions[s];if(e.size!==void 0&&(l.size=e.size),e.sizeAttenuation!==void 0&&(l.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(l.map=n(e.map)),e.matcap!==void 0&&(l.matcap=n(e.matcap)),e.alphaMap!==void 0&&(l.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(l.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(l.bumpScale=e.bumpScale),e.normalMap!==void 0&&(l.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(l.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),l.normalScale=new me().fromArray(s)}return e.displacementMap!==void 0&&(l.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(l.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(l.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(l.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(l.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(l.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(l.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(l.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(l.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(l.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(l.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(l.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(l.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(l.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(l.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(l.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(l.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(l.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(l.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(l.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(l.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(l.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(l.clearcoatNormalScale=new me().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(l.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(l.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(l.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(l.thicknessMap=n(e.thicknessMap)),e.sheenColorMap!==void 0&&(l.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(l.sheenRoughnessMap=n(e.sheenRoughnessMap)),l}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:vb,SpriteMaterial:ch,RawShaderMaterial:xb,ShaderMaterial:kl,PointsMaterial:X2,MeshPhysicalMaterial:to,MeshStandardMaterial:_a,MeshPhongMaterial:qb,MeshToonMaterial:wb,MeshNormalMaterial:Wb,MeshLambertMaterial:Sb,MeshDepthMaterial:gh,MeshDistanceMaterial:rh,MeshBasicMaterial:ki,MeshMatcapMaterial:Vb,LineDashedMaterial:Rb,LineBasicMaterial:li,Material:vn};return new t[e]}}class As{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,l=e.length;n<l;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Lb extends ut{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class _b extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=this,o=new Gl(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(g){try{t(s.parse(JSON.parse(g)))}catch(r){l?l(r):console.error(r),s.manager.itemError(e)}},n,l)}parse(e){const t={},n={};function l(A,m){if(t[m]!==void 0)return t[m];const p=A.interleavedBuffers[m],b=s(A,p.buffer),B=sa(p.type,b),y=new _I(B,p.stride);return y.uuid=p.uuid,t[m]=y,y}function s(A,m){if(n[m]!==void 0)return n[m];const p=A.arrayBuffers[m],b=new Uint32Array(p).buffer;return n[m]=b,b}const o=e.isInstancedBufferGeometry?new Lb:new ut,g=e.data.index;if(g!==void 0){const A=sa(g.type,g.array);o.setIndex(new Ft(A,1))}const r=e.data.attributes;for(const A in r){const m=r[A];let f;if(m.isInterleavedBufferAttribute){const p=l(e.data,m.data);f=new Qo(p,m.itemSize,m.offset,m.normalized)}else{const p=sa(m.type,m.array),b=m.isInstancedBufferAttribute?qa:Ft;f=new b(p,m.itemSize,m.normalized)}m.name!==void 0&&(f.name=m.name),m.usage!==void 0&&f.setUsage(m.usage),m.updateRange!==void 0&&(f.updateRange.offset=m.updateRange.offset,f.updateRange.count=m.updateRange.count),o.setAttribute(A,f)}const I=e.data.morphAttributes;if(I)for(const A in I){const m=I[A],f=[];for(let p=0,b=m.length;p<b;p++){const B=m[p];let y;if(B.isInterleavedBufferAttribute){const Z=l(e.data,B.data);y=new Qo(Z,B.itemSize,B.offset,B.normalized)}else{const Z=sa(B.type,B.array);y=new Ft(Z,B.itemSize,B.normalized)}B.name!==void 0&&(y.name=B.name),f.push(y)}o.morphAttributes[A]=f}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let A=0,m=u.length;A!==m;++A){const f=u[A];o.addGroup(f.start,f.count,f.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const A=new K;d.center!==void 0&&A.fromArray(d.center),o.boundingSphere=new tg(A,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class HV extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=this,o=this.path===""?As.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const g=new Gl(this.manager);g.setPath(this.path),g.setRequestHeader(this.requestHeader),g.setWithCredentials(this.withCredentials),g.load(e,function(r){let I=null;try{I=JSON.parse(r)}catch(u){l!==void 0&&l(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}const C=I.metadata;if(C===void 0||C.type===void 0||C.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(I,t)},n,l)}async loadAsync(e,t){const n=this,l=this.path===""?As.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const s=new Gl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),g=JSON.parse(o),r=g.metadata;if(r===void 0||r.type===void 0||r.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(g)}parse(e,t){const n=this.parseAnimations(e.animations),l=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,l),o=this.parseImages(e.images,function(){t!==void 0&&t(I)}),g=this.parseTextures(e.textures,o),r=this.parseMaterials(e.materials,g),I=this.parseObject(e.object,s,r,g,n),C=this.parseSkeletons(e.skeletons,I);if(this.bindSkeletons(I,C),t!==void 0){let u=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){u=!0;break}u===!1&&t(I)}return I}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),l=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),g=this.parseMaterials(e.materials,o),r=this.parseObject(e.object,l,g,o,t),I=this.parseSkeletons(e.skeletons,r);return this.bindSkeletons(r,I),r}parseShapes(e){const t={};if(e!==void 0)for(let n=0,l=e.length;n<l;n++){const s=new Dg().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},l={};if(t.traverse(function(s){s.isBone&&(l[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const g=new kI().fromJSON(e[s],l);n[g.uuid]=g}return n}parseGeometries(e,t){const n={};if(e!==void 0){const l=new _b;for(let s=0,o=e.length;s<o;s++){let g;const r=e[s];switch(r.type){case"BufferGeometry":case"InstancedBufferGeometry":g=l.parse(r);break;default:r.type in R7?g=R7[r.type].fromJSON(r,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${r.type}"`)}g.uuid=r.uuid,r.name!==void 0&&(g.name=r.name),g.isBufferGeometry===!0&&r.userData!==void 0&&(g.userData=r.userData),n[r.uuid]=g}}return n}parseMaterials(e,t){const n={},l={};if(e!==void 0){const s=new N2;s.setTextures(t);for(let o=0,g=e.length;o<g;o++){const r=e[o];n[r.uuid]===void 0&&(n[r.uuid]=s.parse(r)),l[r.uuid]=n[r.uuid]}}return l}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const l=e[n],s=Sa.parse(l);t[s.uuid]=s}return t}parseImages(e,t){const n=this,l={};let s;function o(r){return n.manager.itemStart(r),s.load(r,function(){n.manager.itemEnd(r)},void 0,function(){n.manager.itemError(r),n.manager.itemEnd(r)})}function g(r){if(typeof r=="string"){const I=r,C=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:n.resourcePath+I;return o(C)}else return r.data?{data:sa(r.type,r.data),width:r.width,height:r.height}:null}if(e!==void 0&&e.length>0){const r=new xh(t);s=new SI(r),s.setCrossOrigin(this.crossOrigin);for(let I=0,C=e.length;I<C;I++){const u=e[I],d=u.url;if(Array.isArray(d)){const A=[];for(let m=0,f=d.length;m<f;m++){const p=d[m],b=g(p);b!==null&&(b instanceof HTMLImageElement?A.push(b):A.push(new Aa(b.data,b.width,b.height)))}l[u.uuid]=new Hg(A)}else{const A=g(u.url);l[u.uuid]=new Hg(A)}}}return l}async parseImagesAsync(e){const t=this,n={};let l;async function s(o){if(typeof o=="string"){const g=o,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(g)?g:t.resourcePath+g;return await l.loadAsync(r)}else return o.data?{data:sa(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){l=new SI(this.manager),l.setCrossOrigin(this.crossOrigin);for(let o=0,g=e.length;o<g;o++){const r=e[o],I=r.url;if(Array.isArray(I)){const C=[];for(let u=0,d=I.length;u<d;u++){const A=I[u],m=await s(A);m!==null&&(m instanceof HTMLImageElement?C.push(m):C.push(new Aa(m.data,m.width,m.height)))}n[r.uuid]=new Hg(C)}else{const C=await s(r.url);n[r.uuid]=new Hg(C)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const l={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const g=e[s];g.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',g.uuid),t[g.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",g.image);const r=t[g.image],I=r.data;let C;Array.isArray(I)?(C=new LI,I.length===6&&(C.needsUpdate=!0)):(I&&I.data?C=new Aa:C=new un,I&&(C.needsUpdate=!0)),C.source=r,C.uuid=g.uuid,g.name!==void 0&&(C.name=g.name),g.mapping!==void 0&&(C.mapping=n(g.mapping,NV)),g.offset!==void 0&&C.offset.fromArray(g.offset),g.repeat!==void 0&&C.repeat.fromArray(g.repeat),g.center!==void 0&&C.center.fromArray(g.center),g.rotation!==void 0&&(C.rotation=g.rotation),g.wrap!==void 0&&(C.wrapS=n(g.wrap[0],K7),C.wrapT=n(g.wrap[1],K7)),g.format!==void 0&&(C.format=g.format),g.type!==void 0&&(C.type=g.type),g.encoding!==void 0&&(C.encoding=g.encoding),g.minFilter!==void 0&&(C.minFilter=n(g.minFilter,H7)),g.magFilter!==void 0&&(C.magFilter=n(g.magFilter,H7)),g.anisotropy!==void 0&&(C.anisotropy=g.anisotropy),g.flipY!==void 0&&(C.flipY=g.flipY),g.premultiplyAlpha!==void 0&&(C.premultiplyAlpha=g.premultiplyAlpha),g.unpackAlignment!==void 0&&(C.unpackAlignment=g.unpackAlignment),g.userData!==void 0&&(C.userData=g.userData),l[g.uuid]=C}return l}parseObject(e,t,n,l,s){let o;function g(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function r(d){if(d!==void 0){if(Array.isArray(d)){const A=[];for(let m=0,f=d.length;m<f;m++){const p=d[m];n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),A.push(n[p])}return A}return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),n[d]}}function I(d){return l[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),l[d]}let C,u;switch(e.type){case"Scene":o=new Ih,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ve(e.background):o.background=I(e.background)),e.environment!==void 0&&(o.environment=I(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new V2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new S2(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":o=new Et(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ll(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Nb(e.color,e.intensity);break;case"DirectionalLight":o=new Sh(e.color,e.intensity);break;case"PointLight":o=new Wh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Mb(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new wh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Hb(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new H2().fromJSON(e);break;case"SkinnedMesh":C=g(e.geometry),u=r(e.material),o=new Ch(C,u),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":C=g(e.geometry),u=r(e.material),o=new Mn(C,u);break;case"InstancedMesh":C=g(e.geometry),u=r(e.material);const d=e.count,A=e.instanceMatrix,m=e.instanceColor;o=new Ug(C,u,d),o.instanceMatrix=new qa(new Float32Array(A.array),16),m!==void 0&&(o.instanceColor=new qa(new Float32Array(m.array),m.itemSize));break;case"LOD":o=new db;break;case"Line":o=new Ps(g(e.geometry),r(e.material));break;case"LineLoop":o=new uh(g(e.geometry),r(e.material));break;case"LineSegments":o=new Tl(g(e.geometry),r(e.material));break;case"PointCloud":case"Points":o=new dh(g(e.geometry),r(e.material));break;case"Sprite":o=new ub(r(e.material));break;case"Group":o=new Fs;break;case"Bone":o=new R2;break;default:o=new yt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let A=0;A<d.length;A++)o.add(this.parseObject(d[A],t,n,l,s))}if(e.animations!==void 0){const d=e.animations;for(let A=0;A<d.length;A++){const m=d[A];o.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let A=0;A<d.length;A++){const m=d[A],f=o.getObjectByProperty("uuid",m.object);f!==void 0&&o.addLevel(f,m.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const l=t[n.skeleton];l===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(l,n.bindMatrix)}})}}const NV={UVMapping:Z2,CubeReflectionMapping:Eo,CubeRefractionMapping:Jo,EquirectangularReflectionMapping:pI,EquirectangularRefractionMapping:fI,CubeUVReflectionMapping:za},K7={RepeatWrapping:Uo,ClampToEdgeWrapping:Tn,MirroredRepeatWrapping:Za},H7={NearestFilter:pn,NearestMipmapNearestFilter:bI,NearestMipmapLinearFilter:GI,LinearFilter:Pt,LinearMipmapNearestFilter:v2,LinearMipmapLinearFilter:js};class kb extends Ai{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,l){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lr.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const g={};g.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",g.headers=this.requestHeader,fetch(e,g).then(function(r){return r.blob()}).then(function(r){return createImageBitmap(r,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(r){lr.add(e,r),t&&t(r),s.manager.itemEnd(e)}).catch(function(r){l&&l(r),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let QC;class Vh{static getContext(){return QC===void 0&&(QC=new(window.AudioContext||window.webkitAudioContext)),QC}static setContext(e){QC=e}}class MV extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=this,o=new Gl(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(g){try{const r=g.slice(0);Vh.getContext().decodeAudioData(r,function(C){t(C)})}catch(r){l?l(r):console.error(r),s.manager.itemError(e)}},n,l)}}class FV extends H2{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const l=new Ve().set(e),s=new Ve().set(t),o=new K(l.r,l.g,l.b),g=new K(s.r,s.g,s.b),r=Math.sqrt(Math.PI),I=r*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(g).multiplyScalar(r),this.sh.coefficients[1].copy(o).sub(g).multiplyScalar(I)}}class LV extends H2{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new Ve().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const N7=new st,M7=new st,mg=new st;class _V{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Et,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Et,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,mg.copy(e.projectionMatrix);const l=t.eyeSep/2,s=l*t.near/t.focus,o=t.near*Math.tan(Tg*t.fov*.5)/t.zoom;let g,r;M7.elements[12]=-l,N7.elements[12]=l,g=-o*t.aspect+s,r=o*t.aspect+s,mg.elements[0]=2*t.near/(r-g),mg.elements[8]=(r+g)/(r-g),this.cameraL.projectionMatrix.copy(mg),g=-o*t.aspect-s,r=o*t.aspect-s,mg.elements[0]=2*t.near/(r-g),mg.elements[8]=(r+g)/(r-g),this.cameraR.projectionMatrix.copy(mg)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(M7),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(N7)}}class Rh{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=F7(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=F7();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function F7(){return(typeof performance>"u"?Date:performance).now()}const pg=new K,L7=new bn,kV=new K,fg=new K;class TV extends yt{constructor(){super(),this.type="AudioListener",this.context=Vh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Rh}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(pg,L7,kV),fg.set(0,0,-1).applyQuaternion(L7),t.positionX){const l=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(pg.x,l),t.positionY.linearRampToValueAtTime(pg.y,l),t.positionZ.linearRampToValueAtTime(pg.z,l),t.forwardX.linearRampToValueAtTime(fg.x,l),t.forwardY.linearRampToValueAtTime(fg.y,l),t.forwardZ.linearRampToValueAtTime(fg.z,l),t.upX.linearRampToValueAtTime(n.x,l),t.upY.linearRampToValueAtTime(n.y,l),t.upZ.linearRampToValueAtTime(n.z,l)}else t.setPosition(pg.x,pg.y,pg.z),t.setOrientation(fg.x,fg.y,fg.z,n.x,n.y,n.z)}}class Tb extends yt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const bg=new K,_7=new bn,EV=new K,Gg=new K;class JV extends Tb{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(bg,_7,EV),Gg.set(0,0,1).applyQuaternion(_7);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(bg.x,n),t.positionY.linearRampToValueAtTime(bg.y,n),t.positionZ.linearRampToValueAtTime(bg.z,n),t.orientationX.linearRampToValueAtTime(Gg.x,n),t.orientationY.linearRampToValueAtTime(Gg.y,n),t.orientationZ.linearRampToValueAtTime(Gg.z,n)}else t.setPosition(bg.x,bg.y,bg.z),t.setOrientation(Gg.x,Gg.y,Gg.z)}}class UV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Eb{constructor(e,t,n){this.binding=e,this.valueSize=n;let l,s,o;switch(t){case"quaternion":l=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":l=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:l=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=l,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,l=this.valueSize,s=e*l+l;let o=this.cumulativeWeight;if(o===0){for(let g=0;g!==l;++g)n[s+g]=n[g];o=t}else{o+=t;const g=t/o;this._mixBufferRegion(n,s,0,g,l)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,l=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,l,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,l=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,g=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const r=t*this._origIndex;this._mixBufferRegion(n,l,r,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,l,this._addIndex*t,1,t);for(let r=t,I=t+t;r!==I;++r)if(n[r]!==n[r+t]){g.setValue(n,l);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,l=n*this._origIndex;e.getValue(t,l);for(let s=n,o=l;s!==o;++s)t[s]=t[l+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,l,s){if(l>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,l){bn.slerpFlat(e,t,e,t,e,n,l)}_slerpAdditive(e,t,n,l,s){const o=this._workIndex*s;bn.multiplyQuaternionsFlat(e,o,e,t,e,n),bn.slerpFlat(e,t,e,t,e,o,l)}_lerp(e,t,n,l,s){const o=1-l;for(let g=0;g!==s;++g){const r=t+g;e[r]=e[r]*o+e[n+g]*l}}_lerpAdditive(e,t,n,l,s){for(let o=0;o!==s;++o){const g=t+o;e[g]=e[g]+e[n+o]*l}}}const Xh="\\[\\]\\.:\\/",DV=new RegExp("["+Xh+"]","g"),Yh="[^"+Xh+"]",QV="[^"+Xh.replace("\\.","")+"]",PV=/((?:WC+[\/:])*)/.source.replace("WC",Yh),OV=/(WCOD+)?/.source.replace("WCOD",QV),jV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Yh),$V=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Yh),eR=new RegExp("^"+PV+OV+jV+$V+"$"),tR=["material","materials","bones","map"];class nR{constructor(e,t,n){const l=n||qt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,l)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,l=this._bindings[n];l!==void 0&&l.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let l=this._targetGroup.nCachedObjects_,s=n.length;l!==s;++l)n[l].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class qt{constructor(e,t,n){this.path=t,this.parsedPath=n||qt.parseTrackName(t),this.node=qt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new qt.Composite(e,t,n):new qt(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(DV,"")}static parseTrackName(e){const t=eR.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},l=n.nodeName&&n.nodeName.lastIndexOf(".");if(l!==void 0&&l!==-1){const s=n.nodeName.substring(l+1);tR.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,l),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const g=s[o];if(g.name===t||g.uuid===t)return g;const r=n(g.children);if(r)return r}return null},l=n(e.children);if(l)return l}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let l=0,s=n.length;l!==s;++l)e[t++]=n[l]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let l=0,s=n.length;l!==s;++l)n[l]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let l=0,s=n.length;l!==s;++l)n[l]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let l=0,s=n.length;l!==s;++l)n[l]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,l=t.propertyName;let s=t.propertyIndex;if(e||(e=qt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let I=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let C=0;C<e.length;C++)if(e[C].name===I){I=C;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(I!==void 0){if(e[I]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[I]}}const o=e[l];if(o===void 0){const I=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+I+"."+l+" but it wasn't found.",e);return}let g=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?g=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(g=this.Versioning.MatrixWorldNeedsUpdate);let r=this.BindingType.Direct;if(s!==void 0){if(l==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}r=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(r=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(r=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=l;this.getValue=this.GetterByBindingType[r],this.setValue=this.SetterByBindingTypeAndVersioning[r][g]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qt.Composite=nR;qt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qt.prototype.GetterByBindingType=[qt.prototype._getValue_direct,qt.prototype._getValue_array,qt.prototype._getValue_arrayElement,qt.prototype._getValue_toArray];qt.prototype.SetterByBindingTypeAndVersioning=[[qt.prototype._setValue_direct,qt.prototype._setValue_direct_setNeedsUpdate,qt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_array,qt.prototype._setValue_array_setNeedsUpdate,qt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_arrayElement,qt.prototype._setValue_arrayElement_setNeedsUpdate,qt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_fromArray,qt.prototype._setValue_fromArray_setNeedsUpdate,qt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class iR{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ji(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,l=arguments.length;n!==l;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,l=this._parsedPaths,s=this._bindings,o=s.length;let g,r=e.length,I=this.nCachedObjects_;for(let C=0,u=arguments.length;C!==u;++C){const d=arguments[C],A=d.uuid;let m=t[A];if(m===void 0){m=r++,t[A]=m,e.push(d);for(let f=0,p=o;f!==p;++f)s[f].push(new qt(d,n[f],l[f]))}else if(m<I){g=e[m];const f=--I,p=e[f];t[p.uuid]=m,e[m]=p,t[A]=f,e[f]=d;for(let b=0,B=o;b!==B;++b){const y=s[b],Z=y[f];let q=y[m];y[m]=Z,q===void 0&&(q=new qt(d,n[b],l[b])),y[f]=q}}else e[m]!==g&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=I}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,l=n.length;let s=this.nCachedObjects_;for(let o=0,g=arguments.length;o!==g;++o){const r=arguments[o],I=r.uuid,C=t[I];if(C!==void 0&&C>=s){const u=s++,d=e[u];t[d.uuid]=C,e[C]=d,t[I]=u,e[u]=r;for(let A=0,m=l;A!==m;++A){const f=n[A],p=f[u],b=f[C];f[C]=p,f[u]=b}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,l=n.length;let s=this.nCachedObjects_,o=e.length;for(let g=0,r=arguments.length;g!==r;++g){const I=arguments[g],C=I.uuid,u=t[C];if(u!==void 0)if(delete t[C],u<s){const d=--s,A=e[d],m=--o,f=e[m];t[A.uuid]=u,e[u]=A,t[f.uuid]=d,e[d]=f,e.pop();for(let p=0,b=l;p!==b;++p){const B=n[p],y=B[d],Z=B[m];B[u]=y,B[d]=Z,B.pop()}}else{const d=--o,A=e[d];d>0&&(t[A.uuid]=u),e[u]=A,e.pop();for(let m=0,f=l;m!==f;++m){const p=n[m];p[u]=p[d],p.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let l=n[e];const s=this._bindings;if(l!==void 0)return s[l];const o=this._paths,g=this._parsedPaths,r=this._objects,I=r.length,C=this.nCachedObjects_,u=new Array(I);l=s.length,n[e]=l,o.push(e),g.push(t),s.push(u);for(let d=C,A=r.length;d!==A;++d){const m=r[d];u[d]=new qt(m,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const l=this._paths,s=this._parsedPaths,o=this._bindings,g=o.length-1,r=o[g],I=e[g];t[I]=n,o[n]=r,o.pop(),s[n]=s[g],s.pop(),l[n]=l[g],l.pop()}}}class lR{constructor(e,t,n=null,l=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=l;const s=t.tracks,o=s.length,g=new Array(o),r={endingStart:zg,endingEnd:zg};for(let I=0;I!==o;++I){const C=s[I].createInterpolant(null);g[I]=C,C.settings=r}this._interpolantSettings=r,this._interpolants=g,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_f,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const l=this._clip.duration,s=e._clip.duration,o=s/l,g=l/s;e.warp(1,o,t),this.warp(g,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const l=this._mixer,s=l.time,o=this.timeScale;let g=this._timeScaleInterpolant;g===null&&(g=l._lendControlInterpolant(),this._timeScaleInterpolant=g);const r=g.parameterPositions,I=g.sampleValues;return r[0]=s,r[1]=s+n,I[0]=e/o,I[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,l){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const r=(e-s)*n;r<0||n===0?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const o=this._updateTime(t),g=this._updateWeight(e);if(g>0){const r=this._interpolants,I=this._propertyBindings;switch(this.blendMode){case eh:for(let C=0,u=r.length;C!==u;++C)r[C].evaluate(o),I[C].accumulateAdditive(g);break;case x2:default:for(let C=0,u=r.length;C!==u;++C)r[C].evaluate(o),I[C].accumulate(l,g)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const l=n.evaluate(e)[0];t*=l,e>n.parameterPositions[1]&&(this.stopFading(),l===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const l=n.evaluate(e)[0];t*=l,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let l=this.time+e,s=this._loopCount;const o=n===kf;if(e===0)return s===-1?l:o&&(s&1)===1?t-l:l;if(n===Lf){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(l>=t)l=t;else if(l<0)l=0;else{this.time=l;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),l>=t||l<0){const g=Math.floor(l/t);l-=t*g,s+=Math.abs(g);const r=this.repetitions-s;if(r<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,l=e>0?t:0,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(r===1){const I=e<0;this._setEndings(I,!I,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=l,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g})}}else this.time=l;if(o&&(s&1)===1)return t-l}return l}_setEndings(e,t,n){const l=this._interpolantSettings;n?(l.endingStart=Kg,l.endingEnd=Kg):(e?l.endingStart=this.zeroSlopeAtStart?Kg:zg:l.endingStart=yI,t?l.endingEnd=this.zeroSlopeAtEnd?Kg:zg:l.endingEnd=yI)}_scheduleFading(e,t,n){const l=this._mixer,s=l.time;let o=this._weightInterpolant;o===null&&(o=l._lendControlInterpolant(),this._weightInterpolant=o);const g=o.parameterPositions,r=o.sampleValues;return g[0]=s,r[0]=t,g[1]=s+e,r[1]=n,this}}const sR=new Float32Array(1);class oR extends hs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,l=e._clip.tracks,s=l.length,o=e._propertyBindings,g=e._interpolants,r=n.uuid,I=this._bindingsByRootAndName;let C=I[r];C===void 0&&(C={},I[r]=C);for(let u=0;u!==s;++u){const d=l[u],A=d.name;let m=C[A];if(m!==void 0)++m.referenceCount,o[u]=m;else{if(m=o[u],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,r,A));continue}const f=t&&t._propertyBindings[u].binding.parsedPath;m=new Eb(qt.create(n,A,f),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,r,A),o[u]=m}g[u].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,l=e._clip.uuid,s=this._actionsByClip[l];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,l,n)}const t=e._propertyBindings;for(let n=0,l=t.length;n!==l;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,l=t.length;n!==l;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const l=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const g=o.knownActions;e._byClipCacheIndex=g.length,g.push(e)}e._cacheIndex=l.length,l.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],l=e._cacheIndex;n._cacheIndex=l,t[l]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,g=o[s],r=g.knownActions,I=r[r.length-1],C=e._byClipCacheIndex;I._byClipCacheIndex=C,r[C]=I,r.pop(),e._byClipCacheIndex=null;const u=g.actionByRoot,d=(e._localRoot||this._root).uuid;delete u[d],r.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,l=t.length;n!==l;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,l=this._nActiveActions++,s=t[l];e._cacheIndex=l,t[l]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,l=--this._nActiveActions,s=t[l];e._cacheIndex=l,t[l]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const l=this._bindingsByRootAndName,s=this._bindings;let o=l[t];o===void 0&&(o={},l[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,l=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,g=o[l],r=t[t.length-1],I=e._cacheIndex;r._cacheIndex=I,t[I]=r,t.pop(),delete g[s],Object.keys(g).length===0&&delete o[l]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,l=this._nActiveBindings++,s=t[l];e._cacheIndex=l,t[l]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,l=--this._nActiveBindings,s=t[l];e._cacheIndex=l,t[l]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Zh(new Float32Array(2),new Float32Array(2),1,sR),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,l=--this._nActiveControlInterpolants,s=t[l];e.__cacheIndex=l,t[l]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const l=t||this._root,s=l.uuid;let o=typeof e=="string"?Sa.findByName(l,e):e;const g=o!==null?o.uuid:e,r=this._actionsByClip[g];let I=null;if(n===void 0&&(o!==null?n=o.blendMode:n=x2),r!==void 0){const u=r.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;I=r.knownActions[0],o===null&&(o=I._clip)}if(o===null)return null;const C=new lR(this,o,t,n);return this._bindAction(C,I),this._addInactiveAction(C,g,s),C}existingAction(e,t){const n=t||this._root,l=n.uuid,s=typeof e=="string"?Sa.findByName(n,e):e,o=s?s.uuid:e,g=this._actionsByClip[o];return g!==void 0&&g.actionByRoot[l]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,l=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let I=0;I!==n;++I)t[I]._update(l,e,s,o);const g=this._bindings,r=this._nActiveBindings;for(let I=0;I!==r;++I)g[I].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,l=this._actionsByClip,s=l[n];if(s!==void 0){const o=s.knownActions;for(let g=0,r=o.length;g!==r;++g){const I=o[g];this._deactivateAction(I);const C=I._cacheIndex,u=t[t.length-1];I._cacheIndex=null,I._byClipCacheIndex=null,u._cacheIndex=C,t[C]=u,t.pop(),this._removeInactiveBindingsForAction(I)}delete l[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const g=n[o].actionByRoot,r=g[t];r!==void 0&&(this._deactivateAction(r),this._removeInactiveAction(r))}const l=this._bindingsByRootAndName,s=l[t];if(s!==void 0)for(const o in s){const g=s[o];g.restoreOriginalState(),this._removeInactiveBinding(g)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class zh{constructor(e){this.value=e}clone(){return new zh(this.value.clone===void 0?this.value:this.value.clone())}}let gR=0;class rR extends hs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:gR++}),this.name="",this.usage=BI,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,l=t.length;n<l;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class aR extends _I{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class IR{constructor(e,t,n,l,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=l,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Jb{constructor(e,t,n=0,l=1/0){this.ray=new MI(e,t),this.near=n,this.far=l,this.camera=null,this.layers=new Jg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return _3(e,this,n,t),n.sort(k7),n}intersectObjects(e,t=!0,n=[]){for(let l=0,s=e.length;l<s;l++)_3(e[l],this,n,t);return n.sort(k7),n}}function k7(i,e){return i.distance-e.distance}function _3(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){const l=i.children;for(let s=0,o=l.length;s<o;s++)_3(l[s],e,t,!0)}}class s2{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class cR{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const T7=new me;class CR{constructor(e=new me(1/0,1/0),t=new me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=T7.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return T7.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const E7=new K,PC=new K;class uR{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){E7.subVectors(e,this.start),PC.subVectors(this.end,this.start);const n=PC.dot(PC);let s=PC.dot(E7)/n;return t&&(s=fn(s,0,1)),s}closestPointToPoint(e,t,n){const l=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(l).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const J7=new K;class dR extends yt{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new ut,l=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,g=1,r=32;o<r;o++,g++){const I=o/r*Math.PI*2,C=g/r*Math.PI*2;l.push(Math.cos(I),Math.sin(I),1,Math.cos(C),Math.sin(C),1)}n.setAttribute("position",new ke(l,3));const s=new li({fog:!1,toneMapped:!1});this.cone=new Tl(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),J7.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(J7),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const yo=new K,OC=new st,jd=new st;class AR extends Tl{constructor(e){const t=Ub(e),n=new ut,l=[],s=[],o=new Ve(0,0,1),g=new Ve(0,1,0);for(let I=0;I<t.length;I++){const C=t[I];C.parent&&C.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),s.push(o.r,o.g,o.b),s.push(g.r,g.g,g.b))}n.setAttribute("position",new ke(l,3)),n.setAttribute("color",new ke(s,3));const r=new li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,r),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,l=n.getAttribute("position");jd.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const g=t[s];g.parent&&g.parent.isBone&&(OC.multiplyMatrices(jd,g.matrixWorld),yo.setFromMatrixPosition(OC),l.setXYZ(o,yo.x,yo.y,yo.z),OC.multiplyMatrices(jd,g.parent.matrixWorld),yo.setFromMatrixPosition(OC),l.setXYZ(o+1,yo.x,yo.y,yo.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ub(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,Ub(i.children[t]));return e}class hR extends Mn{constructor(e,t,n){const l=new La(t,4,2),s=new ki({wireframe:!0,fog:!1,toneMapped:!1});super(l,s),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const mR=new K,U7=new Ve,D7=new Ve;class pR extends yt{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const l=new Fa(t);l.rotateY(Math.PI*.5),this.material=new ki({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=l.getAttribute("position"),o=new Float32Array(s.count*3);l.setAttribute("color",new Ft(o,3)),this.add(new Mn(l,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");U7.copy(this.light.color),D7.copy(this.light.groundColor);for(let n=0,l=t.count;n<l;n++){const s=n<l/2?U7:D7;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(mR.setFromMatrixPosition(this.light.matrixWorld).negate())}}class fR extends Tl{constructor(e=10,t=10,n=4473924,l=8947848){n=new Ve(n),l=new Ve(l);const s=t/2,o=e/t,g=e/2,r=[],I=[];for(let d=0,A=0,m=-g;d<=t;d++,m+=o){r.push(-g,0,m,g,0,m),r.push(m,0,-g,m,0,g);const f=d===s?n:l;f.toArray(I,A),A+=3,f.toArray(I,A),A+=3,f.toArray(I,A),A+=3,f.toArray(I,A),A+=3}const C=new ut;C.setAttribute("position",new ke(r,3)),C.setAttribute("color",new ke(I,3));const u=new li({vertexColors:!0,toneMapped:!1});super(C,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class bR extends Tl{constructor(e=10,t=16,n=8,l=64,s=4473924,o=8947848){s=new Ve(s),o=new Ve(o);const g=[],r=[];if(t>1)for(let u=0;u<t;u++){const d=u/t*(Math.PI*2),A=Math.sin(d)*e,m=Math.cos(d)*e;g.push(0,0,0),g.push(A,0,m);const f=u&1?s:o;r.push(f.r,f.g,f.b),r.push(f.r,f.g,f.b)}for(let u=0;u<n;u++){const d=u&1?s:o,A=e-e/n*u;for(let m=0;m<l;m++){let f=m/l*(Math.PI*2),p=Math.sin(f)*A,b=Math.cos(f)*A;g.push(p,0,b),r.push(d.r,d.g,d.b),f=(m+1)/l*(Math.PI*2),p=Math.sin(f)*A,b=Math.cos(f)*A,g.push(p,0,b),r.push(d.r,d.g,d.b)}}const I=new ut;I.setAttribute("position",new ke(g,3)),I.setAttribute("color",new ke(r,3));const C=new li({vertexColors:!0,toneMapped:!1});super(I,C),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Q7=new K,jC=new K,P7=new K;class GR extends yt{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);let l=new ut;l.setAttribute("position",new ke([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new li({fog:!1,toneMapped:!1});this.lightPlane=new Ps(l,s),this.add(this.lightPlane),l=new ut,l.setAttribute("position",new ke([0,0,0,0,0,1],3)),this.targetLine=new Ps(l,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Q7.setFromMatrixPosition(this.light.matrixWorld),jC.setFromMatrixPosition(this.light.target.matrixWorld),P7.subVectors(jC,Q7),this.lightPlane.lookAt(jC),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(jC),this.targetLine.scale.z=P7.length()}}const $C=new K,In=new FI;class yR extends Tl{constructor(e){const t=new ut,n=new li({color:16777215,vertexColors:!0,toneMapped:!1}),l=[],s=[],o={};g("n1","n2"),g("n2","n4"),g("n4","n3"),g("n3","n1"),g("f1","f2"),g("f2","f4"),g("f4","f3"),g("f3","f1"),g("n1","f1"),g("n2","f2"),g("n3","f3"),g("n4","f4"),g("p","n1"),g("p","n2"),g("p","n3"),g("p","n4"),g("u1","u2"),g("u2","u3"),g("u3","u1"),g("c","t"),g("p","c"),g("cn1","cn2"),g("cn3","cn4"),g("cf1","cf2"),g("cf3","cf4");function g(m,f){r(m),r(f)}function r(m){l.push(0,0,0),s.push(0,0,0),o[m]===void 0&&(o[m]=[]),o[m].push(l.length/3-1)}t.setAttribute("position",new ke(l,3)),t.setAttribute("color",new ke(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const I=new Ve(16755200),C=new Ve(16711680),u=new Ve(43775),d=new Ve(16777215),A=new Ve(3355443);this.setColors(I,C,u,d,A)}setColors(e,t,n,l,s){const g=this.geometry.getAttribute("color");g.setXYZ(0,e.r,e.g,e.b),g.setXYZ(1,e.r,e.g,e.b),g.setXYZ(2,e.r,e.g,e.b),g.setXYZ(3,e.r,e.g,e.b),g.setXYZ(4,e.r,e.g,e.b),g.setXYZ(5,e.r,e.g,e.b),g.setXYZ(6,e.r,e.g,e.b),g.setXYZ(7,e.r,e.g,e.b),g.setXYZ(8,e.r,e.g,e.b),g.setXYZ(9,e.r,e.g,e.b),g.setXYZ(10,e.r,e.g,e.b),g.setXYZ(11,e.r,e.g,e.b),g.setXYZ(12,e.r,e.g,e.b),g.setXYZ(13,e.r,e.g,e.b),g.setXYZ(14,e.r,e.g,e.b),g.setXYZ(15,e.r,e.g,e.b),g.setXYZ(16,e.r,e.g,e.b),g.setXYZ(17,e.r,e.g,e.b),g.setXYZ(18,e.r,e.g,e.b),g.setXYZ(19,e.r,e.g,e.b),g.setXYZ(20,e.r,e.g,e.b),g.setXYZ(21,e.r,e.g,e.b),g.setXYZ(22,e.r,e.g,e.b),g.setXYZ(23,e.r,e.g,e.b),g.setXYZ(24,t.r,t.g,t.b),g.setXYZ(25,t.r,t.g,t.b),g.setXYZ(26,t.r,t.g,t.b),g.setXYZ(27,t.r,t.g,t.b),g.setXYZ(28,t.r,t.g,t.b),g.setXYZ(29,t.r,t.g,t.b),g.setXYZ(30,t.r,t.g,t.b),g.setXYZ(31,t.r,t.g,t.b),g.setXYZ(32,n.r,n.g,n.b),g.setXYZ(33,n.r,n.g,n.b),g.setXYZ(34,n.r,n.g,n.b),g.setXYZ(35,n.r,n.g,n.b),g.setXYZ(36,n.r,n.g,n.b),g.setXYZ(37,n.r,n.g,n.b),g.setXYZ(38,l.r,l.g,l.b),g.setXYZ(39,l.r,l.g,l.b),g.setXYZ(40,s.r,s.g,s.b),g.setXYZ(41,s.r,s.g,s.b),g.setXYZ(42,s.r,s.g,s.b),g.setXYZ(43,s.r,s.g,s.b),g.setXYZ(44,s.r,s.g,s.b),g.setXYZ(45,s.r,s.g,s.b),g.setXYZ(46,s.r,s.g,s.b),g.setXYZ(47,s.r,s.g,s.b),g.setXYZ(48,s.r,s.g,s.b),g.setXYZ(49,s.r,s.g,s.b),g.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,l=1;In.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),hn("c",t,e,In,0,0,-1),hn("t",t,e,In,0,0,1),hn("n1",t,e,In,-n,-l,-1),hn("n2",t,e,In,n,-l,-1),hn("n3",t,e,In,-n,l,-1),hn("n4",t,e,In,n,l,-1),hn("f1",t,e,In,-n,-l,1),hn("f2",t,e,In,n,-l,1),hn("f3",t,e,In,-n,l,1),hn("f4",t,e,In,n,l,1),hn("u1",t,e,In,n*.7,l*1.1,-1),hn("u2",t,e,In,-n*.7,l*1.1,-1),hn("u3",t,e,In,0,l*2,-1),hn("cf1",t,e,In,-n,0,1),hn("cf2",t,e,In,n,0,1),hn("cf3",t,e,In,0,-l,1),hn("cf4",t,e,In,0,l,1),hn("cn1",t,e,In,-n,0,-1),hn("cn2",t,e,In,n,0,-1),hn("cn3",t,e,In,0,-l,-1),hn("cn4",t,e,In,0,l,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function hn(i,e,t,n,l,s,o){$C.set(l,s,o).unproject(n);const g=e[i];if(g!==void 0){const r=t.getAttribute("position");for(let I=0,C=g.length;I<C;I++)r.setXYZ(g[I],$C.x,$C.y,$C.z)}}const e0=new eg;class BR extends Tl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new Float32Array(8*3),s=new ut;s.setIndex(new Ft(n,1)),s.setAttribute("position",new Ft(l,3)),super(s,new li({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&e0.setFromObject(this.object),e0.isEmpty())return;const t=e0.min,n=e0.max,l=this.geometry.attributes.position,s=l.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,l.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZR extends Tl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ut;s.setIndex(new Ft(n,1)),s.setAttribute("position",new ke(l,3)),super(s,new li({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class vR extends Ps{constructor(e,t=1,n=16776960){const l=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new ut;o.setAttribute("position",new ke(s,3)),o.computeBoundingSphere(),super(o,new li({color:l,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const g=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],r=new ut;r.setAttribute("position",new ke(g,3)),r.computeBoundingSphere(),this.add(new Mn(r,new ki({color:l,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const O7=new K;let t0,$d;class xR extends yt{constructor(e=new K(0,0,1),t=new K(0,0,0),n=1,l=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",t0===void 0&&(t0=new ut,t0.setAttribute("position",new ke([0,0,0,0,1,0],3)),$d=new rr(0,.5,1,5,1),$d.translate(0,-.5,0)),this.position.copy(t),this.line=new Ps(t0,new li({color:l,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mn($d,new ki({color:l,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{O7.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(O7,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class qR extends Tl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],l=new ut;l.setAttribute("position",new ke(t,3)),l.setAttribute("color",new ke(n,3));const s=new li({vertexColors:!0,toneMapped:!1});super(l,s),this.type="AxesHelper"}setColors(e,t,n){const l=new Ve,s=this.geometry.attributes.color.array;return l.set(e),l.toArray(s,0),l.toArray(s,3),l.set(t),l.toArray(s,6),l.toArray(s,9),l.set(n),l.toArray(s,12),l.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Db{constructor(){this.type="ShapePath",this.color=new Ve,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new xI,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,l){return this.currentPath.quadraticCurveTo(e,t,n,l),this}bezierCurveTo(e,t,n,l,s,o){return this.currentPath.bezierCurveTo(e,t,n,l,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const B=[];for(let y=0,Z=b.length;y<Z;y++){const q=b[y],W=new Dg;W.curves=q.curves,B.push(W)}return B}function n(b,B){const y=B.length;let Z=!1;for(let q=y-1,W=0;W<y;q=W++){let S=B[q],x=B[W],V=x.x-S.x,X=x.y-S.y;if(Math.abs(X)>Number.EPSILON){if(X<0&&(S=B[W],V=-V,x=B[q],X=-X),b.y<S.y||b.y>x.y)continue;if(b.y===S.y){if(b.x===S.x)return!0}else{const k=X*(b.x-S.x)-V*(b.y-S.y);if(k===0)return!0;if(k<0)continue;Z=!Z}}else{if(b.y!==S.y)continue;if(x.x<=b.x&&b.x<=S.x||S.x<=b.x&&b.x<=x.x)return!0}}return Z}const l=ds.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,g,r;const I=[];if(s.length===1)return g=s[0],r=new Dg,r.curves=g.curves,I.push(r),I;let C=!l(s[0].getPoints());C=e?!C:C;const u=[],d=[];let A=[],m=0,f;d[m]=void 0,A[m]=[];for(let b=0,B=s.length;b<B;b++)g=s[b],f=g.getPoints(),o=l(f),o=e?!o:o,o?(!C&&d[m]&&m++,d[m]={s:new Dg,p:f},d[m].s.curves=g.curves,C&&m++,A[m]=[]):A[m].push({h:g,p:f[0]});if(!d[0])return t(s);if(d.length>1){let b=!1,B=0;for(let y=0,Z=d.length;y<Z;y++)u[y]=[];for(let y=0,Z=d.length;y<Z;y++){const q=A[y];for(let W=0;W<q.length;W++){const S=q[W];let x=!0;for(let V=0;V<d.length;V++)n(S.p,d[V].p)&&(y!==V&&B++,x?(x=!1,u[V].push(S)):b=!0);x&&u[y].push(S)}}B>0&&b===!1&&(A=u)}let p;for(let b=0,B=d.length;b<B;b++){r=d[b].s,I.push(r),p=A[b];for(let y=0,Z=p.length;y<Z;y++)r.holes.push(p[y].h)}return I}}const Ys=wR();function wR(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),l=new Uint32Array(512);for(let r=0;r<256;++r){const I=r-127;I<-27?(n[r]=0,n[r|256]=32768,l[r]=24,l[r|256]=24):I<-14?(n[r]=1024>>-I-14,n[r|256]=1024>>-I-14|32768,l[r]=-I-1,l[r|256]=-I-1):I<=15?(n[r]=I+15<<10,n[r|256]=I+15<<10|32768,l[r]=13,l[r|256]=13):I<128?(n[r]=31744,n[r|256]=64512,l[r]=24,l[r|256]=24):(n[r]=31744,n[r|256]=64512,l[r]=13,l[r|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),g=new Uint32Array(64);for(let r=1;r<1024;++r){let I=r<<13,C=0;for(;(I&8388608)===0;)I<<=1,C-=8388608;I&=-8388609,C+=947912704,s[r]=I|C}for(let r=1024;r<2048;++r)s[r]=939524096+(r-1024<<13);for(let r=1;r<31;++r)o[r]=r<<23;o[31]=1199570944,o[32]=2147483648;for(let r=33;r<63;++r)o[r]=2147483648+(r-32<<23);o[63]=3347054592;for(let r=1;r<64;++r)r!==32&&(g[r]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:l,mantissaTable:s,exponentTable:o,offsetTable:g}}function WR(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=fn(i,-65504,65504),Ys.floatView[0]=i;const e=Ys.uint32View[0],t=e>>23&511;return Ys.baseTable[t]+((e&8388607)>>Ys.shiftTable[t])}function SR(i){const e=i>>10;return Ys.uint32View[0]=Ys.mantissaTable[Ys.offsetTable[e]+(i&1023)]+Ys.exponentTable[e],Ys.floatView[0]}var VR=Object.freeze({__proto__:null,toHalfFloat:WR,fromHalfFloat:SR});function RR(){console.error("THREE.ImmediateRenderObject has been removed.")}class XR extends Di{constructor(e,t,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,n),this.samples=4}}class YR extends NI{constructor(e,t,n,l){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,n,l)}}class zR extends q2{constructor(e,t,n,l){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,n,l)}}class KR extends ng{constructor(e,t,n,l,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,l,s,o)}}class HR extends TI{constructor(e,t,n,l){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,l)}}class NR extends EI{constructor(e,t,n,l){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,l)}}class MR extends JI{constructor(e,t,n,l,s,o,g){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,l,s,o,g)}}class FR extends rr{constructor(e,t,n,l,s,o,g,r){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,l,s,o,g,r)}}class LR extends UI{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class _R extends Ma{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class kR extends DI{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class TR extends Na{constructor(e,t,n,l){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,l)}}class ER extends Fa{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class JR extends Ka{constructor(e,t,n,l){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,l)}}class UR extends eo{constructor(e,t,n,l){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,l)}}class DR extends QI{constructor(e,t,n,l,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,l,s,o)}}class QR extends PI{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class PR extends La{constructor(e,t,n,l,s,o,g){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,l,s,o,g)}}class OR extends OI{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class jR extends jI{constructor(e,t,n,l,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,l,s)}}class $R extends $I{constructor(e,t,n,l,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,l,s,o)}}class eX extends ec{constructor(e,t,n,l,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,l,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:B2}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=B2);const o2=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:jA,AddEquation:wg,AddOperation:Gf,AdditiveAnimationBlendMode:eh,AdditiveBlending:t2,AlphaFormat:Vf,AlwaysDepth:df,AlwaysStencilFunc:Df,AmbientLight:Nb,AmbientLightProbe:LV,AnimationClip:Sa,AnimationLoader:SV,AnimationMixer:oR,AnimationObjectGroup:iR,AnimationUtils:xV,ArcCurve:Ab,ArrayCamera:ab,ArrowHelper:xR,Audio:Tb,AudioAnalyser:UV,AudioContext:Vh,AudioListener:TV,AudioLoader:MV,AxesHelper:qR,BackSide:Ei,BasicDepthPacking:Ef,BasicShadowMap:nv,Bone:R2,BooleanKeyframeTrack:ar,Box2:CR,Box3:eg,Box3Helper:ZR,BoxBufferGeometry:KR,BoxGeometry:ng,BoxHelper:BR,BufferAttribute:Ft,BufferGeometry:ut,BufferGeometryLoader:_b,ByteType:xf,Cache:lr,Camera:FI,CameraHelper:yR,CanvasTexture:PS,CapsuleBufferGeometry:HR,CapsuleGeometry:TI,CatmullRomCurve3:hb,CineonToneMapping:Zf,CircleBufferGeometry:NR,CircleGeometry:EI,ClampToEdgeWrapping:Tn,Clock:Rh,Color:Ve,ColorKeyframeTrack:vh,ColorManagement:cl,CompressedArrayTexture:QS,CompressedTexture:Ah,CompressedTextureLoader:VV,ConeBufferGeometry:MR,ConeGeometry:JI,CubeCamera:tb,CubeReflectionMapping:Eo,CubeRefractionMapping:Jo,CubeTexture:LI,CubeTextureLoader:RV,CubeUVReflectionMapping:za,CubicBezierCurve:mh,CubicBezierCurve3:mb,CubicInterpolant:Yb,CullFaceBack:r3,CullFaceFront:$8,CullFaceFrontBack:tv,CullFaceNone:j8,Curve:El,CurvePath:fb,CustomBlending:ef,CustomToneMapping:vf,CylinderBufferGeometry:FR,CylinderGeometry:rr,Cylindrical:cR,Data3DTexture:q2,DataArrayTexture:NI,DataTexture:Aa,DataTexture2DArray:YR,DataTexture3D:zR,DataTextureLoader:XV,DataUtils:VR,DecrementStencilOp:Cv,DecrementWrapStencilOp:dv,DefaultLoadingManager:ra,DepthFormat:Lo,DepthStencilFormat:tr,DepthTexture:Ib,DirectionalLight:Sh,DirectionalLightHelper:GR,DiscreteInterpolant:zb,DodecahedronBufferGeometry:LR,DodecahedronGeometry:UI,DoubleSide:Hl,DstAlphaFactor:rf,DstColorFactor:If,DynamicCopyUsage:wv,DynamicDrawUsage:Qf,DynamicReadUsage:vv,EdgesGeometry:bb,EllipseCurve:Y2,EqualDepth:hf,EqualStencilFunc:pv,EquirectangularReflectionMapping:pI,EquirectangularRefractionMapping:fI,Euler:gr,EventDispatcher:hs,ExtrudeBufferGeometry:_R,ExtrudeGeometry:Ma,FileLoader:Gl,Float16BufferAttribute:rx,Float32BufferAttribute:ke,Float64BufferAttribute:ax,FloatType:Ns,Fog:V2,FogExp2:S2,FramebufferTexture:DS,FrontSide:To,Frustum:w2,GLBufferAttribute:IR,GLSL1:Sv,GLSL3:Y3,GreaterDepth:pf,GreaterEqualDepth:mf,GreaterEqualStencilFunc:yv,GreaterStencilFunc:bv,GridHelper:fR,Group:Fs,HalfFloatType:er,HemisphereLight:Hb,HemisphereLightHelper:pR,HemisphereLightProbe:FV,IcosahedronBufferGeometry:kR,IcosahedronGeometry:DI,ImageBitmapLoader:kb,ImageLoader:SI,ImageUtils:ih,ImmediateRenderObject:RR,IncrementStencilOp:cv,IncrementWrapStencilOp:uv,InstancedBufferAttribute:qa,InstancedBufferGeometry:Lb,InstancedInterleavedBuffer:aR,InstancedMesh:Ug,Int16BufferAttribute:ox,Int32BufferAttribute:gx,Int8BufferAttribute:ix,IntType:wf,InterleavedBuffer:_I,InterleavedBufferAttribute:Qo,Interpolant:ka,InterpolateDiscrete:va,InterpolateLinear:nr,InterpolateSmooth:x0,InvertStencilOp:Av,KeepStencilOp:q0,KeyframeTrack:Jl,LOD:db,LatheBufferGeometry:TR,LatheGeometry:Na,Layers:Jg,LessDepth:Af,LessEqualDepth:n2,LessEqualStencilFunc:fv,LessStencilFunc:mv,Light:ig,LightProbe:H2,Line:Ps,Line3:uR,LineBasicMaterial:li,LineCurve:z2,LineCurve3:pb,LineDashedMaterial:Rb,LineLoop:uh,LineSegments:Tl,LinearEncoding:Qs,LinearFilter:Pt,LinearInterpolant:Zh,LinearMipMapLinearFilter:ov,LinearMipMapNearestFilter:sv,LinearMipmapLinearFilter:js,LinearMipmapNearestFilter:v2,LinearSRGBColorSpace:Ro,LinearToneMapping:yf,Loader:Ai,LoaderUtils:As,LoadingManager:xh,LoopOnce:Lf,LoopPingPong:kf,LoopRepeat:_f,LuminanceAlphaFormat:Yf,LuminanceFormat:Xf,MOUSE:Zg,Material:vn,MaterialLoader:N2,MathUtils:Of,Matrix3:Wi,Matrix4:st,MaxEquation:C3,Mesh:Mn,MeshBasicMaterial:ki,MeshDepthMaterial:gh,MeshDistanceMaterial:rh,MeshLambertMaterial:Sb,MeshMatcapMaterial:Vb,MeshNormalMaterial:Wb,MeshPhongMaterial:qb,MeshPhysicalMaterial:to,MeshStandardMaterial:_a,MeshToonMaterial:wb,MinEquation:c3,MirroredRepeatWrapping:Za,MixOperation:bf,MultiplyBlending:I3,MultiplyOperation:HI,NearestFilter:pn,NearestMipMapLinearFilter:lv,NearestMipMapNearestFilter:iv,NearestMipmapLinearFilter:GI,NearestMipmapNearestFilter:bI,NeverDepth:uf,NeverStencilFunc:hv,NoBlending:Ts,NoColorSpace:rv,NoToneMapping:Fl,NormalAnimationBlendMode:x2,NormalBlending:_g,NotEqualDepth:ff,NotEqualStencilFunc:Gv,NumberKeyframeTrack:wa,Object3D:yt,ObjectLoader:HV,ObjectSpaceNormalMap:Uf,OctahedronBufferGeometry:ER,OctahedronGeometry:Fa,OneFactor:sf,OneMinusDstAlphaFactor:af,OneMinusDstColorFactor:cf,OneMinusSrcAlphaFactor:OA,OneMinusSrcColorFactor:gf,OrthographicCamera:Ll,PCFShadowMap:DA,PCFSoftShadowMap:QA,PMREMGenerator:K3,Path:xI,PerspectiveCamera:Et,Plane:xo,PlaneBufferGeometry:JR,PlaneGeometry:Ka,PlaneHelper:vR,PointLight:Wh,PointLightHelper:hR,Points:dh,PointsMaterial:X2,PolarGridHelper:bR,PolyhedronBufferGeometry:UR,PolyhedronGeometry:eo,PositionalAudio:JV,PropertyBinding:qt,PropertyMixer:Eb,QuadraticBezierCurve:ph,QuadraticBezierCurve3:fh,Quaternion:bn,QuaternionKeyframeTrack:Po,QuaternionLinearInterpolant:Kb,REVISION:B2,RGBADepthPacking:Jf,RGBAFormat:Li,RGBAIntegerFormat:Mf,RGBA_ASTC_10x10_Format:S3,RGBA_ASTC_10x5_Format:q3,RGBA_ASTC_10x6_Format:w3,RGBA_ASTC_10x8_Format:W3,RGBA_ASTC_12x10_Format:V3,RGBA_ASTC_12x12_Format:R3,RGBA_ASTC_4x4_Format:f3,RGBA_ASTC_5x4_Format:b3,RGBA_ASTC_5x5_Format:G3,RGBA_ASTC_6x5_Format:y3,RGBA_ASTC_6x6_Format:B3,RGBA_ASTC_8x5_Format:Z3,RGBA_ASTC_8x6_Format:v3,RGBA_ASTC_8x8_Format:x3,RGBA_BPTC_Format:X3,RGBA_ETC2_EAC_Format:p3,RGBA_PVRTC_2BPPV1_Format:h3,RGBA_PVRTC_4BPPV1_Format:A3,RGBA_S3TC_DXT1_Format:B0,RGBA_S3TC_DXT3_Format:Z0,RGBA_S3TC_DXT5_Format:v0,RGBFormat:Rf,RGB_ETC1_Format:Ff,RGB_ETC2_Format:m3,RGB_PVRTC_2BPPV1_Format:d3,RGB_PVRTC_4BPPV1_Format:u3,RGB_S3TC_DXT1_Format:y0,RGFormat:Hf,RGIntegerFormat:Nf,RawShaderMaterial:xb,Ray:MI,Raycaster:Jb,RectAreaLight:Mb,RedFormat:zf,RedIntegerFormat:Kf,ReinhardToneMapping:Bf,RepeatWrapping:Uo,ReplaceStencilOp:Iv,ReverseSubtractEquation:nf,RingBufferGeometry:DR,RingGeometry:QI,SRGBColorSpace:rs,Scene:Ih,ShaderChunk:ht,ShaderLib:Kl,ShaderMaterial:kl,ShadowMaterial:vb,Shape:Dg,ShapeBufferGeometry:QR,ShapeGeometry:PI,ShapePath:Db,ShapeUtils:ds,ShortType:qf,Skeleton:kI,SkeletonHelper:AR,SkinnedMesh:Ch,Source:Hg,Sphere:tg,SphereBufferGeometry:PR,SphereGeometry:La,Spherical:s2,SphericalHarmonics3:Fb,SplineCurve:bh,SpotLight:wh,SpotLightHelper:dR,Sprite:ub,SpriteMaterial:ch,SrcAlphaFactor:PA,SrcAlphaSaturateFactor:Cf,SrcColorFactor:of,StaticCopyUsage:qv,StaticDrawUsage:BI,StaticReadUsage:Zv,StereoCamera:_V,StreamCopyUsage:Wv,StreamDrawUsage:Bv,StreamReadUsage:xv,StringKeyframeTrack:Ir,SubtractEquation:tf,SubtractiveBlending:a3,TOUCH:vg,TangentSpaceNormalMap:$s,TetrahedronBufferGeometry:OR,TetrahedronGeometry:OI,Texture:un,TextureLoader:eI,TorusBufferGeometry:jR,TorusGeometry:jI,TorusKnotBufferGeometry:$R,TorusKnotGeometry:$I,Triangle:hl,TriangleFanDrawMode:th,TriangleStripDrawMode:Tf,TrianglesDrawMode:gv,TubeBufferGeometry:eX,TubeGeometry:ec,UVMapping:Z2,Uint16BufferAttribute:lh,Uint32BufferAttribute:sh,Uint8BufferAttribute:lx,Uint8ClampedBufferAttribute:sx,Uniform:zh,UniformsGroup:rR,UniformsLib:Re,UniformsUtils:eb,UnsignedByteType:Do,UnsignedInt248Type:kg,UnsignedIntType:Vo,UnsignedShort4444Type:Wf,UnsignedShort5551Type:Sf,UnsignedShortType:$A,VSMShadowMap:la,Vector2:me,Vector3:K,Vector4:Nt,VectorKeyframeTrack:Wa,VideoTexture:US,WebGL1Renderer:cb,WebGL3DRenderTarget:Uv,WebGLArrayRenderTarget:Jv,WebGLCubeRenderTarget:nb,WebGLMultipleRenderTargets:Dv,WebGLMultisampleRenderTarget:XR,WebGLRenderTarget:Di,WebGLRenderer:ah,WebGLUtils:rb,WireframeGeometry:Zb,WrapAroundEnding:yI,ZeroCurvatureEnding:zg,ZeroFactor:lf,ZeroSlopeEnding:Kg,ZeroStencilOp:av,_SRGBAFormat:i2,sRGBEncoding:Yt},Symbol.toStringTag,{value:"Module"}));var Mg={exports:{}},cr={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */cr.ConcurrentRoot=1;cr.ContinuousEventPriority=4;cr.DefaultEventPriority=16;cr.DiscreteEventPriority=1;cr.IdleEventPriority=536870912;cr.LegacyRoot=0;(function(i){i.exports=cr})(Mg);function tX(i){let e;const t=new Set,n=(I,C)=>{const u=typeof I=="function"?I(e):I;if(u!==e){const d=e;e=C?u:Object.assign({},e,u),t.forEach(A=>A(e,d))}},l=()=>e,s=(I,C=l,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=C(e);function A(){const m=C(e);if(!u(d,m)){const f=d;I(d=m,f)}}return t.add(A),()=>t.delete(A)},r={setState:n,getState:l,subscribe:(I,C,u)=>C||u?s(I,C,u):(t.add(I),()=>t.delete(I)),destroy:()=>t.clear()};return e=i(n,l,r),r}const nX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),j7=nX?Ce.exports.useEffect:Ce.exports.useLayoutEffect;function Qb(i){const e=typeof i=="function"?tX(i):i,t=(n=e.getState,l=Object.is)=>{const[,s]=Ce.exports.useReducer(p=>p+1,0),o=e.getState(),g=Ce.exports.useRef(o),r=Ce.exports.useRef(n),I=Ce.exports.useRef(l),C=Ce.exports.useRef(!1),u=Ce.exports.useRef();u.current===void 0&&(u.current=n(o));let d,A=!1;(g.current!==o||r.current!==n||I.current!==l||C.current)&&(d=n(o),A=!l(u.current,d)),j7(()=>{A&&(u.current=d),g.current=o,r.current=n,I.current=l,C.current=!1});const m=Ce.exports.useRef(o);j7(()=>{const p=()=>{try{const B=e.getState(),y=r.current(B);I.current(u.current,y)||(g.current=B,u.current=y,s())}catch{C.current=!0,s()}},b=e.subscribe(p);return e.getState()!==m.current&&p(),b},[]);const f=A?d:u.current;return Ce.exports.useDebugValue(f),f};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const l=n.length<=0;return{value:n.shift(),done:l}}}},t}var Pb={exports:{}},e5={exports:{}},t5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $7;function iX(){return $7||($7=1,function(i){function e(R,Y){var H=R.length;R.push(Y);e:for(;0<H;){var J=H-1>>>1,P=R[J];if(0<l(P,Y))R[J]=Y,R[H]=P,H=J;else break e}}function t(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var Y=R[0],H=R.pop();if(H!==Y){R[0]=H;e:for(var J=0,P=R.length,ne=P>>>1;J<ne;){var fe=2*(J+1)-1,We=R[fe],le=fe+1,_e=R[le];if(0>l(We,H))le<P&&0>l(_e,We)?(R[J]=_e,R[le]=H,J=le):(R[J]=We,R[fe]=H,J=fe);else if(le<P&&0>l(_e,H))R[J]=_e,R[le]=H,J=le;else break e}}return Y}function l(R,Y){var H=R.sortIndex-Y.sortIndex;return H!==0?H:R.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,g=o.now();i.unstable_now=function(){return o.now()-g}}var r=[],I=[],C=1,u=null,d=3,A=!1,m=!1,f=!1,p=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var Y=t(I);Y!==null;){if(Y.callback===null)n(I);else if(Y.startTime<=R)n(I),Y.sortIndex=Y.expirationTime,e(r,Y);else break;Y=t(I)}}function Z(R){if(f=!1,y(R),!m)if(t(r)!==null)m=!0,se(q);else{var Y=t(I);Y!==null&&oe(Z,Y.startTime-R)}}function q(R,Y){m=!1,f&&(f=!1,b(x),x=-1),A=!0;var H=d;try{for(y(Y),u=t(r);u!==null&&(!(u.expirationTime>Y)||R&&!k());){var J=u.callback;if(typeof J=="function"){u.callback=null,d=u.priorityLevel;var P=J(u.expirationTime<=Y);Y=i.unstable_now(),typeof P=="function"?u.callback=P:u===t(r)&&n(r),y(Y)}else n(r);u=t(r)}if(u!==null)var ne=!0;else{var fe=t(I);fe!==null&&oe(Z,fe.startTime-Y),ne=!1}return ne}finally{u=null,d=H,A=!1}}var W=!1,S=null,x=-1,V=5,X=-1;function k(){return!(i.unstable_now()-X<V)}function $(){if(S!==null){var R=i.unstable_now();X=R;var Y=!0;try{Y=S(!0,R)}finally{Y?Q():(W=!1,S=null)}}else W=!1}var Q;if(typeof B=="function")Q=function(){B($)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,te=E.port2;E.port1.onmessage=$,Q=function(){te.postMessage(null)}}else Q=function(){p($,0)};function se(R){S=R,W||(W=!0,Q())}function oe(R,Y){x=p(function(){R(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(R){R.callback=null},i.unstable_continueExecution=function(){m||A||(m=!0,se(q))},i.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<R?Math.floor(1e3/R):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(r)},i.unstable_next=function(R){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var H=d;d=Y;try{return R()}finally{d=H}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(R,Y){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=d;d=R;try{return Y()}finally{d=H}},i.unstable_scheduleCallback=function(R,Y,H){var J=i.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?J+H:J):H=J,R){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=H+P,R={id:C++,callback:Y,priorityLevel:R,startTime:H,expirationTime:P,sortIndex:-1},H>J?(R.sortIndex=H,e(I,R),t(r)===null&&R===t(I)&&(f?(b(x),x=-1):f=!0,oe(Z,H-J))):(R.sortIndex=P,e(r,R),m||A||(m=!0,se(q))),R},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(R){var Y=d;return function(){var H=d;d=Y;try{return R.apply(this,arguments)}finally{d=H}}}}(t5)),t5}var ep;function lX(){return ep||(ep=1,function(i){i.exports=iX()}(e5)),e5.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sX=function(e){var t={},n=Ce.exports,l=lX(),s=Object.assign;function o(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=Symbol.for("react.element"),I=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),q=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}function S(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case C:return"Fragment";case I:return"Portal";case d:return"Profiler";case u:return"StrictMode";case p:return"Suspense";case b:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case m:return(a.displayName||"Context")+".Consumer";case A:return(a._context.displayName||"Context")+".Provider";case f:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case B:return c=a.displayName||null,c!==null?c:S(a.type)||"Memo";case y:c=a._payload,a=a._init;try{return S(a(c))}catch{}}return null}function x(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(c);case 8:return c===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function V(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function X(a){if(V(a)!==a)throw Error(o(188))}function k(a){var c=a.alternate;if(!c){if(c=V(a),c===null)throw Error(o(188));return c!==a?null:a}for(var h=a,G=c;;){var v=h.return;if(v===null)break;var w=v.alternate;if(w===null){if(G=v.return,G!==null){h=G;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===h)return X(v),a;if(w===G)return X(v),c;w=w.sibling}throw Error(o(188))}if(h.return!==G.return)h=v,G=w;else{for(var L=!1,D=v.child;D;){if(D===h){L=!0,h=v,G=w;break}if(D===G){L=!0,G=v,h=w;break}D=D.sibling}if(!L){for(D=w.child;D;){if(D===h){L=!0,h=w,G=v;break}if(D===G){L=!0,G=w,h=v;break}D=D.sibling}if(!L)throw Error(o(189))}}if(h.alternate!==G)throw Error(o(190))}if(h.tag!==3)throw Error(o(188));return h.stateNode.current===h?a:c}function $(a){return a=k(a),a!==null?Q(a):null}function Q(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=Q(a);if(c!==null)return c;a=a.sibling}return null}function E(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var c=E(a);if(c!==null)return c}a=a.sibling}return null}var te=Array.isArray,se=e.getPublicInstance,oe=e.getRootHostContext,R=e.getChildHostContext,Y=e.prepareForCommit,H=e.resetAfterCommit,J=e.createInstance,P=e.appendInitialChild,ne=e.finalizeInitialChildren,fe=e.prepareUpdate,We=e.shouldSetTextContent,le=e.createTextInstance,_e=e.scheduleTimeout,Te=e.cancelTimeout,je=e.noTimeout,Se=e.isPrimaryRenderer,tt=e.supportsMutation,Ae=e.supportsPersistence,Ie=e.supportsHydration,ve=e.getInstanceFromNode,Ne=e.preparePortalMount,Xe=e.getCurrentEventPriority,ot=e.detachDeletedInstance,$e=e.supportsMicrotasks,Oe=e.scheduleMicrotask,vt=e.supportsTestSelectors,zt=e.findFiberRoot,_=e.getBoundingRect,z=e.getTextContent,ge=e.isHiddenSubtree,ye=e.matchAccessibilityRole,qe=e.setFocusIfFocusable,Ye=e.setupIntersectionObserver,lt=e.appendChild,ze=e.appendChildToContainer,he=e.commitTextUpdate,Ee=e.commitMount,T=e.commitUpdate,re=e.insertBefore,Ge=e.insertInContainerBefore,we=e.removeChild,nt=e.removeChildFromContainer,pt=e.resetTextContent,Ut=e.hideInstance,U=e.hideTextInstance,ce=e.unhideInstance,be=e.unhideTextInstance,Me=e.clearContainer,Qe=e.cloneInstance,wt=e.createContainerChildSet,dn=e.appendChildToContainerChildSet,Rn=e.finalizeContainerChildren,Ul=e.replaceContainerChildren,_t=e.cloneHiddenInstance,Oi=e.cloneHiddenTextInstance,hi=e.canHydrateInstance,ic=e.canHydrateTextInstance,_2=e.canHydrateSuspenseInstance,lc=e.isSuspenseInstancePending,Ta=e.isSuspenseInstanceFallback,N=e.registerSuspenseInstanceRetry,ee=e.getNextHydratableSibling,de=e.getFirstHydratableChild,j=e.getFirstHydratableChildWithinContainer,pe=e.getFirstHydratableChildWithinSuspenseInstance,et=e.hydrateInstance,rt=e.hydrateTextInstance,dt=e.hydrateSuspenseInstance,ct=e.getNextHydratableInstanceAfterSuspenseInstance,Wt=e.commitHydratedContainer,ft=e.commitHydratedSuspenseInstance,Zt=e.clearSuspenseBoundary,jt=e.clearSuspenseBoundaryFromContainer,ms=e.shouldDeleteUnhydratedTailInstances,io=e.didNotMatchHydratedContainerTextInstance,lo=e.didNotMatchHydratedTextInstance,mi;function Gt(a){if(mi===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);mi=c&&c[1]||""}return`
`+mi+a}var Dl=!1;function $t(a,c){if(!a||Dl)return"";Dl=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(xe){var G=xe}Reflect.construct(a,[],c)}else{try{c.call()}catch(xe){G=xe}a.call(c.prototype)}else{try{throw Error()}catch(xe){G=xe}a()}}catch(xe){if(xe&&G&&typeof xe.stack=="string"){for(var v=xe.stack.split(`
`),w=G.stack.split(`
`),L=v.length-1,D=w.length-1;1<=L&&0<=D&&v[L]!==w[D];)D--;for(;1<=L&&0<=D;L--,D--)if(v[L]!==w[D]){if(L!==1||D!==1)do if(L--,D--,0>D||v[L]!==w[D]){var ue=`
`+v[L].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=L&&0<=D);break}}}finally{Dl=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?Gt(a):""}var pi=Object.prototype.hasOwnProperty,ji=[],$i=-1;function el(a){return{current:a}}function Ct(a){0>$i||(a.current=ji[$i],ji[$i]=null,$i--)}function xt(a,c){$i++,ji[$i]=a.current,a.current=c}var tl={},Kt=el(tl),Xn=el(!1),ps=tl;function fs(a,c){var h=a.type.contextTypes;if(!h)return tl;var G=a.stateNode;if(G&&G.__reactInternalMemoizedUnmaskedChildContext===c)return G.__reactInternalMemoizedMaskedChildContext;var v={},w;for(w in h)v[w]=c[w];return G&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=v),v}function fi(a){return a=a.childContextTypes,a!=null}function sc(){Ct(Xn),Ct(Kt)}function kh(a,c,h){if(Kt.current!==tl)throw Error(o(168));xt(Kt,c),xt(Xn,h)}function Th(a,c,h){var G=a.stateNode;if(c=c.childContextTypes,typeof G.getChildContext!="function")return h;G=G.getChildContext();for(var v in G)if(!(v in c))throw Error(o(108,x(a)||"Unknown",v));return s({},h,G)}function oc(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||tl,ps=Kt.current,xt(Kt,a),xt(Xn,Xn.current),!0}function Eh(a,c,h){var G=a.stateNode;if(!G)throw Error(o(169));h?(a=Th(a,c,ps),G.__reactInternalMemoizedMergedChildContext=a,Ct(Xn),Ct(Kt),xt(Kt,a)):Ct(Xn),xt(Xn,h)}var Zl=Math.clz32?Math.clz32:DG,JG=Math.log,UG=Math.LN2;function DG(a){return a>>>=0,a===0?32:31-(JG(a)/UG|0)|0}var gc=64,rc=4194304;function Ea(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function ac(a,c){var h=a.pendingLanes;if(h===0)return 0;var G=0,v=a.suspendedLanes,w=a.pingedLanes,L=h&268435455;if(L!==0){var D=L&~v;D!==0?G=Ea(D):(w&=L,w!==0&&(G=Ea(w)))}else L=h&~v,L!==0?G=Ea(L):w!==0&&(G=Ea(w));if(G===0)return 0;if(c!==0&&c!==G&&(c&v)===0&&(v=G&-G,w=c&-c,v>=w||v===16&&(w&4194240)!==0))return c;if((G&4)!==0&&(G|=h&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=G;0<c;)h=31-Zl(c),v=1<<h,G|=a[h],c&=~v;return G}function QG(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PG(a,c){for(var h=a.suspendedLanes,G=a.pingedLanes,v=a.expirationTimes,w=a.pendingLanes;0<w;){var L=31-Zl(w),D=1<<L,ue=v[L];ue===-1?((D&h)===0||(D&G)!==0)&&(v[L]=QG(D,c)):ue<=c&&(a.expiredLanes|=D),w&=~D}}function k2(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function T2(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function Ja(a,c,h){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Zl(c),a[c]=h}function OG(a,c){var h=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var G=a.eventTimes;for(a=a.expirationTimes;0<h;){var v=31-Zl(h),w=1<<v;c[v]=0,G[v]=-1,a[v]=-1,h&=~w}}function E2(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var G=31-Zl(h),v=1<<G;v&c|a[G]&c&&(a[G]|=c),h&=~v}}var Vt=0;function Jh(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var J2=l.unstable_scheduleCallback,Uh=l.unstable_cancelCallback,jG=l.unstable_shouldYield,$G=l.unstable_requestPaint,Yn=l.unstable_now,U2=l.unstable_ImmediatePriority,ey=l.unstable_UserBlockingPriority,D2=l.unstable_NormalPriority,ty=l.unstable_IdlePriority,Ic=null,Ql=null;function ny(a){if(Ql&&typeof Ql.onCommitFiberRoot=="function")try{Ql.onCommitFiberRoot(Ic,a,void 0,(a.current.flags&128)===128)}catch{}}function iy(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Pl=typeof Object.is=="function"?Object.is:iy,bs=null,cc=!1,Q2=!1;function Dh(a){bs===null?bs=[a]:bs.push(a)}function ly(a){cc=!0,Dh(a)}function Ol(){if(!Q2&&bs!==null){Q2=!0;var a=0,c=Vt;try{var h=bs;for(Vt=1;a<h.length;a++){var G=h[a];do G=G(!0);while(G!==null)}bs=null,cc=!1}catch(v){throw bs!==null&&(bs=bs.slice(a+1)),J2(U2,Ol),v}finally{Vt=c,Q2=!1}}return null}var sy=g.ReactCurrentBatchConfig;function Cc(a,c){if(Pl(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),G=Object.keys(c);if(h.length!==G.length)return!1;for(G=0;G<h.length;G++){var v=h[G];if(!pi.call(c,v)||!Pl(a[v],c[v]))return!1}return!0}function oy(a){switch(a.tag){case 5:return Gt(a.type);case 16:return Gt("Lazy");case 13:return Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 2:case 15:return a=$t(a.type,!1),a;case 11:return a=$t(a.type.render,!1),a;case 1:return a=$t(a.type,!0),a;default:return""}}function vl(a,c){if(a&&a.defaultProps){c=s({},c),a=a.defaultProps;for(var h in a)c[h]===void 0&&(c[h]=a[h]);return c}return c}var uc=el(null),dc=null,Cr=null,P2=null;function O2(){P2=Cr=dc=null}function Qh(a,c,h){Se?(xt(uc,c._currentValue),c._currentValue=h):(xt(uc,c._currentValue2),c._currentValue2=h)}function j2(a){var c=uc.current;Ct(uc),Se?a._currentValue=c:a._currentValue2=c}function $2(a,c,h){for(;a!==null;){var G=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,G!==null&&(G.childLanes|=c)):G!==null&&(G.childLanes&c)!==c&&(G.childLanes|=c),a===h)break;a=a.return}}function ur(a,c){dc=a,P2=Cr=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(zi=!0),a.firstContext=null)}function nl(a){var c=Se?a._currentValue:a._currentValue2;if(P2!==a)if(a={context:a,memoizedValue:c,next:null},Cr===null){if(dc===null)throw Error(o(308));Cr=a,dc.dependencies={lanes:0,firstContext:a}}else Cr=Cr.next=a;return c}var jl=null,so=!1;function eu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ph(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Gs(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function oo(a,c){var h=a.updateQueue;h!==null&&(h=h.shared,Gn!==null&&(a.mode&1)!==0&&(mt&2)===0?(a=h.interleaved,a===null?(c.next=c,jl===null?jl=[h]:jl.push(h)):(c.next=a.next,a.next=c),h.interleaved=c):(a=h.pending,a===null?c.next=c:(c.next=a.next,a.next=c),h.pending=c))}function Ac(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var G=c.lanes;G&=a.pendingLanes,h|=G,c.lanes=h,E2(a,h)}}function Oh(a,c){var h=a.updateQueue,G=a.alternate;if(G!==null&&(G=G.updateQueue,h===G)){var v=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var L={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?v=w=L:w=w.next=L,h=h.next}while(h!==null);w===null?v=w=c:w=w.next=c}else v=w=c;h={baseState:G.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:G.shared,effects:G.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}function hc(a,c,h,G){var v=a.updateQueue;so=!1;var w=v.firstBaseUpdate,L=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var ue=D,xe=ue.next;ue.next=null,L===null?w=xe:L.next=xe,L=ue;var Le=a.alternate;Le!==null&&(Le=Le.updateQueue,D=Le.lastBaseUpdate,D!==L&&(D===null?Le.firstBaseUpdate=xe:D.next=xe,Le.lastBaseUpdate=ue))}if(w!==null){var at=v.baseState;L=0,Le=xe=ue=null,D=w;do{var it=D.lane,kt=D.eventTime;if((G&it)===it){Le!==null&&(Le=Le.next={eventTime:kt,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var Pe=a,Pn=D;switch(it=c,kt=h,Pn.tag){case 1:if(Pe=Pn.payload,typeof Pe=="function"){at=Pe.call(kt,at,it);break e}at=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Pn.payload,it=typeof Pe=="function"?Pe.call(kt,at,it):Pe,it==null)break e;at=s({},at,it);break e;case 2:so=!0}}D.callback!==null&&D.lane!==0&&(a.flags|=64,it=v.effects,it===null?v.effects=[D]:it.push(D))}else kt={eventTime:kt,lane:it,tag:D.tag,payload:D.payload,callback:D.callback,next:null},Le===null?(xe=Le=kt,ue=at):Le=Le.next=kt,L|=it;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;it=D,D=it.next,it.next=null,v.lastBaseUpdate=it,v.shared.pending=null}}while(1);if(Le===null&&(ue=at),v.baseState=ue,v.firstBaseUpdate=xe,v.lastBaseUpdate=Le,c=v.shared.interleaved,c!==null){v=c;do L|=v.lane,v=v.next;while(v!==c)}else w===null&&(v.shared.lanes=0);yr|=L,a.lanes=L,a.memoizedState=at}}function jh(a,c,h){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var G=a[c],v=G.callback;if(v!==null){if(G.callback=null,G=h,typeof v!="function")throw Error(o(191,v));v.call(G)}}}var $h=new n.Component().refs;function tu(a,c,h,G){c=a.memoizedState,h=h(G,c),h=h==null?c:s({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var mc={isMounted:function(a){return(a=a._reactInternals)?V(a)===a:!1},enqueueSetState:function(a,c,h){a=a._reactInternals;var G=oi(),v=ao(a),w=Gs(G,v);w.payload=c,h!=null&&(w.callback=h),oo(a,w),c=gl(a,v,G),c!==null&&Ac(c,a,v)},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var G=oi(),v=ao(a),w=Gs(G,v);w.tag=1,w.payload=c,h!=null&&(w.callback=h),oo(a,w),c=gl(a,v,G),c!==null&&Ac(c,a,v)},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=oi(),G=ao(a),v=Gs(h,G);v.tag=2,c!=null&&(v.callback=c),oo(a,v),c=gl(a,G,h),c!==null&&Ac(c,a,G)}};function em(a,c,h,G,v,w,L){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(G,w,L):c.prototype&&c.prototype.isPureReactComponent?!Cc(h,G)||!Cc(v,w):!0}function tm(a,c,h){var G=!1,v=tl,w=c.contextType;return typeof w=="object"&&w!==null?w=nl(w):(v=fi(c)?ps:Kt.current,G=c.contextTypes,w=(G=G!=null)?fs(a,v):tl),c=new c(h,w),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=mc,a.stateNode=c,c._reactInternals=a,G&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=w),c}function nm(a,c,h,G){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,G),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,G),c.state!==a&&mc.enqueueReplaceState(c,c.state,null)}function nu(a,c,h,G){var v=a.stateNode;v.props=h,v.state=a.memoizedState,v.refs=$h,eu(a);var w=c.contextType;typeof w=="object"&&w!==null?v.context=nl(w):(w=fi(c)?ps:Kt.current,v.context=fs(a,w)),v.state=a.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(tu(a,c,w,h),v.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(c=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),c!==v.state&&mc.enqueueReplaceState(v,v.state,null),hc(a,h,v,G),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}var dr=[],Ar=0,pc=null,fc=0,il=[],ll=0,sg=null,ys=1,Bs="";function og(a,c){dr[Ar++]=fc,dr[Ar++]=pc,pc=a,fc=c}function im(a,c,h){il[ll++]=ys,il[ll++]=Bs,il[ll++]=sg,sg=a;var G=ys;a=Bs;var v=32-Zl(G)-1;G&=~(1<<v),h+=1;var w=32-Zl(c)+v;if(30<w){var L=v-v%5;w=(G&(1<<L)-1).toString(32),G>>=L,v-=L,ys=1<<32-Zl(c)+v|h<<v|G,Bs=w+a}else ys=1<<w|h<<v|G,Bs=a}function iu(a){a.return!==null&&(og(a,1),im(a,1,0))}function lu(a){for(;a===pc;)pc=dr[--Ar],dr[Ar]=null,fc=dr[--Ar],dr[Ar]=null;for(;a===sg;)sg=il[--ll],il[ll]=null,Bs=il[--ll],il[ll]=null,ys=il[--ll],il[ll]=null}var Xi=null,Yi=null,en=!1,Ua=!1,xl=null;function lm(a,c){var h=rl(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=a,c=a.deletions,c===null?(a.deletions=[h],a.flags|=16):c.push(h)}function sm(a,c){switch(a.tag){case 5:return c=hi(c,a.type,a.pendingProps),c!==null?(a.stateNode=c,Xi=a,Yi=de(c),!0):!1;case 6:return c=ic(c,a.pendingProps),c!==null?(a.stateNode=c,Xi=a,Yi=null,!0):!1;case 13:if(c=_2(c),c!==null){var h=sg!==null?{id:ys,overflow:Bs}:null;return a.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=rl(18,null,null,0),h.stateNode=c,h.return=a,a.child=h,Xi=a,Yi=null,!0}return!1;default:return!1}}function su(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ou(a){if(en){var c=Yi;if(c){var h=c;if(!sm(a,c)){if(su(a))throw Error(o(418));c=ee(h);var G=Xi;c&&sm(a,c)?lm(G,h):(a.flags=a.flags&-4097|2,en=!1,Xi=a)}}else{if(su(a))throw Error(o(418));a.flags=a.flags&-4097|2,en=!1,Xi=a}}}function om(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Xi=a}function Da(a){if(!Ie||a!==Xi)return!1;if(!en)return om(a),en=!0,!1;if(a.tag!==3&&(a.tag!==5||ms(a.type)&&!We(a.type,a.memoizedProps))){var c=Yi;if(c){if(su(a)){for(a=Yi;a;)a=ee(a);throw Error(o(418))}for(;c;)lm(a,c),c=ee(c)}}if(om(a),a.tag===13){if(!Ie)throw Error(o(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));Yi=ct(a)}else Yi=Xi?ee(a.stateNode):null;return!0}function hr(){Ie&&(Yi=Xi=null,Ua=en=!1)}function gu(a){xl===null?xl=[a]:xl.push(a)}function Qa(a,c,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(o(309));var G=h.stateNode}if(!G)throw Error(o(147,a));var v=G,w=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===w?c.ref:(c=function(L){var D=v.refs;D===$h&&(D=v.refs={}),L===null?delete D[w]:D[w]=L},c._stringRef=w,c)}if(typeof a!="string")throw Error(o(284));if(!h._owner)throw Error(o(290,a))}return a}function bc(a,c){throw a=Object.prototype.toString.call(c),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function gm(a){var c=a._init;return c(a._payload)}function rm(a){function c(ie,O){if(a){var ae=ie.deletions;ae===null?(ie.deletions=[O],ie.flags|=16):ae.push(O)}}function h(ie,O){if(!a)return null;for(;O!==null;)c(ie,O),O=O.sibling;return null}function G(ie,O){for(ie=new Map;O!==null;)O.key!==null?ie.set(O.key,O):ie.set(O.index,O),O=O.sibling;return ie}function v(ie,O){return ie=co(ie,O),ie.index=0,ie.sibling=null,ie}function w(ie,O,ae){return ie.index=ae,a?(ae=ie.alternate,ae!==null?(ae=ae.index,ae<O?(ie.flags|=2,O):ae):(ie.flags|=2,O)):(ie.flags|=1048576,O)}function L(ie){return a&&ie.alternate===null&&(ie.flags|=2),ie}function D(ie,O,ae,He){return O===null||O.tag!==6?(O=Tu(ae,ie.mode,He),O.return=ie,O):(O=v(O,ae),O.return=ie,O)}function ue(ie,O,ae,He){var Je=ae.type;return Je===C?Le(ie,O,ae.props.children,He,ae.key):O!==null&&(O.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===y&&gm(Je)===O.type)?(He=v(O,ae.props),He.ref=Qa(ie,O,ae),He.return=ie,He):(He=Oc(ae.type,ae.key,ae.props,null,ie.mode,He),He.ref=Qa(ie,O,ae),He.return=ie,He)}function xe(ie,O,ae,He){return O===null||O.tag!==4||O.stateNode.containerInfo!==ae.containerInfo||O.stateNode.implementation!==ae.implementation?(O=Eu(ae,ie.mode,He),O.return=ie,O):(O=v(O,ae.children||[]),O.return=ie,O)}function Le(ie,O,ae,He,Je){return O===null||O.tag!==7?(O=ug(ae,ie.mode,He,Je),O.return=ie,O):(O=v(O,ae),O.return=ie,O)}function at(ie,O,ae){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Tu(""+O,ie.mode,ae),O.return=ie,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case r:return ae=Oc(O.type,O.key,O.props,null,ie.mode,ae),ae.ref=Qa(ie,null,O),ae.return=ie,ae;case I:return O=Eu(O,ie.mode,ae),O.return=ie,O;case y:var He=O._init;return at(ie,He(O._payload),ae)}if(te(O)||W(O))return O=ug(O,ie.mode,ae,null),O.return=ie,O;bc(ie,O)}return null}function it(ie,O,ae,He){var Je=O!==null?O.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Je!==null?null:D(ie,O,""+ae,He);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case r:return ae.key===Je?ue(ie,O,ae,He):null;case I:return ae.key===Je?xe(ie,O,ae,He):null;case y:return Je=ae._init,it(ie,O,Je(ae._payload),He)}if(te(ae)||W(ae))return Je!==null?null:Le(ie,O,ae,He,null);bc(ie,ae)}return null}function kt(ie,O,ae,He,Je){if(typeof He=="string"&&He!==""||typeof He=="number")return ie=ie.get(ae)||null,D(O,ie,""+He,Je);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case r:return ie=ie.get(He.key===null?ae:He.key)||null,ue(O,ie,He,Je);case I:return ie=ie.get(He.key===null?ae:He.key)||null,xe(O,ie,He,Je);case y:var At=He._init;return kt(ie,O,ae,At(He._payload),Je)}if(te(He)||W(He))return ie=ie.get(ae)||null,Le(O,ie,He,Je,null);bc(O,He)}return null}function Pe(ie,O,ae,He){for(var Je=null,At=null,It=O,Rt=O=0,Kn=null;It!==null&&Rt<ae.length;Rt++){It.index>Rt?(Kn=It,It=null):Kn=It.sibling;var Xt=it(ie,It,ae[Rt],He);if(Xt===null){It===null&&(It=Kn);break}a&&It&&Xt.alternate===null&&c(ie,It),O=w(Xt,O,Rt),At===null?Je=Xt:At.sibling=Xt,At=Xt,It=Kn}if(Rt===ae.length)return h(ie,It),en&&og(ie,Rt),Je;if(It===null){for(;Rt<ae.length;Rt++)It=at(ie,ae[Rt],He),It!==null&&(O=w(It,O,Rt),At===null?Je=It:At.sibling=It,At=It);return en&&og(ie,Rt),Je}for(It=G(ie,It);Rt<ae.length;Rt++)Kn=kt(It,ie,Rt,ae[Rt],He),Kn!==null&&(a&&Kn.alternate!==null&&It.delete(Kn.key===null?Rt:Kn.key),O=w(Kn,O,Rt),At===null?Je=Kn:At.sibling=Kn,At=Kn);return a&&It.forEach(function(Co){return c(ie,Co)}),en&&og(ie,Rt),Je}function Pn(ie,O,ae,He){var Je=W(ae);if(typeof Je!="function")throw Error(o(150));if(ae=Je.call(ae),ae==null)throw Error(o(151));for(var At=Je=null,It=O,Rt=O=0,Kn=null,Xt=ae.next();It!==null&&!Xt.done;Rt++,Xt=ae.next()){It.index>Rt?(Kn=It,It=null):Kn=It.sibling;var Co=it(ie,It,Xt.value,He);if(Co===null){It===null&&(It=Kn);break}a&&It&&Co.alternate===null&&c(ie,It),O=w(Co,O,Rt),At===null?Je=Co:At.sibling=Co,At=Co,It=Kn}if(Xt.done)return h(ie,It),en&&og(ie,Rt),Je;if(It===null){for(;!Xt.done;Rt++,Xt=ae.next())Xt=at(ie,Xt.value,He),Xt!==null&&(O=w(Xt,O,Rt),At===null?Je=Xt:At.sibling=Xt,At=Xt);return en&&og(ie,Rt),Je}for(It=G(ie,It);!Xt.done;Rt++,Xt=ae.next())Xt=kt(It,ie,Rt,Xt.value,He),Xt!==null&&(a&&Xt.alternate!==null&&It.delete(Xt.key===null?Rt:Xt.key),O=w(Xt,O,Rt),At===null?Je=Xt:At.sibling=Xt,At=Xt);return a&&It.forEach(function(Ky){return c(ie,Ky)}),en&&og(ie,Rt),Je}function al(ie,O,ae,He){if(typeof ae=="object"&&ae!==null&&ae.type===C&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case r:e:{for(var Je=ae.key,At=O;At!==null;){if(At.key===Je){if(Je=ae.type,Je===C){if(At.tag===7){h(ie,At.sibling),O=v(At,ae.props.children),O.return=ie,ie=O;break e}}else if(At.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===y&&gm(Je)===At.type){h(ie,At.sibling),O=v(At,ae.props),O.ref=Qa(ie,At,ae),O.return=ie,ie=O;break e}h(ie,At);break}else c(ie,At);At=At.sibling}ae.type===C?(O=ug(ae.props.children,ie.mode,He,ae.key),O.return=ie,ie=O):(He=Oc(ae.type,ae.key,ae.props,null,ie.mode,He),He.ref=Qa(ie,O,ae),He.return=ie,ie=He)}return L(ie);case I:e:{for(At=ae.key;O!==null;){if(O.key===At)if(O.tag===4&&O.stateNode.containerInfo===ae.containerInfo&&O.stateNode.implementation===ae.implementation){h(ie,O.sibling),O=v(O,ae.children||[]),O.return=ie,ie=O;break e}else{h(ie,O);break}else c(ie,O);O=O.sibling}O=Eu(ae,ie.mode,He),O.return=ie,ie=O}return L(ie);case y:return At=ae._init,al(ie,O,At(ae._payload),He)}if(te(ae))return Pe(ie,O,ae,He);if(W(ae))return Pn(ie,O,ae,He);bc(ie,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,O!==null&&O.tag===6?(h(ie,O.sibling),O=v(O,ae),O.return=ie,ie=O):(h(ie,O),O=Tu(ae,ie.mode,He),O.return=ie,ie=O),L(ie)):h(ie,O)}return al}var mr=rm(!0),am=rm(!1),Pa={},sl=el(Pa),Oa=el(Pa),pr=el(Pa);function $l(a){if(a===Pa)throw Error(o(174));return a}function ru(a,c){xt(pr,c),xt(Oa,a),xt(sl,Pa),a=oe(c),Ct(sl),xt(sl,a)}function fr(){Ct(sl),Ct(Oa),Ct(pr)}function Im(a){var c=$l(pr.current),h=$l(sl.current);c=R(h,a.type,c),h!==c&&(xt(Oa,a),xt(sl,c))}function au(a){Oa.current===a&&(Ct(sl),Ct(Oa))}var nn=el(0);function Gc(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||lc(h)||Ta(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Iu=[];function cu(){for(var a=0;a<Iu.length;a++){var c=Iu[a];Se?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Iu.length=0}var yc=g.ReactCurrentDispatcher,ol=g.ReactCurrentBatchConfig,br=0,an=null,Un=null,zn=null,Bc=!1,ja=!1,$a=0,gy=0;function Dn(){throw Error(o(321))}function Cu(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!Pl(a[h],c[h]))return!1;return!0}function uu(a,c,h,G,v,w){if(br=w,an=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,yc.current=a===null||a.memoizedState===null?cy:Cy,a=h(G,v),ja){w=0;do{if(ja=!1,$a=0,25<=w)throw Error(o(301));w+=1,zn=Un=null,c.updateQueue=null,yc.current=uy,a=h(G,v)}while(ja)}if(yc.current=wc,c=Un!==null&&Un.next!==null,br=0,zn=Un=an=null,Bc=!1,c)throw Error(o(300));return a}function du(){var a=$a!==0;return $a=0,a}function Zs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?an.memoizedState=zn=a:zn=zn.next=a,zn}function es(){if(Un===null){var a=an.alternate;a=a!==null?a.memoizedState:null}else a=Un.next;var c=zn===null?an.memoizedState:zn.next;if(c!==null)zn=c,Un=a;else{if(a===null)throw Error(o(310));Un=a,a={memoizedState:Un.memoizedState,baseState:Un.baseState,baseQueue:Un.baseQueue,queue:Un.queue,next:null},zn===null?an.memoizedState=zn=a:zn=zn.next=a}return zn}function gg(a,c){return typeof c=="function"?c(a):c}function Zc(a){var c=es(),h=c.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=a;var G=Un,v=G.baseQueue,w=h.pending;if(w!==null){if(v!==null){var L=v.next;v.next=w.next,w.next=L}G.baseQueue=v=w,h.pending=null}if(v!==null){w=v.next,G=G.baseState;var D=L=null,ue=null,xe=w;do{var Le=xe.lane;if((br&Le)===Le)ue!==null&&(ue=ue.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),G=xe.hasEagerState?xe.eagerState:a(G,xe.action);else{var at={lane:Le,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};ue===null?(D=ue=at,L=G):ue=ue.next=at,an.lanes|=Le,yr|=Le}xe=xe.next}while(xe!==null&&xe!==w);ue===null?L=G:ue.next=D,Pl(G,c.memoizedState)||(zi=!0),c.memoizedState=G,c.baseState=L,c.baseQueue=ue,h.lastRenderedState=G}if(a=h.interleaved,a!==null){v=a;do w=v.lane,an.lanes|=w,yr|=w,v=v.next;while(v!==a)}else v===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function vc(a){var c=es(),h=c.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=a;var G=h.dispatch,v=h.pending,w=c.memoizedState;if(v!==null){h.pending=null;var L=v=v.next;do w=a(w,L.action),L=L.next;while(L!==v);Pl(w,c.memoizedState)||(zi=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),h.lastRenderedState=w}return[w,G]}function cm(){}function Cm(a,c){var h=an,G=es(),v=c(),w=!Pl(G.memoizedState,v);if(w&&(G.memoizedState=v,zi=!0),G=G.queue,t1(Am.bind(null,h,G,a),[a]),G.getSnapshot!==c||w||zn!==null&&zn.memoizedState.tag&1){if(h.flags|=2048,e1(9,dm.bind(null,h,G,v,c),void 0,null),Gn===null)throw Error(o(349));(br&30)!==0||um(h,c,v)}return v}function um(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=an.updateQueue,c===null?(c={lastEffect:null,stores:null},an.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function dm(a,c,h,G){c.value=h,c.getSnapshot=G,hm(c)&&gl(a,1,-1)}function Am(a,c,h){return h(function(){hm(c)&&gl(a,1,-1)})}function hm(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!Pl(a,h)}catch{return!0}}function Au(a){var c=Zs();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gg,lastRenderedState:a},c.queue=a,a=a.dispatch=Iy.bind(null,an,a),[c.memoizedState,a]}function e1(a,c,h,G){return a={tag:a,create:c,destroy:h,deps:G,next:null},c=an.updateQueue,c===null?(c={lastEffect:null,stores:null},an.updateQueue=c,c.lastEffect=a.next=a):(h=c.lastEffect,h===null?c.lastEffect=a.next=a:(G=h.next,h.next=a,a.next=G,c.lastEffect=a)),a}function mm(){return es().memoizedState}function xc(a,c,h,G){var v=Zs();an.flags|=a,v.memoizedState=e1(1|c,h,void 0,G===void 0?null:G)}function qc(a,c,h,G){var v=es();G=G===void 0?null:G;var w=void 0;if(Un!==null){var L=Un.memoizedState;if(w=L.destroy,G!==null&&Cu(G,L.deps)){v.memoizedState=e1(c,h,w,G);return}}an.flags|=a,v.memoizedState=e1(1|c,h,w,G)}function hu(a,c){return xc(8390656,8,a,c)}function t1(a,c){return qc(2048,8,a,c)}function pm(a,c){return qc(4,2,a,c)}function fm(a,c){return qc(4,4,a,c)}function bm(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Gm(a,c,h){return h=h!=null?h.concat([a]):null,qc(4,4,bm.bind(null,c,a),h)}function mu(){}function ym(a,c){var h=es();c=c===void 0?null:c;var G=h.memoizedState;return G!==null&&c!==null&&Cu(c,G[1])?G[0]:(h.memoizedState=[a,c],a)}function Bm(a,c){var h=es();c=c===void 0?null:c;var G=h.memoizedState;return G!==null&&c!==null&&Cu(c,G[1])?G[0]:(a=a(),h.memoizedState=[a,c],a)}function ry(a,c){var h=Vt;Vt=h!==0&&4>h?h:4,a(!0);var G=ol.transition;ol.transition={};try{a(!1),c()}finally{Vt=h,ol.transition=G}}function Zm(){return es().memoizedState}function ay(a,c,h){var G=ao(a);h={lane:G,action:h,hasEagerState:!1,eagerState:null,next:null},vm(a)?xm(c,h):(qm(a,c,h),h=oi(),a=gl(a,G,h),a!==null&&wm(a,c,G))}function Iy(a,c,h){var G=ao(a),v={lane:G,action:h,hasEagerState:!1,eagerState:null,next:null};if(vm(a))xm(c,v);else{qm(a,c,v);var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var L=c.lastRenderedState,D=w(L,h);if(v.hasEagerState=!0,v.eagerState=D,Pl(D,L))return}catch{}finally{}h=oi(),a=gl(a,G,h),a!==null&&wm(a,c,G)}}function vm(a){var c=a.alternate;return a===an||c!==null&&c===an}function xm(a,c){ja=Bc=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function qm(a,c,h){Gn!==null&&(a.mode&1)!==0&&(mt&2)===0?(a=c.interleaved,a===null?(h.next=h,jl===null?jl=[c]:jl.push(c)):(h.next=a.next,a.next=h),c.interleaved=h):(a=c.pending,a===null?h.next=h:(h.next=a.next,a.next=h),c.pending=h)}function wm(a,c,h){if((h&4194240)!==0){var G=c.lanes;G&=a.pendingLanes,h|=G,c.lanes=h,E2(a,h)}}var wc={readContext:nl,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},cy={readContext:nl,useCallback:function(a,c){return Zs().memoizedState=[a,c===void 0?null:c],a},useContext:nl,useEffect:hu,useImperativeHandle:function(a,c,h){return h=h!=null?h.concat([a]):null,xc(4194308,4,bm.bind(null,c,a),h)},useLayoutEffect:function(a,c){return xc(4194308,4,a,c)},useInsertionEffect:function(a,c){return xc(4,2,a,c)},useMemo:function(a,c){var h=Zs();return c=c===void 0?null:c,a=a(),h.memoizedState=[a,c],a},useReducer:function(a,c,h){var G=Zs();return c=h!==void 0?h(c):c,G.memoizedState=G.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},G.queue=a,a=a.dispatch=ay.bind(null,an,a),[G.memoizedState,a]},useRef:function(a){var c=Zs();return a={current:a},c.memoizedState=a},useState:Au,useDebugValue:mu,useDeferredValue:function(a){var c=Au(a),h=c[0],G=c[1];return hu(function(){var v=ol.transition;ol.transition={};try{G(a)}finally{ol.transition=v}},[a]),h},useTransition:function(){var a=Au(!1),c=a[0];return a=ry.bind(null,a[1]),Zs().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,h){var G=an,v=Zs();if(en){if(h===void 0)throw Error(o(407));h=h()}else{if(h=c(),Gn===null)throw Error(o(349));(br&30)!==0||um(G,c,h)}v.memoizedState=h;var w={value:h,getSnapshot:c};return v.queue=w,hu(Am.bind(null,G,w,a),[a]),G.flags|=2048,e1(9,dm.bind(null,G,w,h,c),void 0,null),h},useId:function(){var a=Zs(),c=Gn.identifierPrefix;if(en){var h=Bs,G=ys;h=(G&~(1<<32-Zl(G)-1)).toString(32)+h,c=":"+c+"R"+h,h=$a++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=gy++,c=":"+c+"r"+h.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},Cy={readContext:nl,useCallback:ym,useContext:nl,useEffect:t1,useImperativeHandle:Gm,useInsertionEffect:pm,useLayoutEffect:fm,useMemo:Bm,useReducer:Zc,useRef:mm,useState:function(){return Zc(gg)},useDebugValue:mu,useDeferredValue:function(a){var c=Zc(gg),h=c[0],G=c[1];return t1(function(){var v=ol.transition;ol.transition={};try{G(a)}finally{ol.transition=v}},[a]),h},useTransition:function(){var a=Zc(gg)[0],c=es().memoizedState;return[a,c]},useMutableSource:cm,useSyncExternalStore:Cm,useId:Zm,unstable_isNewReconciler:!1},uy={readContext:nl,useCallback:ym,useContext:nl,useEffect:t1,useImperativeHandle:Gm,useInsertionEffect:pm,useLayoutEffect:fm,useMemo:Bm,useReducer:vc,useRef:mm,useState:function(){return vc(gg)},useDebugValue:mu,useDeferredValue:function(a){var c=vc(gg),h=c[0],G=c[1];return t1(function(){var v=ol.transition;ol.transition={};try{G(a)}finally{ol.transition=v}},[a]),h},useTransition:function(){var a=vc(gg)[0],c=es().memoizedState;return[a,c]},useMutableSource:cm,useSyncExternalStore:Cm,useId:Zm,unstable_isNewReconciler:!1};function pu(a,c){try{var h="",G=c;do h+=oy(G),G=G.return;while(G);var v=h}catch(w){v=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:c,stack:v}}function fu(a,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var dy=typeof WeakMap=="function"?WeakMap:Map;function Wm(a,c,h){h=Gs(-1,h),h.tag=3,h.payload={element:null};var G=c.value;return h.callback=function(){Tc||(Tc=!0,Hu=G),fu(a,c)},h}function Sm(a,c,h){h=Gs(-1,h),h.tag=3;var G=a.type.getDerivedStateFromError;if(typeof G=="function"){var v=c.value;h.payload=function(){return G(v)},h.callback=function(){fu(a,c)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){fu(a,c),typeof G!="function"&&(go===null?go=new Set([this]):go.add(this));var L=c.stack;this.componentDidCatch(c.value,{componentStack:L!==null?L:""})}),h}function Vm(a,c,h){var G=a.pingCache;if(G===null){G=a.pingCache=new dy;var v=new Set;G.set(c,v)}else v=G.get(c),v===void 0&&(v=new Set,G.set(c,v));v.has(h)||(v.add(h),a=wy.bind(null,a,c,h),c.then(a,a))}function Rm(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Xm(a,c,h,G,v){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Gs(-1,1),c.tag=2,oo(h,c))),h.lanes|=1),a):(a.flags|=65536,a.lanes=v,a)}function ts(a){a.flags|=4}function Ym(a,c){if(a!==null&&a.child===c.child)return!0;if((c.flags&16)!==0)return!1;for(a=c.child;a!==null;){if((a.flags&12854)!==0||(a.subtreeFlags&12854)!==0)return!1;a=a.sibling}return!0}var n1,i1,Wc,Sc;if(tt)n1=function(a,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)P(a,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},i1=function(){},Wc=function(a,c,h,G,v){if(a=a.memoizedProps,a!==G){var w=c.stateNode,L=$l(sl.current);h=fe(w,h,a,G,v,L),(c.updateQueue=h)&&ts(c)}},Sc=function(a,c,h,G){h!==G&&ts(c)};else if(Ae){n1=function(a,c,h,G){for(var v=c.child;v!==null;){if(v.tag===5){var w=v.stateNode;h&&G&&(w=_t(w,v.type,v.memoizedProps,v)),P(a,w)}else if(v.tag===6)w=v.stateNode,h&&G&&(w=Oi(w,v.memoizedProps,v)),P(a,w);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)w=v.child,w!==null&&(w.return=v),n1(a,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}};var zm=function(a,c,h,G){for(var v=c.child;v!==null;){if(v.tag===5){var w=v.stateNode;h&&G&&(w=_t(w,v.type,v.memoizedProps,v)),dn(a,w)}else if(v.tag===6)w=v.stateNode,h&&G&&(w=Oi(w,v.memoizedProps,v)),dn(a,w);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)w=v.child,w!==null&&(w.return=v),zm(a,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}};i1=function(a,c){var h=c.stateNode;if(!Ym(a,c)){a=h.containerInfo;var G=wt(a);zm(G,c,!1,!1),h.pendingChildren=G,ts(c),Rn(a,G)}},Wc=function(a,c,h,G,v){var w=a.stateNode,L=a.memoizedProps;if((a=Ym(a,c))&&L===G)c.stateNode=w;else{var D=c.stateNode,ue=$l(sl.current),xe=null;L!==G&&(xe=fe(D,h,L,G,v,ue)),a&&xe===null?c.stateNode=w:(w=Qe(w,xe,h,L,G,c,a,D),ne(w,h,G,v,ue)&&ts(c),c.stateNode=w,a?ts(c):n1(w,c,!1,!1))}},Sc=function(a,c,h,G){h!==G?(a=$l(pr.current),h=$l(sl.current),c.stateNode=le(G,a,h,c),ts(c)):c.stateNode=a.stateNode}}else i1=function(){},Wc=function(){},Sc=function(){};function l1(a,c){if(!en)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var G=null;h!==null;)h.alternate!==null&&(G=h),h=h.sibling;G===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:G.sibling=null}}function Qn(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,G=0;if(c)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,G|=v.subtreeFlags&14680064,G|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,G|=v.subtreeFlags,G|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=G,a.childLanes=h,c}function Ay(a,c,h){var G=c.pendingProps;switch(lu(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(c),null;case 1:return fi(c.type)&&sc(),Qn(c),null;case 3:return G=c.stateNode,fr(),Ct(Xn),Ct(Kt),cu(),G.pendingContext&&(G.context=G.pendingContext,G.pendingContext=null),(a===null||a.child===null)&&(Da(c)?ts(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,xl!==null&&(Fu(xl),xl=null))),i1(a,c),Qn(c),null;case 5:au(c),h=$l(pr.current);var v=c.type;if(a!==null&&c.stateNode!=null)Wc(a,c,v,G,h),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!G){if(c.stateNode===null)throw Error(o(166));return Qn(c),null}if(a=$l(sl.current),Da(c)){if(!Ie)throw Error(o(175));a=et(c.stateNode,c.type,c.memoizedProps,h,a,c,!Ua),c.updateQueue=a,a!==null&&ts(c)}else{var w=J(v,G,h,a,c);n1(w,c,!1,!1),c.stateNode=w,ne(w,v,G,h,a)&&ts(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Qn(c),null;case 6:if(a&&c.stateNode!=null)Sc(a,c,a.memoizedProps,G);else{if(typeof G!="string"&&c.stateNode===null)throw Error(o(166));if(a=$l(pr.current),h=$l(sl.current),Da(c)){if(!Ie)throw Error(o(176));if(a=c.stateNode,G=c.memoizedProps,(h=rt(a,G,c,!Ua))&&(v=Xi,v!==null))switch(w=(v.mode&1)!==0,v.tag){case 3:io(v.stateNode.containerInfo,a,G,w);break;case 5:lo(v.type,v.memoizedProps,v.stateNode,a,G,w)}h&&ts(c)}else c.stateNode=le(G,a,h,c)}return Qn(c),null;case 13:if(Ct(nn),G=c.memoizedState,en&&Yi!==null&&(c.mode&1)!==0&&(c.flags&128)===0){for(a=Yi;a;)a=ee(a);return hr(),c.flags|=98560,c}if(G!==null&&G.dehydrated!==null){if(G=Da(c),a===null){if(!G)throw Error(o(318));if(!Ie)throw Error(o(344));if(a=c.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));dt(a,c)}else hr(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;return Qn(c),null}return xl!==null&&(Fu(xl),xl=null),(c.flags&128)!==0?(c.lanes=h,c):(G=G!==null,h=!1,a===null?Da(c):h=a.memoizedState!==null,G&&!h&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(nn.current&1)!==0?xn===0&&(xn=3):_u())),c.updateQueue!==null&&(c.flags|=4),Qn(c),null);case 4:return fr(),i1(a,c),a===null&&Ne(c.stateNode.containerInfo),Qn(c),null;case 10:return j2(c.type._context),Qn(c),null;case 17:return fi(c.type)&&sc(),Qn(c),null;case 19:if(Ct(nn),v=c.memoizedState,v===null)return Qn(c),null;if(G=(c.flags&128)!==0,w=v.rendering,w===null)if(G)l1(v,!1);else{if(xn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(w=Gc(a),w!==null){for(c.flags|=128,l1(v,!1),a=w.updateQueue,a!==null&&(c.updateQueue=a,c.flags|=4),c.subtreeFlags=0,a=h,G=c.child;G!==null;)h=G,v=a,h.flags&=14680066,w=h.alternate,w===null?(h.childLanes=0,h.lanes=v,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=w.childLanes,h.lanes=w.lanes,h.child=w.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=w.memoizedProps,h.memoizedState=w.memoizedState,h.updateQueue=w.updateQueue,h.type=w.type,v=w.dependencies,h.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),G=G.sibling;return xt(nn,nn.current&1|2),c.child}a=a.sibling}v.tail!==null&&Yn()>Ku&&(c.flags|=128,G=!0,l1(v,!1),c.lanes=4194304)}else{if(!G)if(a=Gc(w),a!==null){if(c.flags|=128,G=!0,a=a.updateQueue,a!==null&&(c.updateQueue=a,c.flags|=4),l1(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!en)return Qn(c),null}else 2*Yn()-v.renderingStartTime>Ku&&h!==1073741824&&(c.flags|=128,G=!0,l1(v,!1),c.lanes=4194304);v.isBackwards?(w.sibling=c.child,c.child=w):(a=v.last,a!==null?a.sibling=w:c.child=w,v.last=w)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=Yn(),c.sibling=null,a=nn.current,xt(nn,G?a&1|2:a&1),c):(Qn(c),null);case 22:case 23:return Lu(),G=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==G&&(c.flags|=8192),G&&(c.mode&1)!==0?(Ki&1073741824)!==0&&(Qn(c),tt&&c.subtreeFlags&6&&(c.flags|=8192)):Qn(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var hy=g.ReactCurrentOwner,zi=!1;function si(a,c,h,G){c.child=a===null?am(c,null,h,G):mr(c,a.child,h,G)}function Km(a,c,h,G,v){h=h.render;var w=c.ref;return ur(c,v),G=uu(a,c,h,G,w,v),h=du(),a!==null&&!zi?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~v,vs(a,c,v)):(en&&h&&iu(c),c.flags|=1,si(a,c,G,v),c.child)}function Hm(a,c,h,G,v){if(a===null){var w=h.type;return typeof w=="function"&&!ku(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=w,Nm(a,c,w,G,v)):(a=Oc(h.type,null,G,c,c.mode,v),a.ref=c.ref,a.return=c,c.child=a)}if(w=a.child,(a.lanes&v)===0){var L=w.memoizedProps;if(h=h.compare,h=h!==null?h:Cc,h(L,G)&&a.ref===c.ref)return vs(a,c,v)}return c.flags|=1,a=co(w,G),a.ref=c.ref,a.return=c,c.child=a}function Nm(a,c,h,G,v){if(a!==null&&Cc(a.memoizedProps,G)&&a.ref===c.ref)if(zi=!1,(a.lanes&v)!==0)(a.flags&131072)!==0&&(zi=!0);else return c.lanes=a.lanes,vs(a,c,v);return bu(a,c,h,G,v)}function Mm(a,c,h){var G=c.pendingProps,v=G.children,w=a!==null?a.memoizedState:null;if(G.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null},xt(Gr,Ki),Ki|=h;else if((h&1073741824)!==0)c.memoizedState={baseLanes:0,cachePool:null},G=w!==null?w.baseLanes:h,xt(Gr,Ki),Ki|=G;else return a=w!==null?w.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null},c.updateQueue=null,xt(Gr,Ki),Ki|=a,null;else w!==null?(G=w.baseLanes|h,c.memoizedState=null):G=h,xt(Gr,Ki),Ki|=G;return si(a,c,v,h),c.child}function Fm(a,c){var h=c.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function bu(a,c,h,G,v){var w=fi(h)?ps:Kt.current;return w=fs(c,w),ur(c,v),h=uu(a,c,h,G,w,v),G=du(),a!==null&&!zi?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~v,vs(a,c,v)):(en&&G&&iu(c),c.flags|=1,si(a,c,h,v),c.child)}function Lm(a,c,h,G,v){if(fi(h)){var w=!0;oc(c)}else w=!1;if(ur(c,v),c.stateNode===null)a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2),tm(c,h,G),nu(c,h,G,v),G=!0;else if(a===null){var L=c.stateNode,D=c.memoizedProps;L.props=D;var ue=L.context,xe=h.contextType;typeof xe=="object"&&xe!==null?xe=nl(xe):(xe=fi(h)?ps:Kt.current,xe=fs(c,xe));var Le=h.getDerivedStateFromProps,at=typeof Le=="function"||typeof L.getSnapshotBeforeUpdate=="function";at||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(D!==G||ue!==xe)&&nm(c,L,G,xe),so=!1;var it=c.memoizedState;L.state=it,hc(c,G,L,v),ue=c.memoizedState,D!==G||it!==ue||Xn.current||so?(typeof Le=="function"&&(tu(c,h,Le,G),ue=c.memoizedState),(D=so||em(c,h,D,G,it,ue,xe))?(at||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(c.flags|=4194308)):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=G,c.memoizedState=ue),L.props=G,L.state=ue,L.context=xe,G=D):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),G=!1)}else{L=c.stateNode,Ph(a,c),D=c.memoizedProps,xe=c.type===c.elementType?D:vl(c.type,D),L.props=xe,at=c.pendingProps,it=L.context,ue=h.contextType,typeof ue=="object"&&ue!==null?ue=nl(ue):(ue=fi(h)?ps:Kt.current,ue=fs(c,ue));var kt=h.getDerivedStateFromProps;(Le=typeof kt=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(D!==at||it!==ue)&&nm(c,L,G,ue),so=!1,it=c.memoizedState,L.state=it,hc(c,G,L,v);var Pe=c.memoizedState;D!==at||it!==Pe||Xn.current||so?(typeof kt=="function"&&(tu(c,h,kt,G),Pe=c.memoizedState),(xe=so||em(c,h,xe,G,it,Pe,ue)||!1)?(Le||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(G,Pe,ue),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(G,Pe,ue)),typeof L.componentDidUpdate=="function"&&(c.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof L.componentDidUpdate!="function"||D===a.memoizedProps&&it===a.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&it===a.memoizedState||(c.flags|=1024),c.memoizedProps=G,c.memoizedState=Pe),L.props=G,L.state=Pe,L.context=ue,G=xe):(typeof L.componentDidUpdate!="function"||D===a.memoizedProps&&it===a.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&it===a.memoizedState||(c.flags|=1024),G=!1)}return Gu(a,c,h,G,w,v)}function Gu(a,c,h,G,v,w){Fm(a,c);var L=(c.flags&128)!==0;if(!G&&!L)return v&&Eh(c,h,!1),vs(a,c,w);G=c.stateNode,hy.current=c;var D=L&&typeof h.getDerivedStateFromError!="function"?null:G.render();return c.flags|=1,a!==null&&L?(c.child=mr(c,a.child,null,w),c.child=mr(c,null,D,w)):si(a,c,D,w),c.memoizedState=G.state,v&&Eh(c,h,!0),c.child}function _m(a){var c=a.stateNode;c.pendingContext?kh(a,c.pendingContext,c.pendingContext!==c.context):c.context&&kh(a,c.context,!1),ru(a,c.containerInfo)}function km(a,c,h,G,v){return hr(),gu(v),c.flags|=256,si(a,c,h,G),c.child}var Vc={dehydrated:null,treeContext:null,retryLane:0};function Rc(a){return{baseLanes:a,cachePool:null}}function Tm(a,c,h){var G=c.pendingProps,v=nn.current,w=!1,L=(c.flags&128)!==0,D;if((D=L)||(D=a!==null&&a.memoizedState===null?!1:(v&2)!==0),D?(w=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),xt(nn,v&1),a===null)return ou(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:Ta(a)?c.lanes=8:c.lanes=1073741824,null):(v=G.children,a=G.fallback,w?(G=c.mode,w=c.child,v={mode:"hidden",children:v},(G&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=v):w=jc(v,G,0,null),a=ug(a,G,h,null),w.return=c,a.return=c,w.sibling=a,c.child=w,c.child.memoizedState=Rc(h),c.memoizedState=Vc,a):yu(c,v));if(v=a.memoizedState,v!==null){if(D=v.dehydrated,D!==null){if(L)return c.flags&256?(c.flags&=-257,Xc(a,c,h,Error(o(422)))):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(w=G.fallback,v=c.mode,G=jc({mode:"visible",children:G.children},v,0,null),w=ug(w,v,h,null),w.flags|=2,G.return=c,w.return=c,G.sibling=w,c.child=G,(c.mode&1)!==0&&mr(c,a.child,null,h),c.child.memoizedState=Rc(h),c.memoizedState=Vc,w);if((c.mode&1)===0)c=Xc(a,c,h,null);else if(Ta(D))c=Xc(a,c,h,Error(o(419)));else if(G=(h&a.childLanes)!==0,zi||G){if(G=Gn,G!==null){switch(h&-h){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}G=(w&(G.suspendedLanes|h))!==0?0:w,G!==0&&G!==v.retryLane&&(v.retryLane=G,gl(a,G,-1))}_u(),c=Xc(a,c,h,Error(o(421)))}else lc(D)?(c.flags|=128,c.child=a.child,c=Wy.bind(null,a),N(D,c),c=null):(h=v.treeContext,Ie&&(Yi=pe(D),Xi=c,en=!0,xl=null,Ua=!1,h!==null&&(il[ll++]=ys,il[ll++]=Bs,il[ll++]=sg,ys=h.id,Bs=h.overflow,sg=c)),c=yu(c,c.pendingProps.children),c.flags|=4096);return c}return w?(G=Jm(a,c,G.children,G.fallback,h),w=c.child,v=a.child.memoizedState,w.memoizedState=v===null?Rc(h):{baseLanes:v.baseLanes|h,cachePool:null},w.childLanes=a.childLanes&~h,c.memoizedState=Vc,G):(h=Em(a,c,G.children,h),c.memoizedState=null,h)}return w?(G=Jm(a,c,G.children,G.fallback,h),w=c.child,v=a.child.memoizedState,w.memoizedState=v===null?Rc(h):{baseLanes:v.baseLanes|h,cachePool:null},w.childLanes=a.childLanes&~h,c.memoizedState=Vc,G):(h=Em(a,c,G.children,h),c.memoizedState=null,h)}function yu(a,c){return c=jc({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Em(a,c,h,G){var v=a.child;return a=v.sibling,h=co(v,{mode:"visible",children:h}),(c.mode&1)===0&&(h.lanes=G),h.return=c,h.sibling=null,a!==null&&(G=c.deletions,G===null?(c.deletions=[a],c.flags|=16):G.push(a)),c.child=h}function Jm(a,c,h,G,v){var w=c.mode;a=a.child;var L=a.sibling,D={mode:"hidden",children:h};return(w&1)===0&&c.child!==a?(h=c.child,h.childLanes=0,h.pendingProps=D,c.deletions=null):(h=co(a,D),h.subtreeFlags=a.subtreeFlags&14680064),L!==null?G=co(L,G):(G=ug(G,w,v,null),G.flags|=2),G.return=c,h.return=c,h.sibling=G,c.child=h,G}function Xc(a,c,h,G){return G!==null&&gu(G),mr(c,a.child,null,h),a=yu(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function Um(a,c,h){a.lanes|=c;var G=a.alternate;G!==null&&(G.lanes|=c),$2(a.return,c,h)}function Bu(a,c,h,G,v){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:G,tail:h,tailMode:v}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=G,w.tail=h,w.tailMode=v)}function Dm(a,c,h){var G=c.pendingProps,v=G.revealOrder,w=G.tail;if(si(a,c,G.children,h),G=nn.current,(G&2)!==0)G=G&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Um(a,h,c);else if(a.tag===19)Um(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}G&=1}if(xt(nn,G),(c.mode&1)===0)c.memoizedState=null;else switch(v){case"forwards":for(h=c.child,v=null;h!==null;)a=h.alternate,a!==null&&Gc(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=c.child,c.child=null):(v=h.sibling,h.sibling=null),Bu(c,!1,v,h,w);break;case"backwards":for(h=null,v=c.child,c.child=null;v!==null;){if(a=v.alternate,a!==null&&Gc(a)===null){c.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}Bu(c,!0,h,null,w);break;case"together":Bu(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function vs(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),yr|=c.lanes,(h&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(o(153));if(c.child!==null){for(a=c.child,h=co(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=co(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function my(a,c,h){switch(c.tag){case 3:_m(c),hr();break;case 5:Im(c);break;case 1:fi(c.type)&&oc(c);break;case 4:ru(c,c.stateNode.containerInfo);break;case 10:Qh(c,c.type._context,c.memoizedProps.value);break;case 13:var G=c.memoizedState;if(G!==null)return G.dehydrated!==null?(xt(nn,nn.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?Tm(a,c,h):(xt(nn,nn.current&1),a=vs(a,c,h),a!==null?a.sibling:null);xt(nn,nn.current&1);break;case 19:if(G=(h&c.childLanes)!==0,(a.flags&128)!==0){if(G)return Dm(a,c,h);c.flags|=128}var v=c.memoizedState;if(v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),xt(nn,nn.current),G)break;return null;case 22:case 23:return c.lanes=0,Mm(a,c,h)}return vs(a,c,h)}function py(a,c){switch(lu(c),c.tag){case 1:return fi(c.type)&&sc(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return fr(),Ct(Xn),Ct(Kt),cu(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return au(c),null;case 13:if(Ct(nn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(o(340));hr()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Ct(nn),null;case 4:return fr(),null;case 10:return j2(c.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var Yc=!1,rg=!1,fy=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function zc(a,c){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(G){yi(a,c,G)}else h.current=null}function Zu(a,c,h){try{h()}catch(G){yi(a,c,G)}}var Qm=!1;function by(a,c){for(Y(a.containerInfo),Ke=c;Ke!==null;)if(a=Ke,c=a.child,(a.subtreeFlags&1028)!==0&&c!==null)c.return=a,Ke=c;else for(;Ke!==null;){a=Ke;try{var h=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var G=h.memoizedProps,v=h.memoizedState,w=a.stateNode,L=w.getSnapshotBeforeUpdate(a.elementType===a.type?G:vl(a.type,G),v);w.__reactInternalSnapshotBeforeUpdate=L}break;case 3:tt&&Me(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(D){yi(a,a.return,D)}if(c=a.sibling,c!==null){c.return=a.return,Ke=c;break}Ke=a.return}return h=Qm,Qm=!1,h}function ag(a,c,h){var G=c.updateQueue;if(G=G!==null?G.lastEffect:null,G!==null){var v=G=G.next;do{if((v.tag&a)===a){var w=v.destroy;v.destroy=void 0,w!==void 0&&Zu(c,h,w)}v=v.next}while(v!==G)}}function s1(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&a)===a){var G=h.create;h.destroy=G()}h=h.next}while(h!==c)}}function vu(a){var c=a.ref;if(c!==null){var h=a.stateNode;switch(a.tag){case 5:a=se(h);break;default:a=h}typeof c=="function"?c(a):c.current=a}}function Pm(a,c,h){if(Ql&&typeof Ql.onCommitFiberUnmount=="function")try{Ql.onCommitFiberUnmount(Ic,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(a=c.updateQueue,a!==null&&(a=a.lastEffect,a!==null)){var G=a=a.next;do{var v=G,w=v.destroy;v=v.tag,w!==void 0&&((v&2)!==0||(v&4)!==0)&&Zu(c,h,w),G=G.next}while(G!==a)}break;case 1:if(zc(c,h),a=c.stateNode,typeof a.componentWillUnmount=="function")try{a.props=c.memoizedProps,a.state=c.memoizedState,a.componentWillUnmount()}catch(L){yi(c,h,L)}break;case 5:zc(c,h);break;case 4:tt?n4(a,c,h):Ae&&Ae&&(c=c.stateNode.containerInfo,h=wt(c),Ul(c,h))}}function Om(a,c,h){for(var G=c;;)if(Pm(a,G,h),G.child===null||tt&&G.tag===4){if(G===c)break;for(;G.sibling===null;){if(G.return===null||G.return===c)return;G=G.return}G.sibling.return=G.return,G=G.sibling}else G.child.return=G,G=G.child}function jm(a){var c=a.alternate;c!==null&&(a.alternate=null,jm(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&ot(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function $m(a){return a.tag===5||a.tag===3||a.tag===4}function e4(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||$m(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function t4(a){if(tt){e:{for(var c=a.return;c!==null;){if($m(c))break e;c=c.return}throw Error(o(160))}var h=c;switch(h.tag){case 5:c=h.stateNode,h.flags&32&&(pt(c),h.flags&=-33),h=e4(a),qu(a,h,c);break;case 3:case 4:c=h.stateNode.containerInfo,h=e4(a),xu(a,h,c);break;default:throw Error(o(161))}}}function xu(a,c,h){var G=a.tag;if(G===5||G===6)a=a.stateNode,c?Ge(h,a,c):ze(h,a);else if(G!==4&&(a=a.child,a!==null))for(xu(a,c,h),a=a.sibling;a!==null;)xu(a,c,h),a=a.sibling}function qu(a,c,h){var G=a.tag;if(G===5||G===6)a=a.stateNode,c?re(h,a,c):lt(h,a);else if(G!==4&&(a=a.child,a!==null))for(qu(a,c,h),a=a.sibling;a!==null;)qu(a,c,h),a=a.sibling}function n4(a,c,h){for(var G=c,v=!1,w,L;;){if(!v){v=G.return;e:for(;;){if(v===null)throw Error(o(160));switch(w=v.stateNode,v.tag){case 5:L=!1;break e;case 3:w=w.containerInfo,L=!0;break e;case 4:w=w.containerInfo,L=!0;break e}v=v.return}v=!0}if(G.tag===5||G.tag===6)Om(a,G,h),L?nt(w,G.stateNode):we(w,G.stateNode);else if(G.tag===18)L?jt(w,G.stateNode):Zt(w,G.stateNode);else if(G.tag===4){if(G.child!==null){w=G.stateNode.containerInfo,L=!0,G.child.return=G,G=G.child;continue}}else if(Pm(a,G,h),G.child!==null){G.child.return=G,G=G.child;continue}if(G===c)break;for(;G.sibling===null;){if(G.return===null||G.return===c)return;G=G.return,G.tag===4&&(v=!1)}G.sibling.return=G.return,G=G.sibling}}function wu(a,c){if(tt){switch(c.tag){case 0:case 11:case 14:case 15:ag(3,c,c.return),s1(3,c),ag(5,c,c.return);return;case 1:return;case 5:var h=c.stateNode;if(h!=null){var G=c.memoizedProps;a=a!==null?a.memoizedProps:G;var v=c.type,w=c.updateQueue;c.updateQueue=null,w!==null&&T(h,w,v,a,G,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));h=c.memoizedProps,he(c.stateNode,a!==null?a.memoizedProps:h,h);return;case 3:Ie&&a!==null&&a.memoizedState.isDehydrated&&Wt(c.stateNode.containerInfo);return;case 12:return;case 13:Kc(c);return;case 19:Kc(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:ag(3,c,c.return),s1(3,c),ag(5,c,c.return);return;case 12:return;case 13:Kc(c);return;case 19:Kc(c);return;case 3:Ie&&a!==null&&a.memoizedState.isDehydrated&&Wt(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ae){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,Ul(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function Kc(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new fy),c.forEach(function(G){var v=Sy.bind(null,a,G);h.has(G)||(h.add(G),G.then(v,v))})}}function Gy(a,c){for(Ke=c;Ke!==null;){c=Ke;var h=c.deletions;if(h!==null)for(var G=0;G<h.length;G++){var v=h[G];try{var w=a;tt?n4(w,v,c):Om(w,v,c);var L=v.alternate;L!==null&&(L.return=null),v.return=null}catch(Je){yi(v,c,Je)}}if(h=c.child,(c.subtreeFlags&12854)!==0&&h!==null)h.return=c,Ke=h;else for(;Ke!==null;){c=Ke;try{var D=c.flags;if(D&32&&tt&&pt(c.stateNode),D&512){var ue=c.alternate;if(ue!==null){var xe=ue.ref;xe!==null&&(typeof xe=="function"?xe(null):xe.current=null)}}if(D&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var Le=c.alternate;(Le===null||Le.memoizedState===null)&&(zu=Yn())}break;case 22:var at=c.memoizedState!==null,it=c.alternate,kt=it!==null&&it.memoizedState!==null;if(h=c,tt){e:if(G=h,v=at,w=null,tt)for(var Pe=G;;){if(Pe.tag===5){if(w===null){w=Pe;var Pn=Pe.stateNode;v?Ut(Pn):ce(Pe.stateNode,Pe.memoizedProps)}}else if(Pe.tag===6){if(w===null){var al=Pe.stateNode;v?U(al):be(al,Pe.memoizedProps)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===G)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===G)break;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===G)break e;w===Pe&&(w=null),Pe=Pe.return}w===Pe&&(w=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}if(at&&!kt&&(h.mode&1)!==0){Ke=h;for(var ie=h.child;ie!==null;){for(h=Ke=ie;Ke!==null;){G=Ke;var O=G.child;switch(G.tag){case 0:case 11:case 14:case 15:ag(4,G,G.return);break;case 1:zc(G,G.return);var ae=G.stateNode;if(typeof ae.componentWillUnmount=="function"){var He=G.return;try{ae.props=G.memoizedProps,ae.state=G.memoizedState,ae.componentWillUnmount()}catch(Je){yi(G,He,Je)}}break;case 5:zc(G,G.return);break;case 22:if(G.memoizedState!==null){s4(h);continue}}O!==null?(O.return=G,Ke=O):s4(h)}ie=ie.sibling}}}switch(D&4102){case 2:t4(c),c.flags&=-3;break;case 6:t4(c),c.flags&=-3,wu(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,wu(c.alternate,c);break;case 4:wu(c.alternate,c)}}catch(Je){yi(c,c.return,Je)}if(h=c.sibling,h!==null){h.return=c.return,Ke=h;break}Ke=c.return}}}function yy(a,c,h){Ke=a,i4(a)}function i4(a,c,h){for(var G=(a.mode&1)!==0;Ke!==null;){var v=Ke,w=v.child;if(v.tag===22&&G){var L=v.memoizedState!==null||Yc;if(!L){var D=v.alternate,ue=D!==null&&D.memoizedState!==null||rg;D=Yc;var xe=rg;if(Yc=L,(rg=ue)&&!xe)for(Ke=v;Ke!==null;)L=Ke,ue=L.child,L.tag===22&&L.memoizedState!==null?o4(v):ue!==null?(ue.return=L,Ke=ue):o4(v);for(;w!==null;)Ke=w,i4(w),w=w.sibling;Ke=v,Yc=D,rg=xe}l4(a)}else(v.subtreeFlags&8772)!==0&&w!==null?(w.return=v,Ke=w):l4(a)}}function l4(a){for(;Ke!==null;){var c=Ke;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:rg||s1(5,c);break;case 1:var G=c.stateNode;if(c.flags&4&&!rg)if(h===null)G.componentDidMount();else{var v=c.elementType===c.type?h.memoizedProps:vl(c.type,h.memoizedProps);G.componentDidUpdate(v,h.memoizedState,G.__reactInternalSnapshotBeforeUpdate)}var w=c.updateQueue;w!==null&&jh(c,w,G);break;case 3:var L=c.updateQueue;if(L!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=se(c.child.stateNode);break;case 1:h=c.child.stateNode}jh(c,L,h)}break;case 5:var D=c.stateNode;h===null&&c.flags&4&&Ee(D,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(Ie&&c.memoizedState===null){var ue=c.alternate;if(ue!==null){var xe=ue.memoizedState;if(xe!==null){var Le=xe.dehydrated;Le!==null&&ft(Le)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}rg||c.flags&512&&vu(c)}catch(at){yi(c,c.return,at)}}if(c===a){Ke=null;break}if(h=c.sibling,h!==null){h.return=c.return,Ke=h;break}Ke=c.return}}function s4(a){for(;Ke!==null;){var c=Ke;if(c===a){Ke=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Ke=h;break}Ke=c.return}}function o4(a){for(;Ke!==null;){var c=Ke;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{s1(4,c)}catch(ue){yi(c,h,ue)}break;case 1:var G=c.stateNode;if(typeof G.componentDidMount=="function"){var v=c.return;try{G.componentDidMount()}catch(ue){yi(c,v,ue)}}var w=c.return;try{vu(c)}catch(ue){yi(c,w,ue)}break;case 5:var L=c.return;try{vu(c)}catch(ue){yi(c,L,ue)}}}catch(ue){yi(c,c.return,ue)}if(c===a){Ke=null;break}var D=c.sibling;if(D!==null){D.return=c.return,Ke=D;break}Ke=c.return}}var Hc=0,Nc=1,Mc=2,Fc=3,Lc=4;if(typeof Symbol=="function"&&Symbol.for){var o1=Symbol.for;Hc=o1("selector.component"),Nc=o1("selector.has_pseudo_class"),Mc=o1("selector.role"),Fc=o1("selector.test_id"),Lc=o1("selector.text")}function Wu(a){var c=ve(a);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(a=zt(a),a===null)throw Error(o(362));return a.stateNode.current}function Su(a,c){switch(c.$$typeof){case Hc:if(a.type===c.value)return!0;break;case Nc:e:{c=c.value,a=[a,0];for(var h=0;h<a.length;){var G=a[h++],v=a[h++],w=c[v];if(G.tag!==5||!ge(G)){for(;w!=null&&Su(G,w);)v++,w=c[v];if(v===c.length){c=!0;break e}else for(G=G.child;G!==null;)a.push(G,v),G=G.sibling}}c=!1}return c;case Mc:if(a.tag===5&&ye(a.stateNode,c.value))return!0;break;case Lc:if((a.tag===5||a.tag===6)&&(a=z(a),a!==null&&0<=a.indexOf(c.value)))return!0;break;case Fc:if(a.tag===5&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Vu(a){switch(a.$$typeof){case Hc:return"<"+(S(a.value)||"Unknown")+">";case Nc:return":has("+(Vu(a)||"")+")";case Mc:return'[role="'+a.value+'"]';case Lc:return'"'+a.value+'"';case Fc:return'[data-testname="'+a.value+'"]';default:throw Error(o(365))}}function g4(a,c){var h=[];a=[a,0];for(var G=0;G<a.length;){var v=a[G++],w=a[G++],L=c[w];if(v.tag!==5||!ge(v)){for(;L!=null&&Su(v,L);)w++,L=c[w];if(w===c.length)h.push(v);else for(v=v.child;v!==null;)a.push(v,w),v=v.sibling}}return h}function Ru(a,c){if(!vt)throw Error(o(363));a=Wu(a),a=g4(a,c),c=[],a=Array.from(a);for(var h=0;h<a.length;){var G=a[h++];if(G.tag===5)ge(G)||c.push(G.stateNode);else for(G=G.child;G!==null;)a.push(G),G=G.sibling}return c}var By=Math.ceil,_c=g.ReactCurrentDispatcher,Xu=g.ReactCurrentOwner,An=g.ReactCurrentBatchConfig,mt=0,Gn=null,yn=null,Ln=0,Ki=0,Gr=el(0),xn=0,g1=null,yr=0,kc=0,Yu=0,r1=null,bi=null,zu=0,Ku=1/0;function Br(){Ku=Yn()+500}var Tc=!1,Hu=null,go=null,Ec=!1,ro=null,Jc=0,a1=0,Nu=null,Uc=-1,Dc=0;function oi(){return(mt&6)!==0?Yn():Uc!==-1?Uc:Uc=Yn()}function ao(a){return(a.mode&1)===0?1:(mt&2)!==0&&Ln!==0?Ln&-Ln:sy.transition!==null?(Dc===0&&(a=gc,gc<<=1,(gc&4194240)===0&&(gc=64),Dc=a),Dc):(a=Vt,a!==0?a:Xe())}function gl(a,c,h){if(50<a1)throw a1=0,Nu=null,Error(o(185));var G=Qc(a,c);return G===null?null:(Ja(G,c,h),((mt&2)===0||G!==Gn)&&(G===Gn&&((mt&2)===0&&(kc|=c),xn===4&&Io(G,Ln)),Gi(G,h),c===1&&mt===0&&(a.mode&1)===0&&(Br(),cc&&Ol())),G)}function Qc(a,c){a.lanes|=c;var h=a.alternate;for(h!==null&&(h.lanes|=c),h=a,a=a.return;a!==null;)a.childLanes|=c,h=a.alternate,h!==null&&(h.childLanes|=c),h=a,a=a.return;return h.tag===3?h.stateNode:null}function Gi(a,c){var h=a.callbackNode;PG(a,c);var G=ac(a,a===Gn?Ln:0);if(G===0)h!==null&&Uh(h),a.callbackNode=null,a.callbackPriority=0;else if(c=G&-G,a.callbackPriority!==c){if(h!=null&&Uh(h),c===1)a.tag===0?ly(a4.bind(null,a)):Dh(a4.bind(null,a)),$e?Oe(function(){mt===0&&Ol()}):J2(U2,Ol),h=null;else{switch(Jh(G)){case 1:h=U2;break;case 4:h=ey;break;case 16:h=D2;break;case 536870912:h=ty;break;default:h=D2}h=p4(h,r4.bind(null,a))}a.callbackPriority=c,a.callbackNode=h}}function r4(a,c){if(Uc=-1,Dc=0,(mt&6)!==0)throw Error(o(327));var h=a.callbackNode;if(Cg()&&a.callbackNode!==h)return null;var G=ac(a,a===Gn?Ln:0);if(G===0)return null;if((G&30)!==0||(G&a.expiredLanes)!==0||c)c=Pc(a,G);else{c=G;var v=mt;mt|=2;var w=C4();(Gn!==a||Ln!==c)&&(Br(),Ig(a,c));do try{xy();break}catch(D){c4(a,D)}while(1);O2(),_c.current=w,mt=v,yn!==null?c=0:(Gn=null,Ln=0,c=xn)}if(c!==0){if(c===2&&(v=k2(a),v!==0&&(G=v,c=Mu(a,v))),c===1)throw h=g1,Ig(a,0),Io(a,G),Gi(a,Yn()),h;if(c===6)Io(a,G);else{if(v=a.current.alternate,(G&30)===0&&!Zy(v)&&(c=Pc(a,G),c===2&&(w=k2(a),w!==0&&(G=w,c=Mu(a,w))),c===1))throw h=g1,Ig(a,0),Io(a,G),Gi(a,Yn()),h;switch(a.finishedWork=v,a.finishedLanes=G,c){case 0:case 1:throw Error(o(345));case 2:cg(a,bi);break;case 3:if(Io(a,G),(G&130023424)===G&&(c=zu+500-Yn(),10<c)){if(ac(a,0)!==0)break;if(v=a.suspendedLanes,(v&G)!==G){oi(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=_e(cg.bind(null,a,bi),c);break}cg(a,bi);break;case 4:if(Io(a,G),(G&4194240)===G)break;for(c=a.eventTimes,v=-1;0<G;){var L=31-Zl(G);w=1<<L,L=c[L],L>v&&(v=L),G&=~w}if(G=v,G=Yn()-G,G=(120>G?120:480>G?480:1080>G?1080:1920>G?1920:3e3>G?3e3:4320>G?4320:1960*By(G/1960))-G,10<G){a.timeoutHandle=_e(cg.bind(null,a,bi),G);break}cg(a,bi);break;case 5:cg(a,bi);break;default:throw Error(o(329))}}}return Gi(a,Yn()),a.callbackNode===h?r4.bind(null,a):null}function Mu(a,c){var h=r1;return a.current.memoizedState.isDehydrated&&(Ig(a,c).flags|=256),a=Pc(a,c),a!==2&&(c=bi,bi=h,c!==null&&Fu(c)),a}function Fu(a){bi===null?bi=a:bi.push.apply(bi,a)}function Zy(a){for(var c=a;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var G=0;G<h.length;G++){var v=h[G],w=v.getSnapshot;v=v.value;try{if(!Pl(w(),v))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Io(a,c){for(c&=~Yu,c&=~kc,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var h=31-Zl(c),G=1<<h;a[h]=-1,c&=~G}}function a4(a){if((mt&6)!==0)throw Error(o(327));Cg();var c=ac(a,0);if((c&1)===0)return Gi(a,Yn()),null;var h=Pc(a,c);if(a.tag!==0&&h===2){var G=k2(a);G!==0&&(c=G,h=Mu(a,G))}if(h===1)throw h=g1,Ig(a,0),Io(a,c),Gi(a,Yn()),h;if(h===6)throw Error(o(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,cg(a,bi),Gi(a,Yn()),null}function I4(a){ro!==null&&ro.tag===0&&(mt&6)===0&&Cg();var c=mt;mt|=1;var h=An.transition,G=Vt;try{if(An.transition=null,Vt=1,a)return a()}finally{Vt=G,An.transition=h,mt=c,(mt&6)===0&&Ol()}}function Lu(){Ki=Gr.current,Ct(Gr)}function Ig(a,c){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==je&&(a.timeoutHandle=je,Te(h)),yn!==null)for(h=yn.return;h!==null;){var G=h;switch(lu(G),G.tag){case 1:G=G.type.childContextTypes,G!=null&&sc();break;case 3:fr(),Ct(Xn),Ct(Kt),cu();break;case 5:au(G);break;case 4:fr();break;case 13:Ct(nn);break;case 19:Ct(nn);break;case 10:j2(G.type._context);break;case 22:case 23:Lu()}h=h.return}if(Gn=a,yn=a=co(a.current,null),Ln=Ki=c,xn=0,g1=null,Yu=kc=yr=0,bi=r1=null,jl!==null){for(c=0;c<jl.length;c++)if(h=jl[c],G=h.interleaved,G!==null){h.interleaved=null;var v=G.next,w=h.pending;if(w!==null){var L=w.next;w.next=v,G.next=L}h.pending=G}jl=null}return a}function c4(a,c){do{var h=yn;try{if(O2(),yc.current=wc,Bc){for(var G=an.memoizedState;G!==null;){var v=G.queue;v!==null&&(v.pending=null),G=G.next}Bc=!1}if(br=0,zn=Un=an=null,ja=!1,$a=0,Xu.current=null,h===null||h.return===null){xn=1,g1=c,yn=null;break}e:{var w=a,L=h.return,D=h,ue=c;if(c=Ln,D.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var xe=ue,Le=D,at=Le.tag;if((Le.mode&1)===0&&(at===0||at===11||at===15)){var it=Le.alternate;it?(Le.updateQueue=it.updateQueue,Le.memoizedState=it.memoizedState,Le.lanes=it.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var kt=Rm(L);if(kt!==null){kt.flags&=-257,Xm(kt,L,D,w,c),kt.mode&1&&Vm(w,xe,c),c=kt,ue=xe;var Pe=c.updateQueue;if(Pe===null){var Pn=new Set;Pn.add(ue),c.updateQueue=Pn}else Pe.add(ue);break e}else{if((c&1)===0){Vm(w,xe,c),_u();break e}ue=Error(o(426))}}else if(en&&D.mode&1){var al=Rm(L);if(al!==null){(al.flags&65536)===0&&(al.flags|=256),Xm(al,L,D,w,c),gu(ue);break e}}w=ue,xn!==4&&(xn=2),r1===null?r1=[w]:r1.push(w),ue=pu(ue,D),D=L;do{switch(D.tag){case 3:D.flags|=65536,c&=-c,D.lanes|=c;var ie=Wm(D,ue,c);Oh(D,ie);break e;case 1:w=ue;var O=D.type,ae=D.stateNode;if((D.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(go===null||!go.has(ae)))){D.flags|=65536,c&=-c,D.lanes|=c;var He=Sm(D,w,c);Oh(D,He);break e}}D=D.return}while(D!==null)}d4(h)}catch(Je){c=Je,yn===h&&h!==null&&(yn=h=h.return);continue}break}while(1)}function C4(){var a=_c.current;return _c.current=wc,a===null?wc:a}function _u(){(xn===0||xn===3||xn===2)&&(xn=4),Gn===null||(yr&268435455)===0&&(kc&268435455)===0||Io(Gn,Ln)}function Pc(a,c){var h=mt;mt|=2;var G=C4();Gn===a&&Ln===c||Ig(a,c);do try{vy();break}catch(v){c4(a,v)}while(1);if(O2(),mt=h,_c.current=G,yn!==null)throw Error(o(261));return Gn=null,Ln=0,xn}function vy(){for(;yn!==null;)u4(yn)}function xy(){for(;yn!==null&&!jG();)u4(yn)}function u4(a){var c=m4(a.alternate,a,Ki);a.memoizedProps=a.pendingProps,c===null?d4(a):yn=c,Xu.current=null}function d4(a){var c=a;do{var h=c.alternate;if(a=c.return,(c.flags&32768)===0){if(h=Ay(h,c,Ki),h!==null){yn=h;return}}else{if(h=py(h,c),h!==null){h.flags&=32767,yn=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{xn=6,yn=null;return}}if(c=c.sibling,c!==null){yn=c;return}yn=c=a}while(c!==null);xn===0&&(xn=5)}function cg(a,c){var h=Vt,G=An.transition;try{An.transition=null,Vt=1,qy(a,c,h)}finally{An.transition=G,Vt=h}return null}function qy(a,c,h){do Cg();while(ro!==null);if((mt&6)!==0)throw Error(o(327));var G=a.finishedWork,v=a.finishedLanes;if(G===null)return null;if(a.finishedWork=null,a.finishedLanes=0,G===a.current)throw Error(o(177));a.callbackNode=null,a.callbackPriority=0;var w=G.lanes|G.childLanes;if(OG(a,w),a===Gn&&(yn=Gn=null,Ln=0),(G.subtreeFlags&2064)===0&&(G.flags&2064)===0||Ec||(Ec=!0,p4(D2,function(){return Cg(),null})),w=(G.flags&15990)!==0,(G.subtreeFlags&15990)!==0||w){w=An.transition,An.transition=null;var L=Vt;Vt=1;var D=mt;mt|=4,Xu.current=null,by(a,G),Gy(a,G),H(a.containerInfo),a.current=G,yy(G),$G(),mt=D,Vt=L,An.transition=w}else a.current=G;if(Ec&&(Ec=!1,ro=a,Jc=v),w=a.pendingLanes,w===0&&(go=null),ny(G.stateNode),Gi(a,Yn()),c!==null)for(h=a.onRecoverableError,G=0;G<c.length;G++)h(c[G]);if(Tc)throw Tc=!1,a=Hu,Hu=null,a;return(Jc&1)!==0&&a.tag!==0&&Cg(),w=a.pendingLanes,(w&1)!==0?a===Nu?a1++:(a1=0,Nu=a):a1=0,Ol(),null}function Cg(){if(ro!==null){var a=Jh(Jc),c=An.transition,h=Vt;try{if(An.transition=null,Vt=16>a?16:a,ro===null)var G=!1;else{if(a=ro,ro=null,Jc=0,(mt&6)!==0)throw Error(o(331));var v=mt;for(mt|=4,Ke=a.current;Ke!==null;){var w=Ke,L=w.child;if((Ke.flags&16)!==0){var D=w.deletions;if(D!==null){for(var ue=0;ue<D.length;ue++){var xe=D[ue];for(Ke=xe;Ke!==null;){var Le=Ke;switch(Le.tag){case 0:case 11:case 15:ag(8,Le,w)}var at=Le.child;if(at!==null)at.return=Le,Ke=at;else for(;Ke!==null;){Le=Ke;var it=Le.sibling,kt=Le.return;if(jm(Le),Le===xe){Ke=null;break}if(it!==null){it.return=kt,Ke=it;break}Ke=kt}}}var Pe=w.alternate;if(Pe!==null){var Pn=Pe.child;if(Pn!==null){Pe.child=null;do{var al=Pn.sibling;Pn.sibling=null,Pn=al}while(Pn!==null)}}Ke=w}}if((w.subtreeFlags&2064)!==0&&L!==null)L.return=w,Ke=L;else e:for(;Ke!==null;){if(w=Ke,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:ag(9,w,w.return)}var ie=w.sibling;if(ie!==null){ie.return=w.return,Ke=ie;break e}Ke=w.return}}var O=a.current;for(Ke=O;Ke!==null;){L=Ke;var ae=L.child;if((L.subtreeFlags&2064)!==0&&ae!==null)ae.return=L,Ke=ae;else e:for(L=O;Ke!==null;){if(D=Ke,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:s1(9,D)}}catch(Je){yi(D,D.return,Je)}if(D===L){Ke=null;break e}var He=D.sibling;if(He!==null){He.return=D.return,Ke=He;break e}Ke=D.return}}if(mt=v,Ol(),Ql&&typeof Ql.onPostCommitFiberRoot=="function")try{Ql.onPostCommitFiberRoot(Ic,a)}catch{}G=!0}return G}finally{Vt=h,An.transition=c}}return!1}function A4(a,c,h){c=pu(h,c),c=Wm(a,c,1),oo(a,c),c=oi(),a=Qc(a,1),a!==null&&(Ja(a,1,c),Gi(a,c))}function yi(a,c,h){if(a.tag===3)A4(a,a,h);else for(;c!==null;){if(c.tag===3){A4(c,a,h);break}else if(c.tag===1){var G=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof G.componentDidCatch=="function"&&(go===null||!go.has(G))){a=pu(h,a),a=Sm(c,a,1),oo(c,a),a=oi(),c=Qc(c,1),c!==null&&(Ja(c,1,a),Gi(c,a));break}}c=c.return}}function wy(a,c,h){var G=a.pingCache;G!==null&&G.delete(c),c=oi(),a.pingedLanes|=a.suspendedLanes&h,Gn===a&&(Ln&h)===h&&(xn===4||xn===3&&(Ln&130023424)===Ln&&500>Yn()-zu?Ig(a,0):Yu|=h),Gi(a,c)}function h4(a,c){c===0&&((a.mode&1)===0?c=1:(c=rc,rc<<=1,(rc&130023424)===0&&(rc=4194304)));var h=oi();a=Qc(a,c),a!==null&&(Ja(a,c,h),Gi(a,h))}function Wy(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),h4(a,h)}function Sy(a,c){var h=0;switch(a.tag){case 13:var G=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:G=a.stateNode;break;default:throw Error(o(314))}G!==null&&G.delete(c),h4(a,h)}var m4;m4=function(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps||Xn.current)zi=!0;else{if((a.lanes&h)===0&&(c.flags&128)===0)return zi=!1,my(a,c,h);zi=(a.flags&131072)!==0}else zi=!1,en&&(c.flags&1048576)!==0&&im(c,fc,c.index);switch(c.lanes=0,c.tag){case 2:var G=c.type;a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2),a=c.pendingProps;var v=fs(c,Kt.current);ur(c,h),v=uu(null,c,G,a,v,h);var w=du();return c.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,fi(G)?(w=!0,oc(c)):w=!1,c.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,eu(c),v.updater=mc,c.stateNode=v,v._reactInternals=c,nu(c,G,a,h),c=Gu(null,c,G,!0,w,h)):(c.tag=0,en&&w&&iu(c),si(null,c,v,h),c=c.child),c;case 16:G=c.elementType;e:{switch(a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2),a=c.pendingProps,v=G._init,G=v(G._payload),c.type=G,v=c.tag=Ry(G),a=vl(G,a),v){case 0:c=bu(null,c,G,a,h);break e;case 1:c=Lm(null,c,G,a,h);break e;case 11:c=Km(null,c,G,a,h);break e;case 14:c=Hm(null,c,G,vl(G.type,a),h);break e}throw Error(o(306,G,""))}return c;case 0:return G=c.type,v=c.pendingProps,v=c.elementType===G?v:vl(G,v),bu(a,c,G,v,h);case 1:return G=c.type,v=c.pendingProps,v=c.elementType===G?v:vl(G,v),Lm(a,c,G,v,h);case 3:e:{if(_m(c),a===null)throw Error(o(387));G=c.pendingProps,w=c.memoizedState,v=w.element,Ph(a,c),hc(c,G,null,h);var L=c.memoizedState;if(G=L.element,Ie&&w.isDehydrated)if(w={element:G,isDehydrated:!1,cache:L.cache,transitions:L.transitions},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){v=Error(o(423)),c=km(a,c,G,h,v);break e}else if(G!==v){v=Error(o(424)),c=km(a,c,G,h,v);break e}else for(Ie&&(Yi=j(c.stateNode.containerInfo),Xi=c,en=!0,xl=null,Ua=!1),h=am(c,null,G,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(hr(),G===v){c=vs(a,c,h);break e}si(a,c,G,h)}c=c.child}return c;case 5:return Im(c),a===null&&ou(c),G=c.type,v=c.pendingProps,w=a!==null?a.memoizedProps:null,L=v.children,We(G,v)?L=null:w!==null&&We(G,w)&&(c.flags|=32),Fm(a,c),si(a,c,L,h),c.child;case 6:return a===null&&ou(c),null;case 13:return Tm(a,c,h);case 4:return ru(c,c.stateNode.containerInfo),G=c.pendingProps,a===null?c.child=mr(c,null,G,h):si(a,c,G,h),c.child;case 11:return G=c.type,v=c.pendingProps,v=c.elementType===G?v:vl(G,v),Km(a,c,G,v,h);case 7:return si(a,c,c.pendingProps,h),c.child;case 8:return si(a,c,c.pendingProps.children,h),c.child;case 12:return si(a,c,c.pendingProps.children,h),c.child;case 10:e:{if(G=c.type._context,v=c.pendingProps,w=c.memoizedProps,L=v.value,Qh(c,G,L),w!==null)if(Pl(w.value,L)){if(w.children===v.children&&!Xn.current){c=vs(a,c,h);break e}}else for(w=c.child,w!==null&&(w.return=c);w!==null;){var D=w.dependencies;if(D!==null){L=w.child;for(var ue=D.firstContext;ue!==null;){if(ue.context===G){if(w.tag===1){ue=Gs(-1,h&-h),ue.tag=2;var xe=w.updateQueue;if(xe!==null){xe=xe.shared;var Le=xe.pending;Le===null?ue.next=ue:(ue.next=Le.next,Le.next=ue),xe.pending=ue}}w.lanes|=h,ue=w.alternate,ue!==null&&(ue.lanes|=h),$2(w.return,h,c),D.lanes|=h;break}ue=ue.next}}else if(w.tag===10)L=w.type===c.type?null:w.child;else if(w.tag===18){if(L=w.return,L===null)throw Error(o(341));L.lanes|=h,D=L.alternate,D!==null&&(D.lanes|=h),$2(L,h,c),L=w.sibling}else L=w.child;if(L!==null)L.return=w;else for(L=w;L!==null;){if(L===c){L=null;break}if(w=L.sibling,w!==null){w.return=L.return,L=w;break}L=L.return}w=L}si(a,c,v.children,h),c=c.child}return c;case 9:return v=c.type,G=c.pendingProps.children,ur(c,h),v=nl(v),G=G(v),c.flags|=1,si(a,c,G,h),c.child;case 14:return G=c.type,v=vl(G,c.pendingProps),v=vl(G.type,v),Hm(a,c,G,v,h);case 15:return Nm(a,c,c.type,c.pendingProps,h);case 17:return G=c.type,v=c.pendingProps,v=c.elementType===G?v:vl(G,v),a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,fi(G)?(a=!0,oc(c)):a=!1,ur(c,h),tm(c,G,v),nu(c,G,v,h),Gu(null,c,G,!0,a,h);case 19:return Dm(a,c,h);case 22:return Mm(a,c,h)}throw Error(o(156,c.tag))};function p4(a,c){return J2(a,c)}function Vy(a,c,h,G){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=G,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rl(a,c,h,G){return new Vy(a,c,h,G)}function ku(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ry(a){if(typeof a=="function")return ku(a)?1:0;if(a!=null){if(a=a.$$typeof,a===f)return 11;if(a===B)return 14}return 2}function co(a,c){var h=a.alternate;return h===null?(h=rl(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Oc(a,c,h,G,v,w){var L=2;if(G=a,typeof a=="function")ku(a)&&(L=1);else if(typeof a=="string")L=5;else e:switch(a){case C:return ug(h.children,v,w,c);case u:L=8,v|=8;break;case d:return a=rl(12,h,c,v|2),a.elementType=d,a.lanes=w,a;case p:return a=rl(13,h,c,v),a.elementType=p,a.lanes=w,a;case b:return a=rl(19,h,c,v),a.elementType=b,a.lanes=w,a;case Z:return jc(h,v,w,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:L=10;break e;case m:L=9;break e;case f:L=11;break e;case B:L=14;break e;case y:L=16,G=null;break e}throw Error(o(130,a==null?a:typeof a,""))}return c=rl(L,h,c,v),c.elementType=a,c.type=G,c.lanes=w,c}function ug(a,c,h,G){return a=rl(7,a,G,c),a.lanes=h,a}function jc(a,c,h,G){return a=rl(22,a,G,c),a.elementType=Z,a.lanes=h,a.stateNode={},a}function Tu(a,c,h){return a=rl(6,a,null,c),a.lanes=h,a}function Eu(a,c,h){return c=rl(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function Xy(a,c,h,G,v){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=je,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T2(0),this.expirationTimes=T2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T2(0),this.identifierPrefix=G,this.onRecoverableError=v,Ie&&(this.mutableSourceEagerHydrationData=null)}function f4(a,c,h,G,v,w,L,D,ue){return a=new Xy(a,c,h,D,ue),c===1?(c=1,w===!0&&(c|=8)):c=0,w=rl(3,null,null,c),a.current=w,w.stateNode=a,w.memoizedState={element:G,isDehydrated:h,cache:null,transitions:null},eu(w),a}function b4(a){if(!a)return tl;a=a._reactInternals;e:{if(V(a)!==a||a.tag!==1)throw Error(o(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(fi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(a.tag===1){var h=a.type;if(fi(h))return Th(a,h,c)}return c}function G4(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=$(c),a===null?null:a.stateNode}function y4(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function Ju(a,c){y4(a,c),(a=a.alternate)&&y4(a,c)}function Yy(a){return a=$(a),a===null?null:a.stateNode}function zy(){return null}return t.attemptContinuousHydration=function(a){if(a.tag===13){var c=oi();gl(a,134217728,c),Ju(a,134217728)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var c=oi(),h=ao(a);gl(a,h,c),Ju(a,h)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var h=Ea(c.pendingLanes);h!==0&&(E2(c,h|1),Gi(c,Yn()),(mt&6)===0&&(Br(),Ol()))}break;case 13:var G=oi();I4(function(){return gl(a,1,G)}),Ju(a,1)}},t.batchedUpdates=function(a,c){var h=mt;mt|=1;try{return a(c)}finally{mt=h,mt===0&&(Br(),cc&&Ol())}},t.createComponentSelector=function(a){return{$$typeof:Hc,value:a}},t.createContainer=function(a,c,h,G,v,w,L){return f4(a,c,!1,null,h,G,v,w,L)},t.createHasPseudoClassSelector=function(a){return{$$typeof:Nc,value:a}},t.createHydrationContainer=function(a,c,h,G,v,w,L,D,ue){return a=f4(h,G,!0,a,v,w,L,D,ue),a.context=b4(null),h=a.current,G=oi(),v=ao(h),w=Gs(G,v),w.callback=c!=null?c:null,oo(h,w),a.current.lanes=v,Ja(a,v,G),Gi(a,G),a},t.createPortal=function(a,c,h){var G=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:G==null?null:""+G,children:a,containerInfo:c,implementation:h}},t.createRoleSelector=function(a){return{$$typeof:Mc,value:a}},t.createTestNameSelector=function(a){return{$$typeof:Fc,value:a}},t.createTextSelector=function(a){return{$$typeof:Lc,value:a}},t.deferredUpdates=function(a){var c=Vt,h=An.transition;try{return An.transition=null,Vt=16,a()}finally{Vt=c,An.transition=h}},t.discreteUpdates=function(a,c,h,G,v){var w=Vt,L=An.transition;try{return An.transition=null,Vt=1,a(c,h,G,v)}finally{Vt=w,An.transition=L,mt===0&&Br()}},t.findAllNodes=Ru,t.findBoundingRects=function(a,c){if(!vt)throw Error(o(363));c=Ru(a,c),a=[];for(var h=0;h<c.length;h++)a.push(_(c[h]));for(c=a.length-1;0<c;c--){h=a[c];for(var G=h.x,v=G+h.width,w=h.y,L=w+h.height,D=c-1;0<=D;D--)if(c!==D){var ue=a[D],xe=ue.x,Le=xe+ue.width,at=ue.y,it=at+ue.height;if(G>=xe&&w>=at&&v<=Le&&L<=it){a.splice(c,1);break}else if(G!==xe||h.width!==ue.width||it<w||at>L){if(!(w!==at||h.height!==ue.height||Le<G||xe>v)){xe>G&&(ue.width+=xe-G,ue.x=G),Le<v&&(ue.width=v-xe),a.splice(c,1);break}}else{at>w&&(ue.height+=at-w,ue.y=w),it<L&&(ue.height=L-at),a.splice(c,1);break}}}return a},t.findHostInstance=G4,t.findHostInstanceWithNoPortals=function(a){return a=k(a),a=a!==null?E(a):null,a===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return G4(a)},t.flushControlled=function(a){var c=mt;mt|=1;var h=An.transition,G=Vt;try{An.transition=null,Vt=1,a()}finally{Vt=G,An.transition=h,mt=c,mt===0&&(Br(),Ol())}},t.flushPassiveEffects=Cg,t.flushSync=I4,t.focusWithin=function(a,c){if(!vt)throw Error(o(363));for(a=Wu(a),c=g4(a,c),c=Array.from(c),a=0;a<c.length;){var h=c[a++];if(!ge(h)){if(h.tag===5&&qe(h.stateNode))return!0;for(h=h.child;h!==null;)c.push(h),h=h.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Vt},t.getFindAllNodesFailureDescription=function(a,c){if(!vt)throw Error(o(363));var h=0,G=[];a=[Wu(a),0];for(var v=0;v<a.length;){var w=a[v++],L=a[v++],D=c[L];if((w.tag!==5||!ge(w))&&(Su(w,D)&&(G.push(Vu(D)),L++,L>h&&(h=L)),L<c.length))for(w=w.child;w!==null;)a.push(w,L),w=w.sibling}if(h<c.length){for(a=[];h<c.length;h++)a.push(Vu(c[h]));return`findAllNodes was able to match part of the selector:
  `+(G.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},t.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return se(a.child.stateNode);default:return a.child.stateNode}},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:g.ReactCurrentDispatcher,findHostInstanceByFiber:Yy,findFiberByHostInstance:a.findFiberByHostInstance||zy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)a=!0;else{try{Ic=c.inject(a),Ql=c}catch{}a=!!c.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,c,h,G){if(!vt)throw Error(o(363));a=Ru(a,c);var v=Ye(a,h,G).disconnect;return{disconnect:function(){v()}}},t.registerMutableSourceForHydration=function(a,c){var h=c._getVersion;h=h(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,h]:a.mutableSourceEagerHydrationData.push(c,h)},t.runWithPriority=function(a,c){var h=Vt;try{return Vt=a,c()}finally{Vt=h}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,c,h,G){var v=c.current,w=oi(),L=ao(v);return h=b4(h),c.context===null?c.context=h:c.pendingContext=h,c=Gs(w,L),c.payload={element:a},G=G===void 0?null:G,G!==null&&(c.callback=G),oo(v,c),a=gl(v,L,w),a!==null&&Ac(a,v,L),L},t};(function(i){i.exports=sX})(Pb);const oX=Hy(Pb.exports);var k3={exports:{}},Ob={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(R,Y){var H=R.length;R.push(Y);e:for(;0<H;){var J=H-1>>>1,P=R[J];if(0<l(P,Y))R[J]=Y,R[H]=P,H=J;else break e}}function t(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var Y=R[0],H=R.pop();if(H!==Y){R[0]=H;e:for(var J=0,P=R.length,ne=P>>>1;J<ne;){var fe=2*(J+1)-1,We=R[fe],le=fe+1,_e=R[le];if(0>l(We,H))le<P&&0>l(_e,We)?(R[J]=_e,R[le]=H,J=le):(R[J]=We,R[fe]=H,J=fe);else if(le<P&&0>l(_e,H))R[J]=_e,R[le]=H,J=le;else break e}}return Y}function l(R,Y){var H=R.sortIndex-Y.sortIndex;return H!==0?H:R.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,g=o.now();i.unstable_now=function(){return o.now()-g}}var r=[],I=[],C=1,u=null,d=3,A=!1,m=!1,f=!1,p=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var Y=t(I);Y!==null;){if(Y.callback===null)n(I);else if(Y.startTime<=R)n(I),Y.sortIndex=Y.expirationTime,e(r,Y);else break;Y=t(I)}}function Z(R){if(f=!1,y(R),!m)if(t(r)!==null)m=!0,se(q);else{var Y=t(I);Y!==null&&oe(Z,Y.startTime-R)}}function q(R,Y){m=!1,f&&(f=!1,b(x),x=-1),A=!0;var H=d;try{for(y(Y),u=t(r);u!==null&&(!(u.expirationTime>Y)||R&&!k());){var J=u.callback;if(typeof J=="function"){u.callback=null,d=u.priorityLevel;var P=J(u.expirationTime<=Y);Y=i.unstable_now(),typeof P=="function"?u.callback=P:u===t(r)&&n(r),y(Y)}else n(r);u=t(r)}if(u!==null)var ne=!0;else{var fe=t(I);fe!==null&&oe(Z,fe.startTime-Y),ne=!1}return ne}finally{u=null,d=H,A=!1}}var W=!1,S=null,x=-1,V=5,X=-1;function k(){return!(i.unstable_now()-X<V)}function $(){if(S!==null){var R=i.unstable_now();X=R;var Y=!0;try{Y=S(!0,R)}finally{Y?Q():(W=!1,S=null)}}else W=!1}var Q;if(typeof B=="function")Q=function(){B($)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,te=E.port2;E.port1.onmessage=$,Q=function(){te.postMessage(null)}}else Q=function(){p($,0)};function se(R){S=R,W||(W=!0,Q())}function oe(R,Y){x=p(function(){R(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(R){R.callback=null},i.unstable_continueExecution=function(){m||A||(m=!0,se(q))},i.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<R?Math.floor(1e3/R):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(r)},i.unstable_next=function(R){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var H=d;d=Y;try{return R()}finally{d=H}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(R,Y){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var H=d;d=R;try{return Y()}finally{d=H}},i.unstable_scheduleCallback=function(R,Y,H){var J=i.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?J+H:J):H=J,R){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=H+P,R={id:C++,callback:Y,priorityLevel:R,startTime:H,expirationTime:P,sortIndex:-1},H>J?(R.sortIndex=H,e(I,R),t(r)===null&&R===t(I)&&(f?(b(x),x=-1):f=!0,oe(Z,H-J))):(R.sortIndex=P,e(r,R),m||A||(m=!0,se(q))),R},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(R){var Y=d;return function(){var H=d;d=Y;try{return R.apply(this,arguments)}finally{d=H}}}})(Ob);(function(i){i.exports=Ob})(k3);function jb(i,e,t=(n,l)=>n===l){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let l=0;l<n;l++)if(!t(i[l],e[l]))return!1;return!0}const zs=[];function $b(i,e,t=!1,n={}){for(const s of zs)if(jb(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const l={keys:e,equal:n.equal,promise:i(...e).then(s=>l.response=s).then(()=>{n.lifespan&&n.lifespan>0&&setTimeout(()=>{const s=zs.indexOf(l);s!==-1&&zs.splice(s,1)},n.lifespan)}).catch(s=>l.error=s)};if(zs.push(l),!t)throw l.promise}const eG=(i,e,t)=>$b(i,e,!1,t),gX=(i,e,t)=>void $b(i,e,!0,t),rX=i=>{if(i===void 0||i.length===0)zs.splice(0,zs.length);else{const e=zs.find(t=>jb(i,t.keys,t.equal));if(e){const t=zs.indexOf(e);t!==-1&&zs.splice(t,1)}}};var M2={exports:{}},F2={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aX=Ce.exports,IX=Symbol.for("react.element"),cX=Symbol.for("react.fragment"),CX=Object.prototype.hasOwnProperty,uX=aX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dX={key:!0,ref:!0,__self:!0,__source:!0};function tG(i,e,t){var n,l={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)CX.call(e,n)&&!dX.hasOwnProperty(n)&&(l[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)l[n]===void 0&&(l[n]=e[n]);return{$$typeof:IX,type:i,key:s,ref:o,props:l,_owner:uX.current}}F2.Fragment=cX;F2.jsx=tG;F2.jsxs=tG;(function(i){i.exports=F2})(M2);const no=M2.exports.Fragment,Be=M2.exports.jsx,ln=M2.exports.jsxs;var tp,np;const nG=i=>i&&i.isOrthographicCamera,AX=i=>i&&i.hasOwnProperty("current"),tc=typeof window<"u"&&((tp=window.document)!=null&&tp.createElement||((np=window.navigator)==null?void 0:np.product)==="ReactNative")?Ce.exports.useLayoutEffect:Ce.exports.useEffect;function iG(i){const e=Ce.exports.useRef(i);return tc(()=>void(e.current=i),[i]),e}function hX({set:i}){return tc(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class lG extends Ce.exports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}lG.getDerivedStateFromError=()=>({error:!0});const sG="__default",mX=i=>i&&!!i.memoized&&!!i.changes;function oG(i){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}const q1=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()},Cn={obj:i=>i===Object(i)&&!Cn.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:l=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Cn.str(i)||Cn.num(i))return i===e;const s=Cn.obj(i);if(s&&n==="reference")return i===e;const o=Cn.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let g;for(g in i)if(!(g in e))return!1;for(g in l?e:i)if(i[g]!==e[g])return!1;if(Cn.und(g)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function pX(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function fX(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function Tr(i,e){const t=i;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),i}function T3(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),l=n.pop();return t=n.reduce((s,o)=>s[o],i),{target:t,key:l}}else return{target:t,key:e}}const ip=/-\d+$/;function n5(i,e,t){if(Cn.str(t)){if(ip.test(t)){const s=t.replace(ip,""),{target:o,key:g}=T3(i,s);Array.isArray(o[g])||(o[g]=[])}const{target:n,key:l}=T3(i,t);e.__r3f.previousAttach=n[l],n[l]=e}else e.__r3f.previousAttach=t(i,e)}function lp(i,e,t){var n,l;if(Cn.str(t)){const{target:s,key:o}=T3(i,t),g=e.__r3f.previousAttach;g===void 0?delete s[o]:s[o]=g}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(l=e.__r3f)==null||delete l.previousAttach}function gG(i,{children:e,key:t,ref:n,...l},{children:s,key:o,ref:g,...r}={},I=!1){var C;const u=(C=i==null?void 0:i.__r3f)!=null?C:{},d=Object.entries(l),A=[];if(I){const f=Object.keys(r);for(let p=0;p<f.length;p++)l.hasOwnProperty(f[p])||d.unshift([f[p],sG+"remove"])}d.forEach(([f,p])=>{var b;if((b=i.__r3f)!=null&&b.primitive&&f==="object"||Cn.equ(p,r[f]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(f))return A.push([f,p,!0,[]]);let B=[];f.includes("-")&&(B=f.split("-")),A.push([f,p,!1,B]);for(const y in l){const Z=l[y];y.startsWith(`${f}-`)&&A.push([y,Z,!1,y.split("-")])}});const m={...l};return u.memoizedProps&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u.memoizedProps&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:A}}function i5(i,e){var t,n,l;const s=(t=i.__r3f)!=null?t:{},o=s.root,g=(n=o==null||o.getState==null?void 0:o.getState())!=null?n:{},{memoized:r,changes:I}=mX(e)?e:gG(i,e),C=s.eventCount;i.__r3f&&(i.__r3f.memoizedProps=r);for(let A=0;A<I.length;A++){let[m,f,p,b]=I[A],B=i,y=B[m];if(b.length&&(y=b.reduce((Z,q)=>Z[q],i),!(y&&y.set))){const[Z,...q]=b.reverse();B=q.reverse().reduce((W,S)=>W[S],i),m=Z}if(f===sG+"remove")if(y&&y.constructor){var u;f=new y.constructor(...(u=r.args)!=null?u:[])}else if(B.constructor){var d;const Z=new B.constructor(...(d=B.__r3f.memoizedProps.args)!=null?d:[]);f=Z[y],Z.dispose&&Z.dispose()}else f=0;if(p)f?s.handlers[m]=f:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Jg)){if(Array.isArray(f))y.fromArray?y.fromArray(f):y.set(...f);else if(y.copy&&f&&f.constructor&&y.constructor.name===f.constructor.name)y.copy(f);else if(f!==void 0){const Z=y instanceof Ve;!Z&&y.setScalar?y.setScalar(f):y instanceof Jg&&f instanceof Jg?y.mask=f.mask:y.set(f),!("ColorManagement"in o2)&&!g.linear&&Z&&y.convertSRGBToLinear()}}else B[m]=f,!g.linear&&B[m]instanceof un&&(B[m].encoding=Yt);Er(i)}if(s.parent&&g.internal&&i.raycast&&C!==s.eventCount){const A=g.internal.interaction.indexOf(i);A>-1&&g.internal.interaction.splice(A,1),s.eventCount&&g.internal.interaction.push(i)}return I.length&&(l=i.__r3f)!=null&&l.parent&&E3(i),i}function Er(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function E3(i){i.onUpdate==null||i.onUpdate(i)}function bX(i,e){i.manual||(nG(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function GX(i,e,t){const n=t.pop(),l=t.reduce((s,o)=>s[o],i);return l[n]=e}function n0(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function yX(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Mg.exports.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Mg.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Mg.exports.ContinuousEventPriority;default:return Mg.exports.DefaultEventPriority}}function rG(i,e,t,n){const l=t.get(e);l&&(t.delete(e),t.size===0&&(i.delete(n),l.target.releasePointerCapture(n)))}function BX(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,l)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(l)}),t.capturedMap.forEach((n,l)=>{rG(t.capturedMap,e,n,l)})}function ZX(i){function e(r){const{internal:I}=i.getState(),C=r.offsetX-I.initialClick[0],u=r.offsetY-I.initialClick[1];return Math.round(Math.sqrt(C*C+u*u))}function t(r){return r.filter(I=>["Move","Over","Enter","Out","Leave"].some(C=>{var u;return(u=I.__r3f)==null?void 0:u.handlers["onPointer"+C]}))}function n(r,I){const C=i.getState(),u=new Set,d=[],A=I?I(C.internal.interaction):C.internal.interaction;for(let b=0;b<A.length;b++){const B=q1(A[b]);B&&(B.raycaster.camera=void 0)}C.previousRoot||C.events.compute==null||C.events.compute(r,C);function m(b){const B=q1(b);if(!B||!B.events.enabled||B.raycaster.camera===null)return[];if(B.raycaster.camera===void 0){var y;B.events.compute==null||B.events.compute(r,B,(y=B.previousRoot)==null?void 0:y.getState()),B.raycaster.camera===void 0&&(B.raycaster.camera=null)}return B.raycaster.camera?B.raycaster.intersectObject(b,!0):[]}let f=A.flatMap(m).sort((b,B)=>{const y=q1(b.object),Z=q1(B.object);return!y||!Z?b.distance-B.distance:Z.events.priority-y.events.priority||b.distance-B.distance}).filter(b=>{const B=n0(b);return u.has(B)?!1:(u.add(B),!0)});C.events.filter&&(f=C.events.filter(f,C));for(const b of f){let B=b.object;for(;B;){var p;(p=B.__r3f)!=null&&p.eventCount&&d.push({...b,eventObject:B}),B=B.parent}}if("pointerId"in r&&C.internal.capturedMap.has(r.pointerId))for(let b of C.internal.capturedMap.get(r.pointerId).values())u.has(n0(b.intersection))||d.push(b.intersection);return d}function l(r,I,C,u){const d=i.getState();if(r.length){const A={stopped:!1};for(const m of r){const f=q1(m.object)||d,{raycaster:p,pointer:b,camera:B,internal:y}=f,Z=new K(b.x,b.y,0).unproject(B),q=X=>{var k,$;return(k=($=y.capturedMap.get(X))==null?void 0:$.has(m.eventObject))!=null?k:!1},W=X=>{const k={intersection:m,target:I.target};y.capturedMap.has(X)?y.capturedMap.get(X).set(m.eventObject,k):y.capturedMap.set(X,new Map([[m.eventObject,k]])),I.target.setPointerCapture(X)},S=X=>{const k=y.capturedMap.get(X);k&&rG(y.capturedMap,m.eventObject,k,X)};let x={};for(let X in I){let k=I[X];typeof k!="function"&&(x[X]=k)}let V={...m,...x,pointer:b,intersections:r,stopped:A.stopped,delta:C,unprojectedPoint:Z,ray:p.ray,camera:B,stopPropagation(){const X="pointerId"in I&&y.capturedMap.get(I.pointerId);if((!X||X.has(m.eventObject))&&(V.stopped=A.stopped=!0,y.hovered.size&&Array.from(y.hovered.values()).find(k=>k.eventObject===m.eventObject))){const k=r.slice(0,r.indexOf(m));s([...k,m])}},target:{hasPointerCapture:q,setPointerCapture:W,releasePointerCapture:S},currentTarget:{hasPointerCapture:q,setPointerCapture:W,releasePointerCapture:S},nativeEvent:I};if(u(V),A.stopped===!0)break}}return r}function s(r){const{internal:I}=i.getState();for(const C of I.hovered.values())if(!r.length||!r.find(u=>u.object===C.object&&u.index===C.index&&u.instanceId===C.instanceId)){const d=C.eventObject.__r3f,A=d==null?void 0:d.handlers;if(I.hovered.delete(n0(C)),d!=null&&d.eventCount){const m={...C,intersections:r};A.onPointerOut==null||A.onPointerOut(m),A.onPointerLeave==null||A.onPointerLeave(m)}}}function o(r,I){for(let C=0;C<I.length;C++){const u=I[C].__r3f;u==null||u.handlers.onPointerMissed==null||u.handlers.onPointerMissed(r)}}function g(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return I=>{const{internal:C}=i.getState();"pointerId"in I&&C.capturedMap.has(I.pointerId)&&(C.capturedMap.delete(I.pointerId),s([]))}}return function(C){const{onPointerMissed:u,internal:d}=i.getState();d.lastEvent.current=C;const A=r==="onPointerMove",m=r==="onClick"||r==="onContextMenu"||r==="onDoubleClick",p=n(C,A?t:void 0),b=m?e(C):0;r==="onPointerDown"&&(d.initialClick=[C.offsetX,C.offsetY],d.initialHits=p.map(y=>y.eventObject)),m&&!p.length&&b<=2&&(o(C,d.interaction),u&&u(C)),A&&s(p);function B(y){const Z=y.eventObject,q=Z.__r3f,W=q==null?void 0:q.handlers;if(!!(q!=null&&q.eventCount))if(A){if(W.onPointerOver||W.onPointerEnter||W.onPointerOut||W.onPointerLeave){const S=n0(y),x=d.hovered.get(S);x?x.stopped&&y.stopPropagation():(d.hovered.set(S,y),W.onPointerOver==null||W.onPointerOver(y),W.onPointerEnter==null||W.onPointerEnter(y))}W.onPointerMove==null||W.onPointerMove(y)}else{const S=W[r];S?(!m||d.initialHits.includes(Z))&&(o(C,d.interaction.filter(x=>!d.initialHits.includes(x))),S(y)):m&&d.initialHits.includes(Z)&&o(C,d.interaction.filter(x=>!d.initialHits.includes(x)))}}l(p,C,b,B)}}return{handlePointer:g}}let J3={},aG=i=>void(J3={...J3,...i});function vX(i,e){function t(C,{args:u=[],attach:d,...A},m){let f=`${C[0].toUpperCase()}${C.slice(1)}`,p;if(C==="primitive"){if(A.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const b=A.object;p=Tr(b,{type:C,root:m,attach:d,primitive:!0})}else{const b=J3[f];if(!b)throw new Error(`R3F: ${f} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(u))throw new Error("R3F: The args prop must be an array!");p=Tr(new b(...u),{type:C,root:m,attach:d,memoizedProps:{args:u}})}return p.__r3f.attach===void 0&&(p instanceof ut?p.__r3f.attach="geometry":p instanceof vn&&(p.__r3f.attach="material")),f!=="inject"&&i5(p,A),p}function n(C,u){let d=!1;if(u){var A,m;(A=u.__r3f)!=null&&A.attach?n5(C,u,u.__r3f.attach):u.isObject3D&&C.isObject3D&&(C.add(u),d=!0),d||(m=C.__r3f)==null||m.objects.push(u),u.__r3f||Tr(u,{}),u.__r3f.parent=C,E3(u),Er(u)}}function l(C,u,d){let A=!1;if(u){var m,f;if((m=u.__r3f)!=null&&m.attach)n5(C,u,u.__r3f.attach);else if(u.isObject3D&&C.isObject3D){u.parent=C,u.dispatchEvent({type:"added"});const p=C.children.filter(B=>B!==u),b=p.indexOf(d);C.children=[...p.slice(0,b),u,...p.slice(b)],A=!0}A||(f=C.__r3f)==null||f.objects.push(u),u.__r3f||Tr(u,{}),u.__r3f.parent=C,E3(u),Er(u)}}function s(C,u,d=!1){C&&[...C].forEach(A=>o(u,A,d))}function o(C,u,d){if(u){var A,m,f;if(u.__r3f&&(u.__r3f.parent=null),(A=C.__r3f)!=null&&A.objects&&(C.__r3f.objects=C.__r3f.objects.filter(Z=>Z!==u)),(m=u.__r3f)!=null&&m.attach)lp(C,u,u.__r3f.attach);else if(u.isObject3D&&C.isObject3D){var p;C.remove(u),(p=u.__r3f)!=null&&p.root&&BX(u.__r3f.root,u)}const B=(f=u.__r3f)==null?void 0:f.primitive,y=d===void 0?u.dispose!==null&&!B:d;if(!B){var b;s((b=u.__r3f)==null?void 0:b.objects,u,y),s(u.children,u,y)}u.__r3f&&(delete u.__r3f.root,delete u.__r3f.objects,delete u.__r3f.handlers,delete u.__r3f.memoizedProps,B||delete u.__r3f),y&&u.dispose&&u.type!=="Scene"&&k3.exports.unstable_scheduleCallback(k3.exports.unstable_IdlePriority,()=>{try{u.dispose()}catch{}}),Er(C)}}function g(C,u,d,A){var m;const f=(m=C.__r3f)==null?void 0:m.parent;if(!f)return;const p=t(u,d,C.__r3f.root);if(C.children){for(const b of C.children)b.__r3f&&n(p,b);C.children=C.children.filter(b=>!b.__r3f)}C.__r3f.objects.forEach(b=>n(p,b)),C.__r3f.objects=[],o(f,C),n(f,p),p.raycast&&p.__r3f.eventCount&&p.__r3f.root.getState().internal.interaction.push(p),[A,A.alternate].forEach(b=>{b!==null&&(b.stateNode=p,b.ref&&(typeof b.ref=="function"?b.ref(p):b.ref.current=p))})}const r=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:oX({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:l,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(C,u)=>{if(!u)return;const d=C.getState().scene;!d.__r3f||(d.__r3f.root=C,n(d,u))},removeChildFromContainer:(C,u)=>{!u||o(C.getState().scene,u)},insertInContainerBefore:(C,u,d)=>{if(!u||!d)return;const A=C.getState().scene;!A.__r3f||l(A,u,d)},getRootHostContext:()=>null,getChildHostContext:C=>C,finalizeInitialChildren(C){var u;const d=(u=C==null?void 0:C.__r3f)!=null?u:{};return Boolean(d.handlers)},prepareUpdate(C,u,d,A){if(C.__r3f.primitive&&A.object&&A.object!==C)return[!0];{const{args:m=[],children:f,...p}=A,{args:b=[],children:B,...y}=d;if(!Array.isArray(m))throw new Error("R3F: the args prop must be an array!");if(m.some((q,W)=>q!==b[W]))return[!0];const Z=gG(C,p,y,!0);return Z.changes.length?[!1,Z]:null}},commitUpdate(C,[u,d],A,m,f,p){u?g(C,A,f,p):i5(C,d)},commitMount(C,u,d,A){var m;const f=(m=C.__r3f)!=null?m:{};C.raycast&&f.handlers&&f.eventCount&&C.__r3f.root.getState().internal.interaction.push(C)},getPublicInstance:C=>C,prepareForCommit:()=>null,preparePortalMount:C=>Tr(C.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(C){var u;const{attach:d,parent:A}=(u=C.__r3f)!=null?u:{};d&&A&&lp(A,C,d),C.isObject3D&&(C.visible=!1),Er(C)},unhideInstance(C,u){var d;const{attach:A,parent:m}=(d=C.__r3f)!=null?d:{};A&&m&&n5(m,C,A),(C.isObject3D&&u.visible==null||u.visible)&&(C.visible=!0),Er(C)},createTextInstance:r,hideTextInstance:r,unhideTextInstance:r,getCurrentEventPriority:()=>e?e():Mg.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Cn.fun(performance.now)?performance.now:Cn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Cn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Cn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:i5}}const IG=i=>!!(i!=null&&i.render),cG=Ce.exports.createContext(null),xX=(i,e)=>{const t=Qb((g,r)=>{const I=new K,C=new K,u=new K;function d(b=r().camera,B=C,y=r().size){const{width:Z,height:q,top:W,left:S}=y,x=Z/q;B instanceof K?u.copy(B):u.set(...B);const V=b.getWorldPosition(I).distanceTo(u);if(nG(b))return{width:Z/b.zoom,height:q/b.zoom,top:W,left:S,factor:1,distance:V,aspect:x};{const X=b.fov*Math.PI/180,k=2*Math.tan(X/2)*V,$=k*(Z/q);return{width:$,height:k,top:W,left:S,factor:Z/$,distance:V,aspect:x}}}let A;const m=b=>g(B=>({performance:{...B.performance,current:b}})),f=new me;return{set:g,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(b=1)=>i(r(),b),advance:(b,B)=>e(b,B,r()),legacy:!1,linear:!1,flat:!1,scene:Tr(new Ih),controls:null,clock:new Rh,pointer:f,mouse:f,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=r();A&&clearTimeout(A),b.performance.current!==b.performance.min&&m(b.performance.min),A=setTimeout(()=>m(r().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:b=>g(B=>({...B,events:{...B.events,...b}})),setSize:(b,B,y,Z,q)=>{const W=r().camera,S={width:b,height:B,top:Z||0,left:q||0,updateStyle:y};g(x=>({size:S,viewport:{...x.viewport,...d(W,C,S)}}))},setDpr:b=>g(B=>{const y=oG(b);return{viewport:{...B.viewport,dpr:y,initialDpr:B.viewport.initialDpr||y}}}),setFrameloop:(b="always")=>{const B=r().clock;B.stop(),B.elapsedTime=0,b!=="never"&&(B.start(),B.elapsedTime=0),g(()=>({frameloop:b}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Ce.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(b,B,y)=>{const Z=r().internal;return Z.priority=Z.priority+(B>0?1:0),Z.subscribers.push({ref:b,priority:B,store:y}),Z.subscribers=Z.subscribers.sort((q,W)=>q.priority-W.priority),()=>{const q=r().internal;q!=null&&q.subscribers&&(q.priority=q.priority-(B>0?1:0),q.subscribers=q.subscribers.filter(W=>W.ref!==b))}}}}}),n=t.getState();let l=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:g,size:r,viewport:I,gl:C,set:u}=t.getState();(r!==l||I.dpr!==s)&&(l=r,s=I.dpr,bX(g,r),C.setPixelRatio(I.dpr),C.setSize(r.width,r.height,r.updateStyle)),g!==o&&(o=g,u(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(g)}})))}),t.subscribe(g=>i(g)),t};let i0,qX=new Set,wX=new Set,WX=new Set;function l5(i,e){if(!!i.size)for(const{callback:t}of i.values())t(e)}function w1(i,e){switch(i){case"before":return l5(qX,e);case"after":return l5(wX,e);case"tail":return l5(WX,e)}}let s5,o5;function g5(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),s5=e.internal.subscribers,i0=0;i0<s5.length;i0++)o5=s5[i0],o5.ref.current(o5.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function SX(i){let e=!1,t,n,l;function s(r){n=requestAnimationFrame(s),e=!0,t=0,w1("before",r);for(const C of i.values()){var I;l=C.store.getState(),l.internal.active&&(l.frameloop==="always"||l.internal.frames>0)&&!((I=l.gl.xr)!=null&&I.isPresenting)&&(t+=g5(r,l))}if(w1("after",r),t===0)return w1("tail",r),e=!1,cancelAnimationFrame(n)}function o(r,I=1){var C;if(!r)return i.forEach(u=>o(u.store.getState()),I);(C=r.gl.xr)!=null&&C.isPresenting||!r.internal.active||r.frameloop==="never"||(r.internal.frames=Math.min(60,r.internal.frames+I),e||(e=!0,requestAnimationFrame(s)))}function g(r,I=!0,C,u){if(I&&w1("before",r),C)g5(r,C,u);else for(const d of i.values())g5(r,d.store.getState());I&&w1("after",r)}return{loop:s,invalidate:o,advance:g}}function CG(){const i=Ce.exports.useContext(cG);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Fi(i=t=>t,e){return CG()(i,e)}function lg(i,e=0){const t=CG(),n=t.getState().internal.subscribe,l=iG(i);return tc(()=>n(l,e,t),[e,n,t]),null}function uG(i,e){return function(t,...n){const l=new t;return i&&i(l),Promise.all(n.map(s=>new Promise((o,g)=>l.load(s,r=>{r.scene&&Object.assign(r,pX(r.scene)),o(r)},e,r=>g(new Error(`Could not load ${s}: ${r.message})`))))))}}function Ht(i,e,t,n){const l=Array.isArray(e)?e:[e],s=eG(uG(t,n),[i,...l],{equal:Cn.equ});return Array.isArray(e)?s:s[0]}Ht.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return gX(uG(t),[i,...n])};Ht.clear=function(i,e){const t=Array.isArray(e)?e:[e];return rX([i,...t])};const Va=new Map,{invalidate:sp,advance:op}=SX(Va),{reconciler:g2,applyProps:l0}=vX(Va,yX),kr={objects:"shallow",strict:!1},VX=(i,e)=>{const t=typeof i=="function"?i(e):i;return IG(t)?t:new ah({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function RX(i){return i instanceof HTMLCanvasElement}function XX(i,e){if(e)return e;if(RX(i)&&i.parentElement){const{width:t,height:n,top:l,left:s}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:l,left:s}}return{width:0,height:0,top:0,left:0}}function YX(i){const e=Va.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const l=typeof reportError=="function"?reportError:console.error,s=n||xX(sp,op),o=t||g2.createContainer(s,Mg.exports.ConcurrentRoot,null,!1,null,"",l,null);e||Va.set(i,{fiber:o,store:s});let g,r=!1;return{configure(I={}){let{gl:C,size:u,events:d,onCreated:A,shadows:m=!1,linear:f=!1,flat:p=!1,legacy:b=!1,orthographic:B=!1,frameloop:y="always",dpr:Z=[1,2],performance:q,raycaster:W,camera:S,onPointerMissed:x}=I,V=s.getState(),X=V.gl;V.gl||V.set({gl:X=VX(C,i)});let k=V.raycaster;k||V.set({raycaster:k=new Jb});const{params:$,...Q}=W||{};if(Cn.equ(Q,k,kr)||l0(k,{...Q}),Cn.equ($,k.params,kr)||l0(k,{params:{...k.params,...$}}),!V.camera){const oe=S instanceof FI,R=oe?S:B?new Ll(0,0,0,0,.1,1e3):new Et(75,0,.1,1e3);oe||(R.position.z=5,S&&l0(R,S),S!=null&&S.rotation||R.lookAt(0,0,0)),V.set({camera:R})}if(!V.xr){const oe=(H,J)=>{const P=s.getState();P.frameloop!=="never"&&op(H,!0,P,J)},R=()=>{const H=s.getState();H.gl.xr.enabled=H.gl.xr.isPresenting,H.gl.xr.setAnimationLoop(H.gl.xr.isPresenting?oe:null),H.gl.xr.isPresenting||sp(H)},Y={connect(){const H=s.getState().gl;H.xr.addEventListener("sessionstart",R),H.xr.addEventListener("sessionend",R)},disconnect(){const H=s.getState().gl;H.xr.removeEventListener("sessionstart",R),H.xr.removeEventListener("sessionend",R)}};X.xr&&Y.connect(),V.set({xr:Y})}if(X.shadowMap){const oe=Cn.boo(m);if(oe&&X.shadowMap.enabled!==m||!Cn.equ(m,X.shadowMap,kr)){const R=X.shadowMap.enabled;X.shadowMap.enabled=!!m,oe?X.shadowMap.type=QA:Object.assign(X.shadowMap,m),R!==X.shadowMap.enabled&&(X.shadowMap.needsUpdate=!0)}}"ColorManagement"in o2&&GX(o2,b,["ColorManagement","legacyMode"]);const E=f?Qs:Yt,te=p?Fl:jA;X.outputEncoding!==E&&(X.outputEncoding=E),X.toneMapping!==te&&(X.toneMapping=te),V.legacy!==b&&V.set(()=>({legacy:b})),V.linear!==f&&V.set(()=>({linear:f})),V.flat!==p&&V.set(()=>({flat:p})),C&&!Cn.fun(C)&&!IG(C)&&!Cn.equ(C,X,kr)&&l0(X,C),d&&!V.events.handlers&&V.set({events:d(s)}),Z&&V.viewport.dpr!==oG(Z)&&V.setDpr(Z);const se=XX(i,u);return Cn.equ(se,V.size,kr)||V.setSize(se.width,se.height,se.updateStyle,se.top,se.left),V.frameloop!==y&&V.setFrameloop(y),V.onPointerMissed||V.set({onPointerMissed:x}),q&&!Cn.equ(q,V.performance,kr)&&V.set(oe=>({performance:{...oe.performance,...q}})),g=A,r=!0,this},render(I){return r||this.configure(),g2.updateContainer(Be(zX,{store:s,children:I,onCreated:g,rootElement:i}),o,null,()=>{}),s},unmount(){dG(i)}}}function zX({store:i,children:e,onCreated:t,rootElement:n}){return tc(()=>{const l=i.getState();l.set(s=>({internal:{...s.internal,active:!0}})),t&&t(l),i.getState().events.connected||l.events.connect==null||l.events.connect(n)},[]),Ce.exports.createElement(cG.Provider,{value:i},e)}function dG(i,e){const t=Va.get(i),n=t==null?void 0:t.fiber;if(n){const l=t==null?void 0:t.store.getState();l&&(l.internal.active=!1),g2.updateContainer(null,n,null,()=>{l&&setTimeout(()=>{try{var s,o,g,r;l.events.disconnect==null||l.events.disconnect(),(s=l.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(g=l.gl)==null||g.forceContextLoss==null||g.forceContextLoss(),(r=l.gl)!=null&&r.xr&&l.xr.disconnect(),fX(l),Va.delete(i),e&&e(i)}catch{}},500)})}}g2.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ce.exports.version});function U3(i,e,t){var n,l,s,o,g;e==null&&(e=100);function r(){var C=Date.now()-o;C<e&&C>=0?n=setTimeout(r,e-C):(n=null,t||(g=i.apply(s,l),s=l=null))}var I=function(){s=this,l=arguments,o=Date.now();var C=t&&!n;return n||(n=setTimeout(r,e)),C&&(g=i.apply(s,l),s=l=null),g};return I.clear=function(){n&&(clearTimeout(n),n=null)},I.flush=function(){n&&(g=i.apply(s,l),s=l=null,clearTimeout(n),n=null)},I}U3.debounce=U3;var gp=U3;function KX(i){let{debounce:e,scroll:t,polyfill:n,offsetSize:l}=i===void 0?{debounce:0,scroll:!1,offsetSize:!1}:i;const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,g]=Ce.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),r=Ce.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),I=e?typeof e=="number"?e:e.scroll:null,C=e?typeof e=="number"?e:e.resize:null,u=Ce.exports.useRef(!1);Ce.exports.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[d,A,m]=Ce.exports.useMemo(()=>{const B=()=>{if(!r.current.element)return;const{left:y,top:Z,width:q,height:W,bottom:S,right:x,x:V,y:X}=r.current.element.getBoundingClientRect(),k={left:y,top:Z,width:q,height:W,bottom:S,right:x,x:V,y:X};r.current.element instanceof HTMLElement&&l&&(k.height=r.current.element.offsetHeight,k.width=r.current.element.offsetWidth),Object.freeze(k),u.current&&!FX(r.current.lastBounds,k)&&g(r.current.lastBounds=k)};return[B,C?gp(B,C):B,I?gp(B,I):B]},[g,l,I,C]);function f(){r.current.scrollContainers&&(r.current.scrollContainers.forEach(B=>B.removeEventListener("scroll",m,!0)),r.current.scrollContainers=null),r.current.resizeObserver&&(r.current.resizeObserver.disconnect(),r.current.resizeObserver=null)}function p(){!r.current.element||(r.current.resizeObserver=new s(m),r.current.resizeObserver.observe(r.current.element),t&&r.current.scrollContainers&&r.current.scrollContainers.forEach(B=>B.addEventListener("scroll",m,{capture:!0,passive:!0})))}const b=B=>{!B||B===r.current.element||(f(),r.current.element=B,r.current.scrollContainers=AG(B),p())};return NX(m,Boolean(t)),HX(A),Ce.exports.useEffect(()=>{f(),p()},[t,m,A]),Ce.exports.useEffect(()=>f,[]),[b,o,d]}function HX(i){Ce.exports.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function NX(i,e){Ce.exports.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function AG(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:l}=window.getComputedStyle(i);return[t,n,l].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...AG(i.parentElement)]}const MX=["x","y","top","bottom","left","right","width","height"],FX=(i,e)=>MX.every(t=>i[t]===e[t]);var LX=Object.defineProperty,_X=Object.defineProperties,kX=Object.getOwnPropertyDescriptors,rp=Object.getOwnPropertySymbols,TX=Object.prototype.hasOwnProperty,EX=Object.prototype.propertyIsEnumerable,ap=(i,e,t)=>e in i?LX(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ip=(i,e)=>{for(var t in e||(e={}))TX.call(e,t)&&ap(i,t,e[t]);if(rp)for(var t of rp(e))EX.call(e,t)&&ap(i,t,e[t]);return i},JX=(i,e)=>_X(i,kX(e));function Kh(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const l=Kh(n,e,t);if(l)return l;n=e?null:n.sibling}}function hG(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const Hh=hG(Ce.exports.createContext(null));class mG extends Ce.exports.Component{render(){return Be(Hh.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:UX,ReactCurrentDispatcher:DX}=Ce.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function QX(){const i=Ce.exports.useContext(Hh);if(!i)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ce.exports.useId();return Ce.exports.useMemo(()=>{var n;return(n=UX.current)!=null?n:Kh(i,!1,l=>{let s=l.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[i,e])}const W1=[],cp=new WeakMap;function PX(){var i;const e=QX();W1.splice(0,W1.length),Kh(e,!0,t=>{var n;const l=(n=t.type)==null?void 0:n._context;l&&l!==Hh&&W1.push(hG(l))});for(const t of W1){const n=(i=DX.current)==null?void 0:i.readContext(t);cp.set(t,n)}return Ce.exports.useMemo(()=>W1.reduce((t,n)=>l=>Ce.exports.createElement(t,null,Ce.exports.createElement(n.Provider,JX(Ip({},l),{value:cp.get(n)}))),t=>Be(mG,{...Ip({},t)})),[])}const r5={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function OX(i){const{handlePointer:e}=ZX(i);return{priority:1,enabled:!0,compute(t,n,l){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(r5).reduce((t,n)=>({...t,[n]:e(n)}),{}),connect:t=>{var n;const{set:l,events:s}=i.getState();s.disconnect==null||s.disconnect(),l(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,g])=>{const[r,I]=r5[o];t.addEventListener(r,g,{passive:I})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var l;Object.entries((l=n.handlers)!=null?l:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[g]=r5[s];n.connected.removeEventListener(g,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const jX=Ce.exports.forwardRef(function({children:e,fallback:t,resize:n,style:l,gl:s,events:o=OX,eventSource:g,eventPrefix:r,shadows:I,linear:C,flat:u,legacy:d,orthographic:A,frameloop:m,dpr:f,performance:p,raycaster:b,camera:B,onPointerMissed:y,onCreated:Z,...q},W){Ce.exports.useMemo(()=>aG(o2),[]);const S=PX(),[x,V]=KX({scroll:!0,debounce:{scroll:50,resize:0},...n}),X=Ce.exports.useRef(null),k=Ce.exports.useRef(null),[$,Q]=Ce.exports.useState(null);Ce.exports.useImperativeHandle(W,()=>X.current);const E=iG(y),[te,se]=Ce.exports.useState(!1),[oe,R]=Ce.exports.useState(!1);if(te)throw te;if(oe)throw oe;const Y=Ce.exports.useRef(null);return V.width>0&&V.height>0&&$&&(Y.current||(Y.current=YX($)),Y.current.configure({gl:s,events:o,shadows:I,linear:C,flat:u,legacy:d,orthographic:A,frameloop:m,dpr:f,performance:p,raycaster:b,camera:B,size:V,onPointerMissed:(...J)=>E.current==null?void 0:E.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(g?AX(g)?g.current:g:k.current),r&&J.setEvents({compute:(P,ne)=>{const fe=P[r+"X"],We=P[r+"Y"];ne.pointer.set(fe/ne.size.width*2-1,-(We/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),Z==null||Z(J)}}),Y.current.render(Be(S,{children:Be(lG,{set:R,children:Be(Ce.exports.Suspense,{fallback:Be(hX,{set:se}),children:e})})}))),tc(()=>{Q(X.current)},[]),Ce.exports.useEffect(()=>{if($)return()=>dG($)},[$]),Be("div",{ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:g?"none":"auto",...l},...q,children:Be("div",{ref:x,style:{width:"100%",height:"100%"},children:Be("canvas",{ref:X,style:{display:"block"},children:t})})})}),$X=Ce.exports.forwardRef(function(e,t){return Be(mG,{children:Be(jX,{...e,ref:t})})}),nc=new K,Nh=new K,eY=new K;function tY(i,e,t){const n=nc.setFromMatrixPosition(i.matrixWorld);n.project(e);const l=t.width/2,s=t.height/2;return[n.x*l+l,-(n.y*s)+s]}function nY(i,e){const t=nc.setFromMatrixPosition(i.matrixWorld),n=Nh.setFromMatrixPosition(e.matrixWorld),l=t.sub(n),s=e.getWorldDirection(eY);return l.angleTo(s)>Math.PI/2}function iY(i,e,t,n){const l=nc.setFromMatrixPosition(i.matrixWorld),s=l.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(n,!0);if(o.length){const g=o[0].distance;return l.distanceTo(t.ray.origin)<g}return!0}function lY(i,e){if(e instanceof Ll)return e.zoom;if(e instanceof Et){const t=nc.setFromMatrixPosition(i.matrixWorld),n=Nh.setFromMatrixPosition(e.matrixWorld),l=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(l/2)*s)}else return 1}function sY(i,e,t){if(e instanceof Et||e instanceof Ll){const n=nc.setFromMatrixPosition(i.matrixWorld),l=Nh.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(l),o=(t[1]-t[0])/(e.far-e.near),g=t[1]-o*e.far;return Math.round(o*s+g)}}const D3=i=>Math.abs(i)<1e-10?0:i;function pG(i,e,t=""){let n="matrix3d(";for(let l=0;l!==16;l++)n+=D3(e[l]*i.elements[l])+(l!==15?",":")");return t+n}const oY=(i=>e=>pG(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),gY=(i=>(e,t)=>pG(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]),rY=Ce.exports.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:l,center:s,fullscreen:o,portal:g,distanceFactor:r,sprite:I=!1,transform:C=!1,occlude:u,onOcclude:d,zIndexRange:A=[16777271,0],calculatePosition:m=tY,as:f="div",wrapperClass:p,pointerEvents:b="auto",...B},y)=>{const{gl:Z,camera:q,scene:W,size:S,raycaster:x,events:V}=Fi(),[X]=Ce.exports.useState(()=>document.createElement(f)),k=Ce.exports.useRef(),$=Ce.exports.useRef(null),Q=Ce.exports.useRef(0),E=Ce.exports.useRef([0,0]),te=Ce.exports.useRef(null),se=Ce.exports.useRef(null),oe=(g==null?void 0:g.current)||V.connected||Z.domElement.parentNode;Ce.exports.useLayoutEffect(()=>{if($.current){const J=k.current=O8(X);if(W.updateMatrixWorld(),C)X.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const P=m($.current,q,S);X.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${P[0]}px,${P[1]}px,0);transform-origin:0 0;`}return oe&&(l?oe.prepend(X):oe.appendChild(X)),()=>{oe&&oe.removeChild(X),J.unmount()}}},[oe,C]),Ce.exports.useLayoutEffect(()=>{p&&(X.className=p)},[p]);const R=Ce.exports.useMemo(()=>C?{position:"absolute",top:0,left:0,width:S.width,height:S.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-S.height/2,left:-S.width/2,width:S.width,height:S.height},...t},[t,s,o,S,C]),Y=Ce.exports.useMemo(()=>({position:"absolute",pointerEvents:b}),[b]);Ce.exports.useLayoutEffect(()=>{if(C){var J;(J=k.current)==null||J.render(Be("div",{ref:te,style:R,children:Be("div",{ref:se,style:Y,children:Be("div",{ref:y,className:n,style:t,children:i})})}))}else{var P;(P=k.current)==null||P.render(Be("div",{ref:y,style:R,className:n,children:i}))}});const H=Ce.exports.useRef(!0);return lg(()=>{if($.current){q.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);const J=C?E.current:m($.current,q,S);if(C||Math.abs(Q.current-q.zoom)>e||Math.abs(E.current[0]-J[0])>e||Math.abs(E.current[1]-J[1])>e){const P=nY($.current,q);let ne=!1;typeof u=="boolean"?u===!0&&(ne=[W]):Array.isArray(u)&&(ne=u.map(We=>We.current));const fe=H.current;if(ne){const We=iY($.current,q,x,ne);H.current=We&&!P}else H.current=!P;if(fe!==H.current&&(d?d(!H.current):X.style.display=H.current?"block":"none"),X.style.zIndex=`${sY($.current,q,A)}`,C){const[We,le]=[S.width/2,S.height/2],_e=q.projectionMatrix.elements[5]*le,{isOrthographicCamera:Te,top:je,left:Se,bottom:tt,right:Ae}=q,Ie=oY(q.matrixWorldInverse),ve=Te?`scale(${_e})translate(${D3(-(Ae+Se)/2)}px,${D3((je+tt)/2)}px)`:`translateZ(${_e}px)`;let Ne=$.current.matrixWorld;I&&(Ne=q.matrixWorldInverse.clone().transpose().copyPosition(Ne).scale($.current.scale),Ne.elements[3]=Ne.elements[7]=Ne.elements[11]=0,Ne.elements[15]=1),X.style.width=S.width+"px",X.style.height=S.height+"px",X.style.perspective=Te?"":`${_e}px`,te.current&&se.current&&(te.current.style.transform=`${ve}${Ie}translate(${We}px,${le}px)`,se.current.style.transform=gY(Ne,1/((r||10)/400)))}else{const We=r===void 0?1:lY($.current,q)*r;X.style.transform=`translate3d(${J[0]}px,${J[1]}px,0) scale(${We})`}E.current=J,Q.current=q.zoom}}}),Be("group",{...B,ref:$})});let S1=0;const aY=Qb(i=>(ra.onStart=(e,t,n)=>{i({active:!0,item:e,loaded:t,total:n,progress:(t-S1)/(n-S1)*100})},ra.onLoad=()=>{i({active:!1})},ra.onError=e=>i(t=>({errors:[...t.errors,e]})),ra.onProgress=(e,t,n)=>{t===n&&(S1=n),i({active:!0,item:e,loaded:t,total:n,progress:(t-S1)/(n-S1)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function IY(i){return function(e){i.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function gt(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}const Cp=(i,e)=>(i%e+e)%e;class cY extends hs{constructor(e,t){super(),gt(this,"object",void 0),gt(this,"domElement",void 0),gt(this,"enabled",!0),gt(this,"target",new K),gt(this,"minDistance",0),gt(this,"maxDistance",1/0),gt(this,"minZoom",0),gt(this,"maxZoom",1/0),gt(this,"minPolarAngle",0),gt(this,"maxPolarAngle",Math.PI),gt(this,"minAzimuthAngle",-1/0),gt(this,"maxAzimuthAngle",1/0),gt(this,"enableDamping",!1),gt(this,"dampingFactor",.05),gt(this,"enableZoom",!0),gt(this,"zoomSpeed",1),gt(this,"enableRotate",!0),gt(this,"rotateSpeed",1),gt(this,"enablePan",!0),gt(this,"panSpeed",1),gt(this,"screenSpacePanning",!0),gt(this,"keyPanSpeed",7),gt(this,"autoRotate",!1),gt(this,"autoRotateSpeed",2),gt(this,"reverseOrbit",!1),gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gt(this,"mouseButtons",{LEFT:Zg.ROTATE,MIDDLE:Zg.DOLLY,RIGHT:Zg.PAN}),gt(this,"touches",{ONE:vg.ROTATE,TWO:vg.DOLLY_PAN}),gt(this,"target0",void 0),gt(this,"position0",void 0),gt(this,"zoom0",void 0),gt(this,"_domElementKeyEvents",null),gt(this,"getPolarAngle",void 0),gt(this,"getAzimuthalAngle",void 0),gt(this,"setPolarAngle",void 0),gt(this,"setAzimuthalAngle",void 0),gt(this,"getDistance",void 0),gt(this,"listenToKeyEvents",void 0),gt(this,"saveState",void 0),gt(this,"reset",void 0),gt(this,"update",void 0),gt(this,"connect",void 0),gt(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Et?this.object.zoom:1,this.getPolarAngle=()=>C.phi,this.getAzimuthalAngle=()=>C.theta,this.setPolarAngle=T=>{let re=Cp(T,2*Math.PI),Ge=C.phi;Ge<0&&(Ge+=2*Math.PI),re<0&&(re+=2*Math.PI);let we=Math.abs(re-Ge);2*Math.PI-we<we&&(re<Ge?re+=2*Math.PI:Ge+=2*Math.PI),u.phi=re-Ge,n.update()},this.setAzimuthalAngle=T=>{let re=Cp(T,2*Math.PI),Ge=C.theta;Ge<0&&(Ge+=2*Math.PI),re<0&&(re+=2*Math.PI);let we=Math.abs(re-Ge);2*Math.PI-we<we&&(re<Ge?re+=2*Math.PI:Ge+=2*Math.PI),u.theta=re-Ge,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=T=>{T.addEventListener("keydown",ge),this._domElementKeyEvents=T},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object instanceof Et?n.object.zoom:1},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object instanceof Et&&(n.object.zoom=n.zoom0,n.object.updateProjectionMatrix()),n.dispatchEvent(l),n.update(),r=g.NONE},this.update=(()=>{const T=new K,re=new bn().setFromUnitVectors(e.up,new K(0,1,0)),Ge=re.clone().invert(),we=new K,nt=new bn,pt=2*Math.PI;return function(){const U=n.object.position;T.copy(U).sub(n.target),T.applyQuaternion(re),C.setFromVector3(T),n.autoRotate&&r===g.NONE&&$(X()),n.enableDamping?(C.theta+=u.theta*n.dampingFactor,C.phi+=u.phi*n.dampingFactor):(C.theta+=u.theta,C.phi+=u.phi);let ce=n.minAzimuthAngle,be=n.maxAzimuthAngle;return isFinite(ce)&&isFinite(be)&&(ce<-Math.PI?ce+=pt:ce>Math.PI&&(ce-=pt),be<-Math.PI?be+=pt:be>Math.PI&&(be-=pt),ce<=be?C.theta=Math.max(ce,Math.min(be,C.theta)):C.theta=C.theta>(ce+be)/2?Math.max(ce,C.theta):Math.min(be,C.theta)),C.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,C.phi)),C.makeSafe(),C.radius*=d,C.radius=Math.max(n.minDistance,Math.min(n.maxDistance,C.radius)),n.enableDamping===!0?n.target.addScaledVector(A,n.dampingFactor):n.target.add(A),T.setFromSpherical(C),T.applyQuaternion(Ge),U.copy(n.target).add(T),n.object.lookAt(n.target),n.enableDamping===!0?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,A.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),A.set(0,0,0)),d=1,m||we.distanceToSquared(n.object.position)>I||8*(1-nt.dot(n.object.quaternion))>I?(n.dispatchEvent(l),we.copy(n.object.position),nt.copy(n.object.quaternion),m=!1,!0):!1}})(),this.connect=T=>{T===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=T,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Ye),n.domElement.addEventListener("pointerdown",ot),n.domElement.addEventListener("pointercancel",vt),n.domElement.addEventListener("wheel",z)},this.dispose=()=>{var T,re,Ge,we,nt,pt;(T=n.domElement)===null||T===void 0||T.removeEventListener("contextmenu",Ye),(re=n.domElement)===null||re===void 0||re.removeEventListener("pointerdown",ot),(Ge=n.domElement)===null||Ge===void 0||Ge.removeEventListener("pointercancel",vt),(we=n.domElement)===null||we===void 0||we.removeEventListener("wheel",z),(nt=n.domElement)===null||nt===void 0||nt.ownerDocument.removeEventListener("pointermove",$e),(pt=n.domElement)===null||pt===void 0||pt.ownerDocument.removeEventListener("pointerup",Oe),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",ge)};const n=this,l={type:"change"},s={type:"start"},o={type:"end"},g={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=g.NONE;const I=1e-6,C=new s2,u=new s2;let d=1;const A=new K;let m=!1;const f=new me,p=new me,b=new me,B=new me,y=new me,Z=new me,q=new me,W=new me,S=new me,x=[],V={};function X(){return 2*Math.PI/60/60*n.autoRotateSpeed}function k(){return Math.pow(.95,n.zoomSpeed)}function $(T){n.reverseOrbit?u.theta+=T:u.theta-=T}function Q(T){n.reverseOrbit?u.phi+=T:u.phi-=T}const E=(()=>{const T=new K;return function(Ge,we){T.setFromMatrixColumn(we,0),T.multiplyScalar(-Ge),A.add(T)}})(),te=(()=>{const T=new K;return function(Ge,we){n.screenSpacePanning===!0?T.setFromMatrixColumn(we,1):(T.setFromMatrixColumn(we,0),T.crossVectors(n.object.up,T)),T.multiplyScalar(Ge),A.add(T)}})(),se=(()=>{const T=new K;return function(Ge,we){const nt=n.domElement;if(nt&&n.object instanceof Et&&n.object.isPerspectiveCamera){const pt=n.object.position;T.copy(pt).sub(n.target);let Ut=T.length();Ut*=Math.tan(n.object.fov/2*Math.PI/180),E(2*Ge*Ut/nt.clientHeight,n.object.matrix),te(2*we*Ut/nt.clientHeight,n.object.matrix)}else nt&&n.object instanceof Ll&&n.object.isOrthographicCamera?(E(Ge*(n.object.right-n.object.left)/n.object.zoom/nt.clientWidth,n.object.matrix),te(we*(n.object.top-n.object.bottom)/n.object.zoom/nt.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function oe(T){n.object instanceof Et&&n.object.isPerspectiveCamera?d/=T:n.object instanceof Ll&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*T)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(T){n.object instanceof Et&&n.object.isPerspectiveCamera?d*=T:n.object instanceof Ll&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/T)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Y(T){f.set(T.clientX,T.clientY)}function H(T){q.set(T.clientX,T.clientY)}function J(T){B.set(T.clientX,T.clientY)}function P(T){p.set(T.clientX,T.clientY),b.subVectors(p,f).multiplyScalar(n.rotateSpeed);const re=n.domElement;re&&($(2*Math.PI*b.x/re.clientHeight),Q(2*Math.PI*b.y/re.clientHeight)),f.copy(p),n.update()}function ne(T){W.set(T.clientX,T.clientY),S.subVectors(W,q),S.y>0?oe(k()):S.y<0&&R(k()),q.copy(W),n.update()}function fe(T){y.set(T.clientX,T.clientY),Z.subVectors(y,B).multiplyScalar(n.panSpeed),se(Z.x,Z.y),B.copy(y),n.update()}function We(T){T.deltaY<0?R(k()):T.deltaY>0&&oe(k()),n.update()}function le(T){let re=!1;switch(T.code){case n.keys.UP:se(0,n.keyPanSpeed),re=!0;break;case n.keys.BOTTOM:se(0,-n.keyPanSpeed),re=!0;break;case n.keys.LEFT:se(n.keyPanSpeed,0),re=!0;break;case n.keys.RIGHT:se(-n.keyPanSpeed,0),re=!0;break}re&&(T.preventDefault(),n.update())}function _e(){if(x.length==1)f.set(x[0].pageX,x[0].pageY);else{const T=.5*(x[0].pageX+x[1].pageX),re=.5*(x[0].pageY+x[1].pageY);f.set(T,re)}}function Te(){if(x.length==1)B.set(x[0].pageX,x[0].pageY);else{const T=.5*(x[0].pageX+x[1].pageX),re=.5*(x[0].pageY+x[1].pageY);B.set(T,re)}}function je(){const T=x[0].pageX-x[1].pageX,re=x[0].pageY-x[1].pageY,Ge=Math.sqrt(T*T+re*re);q.set(0,Ge)}function Se(){n.enableZoom&&je(),n.enablePan&&Te()}function tt(){n.enableZoom&&je(),n.enableRotate&&_e()}function Ae(T){if(x.length==1)p.set(T.pageX,T.pageY);else{const Ge=Ee(T),we=.5*(T.pageX+Ge.x),nt=.5*(T.pageY+Ge.y);p.set(we,nt)}b.subVectors(p,f).multiplyScalar(n.rotateSpeed);const re=n.domElement;re&&($(2*Math.PI*b.x/re.clientHeight),Q(2*Math.PI*b.y/re.clientHeight)),f.copy(p)}function Ie(T){if(x.length==1)y.set(T.pageX,T.pageY);else{const re=Ee(T),Ge=.5*(T.pageX+re.x),we=.5*(T.pageY+re.y);y.set(Ge,we)}Z.subVectors(y,B).multiplyScalar(n.panSpeed),se(Z.x,Z.y),B.copy(y)}function ve(T){const re=Ee(T),Ge=T.pageX-re.x,we=T.pageY-re.y,nt=Math.sqrt(Ge*Ge+we*we);W.set(0,nt),S.set(0,Math.pow(W.y/q.y,n.zoomSpeed)),oe(S.y),q.copy(W)}function Ne(T){n.enableZoom&&ve(T),n.enablePan&&Ie(T)}function Xe(T){n.enableZoom&&ve(T),n.enableRotate&&Ae(T)}function ot(T){if(n.enabled!==!1){if(x.length===0){var re,Ge;(re=n.domElement)===null||re===void 0||re.ownerDocument.addEventListener("pointermove",$e),(Ge=n.domElement)===null||Ge===void 0||Ge.ownerDocument.addEventListener("pointerup",Oe)}lt(T),T.pointerType==="touch"?ye(T):zt(T)}}function $e(T){n.enabled!==!1&&(T.pointerType==="touch"?qe(T):_(T))}function Oe(T){if(ze(T),x.length===0){var re,Ge,we;(re=n.domElement)===null||re===void 0||re.releasePointerCapture(T.pointerId),(Ge=n.domElement)===null||Ge===void 0||Ge.ownerDocument.removeEventListener("pointermove",$e),(we=n.domElement)===null||we===void 0||we.ownerDocument.removeEventListener("pointerup",Oe)}n.dispatchEvent(o),r=g.NONE}function vt(T){ze(T)}function zt(T){let re;switch(T.button){case 0:re=n.mouseButtons.LEFT;break;case 1:re=n.mouseButtons.MIDDLE;break;case 2:re=n.mouseButtons.RIGHT;break;default:re=-1}switch(re){case Zg.DOLLY:if(n.enableZoom===!1)return;H(T),r=g.DOLLY;break;case Zg.ROTATE:if(T.ctrlKey||T.metaKey||T.shiftKey){if(n.enablePan===!1)return;J(T),r=g.PAN}else{if(n.enableRotate===!1)return;Y(T),r=g.ROTATE}break;case Zg.PAN:if(T.ctrlKey||T.metaKey||T.shiftKey){if(n.enableRotate===!1)return;Y(T),r=g.ROTATE}else{if(n.enablePan===!1)return;J(T),r=g.PAN}break;default:r=g.NONE}r!==g.NONE&&n.dispatchEvent(s)}function _(T){if(n.enabled!==!1)switch(r){case g.ROTATE:if(n.enableRotate===!1)return;P(T);break;case g.DOLLY:if(n.enableZoom===!1)return;ne(T);break;case g.PAN:if(n.enablePan===!1)return;fe(T);break}}function z(T){n.enabled===!1||n.enableZoom===!1||r!==g.NONE&&r!==g.ROTATE||(T.preventDefault(),n.dispatchEvent(s),We(T),n.dispatchEvent(o))}function ge(T){n.enabled===!1||n.enablePan===!1||le(T)}function ye(T){switch(he(T),x.length){case 1:switch(n.touches.ONE){case vg.ROTATE:if(n.enableRotate===!1)return;_e(),r=g.TOUCH_ROTATE;break;case vg.PAN:if(n.enablePan===!1)return;Te(),r=g.TOUCH_PAN;break;default:r=g.NONE}break;case 2:switch(n.touches.TWO){case vg.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Se(),r=g.TOUCH_DOLLY_PAN;break;case vg.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;tt(),r=g.TOUCH_DOLLY_ROTATE;break;default:r=g.NONE}break;default:r=g.NONE}r!==g.NONE&&n.dispatchEvent(s)}function qe(T){switch(he(T),r){case g.TOUCH_ROTATE:if(n.enableRotate===!1)return;Ae(T),n.update();break;case g.TOUCH_PAN:if(n.enablePan===!1)return;Ie(T),n.update();break;case g.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ne(T),n.update();break;case g.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Xe(T),n.update();break;default:r=g.NONE}}function Ye(T){n.enabled!==!1&&T.preventDefault()}function lt(T){x.push(T)}function ze(T){delete V[T.pointerId];for(let re=0;re<x.length;re++)if(x[re].pointerId==T.pointerId){x.splice(re,1);return}}function he(T){let re=V[T.pointerId];re===void 0&&(re=new me,V[T.pointerId]=re),re.set(T.pageX,T.pageY)}function Ee(T){const re=T.pointerId===x[0].pointerId?x[1]:x[0];return V[re.pointerId]}t!==void 0&&this.connect(t),this.update()}}class CY extends Ma{constructor(e,t){const{bevelEnabled:n=!1,bevelSize:l=8,bevelThickness:s=10,font:o,height:g=50,size:r=100,lineHeight:I=1,letterSpacing:C=0,...u}=t,d=o.generateShapes(e,r,{lineHeight:I,letterSpacing:C});super(d,{...u,bevelEnabled:n,bevelSize:l,bevelThickness:s,depth:g}),this.type="TextGeometry"}}class uY extends Ai{constructor(e){super(e)}load(e,t,n,l){const s=new Gl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const g=JSON.parse(o),r=this.parse(g);t&&t(r)},n,l)}parse(e){return new Mh(e)}}class Mh{constructor(e){gt(this,"data",void 0),this.data=e}generateShapes(e,t=100,n){const l=[],s={letterSpacing:0,lineHeight:1,...n},o=dY(e,t,this.data,s);for(let g=0,r=o.length;g<r;g++)Array.prototype.push.apply(l,o[g].toShapes(!1));return l}}gt(Mh,"isFont",void 0);gt(Mh,"type",void 0);function dY(i,e,t,n){const l=Array.from(i),s=e/t.resolution,o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,g=[];let r=0,I=0;for(let C=0;C<l.length;C++){const u=l[C];if(u===`
`)r=0,I-=o*n.lineHeight;else{const d=AY(u,s,r,I,t);d&&(r+=d.offsetX+n.letterSpacing,g.push(d.path))}}return g}function AY(i,e,t,n,l){const s=l.glyphs[i]||l.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+l.familyName+".");return}const o=new Db;let g,r,I,C,u,d,A,m;if(s.o){const f=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let p=0,b=f.length;p<b;)switch(f[p++]){case"m":g=parseInt(f[p++])*e+t,r=parseInt(f[p++])*e+n,o.moveTo(g,r);break;case"l":g=parseInt(f[p++])*e+t,r=parseInt(f[p++])*e+n,o.lineTo(g,r);break;case"q":I=parseInt(f[p++])*e+t,C=parseInt(f[p++])*e+n,u=parseInt(f[p++])*e+t,d=parseInt(f[p++])*e+n,o.quadraticCurveTo(u,d,I,C);break;case"b":I=parseInt(f[p++])*e+t,C=parseInt(f[p++])*e+n,u=parseInt(f[p++])*e+t,d=parseInt(f[p++])*e+n,A=parseInt(f[p++])*e+t,m=parseInt(f[p++])*e+n,o.bezierCurveTo(u,d,A,m,I,C);break}}return{offsetX:s.ha*e,path:o}}const hY=["string","number"],mY=i=>{let e="";const t=[];return Ce.exports.Children.forEach(i,n=>{hY.includes(typeof n)?e+=n+"":t.push(n)}),[e,...t]},Is=Ce.exports.forwardRef(({font:i,letterSpacing:e=0,lineHeight:t=1,size:n=1,height:l=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:g=!1,bevelOffset:r=0,bevelSegments:I=4,curveSegments:C=8,children:u,...d},A)=>{Ce.exports.useMemo(()=>aG({RenamedTextGeometry:CY}),[]);const m=eG(async()=>{let y=typeof i=="string"?await(await fetch(i)).json():i;return new uY().parse(y)},[i]),f=Ce.exports.useMemo(()=>({font:m,size:n,height:l,bevelThickness:s,bevelSize:o,bevelEnabled:g,bevelSegments:I,bevelOffset:r,curveSegments:C,letterSpacing:e,lineHeight:t}),[m,n,l,s,o,g,I,r,C,e,t]),[p,...b]=Ce.exports.useMemo(()=>mY(u),[u]),B=Ce.exports.useMemo(()=>[p,f],[p,f]);return ln("mesh",{...d,ref:A,children:[Be("renamedTextGeometry",{args:B}),b]})});function pY(i,e,t){const{gl:n,size:l,viewport:s}=Fi(),o=typeof i=="number"?i:l.width*s.dpr,g=typeof e=="number"?e:l.height*s.dpr,r=(typeof i=="number"?t:i)||{},{samples:I,...C}=r,u=Ce.exports.useMemo(()=>{let d;return d=new Di(o,g,{minFilter:Pt,magFilter:Pt,encoding:n.outputEncoding,type:er,...C}),d.samples=I,d},[]);return Ce.exports.useLayoutEffect(()=>{u.setSize(o,g),I&&(u.samples=I)},[I,u,o,g]),Ce.exports.useEffect(()=>()=>u.dispose(),[]),u}const fY=i=>typeof i=="function",bY=Ce.exports.forwardRef(({envMap:i,resolution:e=256,frames:t=1/0,makeDefault:n,children:l,...s},o)=>{const g=Fi(({set:p})=>p),r=Fi(({camera:p})=>p),I=Fi(({size:p})=>p),C=Ce.exports.useRef(null),u=Ce.exports.useRef(null),d=pY(e);Ce.exports.useLayoutEffect(()=>{s.manual||(C.current.aspect=I.width/I.height)},[I,s]),Ce.exports.useLayoutEffect(()=>{C.current.updateProjectionMatrix()});let A=0,m=null;const f=fY(l);return lg(p=>{f&&(t===1/0||A<t)&&(u.current.visible=!1,p.gl.setRenderTarget(d),m=p.scene.background,i&&(p.scene.background=i),p.gl.render(p.scene,C.current),p.scene.background=m,p.gl.setRenderTarget(null),u.current.visible=!0,A++)}),Ce.exports.useLayoutEffect(()=>{if(n){const p=r;return g(()=>({camera:C.current})),()=>g(()=>({camera:p}))}},[C,n,g]),ln(no,{children:[Be("perspectiveCamera",{ref:IY([C,o]),...s,children:!f&&l}),Be("group",{ref:u,children:f&&l(d.texture)})]})}),GY=Ce.exports.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:l=!0,onChange:s,onStart:o,onEnd:g,...r},I)=>{const C=Fi(Z=>Z.invalidate),u=Fi(Z=>Z.camera),d=Fi(Z=>Z.gl),A=Fi(Z=>Z.events),m=Fi(Z=>Z.set),f=Fi(Z=>Z.get),p=Fi(Z=>Z.performance),b=e||u,B=n||A.connected||d.domElement,y=Ce.exports.useMemo(()=>new cY(b),[b]);return lg(()=>{y.enabled&&y.update()},-1),Ce.exports.useEffect(()=>(y.connect(B),()=>void y.dispose()),[B,t,y,C]),Ce.exports.useEffect(()=>{const Z=q=>{C(),t&&p.regress(),s&&s(q)};return y.addEventListener("change",Z),o&&y.addEventListener("start",o),g&&y.addEventListener("end",g),()=>{o&&y.removeEventListener("start",o),g&&y.removeEventListener("end",g),y.removeEventListener("change",Z)}},[s,o,g,y,C]),Ce.exports.useEffect(()=>{if(i){const Z=f().controls;return m({controls:y}),()=>m({controls:Z})}},[i,y]),Be("primitive",{ref:I,object:y,enableDamping:l,...r})});class yY extends kl{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const BY=i=>new K().setFromSpherical(new s2(i,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),ZY=Ce.exports.forwardRef(({radius:i=100,depth:e=50,count:t=5e3,saturation:n=0,factor:l=4,fade:s=!1,speed:o=1},g)=>{const r=Ce.exports.useRef(),[I,C,u]=Ce.exports.useMemo(()=>{const A=[],m=[],f=Array.from({length:t},()=>(.5+.5*Math.random())*l),p=new Ve;let b=i+e;const B=e/t;for(let y=0;y<t;y++)b-=B*Math.random(),A.push(...BY(b).toArray()),p.setHSL(y/t,n,.9),m.push(p.r,p.g,p.b);return[new Float32Array(A),new Float32Array(m),new Float32Array(f)]},[t,e,l,i,n]);lg(A=>r.current&&(r.current.uniforms.time.value=A.clock.getElapsedTime()*o));const[d]=Ce.exports.useState(()=>new yY);return ln("points",{ref:g,children:[ln("bufferGeometry",{children:[Be("bufferAttribute",{attach:"attributes-position",args:[I,3]}),Be("bufferAttribute",{attach:"attributes-color",args:[C,3]}),Be("bufferAttribute",{attach:"attributes-size",args:[u,1]})]}),Be("primitive",{ref:r,object:d,attach:"material",blending:t2,"uniforms-fade-value":s,transparent:!0,vertexColors:!0})]})});var Fh={exports:{}},ha=typeof Reflect=="object"?Reflect:null,up=ha&&typeof ha.apply=="function"?ha.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},S0;ha&&typeof ha.ownKeys=="function"?S0=ha.ownKeys:Object.getOwnPropertySymbols?S0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:S0=function(e){return Object.getOwnPropertyNames(e)};function vY(i){console&&console.warn&&console.warn(i)}var fG=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}Fh.exports=Lt;Fh.exports.once=WY;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var dp=10;function L2(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return dp},set:function(i){if(typeof i!="number"||i<0||fG(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");dp=i}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||fG(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function bG(i){return i._maxListeners===void 0?Lt.defaultMaxListeners:i._maxListeners}Lt.prototype.getMaxListeners=function(){return bG(this)};Lt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var l=e==="error",s=this._events;if(s!==void 0)l=l&&s.error===void 0;else if(!l)return!1;if(l){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var g=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw g.context=o,g}var r=s[e];if(r===void 0)return!1;if(typeof r=="function")up(r,this,t);else for(var I=r.length,C=vG(r,I),n=0;n<I;++n)up(C[n],this,t);return!0};function GG(i,e,t,n){var l,s,o;if(L2(t),s=i._events,s===void 0?(s=i._events=Object.create(null),i._eventsCount=0):(s.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),s=i._events),o=s[e]),o===void 0)o=s[e]=t,++i._eventsCount;else if(typeof o=="function"?o=s[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),l=bG(i),l>0&&o.length>l&&!o.warned){o.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=i,g.type=e,g.count=o.length,vY(g)}return i}Lt.prototype.addListener=function(e,t){return GG(this,e,t,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,t){return GG(this,e,t,!0)};function xY(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yG(i,e,t){var n={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},l=xY.bind(n);return l.listener=t,n.wrapFn=l,l}Lt.prototype.once=function(e,t){return L2(t),this.on(e,yG(this,e,t)),this};Lt.prototype.prependOnceListener=function(e,t){return L2(t),this.prependListener(e,yG(this,e,t)),this};Lt.prototype.removeListener=function(e,t){var n,l,s,o,g;if(L2(t),l=this._events,l===void 0)return this;if(n=l[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){g=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():qY(n,s),n.length===1&&(l[e]=n[0]),l.removeListener!==void 0&&this.emit("removeListener",e,g||t)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var t,n,l;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(l=0;l<s.length;++l)o=s[l],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(l=t.length-1;l>=0;l--)this.removeListener(e,t[l]);return this};function BG(i,e,t){var n=i._events;if(n===void 0)return[];var l=n[e];return l===void 0?[]:typeof l=="function"?t?[l.listener||l]:[l]:t?wY(l):vG(l,l.length)}Lt.prototype.listeners=function(e){return BG(this,e,!0)};Lt.prototype.rawListeners=function(e){return BG(this,e,!1)};Lt.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):ZG.call(i,e)};Lt.prototype.listenerCount=ZG;function ZG(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?S0(this._events):[]};function vG(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i[n];return t}function qY(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function wY(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function WY(i,e){return new Promise(function(t,n){function l(o){i.removeListener(e,s),n(o)}function s(){typeof i.removeListener=="function"&&i.removeListener("error",l),t([].slice.call(arguments))}xG(i,e,s,{once:!0}),e!=="error"&&SY(i,l,{once:!0})})}function SY(i,e,t){typeof i.on=="function"&&xG(i,"error",e,t)}function xG(i,e,t,n){if(typeof i.on=="function")n.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function l(s){n.once&&i.removeEventListener(e,l),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var VY=Fh.exports;function RY(i,e){var t=atob(i);if(e){for(var n=new Uint8Array(t.length),l=0,s=t.length;l<s;++l)n[l]=t.charCodeAt(l);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return t}function XY(i,e,t){var n=e===void 0?null:e,l=t===void 0?!1:t,s=RY(i,l),o=s.indexOf(`
`,10)+1,g=s.substring(o)+(n?"//# sourceMappingURL="+n:""),r=new Blob([g],{type:"application/javascript"});return URL.createObjectURL(r)}function YY(i,e,t){var n;return function(s){return n=n||XY(i,e,t),new Worker(n,s)}}var zY=YY("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KCiAgLyoqCiAgICogQSAzeDMgbWF0cml4LgogICAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9CiAgICovCiAgY2xhc3MgTWF0MyB7CiAgICAvKioKICAgICAqIEEgdmVjdG9yIG9mIGxlbmd0aCA5LCBjb250YWluaW5nIGFsbCBtYXRyaXggZWxlbWVudHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykgewogICAgICBpZiAoZWxlbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIGVsZW1lbnRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hdHJpeCB0byBpZGVudGl0eQogICAgICogQHRvZG8gU2hvdWxkIHBlcmhhcHMgYmUgcmVuYW1lZCB0byBgc2V0SWRlbnRpdHkoKWAgdG8gYmUgbW9yZSBjbGVhci4KICAgICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWAKICAgICAqLwoKCiAgICBpZGVudGl0eSgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSAxOwogICAgICBlWzFdID0gMDsKICAgICAgZVsyXSA9IDA7CiAgICAgIGVbM10gPSAwOwogICAgICBlWzRdID0gMTsKICAgICAgZVs1XSA9IDA7CiAgICAgIGVbNl0gPSAwOwogICAgICBlWzddID0gMDsKICAgICAgZVs4XSA9IDE7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMDsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDA7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMgZnJvbSBhIFZlYzMKICAgICAqLwoKCiAgICBzZXRUcmFjZSh2ZWN0b3IpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSB2ZWN0b3IueDsKICAgICAgZVs0XSA9IHZlY3Rvci55OwogICAgICBlWzhdID0gdmVjdG9yLno7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50cwogICAgICovCgoKICAgIGdldFRyYWNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgdGFyZ2V0LnggPSBlWzBdOwogICAgICB0YXJnZXQueSA9IGVbNF07CiAgICAgIHRhcmdldC56ID0gZVs4XTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LVZlY3RvciBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIHYgVGhlIHZlY3RvciB0byBtdWx0aXBseSB3aXRoCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBBID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50czsKICAgICAgY29uc3QgVCA9IHRhcmdldC5lbGVtZW50czsKICAgICAgY29uc3QgYTExID0gQVswXSwKICAgICAgICAgICAgYTEyID0gQVsxXSwKICAgICAgICAgICAgYTEzID0gQVsyXSwKICAgICAgICAgICAgYTIxID0gQVszXSwKICAgICAgICAgICAgYTIyID0gQVs0XSwKICAgICAgICAgICAgYTIzID0gQVs1XSwKICAgICAgICAgICAgYTMxID0gQVs2XSwKICAgICAgICAgICAgYTMyID0gQVs3XSwKICAgICAgICAgICAgYTMzID0gQVs4XTsKICAgICAgY29uc3QgYjExID0gQlswXSwKICAgICAgICAgICAgYjEyID0gQlsxXSwKICAgICAgICAgICAgYjEzID0gQlsyXSwKICAgICAgICAgICAgYjIxID0gQlszXSwKICAgICAgICAgICAgYjIyID0gQls0XSwKICAgICAgICAgICAgYjIzID0gQls1XSwKICAgICAgICAgICAgYjMxID0gQls2XSwKICAgICAgICAgICAgYjMyID0gQls3XSwKICAgICAgICAgICAgYjMzID0gQls4XTsKICAgICAgVFswXSA9IGExMSAqIGIxMSArIGExMiAqIGIyMSArIGExMyAqIGIzMTsKICAgICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjsKICAgICAgVFsyXSA9IGExMSAqIGIxMyArIGExMiAqIGIyMyArIGExMyAqIGIzMzsKICAgICAgVFszXSA9IGEyMSAqIGIxMSArIGEyMiAqIGIyMSArIGEyMyAqIGIzMTsKICAgICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjsKICAgICAgVFs1XSA9IGEyMSAqIGIxMyArIGEyMiAqIGIyMyArIGEyMyAqIGIzMzsKICAgICAgVFs2XSA9IGEzMSAqIGIxMSArIGEzMiAqIGIyMSArIGEzMyAqIGIzMTsKICAgICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjsKICAgICAgVFs4XSA9IGEzMSAqIGIxMyArIGEzMiAqIGIyMyArIGEzMyAqIGIzMzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2NhbGUgZWFjaCBjb2x1bW4gb2YgdGhlIG1hdHJpeAogICAgICovCgoKICAgIHNjYWxlKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykgewogICAgICAgIHRbMyAqIGkgKyAwXSA9IHZlY3Rvci54ICogZVszICogaSArIDBdOwogICAgICAgIHRbMyAqIGkgKyAxXSA9IHZlY3Rvci55ICogZVszICogaSArIDFdOwogICAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSBBeD1iCiAgICAgKiBAcGFyYW0gYiBUaGUgcmlnaHQgaGFuZCBzaWRlCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4CiAgICAgKiBAdG9kbyBzaG91bGQgcmV1c2UgYXJyYXlzCiAgICAgKi8KCgogICAgc29sdmUoYiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgYENvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyR7dGFyZ2V0LnRvU3RyaW5nKCl9XSwgYj1bJHtiLnRvU3RyaW5nKCl9XSwgQT1bJHt0aGlzLnRvU3RyaW5nKCl9XWA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA2OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IHJldmVyc2VfZXFuczsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA2ICogMF0gPSAxOwogICAgICBlcW5zWzMgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzMgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMV0gPSAxOwogICAgICBlcW5zWzQgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMl0gPSAxOyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSBuYzsgLy8gbnVtIHJvd3MKCiAgICAgIGxldCBwOwoKICAgICAgZG8gewogICAgICAgIGkgPSBrIC0gbjsKCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gPT09IDApIHsKICAgICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzCiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBqXSAhPT0gMCkgewogICAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGkgKSA9IGxpbmUoIGkgKSArIGxpbmUoIGsgKQogICAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07CiAgICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkgewogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGsgKSA9IGxpbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaW5lKCBpICkKICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IHdoaWxlICgtLW4pOyAvLyBlbGltaW5hdGUgdGhlIHVwcGVyIGxlZnQgdHJpYW5nbGUgb2YgdGhlIG1hdHJpeAoKCiAgICAgIGkgPSAyOwoKICAgICAgZG8gewogICAgICAgIGogPSBpIC0gMTsKCiAgICAgICAgZG8gewogICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgfSB3aGlsZSAoai0tKTsKICAgICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWwKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IG5jIC0gbnA7CiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgIH0gd2hpbGUgKGktLSk7CgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gMjsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IGVxbnNbbnIgKyBqICsgbmMgKiBpXTsKCiAgICAgICAgICBpZiAoaXNOYU4ocCkgfHwgcCA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgdGhyb3cgYENvdWxkIG5vdCByZXZlcnNlISBBPVske3RoaXMudG9TdHJpbmcoKX1dYDsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQogIGNvbnN0IHJldmVyc2VfZXFucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen1gOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIGlmIChwcmVjaXNpb24gPT09IHZvaWQgMCkgewogICAgICAgIHByZWNpc2lvbiA9IDFlLTY7CiAgICAgIH0KCiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGlzIGFsbW9zdCB6ZXJvCiAgICAgKi8KCgogICAgYWxtb3N0WmVybyhwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHZlY3RvciBpcyBhbnRpLXBhcmFsbGVsIHRvIGFub3RoZXIgdmVjdG9yLgogICAgICogQHBhcmFtIHByZWNpc2lvbiBTZXQgdG8gemVybyBmb3IgZXhhY3QgY29tcGFyaXNvbnMKICAgICAqLwoKCiAgICBpc0FudGlwYXJhbGxlbFRvKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7CiAgICAgIHJldHVybiBhbnRpcF9uZWcuYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgdGhlIHZlY3RvcgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7CiAgICB9CgogIH0KICBWZWMzLlpFUk8gPSBuZXcgVmVjMygwLCAwLCAwKTsKICBWZWMzLlVOSVRfWCA9IG5ldyBWZWMzKDEsIDAsIDApOwogIFZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7CiAgVmVjMy5VTklUX1ogPSBuZXcgVmVjMygwLCAwLCAxKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYW50aXBfbmVnID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KICBjbGFzcyBBQUJCIHsKICAgIC8qKgogICAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG93ZXJCb3VuZCkgewogICAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnVwcGVyQm91bmQuY29weShvcHRpb25zLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuCiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzMncy4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0CiAgICAgKi8KCgogICAgc2V0RnJvbVBvaW50cyhwb2ludHMsIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBza2luU2l6ZSkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBxID0gcXVhdGVybmlvbjsgLy8gU2V0IHRvIHRoZSBmaXJzdCBwb2ludAoKICAgICAgbC5jb3B5KHBvaW50c1swXSk7CgogICAgICBpZiAocSkgewogICAgICAgIHEudm11bHQobCwgbCk7CiAgICAgIH0KCiAgICAgIHUuY29weShsKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07CgogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTsKICAgICAgICAgIHAgPSB0bXAkMTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPiB1LngpIHsKICAgICAgICAgIHUueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPCBsLnkpIHsKICAgICAgICAgIGwueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHAuejsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHAuejsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIG9mZnNldAoKCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7CiAgICAgICAgcG9zaXRpb24udmFkZCh1LCB1KTsKICAgICAgfQoKICAgICAgaWYgKHNraW5TaXplKSB7CiAgICAgICAgbC54IC09IHNraW5TaXplOwogICAgICAgIGwueSAtPSBza2luU2l6ZTsKICAgICAgICBsLnogLT0gc2tpblNpemU7CiAgICAgICAgdS54ICs9IHNraW5TaXplOwogICAgICAgIHUueSArPSBza2luU2l6ZTsKICAgICAgICB1LnogKz0gc2tpblNpemU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCCiAgICAgKiBAcGFyYW0gYWFiYiBTb3VyY2UgdG8gY29weSBmcm9tCiAgICAgKiBAcmV0dXJuIFRoZSB0aGlzIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eQogICAgICovCgoKICAgIGNvcHkoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpOwogICAgICB0aGlzLnVwcGVyQm91bmQuY29weShhYWJiLnVwcGVyQm91bmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgYW4gQUFCQgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby4KICAgICAqLwoKCiAgICBleHRlbmQoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC54KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpOwogICAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC55LCBhYWJiLnVwcGVyQm91bmQueSk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC56ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnosIGFhYmIubG93ZXJCb3VuZC56KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLgogICAgICovCgoKICAgIG92ZXJsYXBzKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICB1MQoKICAgICAgY29uc3Qgb3ZlcmxhcHNYID0gbDIueCA8PSB1MS54ICYmIHUxLnggPD0gdTIueCB8fCBsMS54IDw9IHUyLnggJiYgdTIueCA8PSB1MS54OwogICAgICBjb25zdCBvdmVybGFwc1kgPSBsMi55IDw9IHUxLnkgJiYgdTEueSA8PSB1Mi55IHx8IGwxLnkgPD0gdTIueSAmJiB1Mi55IDw9IHUxLnk7CiAgICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejsKICAgICAgcmV0dXJuIG92ZXJsYXBzWCAmJiBvdmVybGFwc1kgJiYgb3ZlcmxhcHNaOwogICAgfSAvLyBNb3N0bHkgZm9yIGRlYnVnZ2luZwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIHJldHVybiAodS54IC0gbC54KSAqICh1LnkgLSBsLnkpICogKHUueiAtIGwueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBpcyBmdWxseSBjb250YWluZWQgaW4gdGhpcyBBQUJCLgogICAgICovCgoKICAgIGNvbnRhaW5zKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgICAgICAgIHUxCgogICAgICByZXR1cm4gbDEueCA8PSBsMi54ICYmIHUxLnggPj0gdTIueCAmJiBsMS55IDw9IGwyLnkgJiYgdTEueSA+PSB1Mi55ICYmIGwxLnogPD0gbDIueiAmJiB1MS56ID49IHUyLno7CiAgICB9CgogICAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGEuY29weShsKTsKICAgICAgYi5zZXQodS54LCBsLnksIGwueik7CiAgICAgIGMuc2V0KHUueCwgdS55LCBsLnopOwogICAgICBkLnNldChsLngsIHUueSwgdS56KTsKICAgICAgZS5zZXQodS54LCBsLnksIHUueik7CiAgICAgIGYuc2V0KGwueCwgdS55LCBsLnopOwogICAgICBnLnNldChsLngsIGwueSwgdS56KTsKICAgICAgaC5jb3B5KHUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gYW5vdGhlciBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb0xvY2FsKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvV29ybGRGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb1dvcmxkKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQUFCQiBpcyBoaXQgYnkgYSByYXkuCiAgICAgKi8KCgogICAgb3ZlcmxhcHNSYXkocmF5KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgZnJvbQogICAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMAogICAgICAvLyByYXkuZGlyZWN0aW9uIGlzIHVuaXQgZGlyZWN0aW9uIHZlY3RvciBvZiByYXkKCiAgICAgIGNvbnN0IGRpckZyYWNYID0gMSAvIGRpcmVjdGlvbi54OwogICAgICBjb25zdCBkaXJGcmFjWSA9IDEgLyBkaXJlY3Rpb24ueTsKICAgICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyCgogICAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQzID0gKHRoaXMubG93ZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDUgPSAodGhpcy5sb3dlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7CiAgICAgIGNvbnN0IHQ2ID0gKHRoaXMudXBwZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOyAvLyBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSkpOwogICAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpOwoKICAgICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTsKICAgICAgY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpLCBNYXRoLm1heCh0NSwgdDYpKTsgLy8gaWYgdG1heCA8IDAsIHJheSAobGluZSkgaXMgaW50ZXJzZWN0aW5nIEFBQkIsIGJ1dCB3aG9sZSBBQUJCIGlzIGJlaGluZyB1cwoKICAgICAgaWYgKHRtYXggPCAwKSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaWYgdG1pbiA+IHRtYXgsIHJheSBkb2Vzbid0IGludGVyc2VjdCBBQUJCCgoKICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9CiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBDb2xsaXNpb24gIm1hdHJpeCIuCiAgICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcAogICAqLwogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwogIGNsYXNzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwogICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgIH0KCiAgICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW55IGV2ZW50IGxpc3RlbmVyIG9mIHRoZSBnaXZlbiB0eXBlIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzQW55RXZlbnRMaXN0ZW5lcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICByZXR1cm4gbGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lcgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRW1pdCBhbiBldmVudC4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTsKCiAgICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzOwoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBsaXN0ZW5lckFycmF5W2ldLmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgogIGNsYXNzIFF1YXRlcm5pb24gewogICAgY29uc3RydWN0b3IoeCwgeSwgeiwgdykgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh5ID09PSB2b2lkIDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHogPT09IHZvaWQgMCkgewogICAgICAgIHogPSAwOwogICAgICB9CgogICAgICBpZiAodyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgc2V0KHgsIHksIHosIHcpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdG8gYSByZWFkYWJsZSBmb3JtYXQKICAgICAqIEByZXR1cm4gIngseSx6LHciCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen0sJHt0aGlzLnd9YDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcykgewogICAgICBpZiAodGFyZ2V0QXhpcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkCgogICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTsKICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gdGhpcy53ICogdGhpcy53KTsgLy8gYXNzdW1pbmcgcXVhdGVybmlvbiBub3JtYWxpc2VkIHRoZW4gdyBpcyBsZXNzIHRoYW4gMSwgc28gdGVybSBhbHdheXMgcG9zaXRpdmUuCgogICAgICBpZiAocyA8IDAuMDAxKSB7CiAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnQKICAgICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50CiAgICAgICAgdGFyZ2V0QXhpcy54ID0gdGhpcy54OyAvLyBpZiBpdCBpcyBpbXBvcnRhbnQgdGhhdCBheGlzIGlzIG5vcm1hbGlzZWQgdGhlbiByZXBsYWNlIHdpdGggeD0xOyB5PXo9MDsKCiAgICAgICAgdGFyZ2V0QXhpcy55ID0gdGhpcy55OwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLnggLyBzOyAvLyBub3JtYWxpc2UgYXhpcwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnkgLyBzOwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMueiAvIHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuCiAgICAgKi8KCgogICAgc2V0RnJvbVZlY3RvcnModSwgdikgewogICAgICBpZiAodS5pc0FudGlwYXJhbGxlbFRvKHYpKSB7CiAgICAgICAgY29uc3QgdDEgPSBzZnZfdDE7CiAgICAgICAgY29uc3QgdDIgPSBzZnZfdDI7CiAgICAgICAgdS50YW5nZW50cyh0MSwgdDIpOwogICAgICAgIHRoaXMuc2V0RnJvbUF4aXNBbmdsZSh0MSwgTWF0aC5QSSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYSA9IHUuY3Jvc3Modik7CiAgICAgICAgdGhpcy54ID0gYS54OwogICAgICAgIHRoaXMueSA9IGEueTsKICAgICAgICB0aGlzLnogPSBhLno7CiAgICAgICAgdGhpcy53ID0gTWF0aC5zcXJ0KHUubGVuZ3RoKCkgKiogMiAqIHYubGVuZ3RoKCkgKiogMikgKyB1LmRvdCh2KTsKICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHF1YXRlcm5pb24gd2l0aCBhbiBvdGhlciBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIG11bHQocXVhdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICB0aGlzLmNvbmp1Z2F0ZSh0YXJnZXQpOwogICAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgdGFyZ2V0LnggKj0gaW5vcm0yOwogICAgICB0YXJnZXQueSAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC56ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LncgKj0gaW5vcm0yOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1YXRlcm5pb24gY29uanVnYXRlCiAgICAgKi8KCgogICAgY29uanVnYXRlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IC10aGlzLng7CiAgICAgIHRhcmdldC55ID0gLXRoaXMueTsKICAgICAgdGFyZ2V0LnogPSAtdGhpcy56OwogICAgICB0YXJnZXQudyA9IHRoaXMudzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBsZXQgbCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpOwoKICAgICAgaWYgKGwgPT09IDApIHsKICAgICAgICB0aGlzLnggPSAwOwogICAgICAgIHRoaXMueSA9IDA7CiAgICAgICAgdGhpcy56ID0gMDsKICAgICAgICB0aGlzLncgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGwgPSAxIC8gbDsKICAgICAgICB0aGlzLnggKj0gbDsKICAgICAgICB0aGlzLnkgKj0gbDsKICAgICAgICB0aGlzLnogKj0gbDsKICAgICAgICB0aGlzLncgKj0gbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLgogICAgICogQGF1dGhvciB1bnBoYXNlZCwgaHR0cHM6Ly9naXRodWIuY29tL3VucGhhc2VkCiAgICAgKi8KCgogICAgbm9ybWFsaXplRmFzdCgpIHsKICAgICAgY29uc3QgZiA9ICgzLjAgLSAodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53KSkgLyAyLjA7CgogICAgICBpZiAoZiA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy54ICo9IGY7CiAgICAgICAgdGhpcy55ICo9IGY7CiAgICAgICAgdGhpcy56ICo9IGY7CiAgICAgICAgdGhpcy53ICo9IGY7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvcgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIpIHsKICAgICAgaWYgKG9yZGVyID09PSB2b2lkIDApIHsKICAgICAgICBvcmRlciA9ICdZWlgnOwogICAgICB9CgogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFdWxlciBvcmRlciAke29yZGVyfSBub3Qgc3VwcG9ydGVkIHlldC5gKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnkgPSBoZWFkaW5nOwogICAgICB0YXJnZXQueiA9IGF0dGl0dWRlOwogICAgICB0YXJnZXQueCA9IGJhbms7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIEV1bGVyIGFuZ2xlIHJlcHJlc2VudGF0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBvcmRlciBUaGUgb3JkZXIgdG8gYXBwbHkgYW5nbGVzOiAnWFlaJyBvciAnWVhaJyBvciBhbnkgb3RoZXIgY29tYmluYXRpb24uCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlCiAgICAgKi8KCgogICAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3JkZXIgPSAnWFlaJzsKICAgICAgfQoKICAgICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7CiAgICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpOwogICAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTsKICAgICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7CiAgICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpOwogICAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTsKCiAgICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWFonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWlhZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWlgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWFpZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpOwogICAgfQogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0CiAgICAgKgogICAgICogQHBhcmFtIHRvUXVhdCBzZWNvbmQgb3BlcmFuZAogICAgICogQHBhcmFtIHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgc2VsZiBxdWF0ZXJuaW9uIGFuZCB0b1F1YXQKICAgICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC4KICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBUaGUgInRhcmdldCIgb2JqZWN0CiAgICAgKi8KCgogICAgc2xlcnAodG9RdWF0LCB0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gYW5ndWxhclZlbG9jaXR5LnggKiBhbmd1bGFyRmFjdG9yLngsCiAgICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksCiAgICAgICAgICAgIGF6ID0gYW5ndWxhclZlbG9jaXR5LnogKiBhbmd1bGFyRmFjdG9yLnosCiAgICAgICAgICAgIGJ4ID0gdGhpcy54LAogICAgICAgICAgICBieSA9IHRoaXMueSwKICAgICAgICAgICAgYnogPSB0aGlzLnosCiAgICAgICAgICAgIGJ3ID0gdGhpcy53OwogICAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7CiAgICAgIHRhcmdldC54ICs9IGhhbGZfZHQgKiAoYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5KTsKICAgICAgdGFyZ2V0LnkgKz0gaGFsZl9kdCAqIChheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYnopOwogICAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7CiAgICAgIHRhcmdldC53ICs9IGhhbGZfZHQgKiAoLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KICBjb25zdCBzZnZfdDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNmdl90MiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuCiAgICovCiAgY29uc3QgU0hBUEVfVFlQRVMgPSB7CiAgICAvKiogU1BIRVJFICovCiAgICBTUEhFUkU6IDEsCgogICAgLyoqIFBMQU5FICovCiAgICBQTEFORTogMiwKCiAgICAvKiogQk9YICovCiAgICBCT1g6IDQsCgogICAgLyoqIENPTVBPVU5EICovCiAgICBDT01QT1VORDogOCwKCiAgICAvKiogQ09OVkVYUE9MWUhFRFJPTiAqLwogICAgQ09OVkVYUE9MWUhFRFJPTjogMTYsCgogICAgLyoqIEhFSUdIVEZJRUxEICovCiAgICBIRUlHSFRGSUVMRDogMzIsCgogICAgLyoqIFBBUlRJQ0xFICovCiAgICBQQVJUSUNMRTogNjQsCgogICAgLyoqIENZTElOREVSICovCiAgICBDWUxJTkRFUjogMTI4LAoKICAgIC8qKiBUUklNRVNIICovCiAgICBUUklNRVNIOiAyNTYKICB9OwogIC8qKgogICAqIFNoYXBlVHlwZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBzaGFwZXMKICAgKi8KICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgYGNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyBgdm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyBgY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgYGNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQoKICB9CiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwoKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgY29uc3QgdG1wUXVhdCQxID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwogIGNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogdmVydGljZXMgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggZmFjZSBjb25zaXN0cyBvZgogICAgICovCgogICAgLyoqIGZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkVmVydGljZXMgKi8KCiAgICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi8KCiAgICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovCgogICAgLyoqCiAgICAgKiBJZiBnaXZlbiwgdGhlc2UgbG9jYWxseSBkZWZpbmVkLCBub3JtYWxpemVkIGF4ZXMgYXJlIHRoZSBvbmx5IG9uZXMgYmVpbmcgY2hlY2tlZCB3aGVuIGRvaW5nIHNlcGFyYXRpbmcgYXhpcyBjaGVjay4KICAgICAqLwoKICAgIC8qKiB1bmlxdWVFZGdlcyAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMncwogICAgICogQHBhcmFtIGZhY2VzIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBkZXNjcmliaW5nIHdoaWNoIHZlcnRpY2VzIHRoYXQgaXMgaW5jbHVkZWQgaW4gZWFjaCBmYWNlLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgewogICAgICAgIHByb3BzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICB2ZXJ0aWNlcyA9IFtdLAogICAgICAgIGZhY2VzID0gW10sCiAgICAgICAgbm9ybWFscyA9IFtdLAogICAgICAgIGF4ZXMsCiAgICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICAgICAgfSA9IHByb3BzOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTgogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZlcnRleCAke3RoaXMuZmFjZXNbaV1bal19IG5vdCBmb3VuZCFgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ldIHx8IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5nZXRGYWNlTm9ybWFsKGksIG4pOwogICAgICAgIG4ubmVnYXRlKG4pOwogICAgICAgIHRoaXMuZmFjZU5vcm1hbHNbaV0gPSBuOwogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVswXV07CgogICAgICAgIGlmIChuLmRvdCh2ZXJ0ZXgpIDwgMCkgewogICAgICAgICAgY29uc29sZS5lcnJvcihgLmZhY2VOb3JtYWxzWyR7aX1dID0gVmVjMygke24udG9TdHJpbmcoKX0pIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuYCk7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgLnZlcnRpY2VzWyR7dGhpcy5mYWNlc1tpXVtqXX1dID0gVmVjMygke3RoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVtqXV0udG9TdHJpbmcoKX0pYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiBhIGZhY2UgZnJvbSBpdHMgdmVydGljZXMKICAgICAqLwoKCiAgICBnZXRGYWNlTm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTsKICAgICAgY29uc3QgdmEgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCB2YiA9IHRoaXMudmVydGljZXNbZlsxXV07CiAgICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTsKICAgICAgQ29udmV4UG9seWhlZHJvbi5jb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gbWluRGlzdCBDbGFtcCBkaXN0YW5jZQogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbAogICAgICovCgoKICAgIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgV29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBsZXQgY2xvc2VzdEZhY2VCID0gLTE7CiAgICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7CgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgV29ybGROb3JtYWwuY29weShodWxsQi5mYWNlTm9ybWFsc1tmYWNlXSk7CiAgICAgICAgcXVhdEIudm11bHQoV29ybGROb3JtYWwsIFdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpOwoKICAgICAgICBpZiAoZCA+IGRtYXgpIHsKICAgICAgICAgIGRtYXggPSBkOwogICAgICAgICAgY2xvc2VzdEZhY2VCID0gZmFjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkVmVydHNCMSA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGh1bGxCLnZlcnRpY2VzW2h1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl1baV1dOwogICAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7CiAgICAgICAgd29ybGRiLmNvcHkoYik7CiAgICAgICAgcXVhdEIudm11bHQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7CiAgICAgICAgd29ybGRWZXJ0c0IxLnB1c2god29ybGRiKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQiA+PSAwKSB7CiAgICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgc2VwYXJhdGluZyBheGlzIGJldHdlZW4gdGhpcyBodWxsIGFuZCBhbm90aGVyCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgdmVjdG9yIHRvIHNhdmUgdGhlIGF4aXMgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZQogICAgICovCgoKICAgIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MzID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRub3JtYWwxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwoKICAgICAgaWYgKCFodWxsQS51bmlxdWVBeGVzKSB7CiAgICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQQoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QVtpXSA6IGk7IC8vIEdldCB3b3JsZCBmYWNlIG5vcm1hbAoKICAgICAgICAgIGZhY2VBTm9ybWFsV1MzLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MzLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGF4aXMKICAgICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUF4ZXNbaV0sIGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaHVsbEIudW5pcXVlQXhlcykgewogICAgICAgIC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEIKICAgICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QiA/IGZhY2VMaXN0QltpXSA6IGk7CiAgICAgICAgICBXb3JsZG5vcm1hbDEuY29weShodWxsQi5mYWNlTm9ybWFsc1tmaV0pOwogICAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBodWxsQi51bmlxdWVBeGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVBeGVzW2ldLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRlc3QgZWRnZXMKCgogICAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgZWRnZQogICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUVkZ2VzW2UwXSwgd29ybGRFZGdlMCk7CgogICAgICAgIGZvciAobGV0IGUxID0gMDsgZTEgIT09IGh1bGxCLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgZTErKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMgogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlRWRnZXNbZTFdLCB3b3JsZEVkZ2UxKTsKICAgICAgICAgIHdvcmxkRWRnZTAuY3Jvc3Mod29ybGRFZGdlMSwgQ3Jvc3MpOwoKICAgICAgICAgIGlmICghQ3Jvc3MuYWxtb3N0WmVybygpKSB7CiAgICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gaHVsbEEudGVzdFNlcEF4aXMoQ3Jvc3MsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHsKICAgICAgICAgICAgICBkbWluID0gZGlzdDsKICAgICAgICAgICAgICB0YXJnZXQuY29weShDcm9zcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpOwoKICAgICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkgewogICAgICAgIHRhcmdldC5uZWdhdGUodGFyZ2V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFRlc3Qgc2VwYXJhdGluZyBheGlzIGFnYWluc3QgdHdvIGh1bGxzLiBCb3RoIGh1bGxzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgYXhpcyBhbmQgdGhlIG92ZXJsYXAgc2l6ZSBpcyByZXR1cm5lZCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi4KICAgICAqLwoKCiAgICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgQ29udmV4UG9seWhlZHJvbi5wcm9qZWN0KGh1bGxBLCBheGlzLCBwb3NBLCBxdWF0QSwgbWF4bWluQSk7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpOwogICAgICBjb25zdCBtYXhBID0gbWF4bWluQVswXTsKICAgICAgY29uc3QgbWluQSA9IG1heG1pbkFbMV07CiAgICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdOwogICAgICBjb25zdCBtaW5CID0gbWF4bWluQlsxXTsKCiAgICAgIGlmIChtYXhBIDwgbWluQiB8fCBtYXhCIDwgbWluQSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2VwYXJhdGVkCiAgICAgIH0KCiAgICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7CiAgICAgIGNvbnN0IGQxID0gbWF4QiAtIG1pbkE7CiAgICAgIGNvbnN0IGRlcHRoID0gZDAgPCBkMSA/IGQwIDogZDE7CiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWFiYm1pbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29tcHV0ZUxvY2FsQUFCQihhYWJibWluLCBhYWJibWF4KTsKICAgICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDsKICAgICAgY29uc3QgeSA9IGFhYmJtYXgueSAtIGFhYmJtaW4ueTsKICAgICAgY29uc3QgeiA9IGFhYmJtYXgueiAtIGFhYmJtaW4uejsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueiA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIGZhY2VfaSBJbmRleCBvZiB0aGUgZmFjZQogICAgICovCgoKICAgIGdldFBsYW5lQ29uc3RhbnRPZkZhY2UoZmFjZV9pKSB7CiAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07CiAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ZhY2VfaV07CiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCBjID0gLW4uZG90KHYpOwogICAgICByZXR1cm4gYzsKICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgYWdhaW5zdCBhIGh1bGwuCiAgICAgKiBAcGFyYW0gd29ybGRWZXJ0c0IxIEFuIGFycmF5IG9mIFZlYzMgd2l0aCB2ZXJ0aWNlcyBpbiB0aGUgd29ybGQgZnJhbWUuCiAgICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZwogICAgICogQHBhcmFtIEFycmF5IHJlc3VsdCBBcnJheSB0byBzdG9yZSByZXN1bHRpbmcgY29udGFjdCBwb2ludHMgaW4uIFdpbGwgYmUgb2JqZWN0cyB3aXRoIHByb3BlcnRpZXM6IHBvaW50LCBkZXB0aCwgbm9ybWFsLiBUaGVzZSBhcmUgcmVwcmVzZW50ZWQgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgZmFjZUFOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkUGxhbmVBbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRBMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwogICAgICBjb25zdCB3b3JsZFZlcnRzQjIgPSBbXTsKICAgICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxOwogICAgICBjb25zdCBwVnR4T3V0ID0gd29ybGRWZXJ0c0IyOwogICAgICBsZXQgY2xvc2VzdEZhY2VBID0gLTE7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXMKCiAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHsKICAgICAgICBmYWNlQU5vcm1hbFdTLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MsIGZhY2VBTm9ybWFsV1MpOwogICAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQSA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xvc2VzdEZhY2VBIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXMKCgogICAgICBjb25zdCBwb2x5QSA9IGh1bGxBLmZhY2VzW2Nsb3Nlc3RGYWNlQV07CiAgICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBodWxsQS5mYWNlc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovCiAgICAgICAgICBwb2x5QS5pbmRleE9mKGh1bGxBLmZhY2VzW2ldW2pdKSAhPT0gLTEgJiYKICAgICAgICAgIC8qIE5vdCB0aGUgb25lIHdlIGFyZSBsb29raW5nIGZvciBjb25uZWN0aW9ucyBmcm9tICovCiAgICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiYKICAgICAgICAgIC8qIE5vdCBhbHJlYWR5IGFkZGVkICovCiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5pbmRleE9mKGkpID09PSAtMSkgewogICAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSwKICAgICAgLy8gdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIHdpdG5lc3MgZmFjZQoKCiAgICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHsKICAgICAgICBjb25zdCBhID0gaHVsbEEudmVydGljZXNbcG9seUFbaV1dOwogICAgICAgIGNvbnN0IGIgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVsoaSArIDEpICUgbnVtVmVydGljZXNBXV07CiAgICAgICAgYS52c3ViKGIsIGVkZ2UwKTsKICAgICAgICBXb3JsZEVkZ2UwLmNvcHkoZWRnZTApOwogICAgICAgIHF1YXRBLnZtdWx0KFdvcmxkRWRnZTAsIFdvcmxkRWRnZTApOwogICAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICB3b3JsZFBsYW5lQW5vcm1hbDEuY29weSh0aGlzLmZhY2VOb3JtYWxzW2Nsb3Nlc3RGYWNlQV0pOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpOwogICAgICAgIFdvcmxkRWRnZTAuY3Jvc3Mod29ybGRQbGFuZUFub3JtYWwxLCBwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgcGxhbmVOb3JtYWxXUzEubmVnYXRlKHBsYW5lTm9ybWFsV1MxKTsKICAgICAgICB3b3JsZEExLmNvcHkoYSk7CiAgICAgICAgcXVhdEEudm11bHQod29ybGRBMSwgd29ybGRBMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldOwogICAgICAgIGxvY2FsUGxhbmVOb3JtYWwuY29weSh0aGlzLmZhY2VOb3JtYWxzW290aGVyRmFjZV0pOwogICAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShvdGhlckZhY2UpOwogICAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgICBxdWF0QS52bXVsdChwbGFuZU5vcm1hbFdTLCBwbGFuZU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsgLy8gQ2xpcCBmYWNlIGFnYWluc3Qgb3VyIGNvbnN0cnVjdGVkIHBsYW5lCgogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0UGxhbmUocFZ0eEluLCBwVnR4T3V0LCBwbGFuZU5vcm1hbFdTLCBwbGFuZUVxV1MpOyAvLyBUaHJvdyBhd2F5IGFsbCBjbGlwcGVkIHBvaW50cywgYnV0IHNhdmUgdGhlIHJlbWFpbmluZyB1bnRpbCBuZXh0IGNsaXAKCiAgICAgICAgd2hpbGUgKHBWdHhJbi5sZW5ndGgpIHsKICAgICAgICAgIHBWdHhJbi5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHBWdHhPdXQubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4ucHVzaChwVnR4T3V0LnNoaWZ0KCkpOwogICAgICAgIH0KICAgICAgfSAvLyBvbmx5IGtlZXAgY29udGFjdCBwb2ludHMgdGhhdCBhcmUgYmVoaW5kIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgY29uc3QgbG9jYWxQbGFuZUVxID0gdGhpcy5nZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGNsb3Nlc3RGYWNlQSk7CiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgIGNvbnN0IHBsYW5lRXFXUyA9IGxvY2FsUGxhbmVFcSAtIHBsYW5lTm9ybWFsV1MuZG90KHBvc0EpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwVnR4SW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgZGVwdGggPSBwbGFuZU5vcm1hbFdTLmRvdChwVnR4SW5baV0pICsgcGxhbmVFcVdTOyAvLyA/Pz8KCiAgICAgICAgaWYgKGRlcHRoIDw9IG1pbkRpc3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjbGFtcGVkOiBkZXB0aD0ke2RlcHRofSB0byBtaW5EaXN0PSR7bWluRGlzdH1gKTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZ2V0QXZlcmFnZVBvaW50TG9jYWwocG9pbnRJbnNpZGUpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IG4gPSBub3JtYWxzW2ldOwogICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2UKICAgICAgICAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgICAgY29uc3QgdlRvUCA9IG5ldyBWZWMzKCk7CiAgICAgICAgcC52c3ViKHYsIHZUb1ApOwogICAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7CiAgICAgICAgY29uc3QgdlRvUG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICAgIHBvaW50SW5zaWRlLnZzdWIodiwgdlRvUG9pbnRJbnNpZGUpOwogICAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpOwoKICAgICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgICB9CiAgICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICAgIHJldHVybiAtMTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heCBhbmQgbWluIGRvdCBwcm9kdWN0IG9mIGEgY29udmV4IGh1bGwgYXQgcG9zaXRpb24gKHBvcyxxdWF0KSBwcm9qZWN0ZWQgb250byBhbiBheGlzLgogICAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi4KICAgICAqIEBwYXJhbSByZXN1bHQgcmVzdWx0WzBdIGFuZCByZXN1bHRbMV0gd2lsbCBiZSBzZXQgdG8gbWF4aW11bSBhbmQgbWluaW11bSwgcmVzcGVjdGl2ZWx5LgogICAgICovCgoKICAgIHN0YXRpYyBwcm9qZWN0KHNoYXBlLCBheGlzLCBwb3MsIHF1YXQsIHJlc3VsdCkgewogICAgICBjb25zdCBuID0gc2hhcGUudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpczsKICAgICAgbGV0IG1heCA9IDA7CiAgICAgIGxldCBtaW4gPSAwOwogICAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47CiAgICAgIGNvbnN0IHZzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGxvY2FsT3JpZ2luLnNldFplcm8oKTsgLy8gVHJhbnNmb3JtIHRoZSBheGlzIHRvIGxvY2FsCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgYXhpcywgbG9jYWxBeGlzKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTsKICAgICAgY29uc3QgYWRkID0gbG9jYWxPcmlnaW4uZG90KGxvY2FsQXhpcyk7CiAgICAgIG1pbiA9IG1heCA9IHZzWzBdLmRvdChsb2NhbEF4aXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgICAgaWYgKHZhbCA+IG1heCkgewogICAgICAgICAgbWF4ID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbCA8IG1pbikgewogICAgICAgICAgbWluID0gdmFsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbWluIC09IGFkZDsKICAgICAgbWF4IC09IGFkZDsKCiAgICAgIGlmIChtaW4gPiBtYXgpIHsKICAgICAgICAvLyBJbmNvbnNpc3RlbnQgLSBzd2FwCiAgICAgICAgY29uc3QgdGVtcCA9IG1pbjsKICAgICAgICBtaW4gPSBtYXg7CiAgICAgICAgbWF4ID0gdGVtcDsKICAgICAgfSAvLyBPdXRwdXQKCgogICAgICByZXN1bHRbMF0gPSBtYXg7CiAgICAgIHJlc3VsdFsxXSA9IG1pbjsKICAgIH0KCiAgfQogIGNvbnN0IG1heG1pbkEgPSBbXTsKICBjb25zdCBtYXhtaW5CID0gW107CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgM2QgYm94IHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNpemUgPSAxCiAgICogICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gbmV3IENBTk5PTi5WZWMzKHNpemUsIHNpemUsIHNpemUpCiAgICogICAgIGNvbnN0IGJveFNoYXBlID0gbmV3IENBTk5PTi5Cb3goaGFsZkV4dGVudHMpCiAgICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShib3hCb2R5KQogICAqLwogIGNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogVGhlIGhhbGYgZXh0ZW50cyBvZiB0aGUgYm94LgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIGJ5IHRoZSBjb250YWN0IGdlbmVyYXRvciB0byBtYWtlIGNvbnRhY3RzIHdpdGggb3RoZXIgY29udmV4IHBvbHloZWRyYSBmb3IgZXhhbXBsZS4KICAgICAqLwogICAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkJPWAogICAgICB9KTsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IGhhbGZFeHRlbnRzOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7CiAgICAgIHRoaXMudXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgbG9jYWwgY29udmV4IHBvbHloZWRyb24gcmVwcmVzZW50YXRpb24gdXNlZCBmb3Igc29tZSBjb2xsaXNpb25zLgogICAgICovCgoKICAgIHVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpIHsKICAgICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7CiAgICAgIGNvbnN0IHN5ID0gdGhpcy5oYWxmRXh0ZW50cy55OwogICAgICBjb25zdCBzeiA9IHRoaXMuaGFsZkV4dGVudHMuejsKICAgICAgY29uc3QgViA9IFZlYzM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW25ldyBWKC1zeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgLXN5LCBzeiksIG5ldyBWKHN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIHN5LCBzeiksIG5ldyBWKC1zeCwgc3ksIHN6KV07CiAgICAgIGNvbnN0IGZhY2VzID0gW1szLCAyLCAxLCAwXSwgLy8gLXoKICAgICAgWzQsIDUsIDYsIDddLCAvLyAregogICAgICBbNSwgNCwgMCwgMV0sIC8vIC15CiAgICAgIFsyLCAzLCA3LCA2XSwgLy8gK3kKICAgICAgWzAsIDQsIDcsIDNdLCAvLyAteAogICAgICBbMSwgMiwgNiwgNV0gLy8gK3gKICAgICAgXTsKICAgICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTsKICAgICAgY29uc3QgaCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKHsKICAgICAgICB2ZXJ0aWNlcywKICAgICAgICBmYWNlcywKICAgICAgICBheGVzCiAgICAgIH0pOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7CiAgICAgIGgubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdGhlIGluZXJ0aWEgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKHRoaXMuaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkgewogICAgICBjb25zdCBlID0gaGFsZkV4dGVudHM7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC56ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS54ICogMiAqIGUueCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYm94IDYgc2lkZSBub3JtYWxzCiAgICAgKiBAcGFyYW0gc2l4VGFyZ2V0VmVjdG9ycyBBbiBhcnJheSBvZiA2IHZlY3RvcnMsIHRvIHN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBub3JtYWxzIGluLgogICAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuCiAgICAgKi8KCgogICAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkgewogICAgICBjb25zdCBzaWRlcyA9IHNpeFRhcmdldFZlY3RvcnM7CiAgICAgIGNvbnN0IGV4ID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApOwogICAgICBzaWRlc1sxXS5zZXQoMCwgZXgueSwgMCk7CiAgICAgIHNpZGVzWzJdLnNldCgwLCAwLCBleC56KTsKICAgICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTsKICAgICAgc2lkZXNbNF0uc2V0KDAsIC1leC55LCAwKTsKICAgICAgc2lkZXNbNV0uc2V0KDAsIDAsIC1leC56KTsKCiAgICAgIGlmIChxdWF0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHF1YXQudm11bHQoc2lkZXNbaV0sIHNpZGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWRlczsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gOC4wICogdGhpcy5oYWxmRXh0ZW50cy54ICogdGhpcy5oYWxmRXh0ZW50cy55ICogdGhpcy5oYWxmRXh0ZW50cy56OwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cwogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5oYWxmRXh0ZW50cy5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogZm9yRWFjaFdvcmxkQ29ybmVyCiAgICAgKi8KCgogICAgZm9yRWFjaFdvcmxkQ29ybmVyKHBvcywgcXVhdCwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSBbW2UueCwgZS55LCBlLnpdLCBbLWUueCwgZS55LCBlLnpdLCBbLWUueCwgLWUueSwgZS56XSwgWy1lLngsIC1lLnksIC1lLnpdLCBbZS54LCAtZS55LCAtZS56XSwgW2UueCwgZS55LCAtZS56XSwgWy1lLngsIGUueSwgLWUuel0sIFtlLngsIC1lLnksIGUuel1dOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3JuZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgd29ybGRDb3JuZXJUZW1wUG9zLnNldChjb3JuZXJzW2ldWzBdLCBjb3JuZXJzW2ldWzFdLCBjb3JuZXJzW2ldWzJdKTsKICAgICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBwb3MudmFkZCh3b3JsZENvcm5lclRlbXBQb3MsIHdvcmxkQ29ybmVyVGVtcFBvcyk7CiAgICAgICAgY2FsbGJhY2sod29ybGRDb3JuZXJUZW1wUG9zLngsIHdvcmxkQ29ybmVyVGVtcFBvcy55LCB3b3JsZENvcm5lclRlbXBQb3Mueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMF0uc2V0KGUueCwgZS55LCBlLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMl0uc2V0KC1lLngsIC1lLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbM10uc2V0KC1lLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzVdLnNldChlLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNl0uc2V0KC1lLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTsKICAgICAgY29uc3Qgd2MgPSB3b3JsZENvcm5lcnNUZW1wWzBdOwogICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgIG1heC5jb3B5KHdjKTsKICAgICAgbWluLmNvcHkod2MpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4OyBpKyspIHsKICAgICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07CiAgICAgICAgcXVhdC52bXVsdCh3Yywgd2MpOwogICAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgICAgY29uc3QgeCA9IHdjLng7CiAgICAgICAgY29uc3QgeSA9IHdjLnk7CiAgICAgICAgY29uc3QgeiA9IHdjLno7CgogICAgICAgIGlmICh4ID4gbWF4LngpIHsKICAgICAgICAgIG1heC54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5ID4gbWF4LnkpIHsKICAgICAgICAgIG1heC55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6ID4gbWF4LnopIHsKICAgICAgICAgIG1heC56ID0gejsKICAgICAgICB9CgogICAgICAgIGlmICh4IDwgbWluLngpIHsKICAgICAgICAgIG1pbi54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5IDwgbWluLnkpIHsKICAgICAgICAgIG1pbi55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6IDwgbWluLnopIHsKICAgICAgICAgIG1pbi56ID0gejsKICAgICAgICB9CiAgICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgLy8gbWluLnNldChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7CiAgICAgIC8vIG1heC5zZXQoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpOwogICAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7CiAgICAgIC8vICAgICBpZih4ID4gbWF4LngpewogICAgICAvLyAgICAgICAgIG1heC54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPiBtYXgueSl7CiAgICAgIC8vICAgICAgICAgbWF4LnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA+IG1heC56KXsKICAgICAgLy8gICAgICAgICBtYXgueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih4IDwgbWluLngpewogICAgICAvLyAgICAgICAgIG1pbi54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPCBtaW4ueSl7CiAgICAgIC8vICAgICAgICAgbWluLnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA8IG1pbi56KXsKICAgICAgLy8gICAgICAgICBtaW4ueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0pOwoKICAgIH0KCiAgfQogIGNvbnN0IHdvcmxkQ29ybmVyVGVtcFBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTsKCiAgLyoqCiAgICogQk9EWV9UWVBFUwogICAqLwogIGNvbnN0IEJPRFlfVFlQRVMgPSB7CiAgICAvKiogRFlOQU1JQyAqLwogICAgRFlOQU1JQzogMSwKCiAgICAvKiogU1RBVElDICovCiAgICBTVEFUSUM6IDIsCgogICAgLyoqIEtJTkVNQVRJQyAqLwogICAgS0lORU1BVElDOiA0CiAgfTsKICAvKioKICAgKiBCb2R5VHlwZQogICAqLwoKICAvKioKICAgKiBCT0RZX1NMRUVQX1NUQVRFUwogICAqLwogIGNvbnN0IEJPRFlfU0xFRVBfU1RBVEVTID0gewogICAgLyoqIEFXQUtFICovCiAgICBBV0FLRTogMCwKCiAgICAvKiogU0xFRVBZICovCiAgICBTTEVFUFk6IDEsCgogICAgLyoqIFNMRUVQSU5HICovCiAgICBTTEVFUElORzogMgogIH07CiAgLyoqCiAgICogQm9keVNsZWVwU3RhdGUKICAgKi8KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3IgYWxsIGJvZHkgdHlwZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2hhcGUgPSBuZXcgQ0FOTk9OLlNwaGVyZSgxKQogICAqICAgICBjb25zdCBib2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsKICAgKiAgICAgICBtYXNzOiAxLAogICAqICAgICAgIHNoYXBlLAogICAqICAgICB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpCiAgICovCiAgY2xhc3MgQm9keSBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciB0d28gYm9kaWVzIGNvbGxpZGUuIFRoaXMgZXZlbnQgaXMgZGlzcGF0Y2hlZCBvbiBlYWNoCiAgICAgKiBvZiB0aGUgdHdvIGJvZGllcyBpbnZvbHZlZCBpbiB0aGUgY29sbGlzaW9uLgogICAgICogQGV2ZW50IGNvbGxpZGUKICAgICAqIEBwYXJhbSBib2R5IFRoZSBib2R5IHRoYXQgd2FzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAcGFyYW0gY29udGFjdCBUaGUgZGV0YWlscyBvZiB0aGUgY29sbGlzaW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGR5bmFtaWMgYm9keSBpcyBmdWxseSBzaW11bGF0ZWQuIENhbiBiZSBtb3ZlZCBtYW51YWxseSBieSB0aGUgdXNlciwgYnV0IG5vcm1hbGx5IHRoZXkgbW92ZSBhY2NvcmRpbmcgdG8gZm9yY2VzLiBBIGR5bmFtaWMgYm9keSBjYW4gY29sbGlkZSB3aXRoIGFsbCBib2R5IHR5cGVzLiBBIGR5bmFtaWMgYm9keSBhbHdheXMgaGFzIGZpbml0ZSwgbm9uLXplcm8gbWFzcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBraW5lbWF0aWMgYm9keSBtb3ZlcyB1bmRlciBzaW11bGF0aW9uIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHkuIFRoZXkgZG8gbm90IHJlc3BvbmQgdG8gZm9yY2VzLiBUaGV5IGNhbiBiZSBtb3ZlZCBtYW51YWxseSwgYnV0IG5vcm1hbGx5IGEga2luZW1hdGljIGJvZHkgaXMgbW92ZWQgYnkgc2V0dGluZyBpdHMgdmVsb2NpdHkuIEEga2luZW1hdGljIGJvZHkgYmVoYXZlcyBhcyBpZiBpdCBoYXMgaW5maW5pdGUgbWFzcy4gS2luZW1hdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBV0FLRQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUFkKICAgICAqLwoKICAgIC8qKgogICAgICogU0xFRVBJTkcKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIHNsZWVwaW5nIGJvZHkgaGFzIHdva2VuIHVwLgogICAgICogQGV2ZW50IHdha2V1cAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZ29uZSBpbiB0byB0aGUgc2xlZXB5IHN0YXRlLgogICAgICogQGV2ZW50IHNsZWVweQogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZmFsbGVuIGFzbGVlcC4KICAgICAqIEBldmVudCBzbGVlcAogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaWQgPSBCb2R5LmlkQ291bnRlcisrOwogICAgICB0aGlzLmluZGV4ID0gLTE7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IDE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMuaW5pdFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHsKICAgICAgICB0aGlzLnZlbG9jaXR5LmNvcHkob3B0aW9ucy52ZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG1hc3MgPSB0eXBlb2Ygb3B0aW9ucy5tYXNzID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubWFzcyA6IDA7CiAgICAgIHRoaXMubWFzcyA9IG1hc3M7CiAgICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsIHx8IG51bGw7CiAgICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmxpbmVhckRhbXBpbmcgPT09ICdudW1iZXInID8gb3B0aW9ucy5saW5lYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQzsKCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHsKICAgICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGU7CiAgICAgIH0KCiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHR5cGVvZiBvcHRpb25zLmFsbG93U2xlZXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbGxvd1NsZWVwIDogdHJ1ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy5zbGVlcFNwZWVkTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgOiAwLjE7CiAgICAgIHRoaXMuc2xlZXBUaW1lTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwVGltZUxpbWl0IDogMTsKICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgICB0aGlzLnRvcnF1ZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogICAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7CiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KSB7CiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdEFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuc2hhcGVzID0gW107CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5pbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQgPSBuZXcgTWF0MygpOwogICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZSA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuZml4ZWRSb3RhdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZpeGVkUm90YXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5maXhlZFJvdGF0aW9uIDogZmFsc2U7CiAgICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy5saW5lYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmxpbmVhckZhY3RvcikgewogICAgICAgIHRoaXMubGluZWFyRmFjdG9yLmNvcHkob3B0aW9ucy5saW5lYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IuY29weShvcHRpb25zLmFuZ3VsYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSAwOwogICAgICB0aGlzLndsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpOwoKICAgICAgaWYgKG9wdGlvbnMuc2hhcGUpIHsKICAgICAgICB0aGlzLmFkZFNoYXBlKG9wdGlvbnMuc2hhcGUpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICB9CiAgICAvKioKICAgICAqIFdha2UgdGhlIGJvZHkgdXAuCiAgICAgKi8KCgogICAgd2FrZVVwKCkgewogICAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuQVdBS0U7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwoKICAgICAgaWYgKHByZXZTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBGb3JjZSBib2R5IHNsZWVwCiAgICAgKi8KCgogICAgc2xlZXAoKSB7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBJTkc7CiAgICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApOwogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsZWQgZXZlcnkgdGltZXN0ZXAgdG8gdXBkYXRlIGludGVybmFsIHNsZWVwIHRpbWVyIGFuZCBjaGFuZ2Ugc2xlZXAgc3RhdGUgaWYgbmVlZGVkLgogICAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kcwogICAgICovCgoKICAgIHNsZWVwVGljayh0aW1lKSB7CiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBjb25zdCBzbGVlcFN0YXRlID0gdGhpcy5zbGVlcFN0YXRlOwogICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpOwogICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkID0gdGhpcy5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuQVdBS0UgJiYgc3BlZWRTcXVhcmVkIDwgc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBZOyAvLyBTbGVlcHkKCiAgICAgICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gdGltZTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTsKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHNwZWVkU3F1YXJlZCA+IHNwZWVkTGltaXRTcXVhcmVkKSB7CiAgICAgICAgICB0aGlzLndha2VVcCgpOyAvLyBXYWtlIHVwCiAgICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHsKICAgICAgICAgIHRoaXMuc2xlZXAoKTsgLy8gU2xlZXBpbmcKCiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS5zbGVlcEV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSAic29sdmUgbWFzcyIuCiAgICAgKi8KCgogICAgdXBkYXRlU29sdmVNYXNzUHJvcGVydGllcygpIHsKICAgICAgaWYgKHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB7CiAgICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLnNldFplcm8oKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLnNldFplcm8oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IHRoaXMuaW52TWFzczsKICAgICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYSk7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgd29ybGQgcG9pbnQgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvTG9jYWxGcmFtZSh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSBsb2NhbCBib2R5IHBvaW50IHRvIHdvcmxkIGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuCiAgICAgKi8KCgogICAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBzaGFwZSB0byB0aGUgYm9keSB3aXRoIGEgbG9jYWwgb2Zmc2V0IGFuZCBvcmllbnRhdGlvbi4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZFNoYXBlKHNoYXBlLCBfb2Zmc2V0LCBfb3JpZW50YXRpb24pIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKF9vZmZzZXQpIHsKICAgICAgICBvZmZzZXQuY29weShfb2Zmc2V0KTsKICAgICAgfQoKICAgICAgaWYgKF9vcmllbnRhdGlvbikgewogICAgICAgIG9yaWVudGF0aW9uLmNvcHkoX29yaWVudGF0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5wdXNoKG9yaWVudGF0aW9uKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlU2hhcGUoc2hhcGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNoYXBlcy5pbmRleE9mKHNoYXBlKTsKCiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSBudWxsOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLgogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBsZXQgcmFkaXVzID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsKICAgICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICAgIGNvbnN0IG9mZnNldCA9IHNoYXBlT2Zmc2V0c1tpXS5sZW5ndGgoKTsKICAgICAgICBjb25zdCByID0gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CgogICAgICAgIGlmIChvZmZzZXQgKyByID4gcmFkaXVzKSB7CiAgICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IHJhZGl1czsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgLmFhYmIKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IHNoYXBlT3JpZW50YXRpb25zID0gdGhpcy5zaGFwZU9yaWVudGF0aW9uczsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGNvbnN0IG9mZnNldCA9IHRtcFZlYzsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSB0bXBRdWF0OwogICAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3Qgc2hhcGVBQUJCID0gdXBkYXRlQUFCQl9zaGFwZUFBQkI7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvbgoKICAgICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0LnZhZGQodGhpcy5wb3NpdGlvbiwgb2Zmc2V0KTsgLy8gR2V0IHNoYXBlIHdvcmxkIHF1YXRlcm5pb24KCiAgICAgICAgYm9keVF1YXQubXVsdChzaGFwZU9yaWVudGF0aW9uc1tpXSwgb3JpZW50YXRpb24pOyAvLyBHZXQgc2hhcGUgQUFCQgoKICAgICAgICBzaGFwZS5jYWxjdWxhdGVXb3JsZEFBQkIob2Zmc2V0LCBvcmllbnRhdGlvbiwgc2hhcGVBQUJCLmxvd2VyQm91bmQsIHNoYXBlQUFCQi51cHBlckJvdW5kKTsKCiAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgIGFhYmIuY29weShzaGFwZUFBQkIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhYWJiLmV4dGVuZChzaGFwZUFBQkIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgCiAgICAgKi8KCgogICAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmludkluZXJ0aWE7CgogICAgICBpZiAoSS54ID09PSBJLnkgJiYgSS55ID09PSBJLnogJiYgIWZvcmNlKSA7IGVsc2UgewogICAgICAgIGNvbnN0IG0xID0gdWl3X20xOwogICAgICAgIGNvbnN0IG0yID0gdWl3X20yOwogICAgICAgIG0xLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24odGhpcy5xdWF0ZXJuaW9uKTsKICAgICAgICBtMS50cmFuc3Bvc2UobTIpOwogICAgICAgIG0xLnNjYWxlKEksIG0xKTsKICAgICAgICBtMS5tbXVsdChtMiwgdGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLgogICAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGFtb3VudCBvZiBmb3JjZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZShmb3JjZSwgcmVsYXRpdmVQb2ludCkgewogICAgICBpZiAocmVsYXRpdmVQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIE5lZWRlZD8KICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2UKCgogICAgICBjb25zdCByb3RGb3JjZSA9IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZTsKICAgICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlCgogICAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKICAgICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxGb3JjZShsb2NhbEZvcmNlLCBsb2NhbFBvaW50KSB7CiAgICAgIGlmIChsb2NhbFBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTsKICAgICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsRm9yY2VfcmVsYXRpdmVQb2ludFdvcmxkOyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZQoKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxGb3JjZSwgd29ybGRGb3JjZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gdG9ycXVlIFRoZSBhbW91bnQgb2YgdG9ycXVlIHRvIGFkZC4KICAgICAqLwoKCiAgICBhcHBseVRvcnF1ZSh0b3JxdWUpIHsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIHRoaXMudG9ycXVlLnZhZGQodG9ycXVlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGltcHVsc2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS4KICAgICAqIEltcHVsc2VzIHdpbGwgYmUgYWRkZWQgdG8gQm9keS52ZWxvY2l0eSBhbmQgQm9keS5hbmd1bGFyVmVsb2NpdHkuCiAgICAgKiBAcGFyYW0gaW1wdWxzZSBUaGUgYW1vdW50IG9mIGltcHVsc2UgdG8gYWRkLgogICAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlcgoKCiAgICAgIGNvbnN0IHIgPSByZWxhdGl2ZVBvaW50OyAvLyBDb21wdXRlIHByb2R1Y2VkIGNlbnRyYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3QgdmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG87CiAgICAgIHZlbG8uY29weShpbXB1bHNlKTsKICAgICAgdmVsby5zY2FsZSh0aGlzLmludk1hc3MsIHZlbG8pOyAvLyBBZGQgbGluZWFyIGltcHVsc2UKCiAgICAgIHRoaXMudmVsb2NpdHkudmFkZCh2ZWxvLCB0aGlzLnZlbG9jaXR5KTsgLy8gQ29tcHV0ZSBwcm9kdWNlZCByb3RhdGlvbmFsIGltcHVsc2UgdmVsb2NpdHkKCiAgICAgIGNvbnN0IHJvdFZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvOwogICAgICByLmNyb3NzKGltcHVsc2UsIHJvdFZlbG8pOwogICAgICAvKgogICAgICAgcm90VmVsby54ICo9IHRoaXMuaW52SW5lcnRpYS54OwogICAgICAgcm90VmVsby55ICo9IHRoaXMuaW52SW5lcnRpYS55OwogICAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56OwogICAgICAgKi8KCiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkLnZtdWx0KHJvdFZlbG8sIHJvdFZlbG8pOyAvLyBBZGQgcm90YXRpb25hbCBJbXB1bHNlCgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS52YWRkKHJvdFZlbG8sIHRoaXMuYW5ndWxhclZlbG9jaXR5KTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgbG9jYWxseS1kZWZpbmVkIGltcHVsc2UgdG8gYSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgZm9yY2UgdmVjdG9yIHRvIGFwcGx5LCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIGJvZHkgZnJhbWUuCiAgICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkSW1wdWxzZSA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEltcHVsc2UsIHdvcmxkSW1wdWxzZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlJbXB1bHNlKHdvcmxkSW1wdWxzZSwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBib2R5IHNoYXBlIG9yIG1hc3MuCiAgICAgKi8KCgogICAgdXBkYXRlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50czsKICAgICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmluZXJ0aWE7CiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5maXhlZFJvdGF0aW9uOyAvLyBBcHByb3hpbWF0ZSB3aXRoIEFBQkIgYm94CgogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpOwogICAgICBCb3guY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgdGhpcy5tYXNzLCBJKTsKICAgICAgdGhpcy5pbnZJbmVydGlhLnNldChJLnggPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueCA6IDAsIEkueSA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS55IDogMCwgSS56ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnogOiAwKTsKICAgICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIHdvcmxkUG9pbnQKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuCiAgICAgKi8KCgogICAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IHIgPSBuZXcgVmVjMygpOwogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcik7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7CiAgICAgIHRoaXMudmVsb2NpdHkudmFkZChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIE1vdmUgdGhlIGJvZHkgZm9yd2FyZCBpbiB0aW1lLgogICAgICogQHBhcmFtIGR0IFRpbWUgc3RlcAogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemUgU2V0IHRvIHRydWUgdG8gbm9ybWFsaXplIHRoZSBib2R5IHF1YXRlcm5pb24KICAgICAqIEBwYXJhbSBxdWF0Tm9ybWFsaXplRmFzdCBJZiB0aGUgcXVhdGVybmlvbiBzaG91bGQgYmUgbm9ybWFsaXplZCB1c2luZyAiZmFzdCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAvLyBTYXZlIHByZXZpb3VzIHBvc2l0aW9uCiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7CgogICAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTsKICAgICAgY29uc3QgYW5ndWxhclZlbG8gPSB0aGlzLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgY29uc3QgcG9zID0gdGhpcy5wb3NpdGlvbjsKICAgICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlOwogICAgICBjb25zdCB0b3JxdWUgPSB0aGlzLnRvcnF1ZTsKICAgICAgY29uc3QgcXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzczsKICAgICAgY29uc3QgaW52SW5lcnRpYSA9IHRoaXMuaW52SW5lcnRpYVdvcmxkOwogICAgICBjb25zdCBsaW5lYXJGYWN0b3IgPSB0aGlzLmxpbmVhckZhY3RvcjsKICAgICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDsKICAgICAgdmVsby54ICs9IGZvcmNlLnggKiBpTWR0ICogbGluZWFyRmFjdG9yLng7CiAgICAgIHZlbG8ueSArPSBmb3JjZS55ICogaU1kdCAqIGxpbmVhckZhY3Rvci55OwogICAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejsKICAgICAgY29uc3QgZSA9IGludkluZXJ0aWEuZWxlbWVudHM7CiAgICAgIGNvbnN0IGFuZ3VsYXJGYWN0b3IgPSB0aGlzLmFuZ3VsYXJGYWN0b3I7CiAgICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7CiAgICAgIGNvbnN0IHR5ID0gdG9ycXVlLnkgKiBhbmd1bGFyRmFjdG9yLnk7CiAgICAgIGNvbnN0IHR6ID0gdG9ycXVlLnogKiBhbmd1bGFyRmFjdG9yLno7CiAgICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTsKICAgICAgYW5ndWxhclZlbG8ueSArPSBkdCAqIChlWzNdICogdHggKyBlWzRdICogdHkgKyBlWzVdICogdHopOwogICAgICBhbmd1bGFyVmVsby56ICs9IGR0ICogKGVbNl0gKiB0eCArIGVbN10gKiB0eSArIGVbOF0gKiB0eik7IC8vIFVzZSBuZXcgdmVsb2NpdHkgIC0gbGVhcCBmcm9nCgogICAgICBwb3MueCArPSB2ZWxvLnggKiBkdDsKICAgICAgcG9zLnkgKz0gdmVsby55ICogZHQ7CiAgICAgIHBvcy56ICs9IHZlbG8ueiAqIGR0OwogICAgICBxdWF0LmludGVncmF0ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eSwgZHQsIHRoaXMuYW5ndWxhckZhY3RvciwgcXVhdCk7CgogICAgICBpZiAocXVhdE5vcm1hbGl6ZSkgewogICAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAgICAgcXVhdC5ub3JtYWxpemVGYXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHF1YXQubm9ybWFsaXplKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7IC8vIFVwZGF0ZSB3b3JsZCBpbmVydGlhCgogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCgpOwogICAgfQoKICB9CiAgQm9keS5pZENvdW50ZXIgPSAwOwogIEJvZHkuQ09MTElERV9FVkVOVF9OQU1FID0gJ2NvbGxpZGUnOwogIEJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQzsKICBCb2R5LlNUQVRJQyA9IEJPRFlfVFlQRVMuU1RBVElDOwogIEJvZHkuS0lORU1BVElDID0gQk9EWV9UWVBFUy5LSU5FTUFUSUM7CiAgQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFOwogIEJvZHkuU0xFRVBZID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBZOwogIEJvZHkuU0xFRVBJTkcgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUElORzsKICBCb2R5Lndha2V1cEV2ZW50ID0gewogICAgdHlwZTogJ3dha2V1cCcKICB9OwogIEJvZHkuc2xlZXB5RXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXB5JwogIH07CiAgQm9keS5zbGVlcEV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVwJwogIH07CiAgY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBRdWF0ID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB1cGRhdGVBQUJCX3NoYXBlQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTsKICBjb25zdCB1aXdfbTIgPSBuZXcgTWF0MygpOwogIG5ldyBNYXQzKCk7CiAgY29uc3QgQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHMgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9ucwogICAqIEBhdXRob3Igc2NodGVwcGUKICAgKi8KICBjbGFzcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBmb3IgY29sbGlzaW9ucyBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBicm9hZHBoYXNlIHVzZXMgYm91bmRpbmcgYm94ZXMgZm9yIGludGVyc2VjdGlvbiB0ZXN0cywgZWxzZSBpdCB1c2VzIGJvdW5kaW5nIHNwaGVyZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSBmYWxzZTsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkCiAgICAgKiBAcGFyYW0gd29ybGQgVGhlIHdvcmxkIHRvIHNlYXJjaCBpbgogICAgICogQHBhcmFtIHAxIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb2xsaXNpb25QYWlycyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgQnJvYWRQaGFzZSBjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSBib2R5IHBhaXIgbmVlZHMgdG8gYmUgaW50ZXJzZWN0aW9uIHRlc3RlZCBhdCBhbGwuCiAgICAgKi8KCgogICAgbmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYm9keUEsIGJvZHlCKSB7CiAgICAgIC8vIENoZWNrIGNvbGxpc2lvbiBmaWx0ZXIgbWFza3MKICAgICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIENoZWNrIHR5cGVzCgoKICAgICAgaWYgKCgoYm9keUEudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5QS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSAmJiAoKGJvZHlCLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUIuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykpIHsKICAgICAgICAvLyBCb3RoIGJvZGllcyBhcmUgc3RhdGljIG9yIHNsZWVwaW5nLiBTa2lwLgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyB2b2x1bWVzIG9mIHR3byBib2RpZXMgaW50ZXJzZWN0LgogICAgICovCgoKICAgIGludGVyc2VjdGlvblRlc3QoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAodGhpcy51c2VCb3VuZGluZ0JveGVzKSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqIEBwYXJhbSBwYWlyczEgYm9keUEgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqIEBwYXJhbSBwYWlyczIgYm9keUIgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIHIpOwogICAgICBjb25zdCBib3VuZGluZ1JhZGl1c1N1bTIgPSAoYm9keUEuYm91bmRpbmdSYWRpdXMgKyBib2R5Qi5ib3VuZGluZ1JhZGl1cykgKiogMjsKICAgICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmIChib2R5QS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5QS51cGRhdGVBQUJCKCk7CiAgICAgIH0KCiAgICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5Qi51cGRhdGVBQUJCKCk7CiAgICAgIH0gLy8gQ2hlY2sgQUFCQiAvIEFBQkIKCgogICAgICBpZiAoYm9keUEuYWFiYi5vdmVybGFwcyhib2R5Qi5hYWJiKSkgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBkdXBsaWNhdGUgcGFpcnMgZnJvbSB0aGUgcGFpciBhcnJheXMuCiAgICAgKi8KCgogICAgbWFrZVBhaXJzVW5pcXVlKHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHQgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wOwogICAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxOwogICAgICBjb25zdCBwMiA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyOwogICAgICBjb25zdCBOID0gcGFpcnMxLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBwMVtpXSA9IHBhaXJzMVtpXTsKICAgICAgICBwMltpXSA9IHBhaXJzMltpXTsKICAgICAgfQoKICAgICAgcGFpcnMxLmxlbmd0aCA9IDA7CiAgICAgIHBhaXJzMi5sZW5ndGggPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGlkMSA9IHAxW2ldLmlkOwogICAgICAgIGNvbnN0IGlkMiA9IHAyW2ldLmlkOwogICAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGAke2lkMX0sJHtpZDJ9YCA6IGAke2lkMn0sJHtpZDF9YDsKICAgICAgICB0W2tleV0gPSBpOwogICAgICAgIHQua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0LmtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7CiAgICAgICAgY29uc3QgcGFpckluZGV4ID0gdFtrZXldOwogICAgICAgIHBhaXJzMS5wdXNoKHAxW3BhaXJJbmRleF0pOwogICAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pOwogICAgICAgIGRlbGV0ZSB0W2tleV07CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2Fzc2VzCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHt9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgb3ZlcmxhcC4KICAgICAqLwoKCiAgICBzdGF0aWMgYm91bmRpbmdTcGhlcmVDaGVjayhib2R5QSwgYm9keUIpIHsKICAgICAgY29uc3QgZGlzdCA9IG5ldyBWZWMzKCk7IC8vIGJzY19kaXN0OwoKICAgICAgYm9keUEucG9zaXRpb24udnN1Yihib2R5Qi5wb3NpdGlvbiwgZGlzdCk7CiAgICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdOwogICAgICBjb25zdCBzYiA9IGJvZHlCLnNoYXBlc1swXTsKICAgICAgcmV0dXJuIE1hdGgucG93KHNhLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2IuYm91bmRpbmdTcGhlcmVSYWRpdXMsIDIpID4gZGlzdC5sZW5ndGhTcXVhcmVkKCk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIHRoZSBBQUJCLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpOwogICAgICByZXR1cm4gW107CiAgICB9CgogIH0gLy8gVGVtcCBvYmplY3RzCgogIGNvbnN0IEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfciA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgUXVhdGVybmlvbigpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHsKICAgIGtleXM6IFtdCiAgfTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdOwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyID0gW107CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIE5haXZlIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb24sIHVzZWQgaW4gbGFjayBvZiBiZXR0ZXIgb25lcy4KICAgKgogICAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV8KICAgKi8KICBjbGFzcyBOYWl2ZUJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgdGhlIGNvbGxpc2lvbiBwYWlycyBpbiB0aGUgcGh5c2ljcyB3b3JsZAogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoOwogICAgICBsZXQgYmk7CiAgICAgIGxldCBiajsgLy8gTmFpdmUgTl4yIGZ0dyEKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7CiAgICAgICAgICBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gd29ybGQuYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0gLy8gVWdseSBoYWNrIHVudGlsIEJvZHkgZ2V0cyBhYWJiCgoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KCiAgLyoqCiAgICogU3RvcmFnZSBmb3IgUmF5IGNhc3RpbmcgZGF0YQogICAqLwogIGNsYXNzIFJheWNhc3RSZXN1bHQgewogICAgLyoqCiAgICAgKiByYXlGcm9tV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogcmF5VG9Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXROb3JtYWxXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXRQb2ludFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhhc0hpdAogICAgICovCgogICAgLyoqCiAgICAgKiBzaGFwZQogICAgICovCgogICAgLyoqCiAgICAgKiBib2R5CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmRleCBvZiB0aGUgaGl0IHRyaWFuZ2xlLCBpZiB0aGUgaGl0IHNoYXBlIHdhcyBhIHRyaW1lc2gKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzdGFuY2UgdG8gdGhlIGhpdC4gV2lsbCBiZSBzZXQgdG8gLTEgaWYgdGhlcmUgd2FzIG5vIGhpdAogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllcwogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFJlc2V0IGFsbCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLnJheVRvV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIGFib3J0CiAgICAgKi8KCgogICAgYWJvcnQoKSB7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICBzZXQocmF5RnJvbVdvcmxkLCByYXlUb1dvcmxkLCBoaXROb3JtYWxXb3JsZCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLmNvcHkocmF5RnJvbVdvcmxkKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuY29weShoaXROb3JtYWxXb3JsZCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5jb3B5KGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnNoYXBlID0gc2hhcGU7CiAgICAgIHRoaXMuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgIH0KCiAgfQoKICBsZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDsKCiAgLyoqCiAgICogUkFZX01PREVTCiAgICovCiAgY29uc3QgUkFZX01PREVTID0gewogICAgLyoqIENMT1NFU1QgKi8KICAgIENMT1NFU1Q6IDEsCgogICAgLyoqIEFOWSAqLwogICAgQU5ZOiAyLAoKICAgIC8qKiBBTEwgKi8KICAgIEFMTDogNAogIH07CiAgLyoqCiAgICogUmF5TW9kZQogICAqLwoKICBfU2hhcGUkdHlwZXMkU1BIRVJFID0gU2hhcGUudHlwZXMuU1BIRVJFOwogIF9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FOwogIF9TaGFwZSR0eXBlcyRCT1ggPSBTaGFwZS50eXBlcy5CT1g7CiAgX1NoYXBlJHR5cGVzJENZTElOREVSID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjsKICBfU2hhcGUkdHlwZXMkSEVJR0hURkkgPSBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRDsKICBfU2hhcGUkdHlwZXMkVFJJTUVTSCA9IFNoYXBlLnR5cGVzLlRSSU1FU0g7CgogIC8qKgogICAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLgogICAqLwogIGNsYXNzIFJheSB7CiAgICAvKioKICAgICAqIGZyb20KICAgICAqLwoKICAgIC8qKgogICAgICogdG8KICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBwcmVjaXNpb24gb2YgdGhlIHJheS4gVXNlZCB3aGVuIGNoZWNraW5nIHBhcmFsbGVsaXR5IGV0Yy4KICAgICAqIEBkZWZhdWx0IDAuMDAwMQogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gYGZhbHNlYCBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgUmF5IHRvIHRha2UgYGNvbGxpc2lvblJlc3BvbnNlYCBmbGFncyBpbnRvIGFjY291bnQgb24gYm9kaWVzIGFuZCBzaGFwZXMuCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSByYXkgc2tpcHMgYW55IGhpdHMgd2l0aCBub3JtYWwuZG90KHJheURpcmVjdGlvbikgPCAwLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyTWFzawogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyR3JvdXAKICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcnNlY3Rpb24gbW9kZS4gU2hvdWxkIGJlIFJheS5BTlksIFJheS5BTEwgb3IgUmF5LkNMT1NFU1QuCiAgICAgKiBAZGVmYXVsdCBSQVkuQU5ZCiAgICAgKi8KCiAgICAvKioKICAgICAqIEN1cnJlbnQgcmVzdWx0IG9iamVjdC4KICAgICAqLwoKICAgIC8qKgogICAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VyLXByb3ZpZGVkIHJlc3VsdCBjYWxsYmFjay4gV2lsbCBiZSB1c2VkIGlmIG1vZGUgaXMgUmF5LkFMTC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ0xPU0VTVAogICAgICovCgogICAgLyoqCiAgICAgKiBBTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQUxMCiAgICAgKi8KICAgIGdldCBbX1NoYXBlJHR5cGVzJFNQSEVSRV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0UGxhbmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQk9YXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDWUxJTkRFUl0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJEhFSUdIVEZJXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJFRSSU1FU0hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0VHJpbWVzaDsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bykgewogICAgICBpZiAoZnJvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0byA9PT0gdm9pZCAwKSB7CiAgICAgICAgdG8gPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7CiAgICAgIHRoaXMudG8gPSB0by5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0cnVlOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSBmYWxzZTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSAtMTsKICAgICAgdGhpcy5tb2RlID0gUmF5LkFOWTsKICAgICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwoKICAgICAgdGhpcy5jYWxsYmFjayA9IHJlc3VsdCA9PiB7fTsKICAgIH0KICAgIC8qKgogICAgICogRG8gaXRlcnNlY3Rpb24gYWdhaW5zdCBhbGwgYm9kaWVzIGluIHRoZSBnaXZlbiBXb3JsZC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgcmF5IGhpdCBhbnl0aGluZywgb3RoZXJ3aXNlIGZhbHNlLgogICAgICovCgoKICAgIGludGVyc2VjdFdvcmxkKHdvcmxkLCBvcHRpb25zKSB7CiAgICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG9wdGlvbnMucmVzdWx0IHx8IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9ICEhb3B0aW9ucy5za2lwQmFja2ZhY2VzOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IC0xOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CgogICAgICBpZiAob3B0aW9ucy5mcm9tKSB7CiAgICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMudG8pIHsKICAgICAgICB0aGlzLnRvLmNvcHkob3B0aW9ucy50byk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7CgogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnJlc3VsdC5yZXNldCgpOwogICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTsKICAgICAgdG1wQXJyYXkubGVuZ3RoID0gMDsKICAgICAgd29ybGQuYnJvYWRwaGFzZS5hYWJiUXVlcnkod29ybGQsIHRtcEFBQkIkMSwgdG1wQXJyYXkpOwogICAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7CiAgICAgIHJldHVybiB0aGlzLmhhc0hpdDsKICAgIH0KICAgIC8qKgogICAgICogU2hvb3QgYSByYXkgYXQgYSBib2R5LCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0Qm9keShib2R5LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7CgogICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCh0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCB8fCAoYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHhpID0gaW50ZXJzZWN0Qm9keV94aTsKICAgICAgY29uc3QgcWkgPSBpbnRlcnNlY3RCb2R5X3FpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSBib2R5LnNoYXBlcy5sZW5ndGg7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldOwoKICAgICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwCiAgICAgICAgfQoKICAgICAgICBib2R5LnF1YXRlcm5pb24ubXVsdChib2R5LnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7CiAgICAgICAgeGkudmFkZChib2R5LnBvc2l0aW9uLCB4aSk7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RTaGFwZShzaGFwZSwgcWksIHhpLCBib2R5KTsKCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhbiBhcnJheSBib2RpZXMsIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy4KICAgICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLgogICAgICoKICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2RpZXMoYm9kaWVzLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykgewogICAgICAgIHRoaXMuaW50ZXJzZWN0Qm9keShib2RpZXNbaV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIGRpcmVjdGlvbiB2ZWN0b3IuCiAgICAgKi8KCgogICAgdXBkYXRlRGlyZWN0aW9uKCkgewogICAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7CiAgICAgIHRoaXMuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgfQoKICAgIGludGVyc2VjdFNoYXBlKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZQoKICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTsKCiAgICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBpbnRlcnNlY3RNZXRob2QgPSB0aGlzW3NoYXBlLnR5cGVdOwoKICAgICAgaWYgKGludGVyc2VjdE1ldGhvZCkgewogICAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpOwogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdEJveChib3gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpOwogICAgfQoKICAgIF9pbnRlcnNlY3RQbGFuZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsgLy8gR2V0IHBsYW5lIG5vcm1hbAoKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBuZXcgVmVjMygwLCAwLCAxKTsKICAgICAgcXVhdC52bXVsdCh3b3JsZE5vcm1hbCwgd29ybGROb3JtYWwpOwogICAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpOwogICAgICBmcm9tLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9Gcm9tID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9UbyA9IGxlbi5kb3Qod29ybGROb3JtYWwpOwoKICAgICAgaWYgKHBsYW5lVG9Gcm9tICogcGxhbmVUb1RvID4gMCkgewogICAgICAgIC8vICJmcm9tIiBhbmQgInRvIiBhcmUgb24gdGhlIHNhbWUgc2lkZSBvZiB0aGUgcGxhbmUuLi4gYmFpbCBvdXQKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IG5fZG90X2RpciA9IHdvcmxkTm9ybWFsLmRvdChkaXJlY3Rpb24pOwoKICAgICAgaWYgKE1hdGguYWJzKG5fZG90X2RpcikgPCB0aGlzLnByZWNpc2lvbikgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgcGxhbmVQb2ludFRvRnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgcGxhbmVQb2ludFRvRnJvbSk7CiAgICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyOwogICAgICBkaXJlY3Rpb24uc2NhbGUodCwgZGlyX3NjYWxlZF93aXRoX3QpOwogICAgICBmcm9tLnZhZGQoZGlyX3NjYWxlZF93aXRoX3QsIGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS4KICAgICAqLwoKCiAgICBnZXRBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgewogICAgICAgIGxvd2VyQm91bmQsCiAgICAgICAgdXBwZXJCb3VuZAogICAgICB9ID0gYWFiYjsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBsb3dlckJvdW5kLnggPSBNYXRoLm1pbih0by54LCBmcm9tLngpOwogICAgICBsb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0by55LCBmcm9tLnkpOwogICAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopOwogICAgICB1cHBlckJvdW5kLnggPSBNYXRoLm1heCh0by54LCBmcm9tLngpOwogICAgICB1cHBlckJvdW5kLnkgPSBNYXRoLm1heCh0by55LCBmcm9tLnkpOwogICAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopOwogICAgfQoKICAgIF9pbnRlcnNlY3RIZWlnaHRmaWVsZChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgc2hhcGUuZGF0YTsKICAgICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlcwoKICAgICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7CgogICAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTsKICAgICAgbG9jYWxSYXkudG8uY29weSh0aGlzLnRvKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS5mcm9tLCBsb2NhbFJheS5mcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pOwogICAgICBsb2NhbFJheS51cGRhdGVEaXJlY3Rpb24oKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBjb25zdCBpbmRleCA9IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4OwogICAgICBsZXQgaU1pblg7CiAgICAgIGxldCBpTWluWTsKICAgICAgbGV0IGlNYXhYOwogICAgICBsZXQgaU1heFk7IC8vIFNldCB0byBtYXgKCiAgICAgIGlNaW5YID0gaU1pblkgPSAwOwogICAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxOwogICAgICBjb25zdCBhYWJiID0gbmV3IEFBQkIoKTsKICAgICAgbG9jYWxSYXkuZ2V0QUFCQihhYWJiKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWluWCA9IE1hdGgubWF4KGlNaW5YLCBpbmRleFswXSk7CiAgICAgIGlNaW5ZID0gTWF0aC5tYXgoaU1pblksIGluZGV4WzFdKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWF4WCA9IE1hdGgubWluKGlNYXhYLCBpbmRleFswXSArIDEpOwogICAgICBpTWF4WSA9IE1hdGgubWluKGlNYXhZLCBpbmRleFsxXSArIDEpOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTsKCiAgICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfSAvLyBMb3dlciB0cmlhbmdsZQoKCiAgICAgICAgICBzaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKCiAgICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdFNwaGVyZShzcGhlcmUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgciA9IHNwaGVyZS5yYWRpdXM7CiAgICAgIGNvbnN0IGEgPSAodG8ueCAtIGZyb20ueCkgKiogMiArICh0by55IC0gZnJvbS55KSAqKiAyICsgKHRvLnogLSBmcm9tLnopICoqIDI7CiAgICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7CiAgICAgIGNvbnN0IGMgPSAoZnJvbS54IC0gcG9zaXRpb24ueCkgKiogMiArIChmcm9tLnkgLSBwb3NpdGlvbi55KSAqKiAyICsgKGZyb20ueiAtIHBvc2l0aW9uLnopICoqIDIgLSByICoqIDI7CiAgICAgIGNvbnN0IGRlbHRhID0gYiAqKiAyIC0gNCAqIGEgKiBjOwogICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7CiAgICAgIGNvbnN0IG5vcm1hbCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsOwoKICAgICAgaWYgKGRlbHRhIDwgMCkgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChkZWx0YSA9PT0gMCkgewogICAgICAgIC8vIHNpbmdsZSBpbnRlcnNlY3Rpb24gcG9pbnQKICAgICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGQxID0gKC1iIC0gTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwogICAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwoKICAgICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7CiAgICAgICAgICBmcm9tLmxlcnAodG8sIGQxLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChkMiA+PSAwICYmIGQyIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDIsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdENvbnZleChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUsIG9wdGlvbnMpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgZmFjZUxpc3QgPSBvcHRpb25zICYmIG9wdGlvbnMuZmFjZUxpc3QgfHwgbnVsbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGZhY2VzID0gc2hhcGUuZmFjZXM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSBzaGFwZS5mYWNlTm9ybWFsczsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZnJvbVRvRGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8odG8pOwogICAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7CgogICAgICBmb3IgKGxldCBqID0gMDsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGogPCBOZmFjZXM7IGorKykgewogICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3QgPyBmYWNlTGlzdFtqXSA6IGo7CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTsKICAgICAgICBjb25zdCBmYWNlTm9ybWFsID0gbm9ybWFsc1tmaV07CiAgICAgICAgY29uc3QgcSA9IHF1YXQ7CiAgICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlCiAgICAgICAgLy8gbm90ZTogdGhpcyB3b3JrcyByZWdhcmRsZXNzIG9mIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGZhY2Ugbm9ybWFsCiAgICAgICAgLy8gR2V0IHBsYW5lIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLi4uCgogICAgICAgIHZlY3Rvci5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTsKICAgICAgICB2ZWN0b3IudmFkZCh4LCB2ZWN0b3IpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICB2ZWN0b3IudnN1Yihmcm9tLCB2ZWN0b3IpOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICAgIHEudm11bHQoZmFjZU5vcm1hbCwgbm9ybWFsKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gZGlyZWN0aW9uLmRvdChub3JtYWwpOyAvLyBCYWlsIG91dCBpZiByYXkgYW5kIHBsYW5lIGFyZSBwYXJhbGxlbAoKICAgICAgICBpZiAoTWF0aC5hYnMoZG90KSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCgogICAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheQoKICAgICAgICBpZiAoc2NhbGFyIDwgMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBpZiAoZG90IDwgMCkgewogICAgICAgIC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBkaXJlY3Rpb24uc2NhbGUoc2NhbGFyLCBpbnRlcnNlY3RQb2ludCk7CiAgICAgICAgaW50ZXJzZWN0UG9pbnQudmFkZChmcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIGEgaXMgdGhlIHBvaW50IHdlIGNvbXBhcmUgcG9pbnRzIGIgYW5kIGMgd2l0aC4KCiAgICAgICAgYS5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KGEsIGEpOwogICAgICAgIHgudmFkZChhLCBhKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDE7ICFyZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgZmFjZS5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgICAgIC8vIFRyYW5zZm9ybSAzIHZlcnRpY2VzIHRvIHdvcmxkIGNvb3JkcwogICAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTsKICAgICAgICAgIGMuY29weSh2ZXJ0aWNlc1tmYWNlW2kgKyAxXV0pOwogICAgICAgICAgcS52bXVsdChiLCBiKTsKICAgICAgICAgIHEudm11bHQoYywgYyk7CiAgICAgICAgICB4LnZhZGQoYiwgYik7CiAgICAgICAgICB4LnZhZGQoYywgYyk7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7CgogICAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgZmkpOwogICAgICAgIH0gLy8gfQoKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LgogICAgICogQHRvZG8gVXNlIE9jdHJlZSBsb29rdXAKICAgICAqLwoKCiAgICBfaW50ZXJzZWN0VHJpbWVzaChtZXNoLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX25vcm1hbDsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7CiAgICAgIGNvbnN0IHRyZWVUcmFuc2Zvcm0gPSBpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm07CiAgICAgIGNvbnN0IHZlY3RvciA9IGludGVyc2VjdENvbnZleF92ZWN0b3I7CiAgICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjsKICAgICAgY29uc3QgbG9jYWxGcm9tID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb207CiAgICAgIGNvbnN0IGxvY2FsVG8gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsVG87CiAgICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGluZGljZXMgPSBtZXNoLmluZGljZXM7CiAgICAgIG1lc2gudmVydGljZXM7IC8vIGNvbnN0IG5vcm1hbHMgPSBtZXNoLmZhY2VOb3JtYWxzCgogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOwogICAgICB0cmVlVHJhbnNmb3JtLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pOwogICAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSEKCiAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGZyb20sIGxvY2FsRnJvbSk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgdG8sIGxvY2FsVG8pOwogICAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54OwogICAgICBsb2NhbFRvLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbFRvLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsRnJvbS55ICo9IG1lc2guc2NhbGUueTsKICAgICAgbG9jYWxGcm9tLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIGxvY2FsRGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZVNxdWFyZWQgPSBsb2NhbEZyb20uZGlzdGFuY2VTcXVhcmVkKGxvY2FsVG8pOwogICAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgdHJpYW5nbGVzSW5kZXggPSB0cmlhbmdsZXNbaV07CiAgICAgICAgbWVzaC5nZXROb3JtYWwodHJpYW5nbGVzSW5kZXgsIG5vcm1hbCk7IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDNdLCBhKTsgLy8gLi4uYnV0IG1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIHJheSBmcm9tLiBXZSdsbCBmaXggdGhpcyBsYXRlci4KCiAgICAgICAgYS52c3ViKGxvY2FsRnJvbSwgdmVjdG9yKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gbG9jYWxEaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCiAgICAgICAgLy8gaWYgKE1hdGguYWJzKCBkb3QgKSA8IHRoaXMucHJlY2lzaW9uKXsKICAgICAgICAvLyAgICAgY29udGludWU7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGxvY2FsRnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBHZXQgdHJpYW5nbGUgdmVydGljZXMKCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAxXSwgYik7CiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAyXSwgYyk7CiAgICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7CgogICAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gdHJhbnNmb3JtIGludGVyc2VjdHBvaW50IGFuZCBub3JtYWwgdG8gd29ybGQKCgogICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUocXVhdCwgbm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBpbnRlcnNlY3RQb2ludCwgd29ybGRJbnRlcnNlY3RQb2ludCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTsKICAgICAgfQoKICAgICAgdHJpYW5nbGVzLmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgaW50ZXJzZWN0aW9ucyBzaG91bGQgY29udGludWUKICAgICAqLwoKCiAgICByZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgaGl0RmFjZUluZGV4KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8oaGl0UG9pbnRXb3JsZCk7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OyAvLyBTa2lwIGJhY2sgZmFjZXM/CgogICAgICBpZiAodGhpcy5za2lwQmFja2ZhY2VzICYmIG5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pID4gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmVzdWx0LmhpdEZhY2VJbmRleCA9IHR5cGVvZiBoaXRGYWNlSW5kZXggIT09ICd1bmRlZmluZWQnID8gaGl0RmFjZUluZGV4IDogLTE7CgogICAgICBzd2l0Y2ggKHRoaXMubW9kZSkgewogICAgICAgIGNhc2UgUmF5LkFMTDoKICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkNMT1NFU1Q6CiAgICAgICAgICAvLyBTdG9yZSBpZiBjbG9zZXIgdGhhbiBjdXJyZW50IGNsb3Nlc3QKICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkgewogICAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkFOWToKICAgICAgICAgIC8vIFJlcG9ydCBhbmQgc3RvcC4KICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXMgcGVyICJCYXJ5Y2VudHJpYyBUZWNobmlxdWUiIGFzIG5hbWVkCiAgICAgKiB7QGxpbmsgaHR0cHM6Ly93d3cuYmxhY2twYXduLmNvbS90ZXh0cy9wb2ludGlucG9seS9kZWZhdWx0Lmh0bWwgaGVyZX0gYnV0IHdpdGhvdXQgdGhlIGRpdmlzaW9uCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50SW5UcmlhbmdsZShwLCBhLCBiLCBjKSB7CiAgICAgIGMudnN1YihhLCB2MCk7CiAgICAgIGIudnN1YihhLCB2MSk7CiAgICAgIHAudnN1YihhLCB2Mik7CiAgICAgIGNvbnN0IGRvdDAwID0gdjAuZG90KHYwKTsKICAgICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpOwogICAgICBjb25zdCBkb3QwMiA9IHYwLmRvdCh2Mik7CiAgICAgIGNvbnN0IGRvdDExID0gdjEuZG90KHYxKTsKICAgICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpOwogICAgICBsZXQgdTsKICAgICAgbGV0IHY7CiAgICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTsKICAgIH0KCiAgfQogIFJheS5DTE9TRVNUID0gUkFZX01PREVTLkNMT1NFU1Q7CiAgUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7CiAgUmF5LkFMTCA9IFJBWV9NT0RFUy5BTEw7CiAgY29uc3QgdG1wQUFCQiQxID0gbmV3IEFBQkIoKTsKICBjb25zdCB0bXBBcnJheSA9IFtdOwogIGNvbnN0IHYxID0gbmV3IFZlYzMoKTsKICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV9xaSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgaW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGMgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFJheWNhc3RSZXN1bHQoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhPcHRpb25zID0gewogICAgZmFjZUxpc3Q6IFswXQogIH07CiAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5ID0gbmV3IFJheSgpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfdmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb20gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBuZXcgQUFCQigpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IHYwID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3QgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgZGlyZWN0aW9uLCBwb3NpdGlvbikgewogICAgLy8gdjAgaXMgdmVjdG9yIGZyb20gZnJvbSB0byBwb3NpdGlvbgogICAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7CiAgICBjb25zdCBkb3QgPSB2MC5kb3QoZGlyZWN0aW9uKTsgLy8gaW50ZXJzZWN0ID0gZGlyZWN0aW9uKmRvdCArIGZyb20KCiAgICBkaXJlY3Rpb24uc2NhbGUoZG90LCBpbnRlcnNlY3QpOwogICAgaW50ZXJzZWN0LnZhZGQoZnJvbSwgaW50ZXJzZWN0KTsKICAgIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH0KCiAgLyoqCiAgICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuCiAgICovCiAgY2xhc3MgU0FQQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBMaXN0IG9mIGJvZGllcyBjdXJyZW50bHkgaW4gdGhlIGJyb2FkcGhhc2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEF4aXMgdG8gc29ydCB0aGUgYm9kaWVzIGFsb25nLgogICAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy4KICAgICAqIEZvciBiZXN0IHBlcmZvcm1hbmNlLCBwaWNrIHRoZSBheGlzIHdoZXJlIGJvZGllcyBhcmUgbW9zdCBkaXN0cmlidXRlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy4KICAgICAqLwogICAgc3RhdGljIGNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSB7CiAgICAgIGxldCBiaVBvczsKICAgICAgbGV0IGJqUG9zOwoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueDsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi55OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLno7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56OwogICAgICB9CgogICAgICBjb25zdCByaSA9IGJpLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICByaiA9IGJqLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSwKICAgICAgICAgICAgYm91bmRCMSA9IGJqUG9zIC0gcmo7CiAgICAgIHJldHVybiBib3VuZEIxIDwgYm91bmRBMjsKICAgIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZAoKICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFgKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFgoYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnggPD0gdi5hYWJiLmxvd2VyQm91bmQueCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WQogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueSA8PSB2LmFhYmIubG93ZXJCb3VuZC55KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRaCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRaKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcih3b3JsZCkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLmF4aXNMaXN0ID0gW107CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKCiAgICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGF4aXNMaXN0LnB1c2goZXZlbnQuYm9keSk7CiAgICAgIH07CgogICAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpOwoKICAgICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgICAgYXhpc0xpc3Quc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHdvcmxkKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZCh3b3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSB3b3JsZAogICAgICovCgoKICAgIHNldFdvcmxkKHdvcmxkKSB7CiAgICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheQogICAgICB0aGlzLmF4aXNMaXN0Lmxlbmd0aCA9IDA7IC8vIEFkZCBhbGwgYm9kaWVzIGZyb20gdGhlIG5ldyB3b3JsZAoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmF4aXNMaXN0LnB1c2god29ybGQuYm9kaWVzW2ldKTsKICAgICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnkKCgogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRCb2R5JywgdGhpcy5fYWRkQm9keUhhbmRsZXIpOwogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy4KCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlycwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBpZiAodGhpcy5kaXJ0eSkgewogICAgICAgIHRoaXMuc29ydExpc3QoKTsKICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIH0gLy8gTG9vayB0aHJvdWdoIHRoZSBsaXN0CgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgTjsgaisrKSB7CiAgICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTsKCiAgICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIVNBUEJyb2FkcGhhc2UuY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHAxLCBwMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc29ydExpc3QoKSB7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGNvbnN0IE4gPSBheGlzTGlzdC5sZW5ndGg7IC8vIFVwZGF0ZSBBQUJCcwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYXhpc0xpc3RbaV07CgogICAgICAgIGlmIChiaS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9CiAgICAgIH0gLy8gU29ydCB0aGUgbGlzdAoKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDApIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRYKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRZKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgdmFyaWFuY2Ugb2YgdGhlIGJvZHkgcG9zaXRpb25zIGFuZCBlc3RpbWF0ZXMgdGhlIGJlc3QgYXhpcyB0byB1c2UuCiAgICAgKiBXaWxsIGF1dG9tYXRpY2FsbHkgc2V0IHByb3BlcnR5IGBheGlzSW5kZXhgLgogICAgICovCgoKICAgIGF1dG9EZXRlY3RBeGlzKCkgewogICAgICBsZXQgc3VtWCA9IDA7CiAgICAgIGxldCBzdW1YMiA9IDA7CiAgICAgIGxldCBzdW1ZID0gMDsKICAgICAgbGV0IHN1bVkyID0gMDsKICAgICAgbGV0IHN1bVogPSAwOwogICAgICBsZXQgc3VtWjIgPSAwOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaW52TiA9IDEgLyBOOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgY29uc3QgY2VudGVyWCA9IGIucG9zaXRpb24ueDsKICAgICAgICBzdW1YICs9IGNlbnRlclg7CiAgICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7CiAgICAgICAgY29uc3QgY2VudGVyWSA9IGIucG9zaXRpb24ueTsKICAgICAgICBzdW1ZICs9IGNlbnRlclk7CiAgICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7CiAgICAgICAgY29uc3QgY2VudGVyWiA9IGIucG9zaXRpb24uejsKICAgICAgICBzdW1aICs9IGNlbnRlclo7CiAgICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZhcmlhbmNlWCA9IHN1bVgyIC0gc3VtWCAqIHN1bVggKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVkgPSBzdW1ZMiAtIHN1bVkgKiBzdW1ZICogaW52TjsKICAgICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47CgogICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7CiAgICAgICAgaWYgKHZhcmlhbmNlWCA+IHZhcmlhbmNlWikgewogICAgICAgICAgdGhpcy5heGlzSW5kZXggPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGF4aXMgPSAneCc7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYXhpcyA9ICd5JzsKICAgICAgfQoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGF4aXMgPSAneic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgYWFiYi5sb3dlckJvdW5kW2F4aXNdOwogICAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNsYXNzIFV0aWxzIHsKICAgIC8qKgogICAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QuIE1heSBiZSBmYWxzeTogaW4gdGhpcyBjYXNlLCBhIG5ldyBvYmplY3QgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC4KICAgICAqLwogICAgc3RhdGljIGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRzKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGtleSBpbiBkZWZhdWx0cykgewogICAgICAgIGlmICghKGtleSBpbiBvcHRpb25zKSkgewogICAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvcHRpb25zOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgYmFzZSBjbGFzcwogICAqLwogIGNsYXNzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBFcXVhdGlvbnMgdG8gYmUgc29sdmVkIGluIHRoaXMgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBmYWxzZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9kaWVzIHRvIGNvbGxpZGUgd2hlbiB0aGV5IGFyZSBjb25uZWN0ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsCiAgICAgICAgd2FrZVVwQm9kaWVzOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgICB0aGlzLmJvZHlBID0gYm9keUE7CiAgICAgIHRoaXMuYm9keUIgPSBib2R5QjsKICAgICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9IG9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKCiAgICAgIGlmIChvcHRpb25zLndha2VVcEJvZGllcykgewogICAgICAgIGlmIChib2R5QSkgewogICAgICAgICAgYm9keUEud2FrZVVwKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYm9keUIpIHsKICAgICAgICAgIGJvZHlCLndha2VVcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgYWxsIHRoZSBlcXVhdGlvbnMgd2l0aCBkYXRhLgogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRob2QgdXBkYXRlKCkgbm90IGltcGxtZW1lbnRlZCBpbiB0aGlzIENvbnN0cmFpbnQgc3ViY2xhc3MhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEVuYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBlbmFibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRGlzYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBkaXNhYmxlKCkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZXFzW2ldLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgfQogICAgfQoKICB9CiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBbiBlbGVtZW50IGNvbnRhaW5pbmcgNiBlbnRyaWVzLCAzIHNwYXRpYWwgYW5kIDMgcm90YXRpb25hbCBkZWdyZWVzIG9mIGZyZWVkb20uCiAgICovCgogIGNsYXNzIEphY29iaWFuRWxlbWVudCB7CiAgICAvKioKICAgICAqIHNwYXRpYWwKICAgICAqLwoKICAgIC8qKgogICAgICogcm90YXRpb25hbAogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CgogIC8qKgogICAqIEVxdWF0aW9uIGJhc2UgY2xhc3MuCiAgICoKICAgKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLgogICAqLwogIGNsYXNzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogTWluaW11bSAocmVhZDogbmVnYXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgbnVtYmVyLCBwcm9wb3J0aW9uYWwgdG8gdGhlIGZvcmNlIGFkZGVkIHRvIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJpLCBiaiwgbWluRm9yY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtaW5Gb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWluRm9yY2UgPSAtMWU2OwogICAgICB9CgogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWluRm9yY2UgPSBtaW5Gb3JjZTsKICAgICAgdGhpcy5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB0aGlzLmJpID0gYmk7CiAgICAgIHRoaXMuYmogPSBiajsKICAgICAgdGhpcy5hID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuYiA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmVwcyA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSBuZXcgSmFjb2JpYW5FbGVtZW50KCk7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5tdWx0aXBsaWVyID0gMDsKICAgICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtcwogICAgfQogICAgLyoqCiAgICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy4KICAgICAqCiAgICAgKiBUaGUgRXF1YXRpb24gY29uc3RydWN0b3Igc2V0cyB0eXBpY2FsIFNQT09LIHBhcmFtZXRlcnMgYXMgc3VjaDoKICAgICAqICogYHN0aWZmbmVzc2AgPSAxZTcKICAgICAqICogYHJlbGF4YXRpb25gID0gNAogICAgICogKiBgdGltZVN0ZXBgPSAxIC8gNjAsIF9ub3RlIHRoZSBoYXJkY29kZWQgcmVmcmVzaCByYXRlLl8KICAgICAqLwoKCiAgICBzZXRTcG9va1BhcmFtcyhzdGlmZm5lc3MsIHJlbGF4YXRpb24sIHRpbWVTdGVwKSB7CiAgICAgIGNvbnN0IGQgPSByZWxheGF0aW9uOwogICAgICBjb25zdCBrID0gc3RpZmZuZXNzOwogICAgICBjb25zdCBoID0gdGltZVN0ZXA7CiAgICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpOwogICAgICB0aGlzLmIgPSA0LjAgKiBkIC8gKDEgKyA0ICogZCk7CiAgICAgIHRoaXMuZXBzID0gNC4wIC8gKGggKiBoICogayAqICgxICsgNCAqIGQpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgU1BPT0sgZXF1YXRpb24KICAgICAqLwoKCiAgICBjb21wdXRlQihhLCBiLCBoKSB7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR3EgPSB0aGlzLmNvbXB1dGVHcSgpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdxKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB4aSA9IGJpLnBvc2l0aW9uOwogICAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uOwogICAgICByZXR1cm4gR0Euc3BhdGlhbC5kb3QoeGkpICsgR0Iuc3BhdGlhbC5kb3QoeGopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKlcsIHdoZXJlIFcgYXJlIHRoZSBib2R5IHZlbG9jaXRpZXMKICAgICAqLwoKCiAgICBjb21wdXRlR1coKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7CiAgICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7CiAgICAgIGNvbnN0IHdpID0gYmkuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyh2aSwgd2kpICsgR0IubXVsdGlwbHlWZWN0b3JzKHZqLCB3aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqV2xhbWJkYSwgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHV2xhbWJkYSgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52bGFtYmRhOwogICAgICBjb25zdCB2aiA9IGJqLnZsYW1iZGE7CiAgICAgIGNvbnN0IHdpID0gYmkud2xhbWJkYTsKICAgICAgY29uc3Qgd2ogPSBiai53bGFtYmRhOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqZiwgd2hlcmUgTSBpcyB0aGUgbWFzcyBtYXRyaXggd2l0aCBkaWFnb25hbCBibG9ja3MgZm9yIGVhY2ggYm9keSwgYW5kIGYgYXJlIHRoZSBmb3JjZXMgb24gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBjb21wdXRlR2lNZigpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgZmkgPSBiaS5mb3JjZTsKICAgICAgY29uc3QgdGkgPSBiaS50b3JxdWU7CiAgICAgIGNvbnN0IGZqID0gYmouZm9yY2U7CiAgICAgIGNvbnN0IHRqID0gYmoudG9ycXVlOwogICAgICBjb25zdCBpbnZNYXNzaSA9IGJpLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52TWFzc2ogPSBiai5pbnZNYXNzU29sdmU7CiAgICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTsKICAgICAgZmouc2NhbGUoaW52TWFzc2osIGlNZmopOwogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdCh0aSwgaW52SWlfdm11bHRfdGF1aSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyhpTWZpLCBpbnZJaV92bXVsdF90YXVpKSArIEdCLm11bHRpcGx5VmVjdG9ycyhpTWZqLCBpbnZJal92bXVsdF90YXVqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqRycKICAgICAqLwoKCiAgICBjb21wdXRlR2lNR3QoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52SWkgPSBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgbGV0IHJlc3VsdCA9IGludk1hc3NpICsgaW52TWFzc2o7CiAgICAgIGludklpLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpOwogICAgICBpbnZJai52bXVsdChHQi5yb3RhdGlvbmFsLCB0bXApOwogICAgICByZXN1bHQgKz0gdG1wLmRvdChHQi5yb3RhdGlvbmFsKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdGVtcCA9IGFkZFRvV2xhbWJkYV90ZW1wOyAvLyBBZGQgdG8gbGluZWFyIHZlbG9jaXR5CiAgICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogRwoKICAgICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpOwogICAgICBiai52bGFtYmRhLmFkZFNjYWxlZFZlY3Rvcihiai5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Iuc3BhdGlhbCwgYmoudmxhbWJkYSk7IC8vIEFkZCB0byBhbmd1bGFyIHZlbG9jaXR5CgogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQS5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmkud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJpLndsYW1iZGEpOwogICAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmoud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJqLndsYW1iZGEpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBkZW5vbWluYXRvciBwYXJ0IG9mIHRoZSBTUE9PSyBlcXVhdGlvbjogQyA9IEcqaW52KE0pKkcnICsgZXBzCiAgICAgKi8KCgogICAgY29tcHV0ZUMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVHaU1HdCgpICsgdGhpcy5lcHM7CiAgICB9CgogIH0KICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb250YWN0L25vbi1wZW5ldHJhdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uCiAgICovCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzCgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwogIGNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5QS4KICAgICAqLwoKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIGJvZHlCIEJvZHkgdGhhdCB3aWxsIGJlIGNvbnN0cmFpbmVkIGluIGEgc2ltaWxhciB3YXkgdG8gdGhlIHNhbWUgcG9pbnQgYXMgYm9keUEuIFdlIHdpbGwgdGhlcmVmb3JlIGdldCBhIGxpbmsgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuIElmIG5vdCBzcGVjaWZpZWQsIGJvZHlBIHdpbGwgYmUgY29uc3RyYWluZWQgdG8gYSBzdGF0aWMgcG9pbnQuCiAgICAgKiBAcGFyYW0gcGl2b3RCIFRoZSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3Mgb2YgYm9keUIgd2hpY2ggYm9keUIgaXMgY29uc3RyYWluZWQgdG8uCiAgICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKHBpdm90QSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHBpdm90QiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5waXZvdEEgPSBwaXZvdEEuY2xvbmUoKTsKICAgICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTsKICAgICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICBjb25zdCB5ID0gdGhpcy5lcXVhdGlvblkgPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyCgogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbAoKICAgICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB4Lm1heEZvcmNlID0geS5tYXhGb3JjZSA9IHoubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgeC5uaS5zZXQoMSwgMCwgMCk7CiAgICAgIHkubmkuc2V0KDAsIDEsIDApOwogICAgICB6Lm5pLnNldCgwLCAwLCAxKTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblg7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aOyAvLyBSb3RhdGUgdGhlIHBpdm90cyB0byB3b3JsZCBzcGFjZQoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QSwgeC5yaSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5waXZvdEIsIHgucmopOwogICAgICB5LnJpLmNvcHkoeC5yaSk7CiAgICAgIHkucmouY29weSh4LnJqKTsKICAgICAgei5yaS5jb3B5KHgucmkpOwogICAgICB6LnJqLmNvcHkoeC5yaik7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uZSBlcXVhdGlvbi4gV29ya3MgdG8ga2VlcCB0aGUgZ2l2ZW4gYm9keSB3b3JsZCB2ZWN0b3JzIGFsaWduZWQsIG9yIHRpbHRlZCB3aXRoaW4gYSBnaXZlbiBhbmdsZSBmcm9tIGVhY2ggb3RoZXIuCiAgICovCiAgY2xhc3MgQ29uZUVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEEKICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBCCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiY29uZSBhbmdsZSIgdG8ga2VlcAogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDI7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQyOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gVGhlIGFuZ2xlIGJldHdlZW4gdHdvIHZlY3RvciBpczoKICAgICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGIKICAgICAgLy8gZyA9IGEgKiBiCiAgICAgIC8vIGdkb3QgPSAoYiB4IGEpICogd2kgKyAoYSB4IGIpICogd2oKICAgICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBjb25zdHJhaW50LiBXb3JrcyB0byBrZWVwIHRoZSBsb2NhbCB2ZWN0b3JzIG9ydGhvZ29uYWwgdG8gZWFjaCBvdGhlciBpbiB3b3JsZCBzcGFjZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhBbmdsZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQxOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gZyA9IG5pICogbmoKICAgICAgLy8gZ2RvdCA9IChuaiB4IG5pKSAqIHdpICsgKG5pIHggbmopICogd2oKICAgICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdCiAgICAgIC8vIFcgPSBbdmkgd2kgdmogd2pdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkobmp4bmkpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopOwogICAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgQ29uZSBUd2lzdCBjb25zdHJhaW50LCB1c2VmdWwgZm9yIHJhZ2RvbGxzLgogICAqLwogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsgLy8gU2V0IHBpdm90IHBvaW50IGluIGJldHdlZW4KCiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9ICEhb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgdCA9IHRoaXMudHdpc3RFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy50d2lzdEFuZ2xlID0gdHlwZW9mIG9wdGlvbnMudHdpc3RBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnR3aXN0QW5nbGUgOiAwOyAvLyBNYWtlIHRoZSBjb25lIGVxdWF0aW9uIHB1c2ggdGhlIGJvZGllcyB0b3dhcmQgdGhlIGNvbmUgYXhpcywgbm90IG91dHdhcmQKCiAgICAgIGMubWF4Rm9yY2UgPSAwOwogICAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvbgoKICAgICAgdC5tYXhGb3JjZSA9IDA7CiAgICAgIHQubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goYywgdCk7CiAgICB9CgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uOwogICAgICBjb25zdCB0d2lzdCA9IHRoaXMudHdpc3RFcXVhdGlvbjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIFVwZGF0ZSB0aGUgYXhlcyB0byB0aGUgY29uZSBjb25zdHJhaW50CgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy5heGlzQSwgY29uZS5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50CgogICAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQSwgdHdpc3QuYXhpc0EpOwogICAgICB0aGlzLmF4aXNCLnRhbmdlbnRzKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpOwogICAgICBjb25lLmFuZ2xlID0gdGhpcy5hbmdsZTsKICAgICAgdHdpc3QubWF4QW5nbGUgPSB0aGlzLnR3aXN0QW5nbGU7CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnMgdHdvIGJvZGllcyB0byBiZSBhdCBhIGNvbnN0YW50IGRpc3RhbmNlIGZyb20gZWFjaCBvdGhlcnMgY2VudGVyIG9mIG1hc3MuCiAgICovCiAgY2xhc3MgRGlzdGFuY2VDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkaXN0YW5jZSBUaGUgZGlzdGFuY2UgdG8ga2VlcC4gSWYgdW5kZWZpbmVkLCBpdCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCBkaXN0YW5jZSBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4KICAgICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIGRpc3RhbmNlLCBtYXhGb3JjZSkgewogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIpOwoKICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBkaXN0YW5jZSA9IGJvZHlBLnBvc2l0aW9uLmRpc3RhbmNlVG8oYm9keUIucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsgLy8gTWFrZSBpdCBiaWRpcmVjdGlvbmFsCgogICAgICBlcS5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgZXEubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb247CiAgICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTsKICAgICAgY29uc3Qgbm9ybWFsID0gZXEubmk7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIG5vcm1hbCk7CiAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgbm9ybWFsLnNjYWxlKGhhbGZEaXN0LCBlcS5yaSk7CiAgICAgIG5vcm1hbC5zY2FsZSgtaGFsZkRpc3QsIGVxLnJqKTsKICAgIH0KCiAgfQoKICAvKioKICAgKiBMb2NrIGNvbnN0cmFpbnQuIFdpbGwgcmVtb3ZlIGFsbCBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYm9kaWVzLgogICAqLwogIGNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7CiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGFsZldheSA9IG5ldyBWZWMzKCk7CiAgICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpOwogICAgICBoYWxmV2F5LnNjYWxlKDAuNSwgaGFsZldheSk7CiAgICAgIGJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90Qik7CiAgICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXMKCiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXMKCiAgICAgIHRoaXMueEEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTsKICAgICAgdGhpcy55QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMueUIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1kpOwogICAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsKICAgICAgdGhpcy56QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWik7IC8vIC4uLmFuZCB0aGUgZm9sbG93aW5nIHJvdGF0aW9uYWwgZXF1YXRpb25zIHdpbGwga2VlcCBhbGwgcm90YXRpb25hbCBET0YncyBpbiBwbGFjZQoKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyMSwgcjIsIHIzKTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uOwogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVGhlc2UgdmVjdG9yIHBhaXJzIG11c3QgYmUgb3J0aG9nb25hbAoKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEEsIHIxLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUEsIHIyLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekIsIHIyLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEIsIHIzLmF4aXNCKTsKICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBtb3RvciBjb25zdHJhaW50LiBUcmllcyB0byBrZWVwIHRoZSByZWxhdGl2ZSBhbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2RpZXMgdG8gYSBnaXZlbiB2YWx1ZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1vdG9yIHZlbG9jaXR5LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIHRoaXMuYmk7CiAgICAgIHRoaXMuYmo7CiAgICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwCiAgICAgIC8vIGdkb3QgPSBheGlzQSAqIHdpIC0gYXhpc0IgKiB3agogICAgICAvLyBnZG90ID0gRyAqIFcgPSBHICogW3ZpIHdpIHZqIHdqXQogICAgICAvLyA9PgogICAgICAvLyBHID0gWzAgYXhpc0EgMCAtYXhpc0JdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkoYXhpc0EpOwogICAgICBheGlzQi5uZWdhdGUoR0Iucm90YXRpb25hbCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CgogIC8qKgogICAqIEhpbmdlIGNvbnN0cmFpbnQuIFRoaW5rIG9mIGl0IGFzIGEgZG9vciBoaW5nZS4gSXQgdHJpZXMgdG8ga2VlcCB0aGUgZG9vciBpbiB0aGUgY29ycmVjdCBwbGFjZSBhbmQgd2l0aCB0aGUgY29ycmVjdCBvcmllbnRhdGlvbi4KICAgKi8KICBjbGFzcyBIaW5nZUNvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQS5ub3JtYWxpemUoKTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQi5ub3JtYWxpemUoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb24gPSBuZXcgUm90YXRpb25hbE1vdG9yRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtYXhGb3JjZSk7CiAgICAgIG1vdG9yLmVuYWJsZWQgPSBmYWxzZTsgLy8gTm90IGVuYWJsZWQgYnkgZGVmYXVsdAogICAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7CiAgICB9CiAgICAvKioKICAgICAqIGVuYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZW5hYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogZGlzYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZGlzYWJsZU1vdG9yKCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3RvclNwZWVkCiAgICAgKi8KCgogICAgc2V0TW90b3JTcGVlZChzcGVlZCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDsKICAgIH0KICAgIC8qKgogICAgICogc2V0TW90b3JNYXhGb3JjZQogICAgICovCgoKICAgIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3Qgd29ybGRBeGlzQSA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMTsKICAgICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlcwoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQoYXhpc0IsIHdvcmxkQXhpc0IpOwogICAgICB3b3JsZEF4aXNBLnRhbmdlbnRzKHIxLmF4aXNBLCByMi5heGlzQSk7CiAgICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CiAgICAgIHIyLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CgogICAgICBpZiAodGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQpIHsKICAgICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0EsIG1vdG9yLmF4aXNBKTsKICAgICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTsKICAgICAgfQogICAgfQoKICB9CiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb25zdHJhaW5zIHRoZSBzbGlwcGluZyBpbiBhIGNvbnRhY3QgYWxvbmcgYSB0YW5nZW50CiAgICovCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50ID0gbmV3IFZlYzMoKTsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgcmkgPSB0aGlzLnJpOwogICAgICBjb25zdCByaiA9IHRoaXMucmo7CiAgICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanh0ID0gRnJpY3Rpb25FcXVhdGlvbl9jb21wdXRlQl90ZW1wMjsKICAgICAgY29uc3QgdCA9IHRoaXMudDsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICByaS5jcm9zcyh0LCByaXh0KTsKICAgICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XQogICAgICAvLyBBbmQgcmVtZW1iZXIsIHRoaXMgaXMgYSBwdXJlIHZlbG9jaXR5IGNvbnN0cmFpbnQsIGcgaXMgYWx3YXlzIHplcm8hCgogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXh0Lm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KHQpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogRGVmaW5lcyB3aGF0IGhhcHBlbnMgd2hlbiB0d28gbWF0ZXJpYWxzIG1lZXQuCiAgICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCCiAgICovCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CiAgQ29udGFjdE1hdGVyaWFsLmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwogIGNsYXNzIE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogTWF0ZXJpYWwgbmFtZS4KICAgICAqIElmIG9wdGlvbnMgaXMgYSBzdHJpbmcsIG5hbWUgd2lsbCBiZSBzZXQgdG8gdGhhdCBzdHJpbmcuCiAgICAgKiBAdG9kbyBEZXByZWNhdGUgdGhpcwogICAgICovCgogICAgLyoqIE1hdGVyaWFsIGlkLiAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gZm9yIHRoaXMgbWF0ZXJpYWwuCiAgICAgKiBJZiBub24tbmVnYXRpdmUsIGl0IHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBmcmljdGlvbiBnaXZlbiBieSBDb250YWN0TWF0ZXJpYWxzLiBJZiB0aGVyZSdzIG5vIG1hdGNoaW5nIENvbnRhY3RNYXRlcmlhbCwgdGhlIHZhbHVlIGZyb20gYGRlZmF1bHRDb250YWN0TWF0ZXJpYWxgIGluIHRoZSBXb3JsZCB3aWxsIGJlIHVzZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlc3RpdHV0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgcmVzdGl0dXRpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGxldCBuYW1lID0gJyc7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZpeAoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApCiAgICAgICAgbmFtZSA9IG9wdGlvbnM7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmlkID0gTWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5mcmljdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZyaWN0aW9uIDogLTE7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7CiAgICB9CgogIH0KICBNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoYm94Qm9keSwgc3BoZXJlQm9keSwgewogICAqICAgICAgIHJlc3RMZW5ndGg6IDAsCiAgICogICAgICAgc3RpZmZuZXNzOiA1MCwKICAgKiAgICAgICBkYW1waW5nOiAxLAogICAqICAgICB9KQogICAqCiAgICogICAgIC8vIENvbXB1dGUgdGhlIGZvcmNlIGFmdGVyIGVhY2ggc3RlcAogICAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4gewogICAqICAgICAgIHNwcmluZy5hcHBseUZvcmNlKCkKICAgKiAgICAgfSkKICAgKi8KICBjbGFzcyBTcHJpbmcgewogICAgLyoqCiAgICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNlY29uZCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QSBpbiBsb2NhbCBib2R5QSBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEEsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUIgaW4gbG9jYWwgYm9keUIgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yZXN0TGVuZ3RoID0gdHlwZW9mIG9wdGlvbnMucmVzdExlbmd0aCA9PT0gJ251bWJlcicgPyBvcHRpb25zLnJlc3RMZW5ndGggOiAxOwogICAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDsKICAgICAgdGhpcy5kYW1waW5nID0gb3B0aW9ucy5kYW1waW5nIHx8IDE7CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQSkgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckIpIHsKICAgICAgICB0aGlzLmxvY2FsQW5jaG9yQi5jb3B5KG9wdGlvbnMubG9jYWxBbmNob3JCKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZEFuY2hvckEob3B0aW9ucy53b3JsZEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckIpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBBLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JBLCB0aGlzLmxvY2FsQW5jaG9yQSk7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgdXNpbmcgd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgc2V0V29ybGRBbmNob3JCKHdvcmxkQW5jaG9yQikgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JBKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlBLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JBLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0aGUgc3ByaW5nIGZvcmNlIHRvIHRoZSBjb25uZWN0ZWQgYm9kaWVzLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoKSB7CiAgICAgIGNvbnN0IGsgPSB0aGlzLnN0aWZmbmVzczsKICAgICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZzsKICAgICAgY29uc3QgbCA9IHRoaXMucmVzdExlbmd0aDsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHIgPSBhcHBseUZvcmNlX3I7CiAgICAgIGNvbnN0IHJfdW5pdCA9IGFwcGx5Rm9yY2Vfcl91bml0OwogICAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91OwogICAgICBjb25zdCBmID0gYXBwbHlGb3JjZV9mOwogICAgICBjb25zdCB0bXAgPSBhcHBseUZvcmNlX3RtcDsKICAgICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7CiAgICAgIGNvbnN0IHdvcmxkQW5jaG9yQiA9IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCOwogICAgICBjb25zdCByaSA9IGFwcGx5Rm9yY2Vfcmk7CiAgICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajsKICAgICAgY29uc3QgcmlfeF9mID0gYXBwbHlGb3JjZV9yaV94X2Y7CiAgICAgIGNvbnN0IHJqX3hfZiA9IGFwcGx5Rm9yY2VfcmpfeF9mOyAvLyBHZXQgd29ybGQgYW5jaG9ycwoKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKTsKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHMKCiAgICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7CiAgICAgIHdvcmxkQW5jaG9yQi52c3ViKGJvZHlCLnBvc2l0aW9uLCByaik7IC8vIENvbXB1dGUgZGlzdGFuY2UgdmVjdG9yIGJldHdlZW4gd29ybGQgYW5jaG9yIHBvaW50cwoKICAgICAgd29ybGRBbmNob3JCLnZzdWIod29ybGRBbmNob3JBLCByKTsKICAgICAgY29uc3QgcmxlbiA9IHIubGVuZ3RoKCk7CiAgICAgIHJfdW5pdC5jb3B5KHIpOwogICAgICByX3VuaXQubm9ybWFsaXplKCk7IC8vIENvbXB1dGUgcmVsYXRpdmUgdmVsb2NpdHkgb2YgdGhlIGFuY2hvciBwb2ludHMsIHUKCiAgICAgIGJvZHlCLnZlbG9jaXR5LnZzdWIoYm9keUEudmVsb2NpdHksIHUpOyAvLyBBZGQgcm90YXRpb25hbCB2ZWxvY2l0eQoKICAgICAgYm9keUIuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJqLCB0bXApOwogICAgICB1LnZhZGQodG1wLCB1KTsKICAgICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApOwogICAgICB1LnZzdWIodG1wLCB1KTsgLy8gRiA9IC0gayAqICggeCAtIEwgKSAtIEQgKiAoIHUgKQoKICAgICAgcl91bml0LnNjYWxlKC1rICogKHJsZW4gLSBsKSAtIGQgKiB1LmRvdChyX3VuaXQpLCBmKTsgLy8gQWRkIGZvcmNlcyB0byBib2RpZXMKCiAgICAgIGJvZHlBLmZvcmNlLnZzdWIoZiwgYm9keUEuZm9yY2UpOwogICAgICBib2R5Qi5mb3JjZS52YWRkKGYsIGJvZHlCLmZvcmNlKTsgLy8gQW5ndWxhciBmb3JjZQoKICAgICAgcmkuY3Jvc3MoZiwgcmlfeF9mKTsKICAgICAgcmouY3Jvc3MoZiwgcmpfeF9mKTsKICAgICAgYm9keUEudG9ycXVlLnZzdWIocmlfeF9mLCBib2R5QS50b3JxdWUpOwogICAgICBib2R5Qi50b3JxdWUudmFkZChyal94X2YsIGJvZHlCLnRvcnF1ZSk7CiAgICB9CgogIH0KICBjb25zdCBhcHBseUZvcmNlX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfcl91bml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yal94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdG1wID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogV2hlZWxJbmZvCiAgICovCiAgY2xhc3MgV2hlZWxJbmZvIHsKICAgIC8qKgogICAgICogTWF4IHRyYXZlbCBkaXN0YW5jZSBvZiB0aGUgc3VzcGVuc2lvbiwgaW4gbWV0ZXJzLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTcGVlZCB0byBhcHBseSB0byB0aGUgd2hlZWwgcm90YXRpb24gd2hlbiB0aGUgd2hlZWwgaXMgc2xpZGluZy4KICAgICAqIEBkZWZhdWx0IC0wLjEKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgc2hvdWxkIGJlIHVzZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlkaW5nCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLgogICAgICovCgogICAgLyoqCiAgICAgKiBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZUxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aAogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAyCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJhZGl1cwogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ0NvbXByZXNzaW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nUmVsYXhhdGlvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZnJpY3Rpb25TbGlwCiAgICAgKiBAZGVmYXVsdCAxMC41CiAgICAgKi8KCiAgICAvKiogZm9yd2FyZEFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKiBzaWRlQWNjZWxlcmF0aW9uICovCgogICAgLyoqCiAgICAgKiBzdGVlcmluZwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGVsdGFSb3RhdGlvbgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiByb2xsSW5mbHVlbmNlCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heFN1c3BlbnNpb25Gb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBlbmdpbmVGb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBicmFrZQogICAgICovCgogICAgLyoqCiAgICAgKiBpc0Zyb250V2hlZWwKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5CiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25Gb3JjZQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlwSW5mbwogICAgICovCgogICAgLyoqCiAgICAgKiBza2lkSW5mbwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNpZGVJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZvcndhcmRJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVlbCB3b3JsZCB0cmFuc2Zvcm0uCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzSW5Db250YWN0CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbkxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBheGxlV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsCiAgICAgICAgc3VzcGVuc2lvbk1heExlbmd0aDogMiwKICAgICAgICByYWRpdXM6IDEsCiAgICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLAogICAgICAgIGRhbXBpbmdDb21wcmVzc2lvbjogMTAsCiAgICAgICAgZGFtcGluZ1JlbGF4YXRpb246IDEwLAogICAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSwKICAgICAgICBmb3J3YXJkQWNjZWxlcmF0aW9uOiAxLAogICAgICAgIHNpZGVBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc3RlZXJpbmc6IDAsCiAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgZGVsdGFSb3RhdGlvbjogMCwKICAgICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLAogICAgICAgIG1heFN1c3BlbnNpb25Gb3JjZTogTnVtYmVyLk1BWF9WQUxVRSwKICAgICAgICBpc0Zyb250V2hlZWw6IHRydWUsCiAgICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLAogICAgICAgIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OiAwLAogICAgICAgIHN1c3BlbnNpb25Gb3JjZTogMCwKICAgICAgICBzbGlwSW5mbzogMCwKICAgICAgICBza2lkSW5mbzogMCwKICAgICAgICBzdXNwZW5zaW9uTGVuZ3RoOiAwLAogICAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsCiAgICAgICAgdXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogZmFsc2UsCiAgICAgICAgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogLTAuMQogICAgICB9KTsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSBvcHRpb25zLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsID0gb3B0aW9ucy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gb3B0aW9ucy5kaXJlY3Rpb25Mb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbldvcmxkID0gb3B0aW9ucy5kaXJlY3Rpb25Xb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZVdvcmxkID0gb3B0aW9ucy5heGxlV29ybGQuY2xvbmUoKTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDsKICAgICAgdGhpcy5yYWRpdXMgPSBvcHRpb25zLnJhZGl1czsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gb3B0aW9ucy5zdXNwZW5zaW9uU3RpZmZuZXNzOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uOwogICAgICB0aGlzLmRhbXBpbmdSZWxheGF0aW9uID0gb3B0aW9ucy5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSBvcHRpb25zLmZyaWN0aW9uU2xpcDsKICAgICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICB0aGlzLnNpZGVBY2NlbGVyYXRpb24gPSBvcHRpb25zLnNpZGVBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc3RlZXJpbmcgPSAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5yb2xsSW5mbHVlbmNlID0gb3B0aW9ucy5yb2xsSW5mbHVlbmNlOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlOwogICAgICB0aGlzLmVuZ2luZUZvcmNlID0gMDsKICAgICAgdGhpcy5icmFrZSA9IDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7CiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgdGhpcy5zbGlwSW5mbyA9IDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSAwOwogICAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwOwogICAgICB0aGlzLnNpZGVJbXB1bHNlID0gMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7CiAgICAgIHRoaXMuaXNJbkNvbnRhY3QgPSBmYWxzZTsKICAgIH0KCiAgICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7CiAgICAgIGNvbnN0IHJheWNhc3RSZXN1bHQgPSB0aGlzLnJheWNhc3RSZXN1bHQ7CgogICAgICBpZiAodGhpcy5pc0luQ29udGFjdCkgewogICAgICAgIGNvbnN0IHByb2plY3QgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChyYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkKTsKICAgICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXMuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocmVscG9zLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKHByb2plY3QgPj0gLTAuMSkgewogICAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gcHJvalZlbCAqIGludjsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBOb3QgaW4gY29udGFjdCA6IHBvc2l0aW9uIHdoZWVsIGluIGEgbmljZSAocmVzdCBsZW5ndGgpIHBvc2l0aW9uCiAgICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQuc2NhbGUoLTEsIHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpOwogICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CiAgICB9CgogIH0KICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogVmVoaWNsZSBoZWxwZXIgY2xhc3MgdGhhdCBjYXN0cyByYXlzIGZyb20gdGhlIHdoZWVsIHBvc2l0aW9ucyB0b3dhcmRzIHRoZSBncm91bmQgYW5kIGFwcGxpZXMgZm9yY2VzLgogICAqLwogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBpbmZvID0gbmV3IFdoZWVsSW5mbyhvcHRpb25zKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndoZWVsSW5mb3MubGVuZ3RoOwogICAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTsKICAgICAgcmV0dXJuIGluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuCiAgICAgKi8KCgogICAgc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcAogICAgICovCgoKICAgIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmVuZ2luZUZvcmNlID0gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYnJha2luZyBmb3JjZSBvZiBhIHdoZWVsCiAgICAgKi8KCgogICAgc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmJyYWtlID0gYnJha2U7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICBhZGRUb1dvcmxkKHdvcmxkKSB7CiAgICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7CiAgICAgICAgdGhhdC51cGRhdGVWZWhpY2xlKHdvcmxkLmR0KTsKICAgICAgfTsKCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG9uZSBvZiB0aGUgd2hlZWwgYXhsZXMsIHdvcmxkLW9yaWVudGVkLgogICAgICovCgoKICAgIGdldFZlaGljbGVBeGlzV29ybGQoYXhpc0luZGV4LCByZXN1bHQpIHsKICAgICAgcmVzdWx0LnNldChheGlzSW5kZXggPT09IDAgPyAxIDogMCwgYXhpc0luZGV4ID09PSAxID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMiA/IDEgOiAwKTsKICAgICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpOwogICAgfQoKICAgIHVwZGF0ZVZlaGljbGUodGltZVN0ZXApIHsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZm9yd2FyZFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZm9yd2FyZFdvcmxkKTsKCiAgICAgIGlmIChmb3J3YXJkV29ybGQuZG90KGNoYXNzaXNCb2R5LnZlbG9jaXR5KSA8IDApIHsKICAgICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7CiAgICAgIH0gLy8gc2ltdWxhdGUgc3VzcGVuc2lvbgoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLmNhc3RSYXkod2hlZWxJbmZvc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlU3VzcGVuc2lvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIC8vYXBwbHkgc3VzcGVuc2lvbiBmb3JjZQogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBsZXQgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwuc3VzcGVuc2lvbkZvcmNlOwoKICAgICAgICBpZiAoc3VzcGVuc2lvbkZvcmNlID4gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlKSB7CiAgICAgICAgICBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVscG9zKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2ogPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBmd2QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsgLy9jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwogICAgICAgIC8vd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7CgogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgdmVsKTsgLy8gSGFjayB0byBnZXQgdGhlIHJvdGF0aW9uIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvbgoKICAgICAgICBsZXQgbSA9IDE7CgogICAgICAgIHN3aXRjaCAodGhpcy5pbmRleFVwQXhpcykgewogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBtID0gLTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvaiA9IGZ3ZC5kb3Qod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opOwogICAgICAgICAgZndkLnZzdWIoaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiwgZndkKTsKICAgICAgICAgIGNvbnN0IHByb2oyID0gZndkLmRvdCh2ZWwpOwogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzOwogICAgICAgIH0KCiAgICAgICAgaWYgKCh3aGVlbC5zbGlkaW5nIHx8ICF3aGVlbC5pc0luQ29udGFjdCkgJiYgd2hlZWwuZW5naW5lRm9yY2UgIT09IDAgJiYgd2hlZWwudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCkgewogICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHJvdGF0aW9uIHdoZW4gYWNjZWxlcmF0aW5nIGFuZCBzbGlkaW5nCiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7CiAgICAgICAgfSAvLyBMb2NrIHdoZWVscwoKCiAgICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkgewogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IDA7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yb3RhdGlvbiArPSB3aGVlbC5kZWx0YVJvdGF0aW9uOyAvLyBVc2UgdGhlIG9sZCB2YWx1ZQoKICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uICo9IDAuOTk7IC8vIGRhbXBpbmcgb2Ygcm90YXRpb24gd2hlbiBub3QgaW4gY29udGFjdAogICAgICB9CiAgICB9CgogICAgdXBkYXRlU3VzcGVuc2lvbihkZWx0YVRpbWUpIHsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7CiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgd19pdCA9IDA7IHdfaXQgPCBudW1XaGVlbHM7IHdfaXQrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTsKCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICBsZXQgZm9yY2U7IC8vIFNwcmluZwoKICAgICAgICAgIGNvbnN0IHN1c3BfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgICAgICBjb25zdCBjdXJyZW50X2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7CiAgICAgICAgICBmb3JjZSA9IHdoZWVsLnN1c3BlbnNpb25TdGlmZm5lc3MgKiBsZW5ndGhfZGlmZiAqIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbjsgLy8gRGFtcGVyCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkX3JlbF92ZWwgPSB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eTsKICAgICAgICAgIGxldCBzdXNwX2RhbXBpbmc7CgogICAgICAgICAgaWYgKHByb2plY3RlZF9yZWxfdmVsIDwgMCkgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IGZvcmNlICogY2hhc3Npc01hc3M7CgogICAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA8IDApIHsKICAgICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlRnJvbVdvcmxkKHdvcmxkKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHM7CiAgICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgfQoKICAgIGNhc3RSYXkod2hlZWwpIHsKICAgICAgY29uc3QgcmF5dmVjdG9yID0gY2FzdFJheV9yYXl2ZWN0b3I7CiAgICAgIGNvbnN0IHRhcmdldCA9IGNhc3RSYXlfdGFyZ2V0OwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGxldCBkZXB0aCA9IC0xOwogICAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1czsKICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUocmF5bGVuLCByYXl2ZWN0b3IpOwogICAgICBjb25zdCBzb3VyY2UgPSB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ7CiAgICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQ7CiAgICAgIHJheWNhc3RSZXN1bHQucmVzZXQoKTsgLy8gVHVybiBvZmYgcmF5IGNvbGxpc2lvbiB3aXRoIHRoZSBjaGFzc2lzIHRlbXBvcmFyaWx5CgogICAgICBjb25zdCBvbGRTdGF0ZSA9IGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkCgogICAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IG9sZFN0YXRlOwogICAgICBjb25zdCBvYmplY3QgPSByYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDsKCiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICBkZXB0aCA9IHJheWNhc3RSZXN1bHQuZGlzdGFuY2U7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlOwogICAgICAgIGNvbnN0IGhpdERpc3RhbmNlID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gaGl0RGlzdGFuY2UgLSB3aGVlbC5yYWRpdXM7IC8vIGNsYW1wIG9uIG1heCBzdXNwZW5zaW9uIHRyYXZlbAoKICAgICAgICBjb25zdCBtaW5TdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggLSB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1pblN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA+IG1heFN1c3BlbnNpb25MZW5ndGgpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoOwogICAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5yZXNldCgpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdCh3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpOwogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwogICAgICAgIGNvbnN0IHByb2pWZWwgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CgogICAgICAgIGlmIChkZW5vbWluYXRvciA+PSAtMC4xKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL3B1dCB3aGVlbCBpbmZvIGFzIGluIHJlc3QgcG9zaXRpb24KICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CgogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CgogICAgdXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCkgewogICAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNoYXNzaXNCb2R5LnBvaW50VG9Xb3JsZEZyYW1lKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwgd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh3aGVlbC5heGxlTG9jYWwsIHdoZWVsLmF4bGVXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBvbmUgb2YgdGhlIHdoZWVsIHRyYW5zZm9ybS4KICAgICAqIE5vdGUgd2hlbiByZW5kZXJpbmcgd2hlZWxzOiBkdXJpbmcgZWFjaCBzdGVwLCB3aGVlbCB0cmFuc2Zvcm1zIGFyZSB1cGRhdGVkIEJFRk9SRSB0aGUgY2hhc3NpczsgaWUuIHRoZWlyIHBvc2l0aW9uIGJlY29tZXMgaW52YWxpZCBhZnRlciB0aGUgc3RlcC4gVGh1cyB3aGVuIHlvdSByZW5kZXIgd2hlZWxzLCB5b3UgbXVzdCB1cGRhdGUgd2hlZWwgdHJhbnNmb3JtcyBiZWZvcmUgcmVuZGVyaW5nIHRoZW0uIFNlZSByYXljYXN0VmVoaWNsZSBkZW1vIGZvciBhbiBleGFtcGxlLgogICAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS4KICAgICAqLwoKCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHVwID0gdG1wVmVjNDsKICAgICAgY29uc3QgcmlnaHQgPSB0bXBWZWM1OwogICAgICBjb25zdCBmd2QgPSB0bXBWZWM2OwogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKTsKICAgICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTsKICAgICAgcmlnaHQuY29weSh3aGVlbC5heGxlTG9jYWwpOwogICAgICB1cC5jcm9zcyhyaWdodCwgZndkKTsKICAgICAgZndkLm5vcm1hbGl6ZSgpOwogICAgICByaWdodC5ub3JtYWxpemUoKTsgLy8gUm90YXRlIGFyb3VuZCBzdGVlcmluZyBvdmVyIHRoZSB3aGVlbEF4bGUKCiAgICAgIGNvbnN0IHN0ZWVyaW5nID0gd2hlZWwuc3RlZXJpbmc7CiAgICAgIGNvbnN0IHN0ZWVyaW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpOwogICAgICBjb25zdCByb3RhdGluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHJvdGF0aW5nT3JuLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIHdoZWVsLnJvdGF0aW9uKTsgLy8gV29ybGQgcm90YXRpb24gb2YgdGhlIHdoZWVsCgogICAgICBjb25zdCBxID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucXVhdGVybmlvbjsKICAgICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpOwogICAgICBxLm11bHQocm90YXRpbmdPcm4sIHEpOwogICAgICBxLm5vcm1hbGl6ZSgpOyAvLyB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHAgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5wb3NpdGlvbjsKICAgICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgcC5zY2FsZSh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoLCBwKTsKICAgICAgcC52YWRkKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgcCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIG9uZSBvZiB0aGUgd2hlZWxzCiAgICAgKi8KCgogICAgZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbEluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07CiAgICB9CgogICAgdXBkYXRlRnJpY3Rpb24odGltZVN0ZXApIHsKICAgICAgY29uc3Qgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qOyAvL2NhbGN1bGF0ZSB0aGUgaW1wdWxzZSwgc28gdGhhdCB0aGUgd2hlZWxzIGRvbid0IG1vdmUgc2lkZXdhcmRzCgogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBmb3J3YXJkV1MgPSB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1M7CiAgICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kKys7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwOwoKICAgICAgICBpZiAoIWZvcndhcmRXU1tpXSkgewogICAgICAgICAgZm9yd2FyZFdTW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CgogICAgICAgIGlmICghYXhsZVtpXSkgewogICAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgYXhsZWkgPSBheGxlW2ldOwogICAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGUKCiAgICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7CiAgICAgICAgICBjb25zdCBzdXJmTm9ybWFsV1MgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkOwogICAgICAgICAgY29uc3QgcHJvaiA9IGF4bGVpLmRvdChzdXJmTm9ybWFsV1MpOwogICAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7CiAgICAgICAgICBheGxlaS52c3ViKHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiwgYXhsZWkpOwogICAgICAgICAgYXhsZWkubm9ybWFsaXplKCk7CiAgICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0ubm9ybWFsaXplKCk7CiAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoY2hhc3Npc0JvZHksIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGF4bGVpKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBzaWRlRmFjdG9yID0gMTsKICAgICAgY29uc3QgZndkRmFjdG9yID0gMC41OwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwogICAgICAgIGxldCByb2xsaW5nRnJpY3Rpb24gPSAwOwogICAgICAgIHdoZWVsLnNsaXBJbmZvID0gMTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwOwogICAgICAgICAgY29uc3QgbWF4SW1wdWxzZSA9IHdoZWVsLmJyYWtlID8gd2hlZWwuYnJha2UgOiBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZTsgLy8gYnRXaGVlbENvbnRhY3RQb2ludCBjb250YWN0UHQoY2hhc3Npc0JvZHksZ3JvdW5kT2JqZWN0LHdoZWVsSW5mcmF5Y2FzdEluZm8uaGl0UG9pbnRXb3JsZCxmb3J3YXJkV1Nbd2hlZWxdLG1heEltcHVsc2UpOwogICAgICAgICAgLy8gcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjb250YWN0UHQpOwoKICAgICAgICAgIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY2hhc3Npc0JvZHksIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBmb3J3YXJkV1NbaV0sIG1heEltcHVsc2UpOwogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7CgogICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjsKICAgICAgICAgIHdoZWVsLnNsaXBJbmZvICo9IGZhY3RvcjsKICAgICAgICB9IC8vc3dpdGNoIGJldHdlZW4gYWN0aXZlIHJvbGxpbmcgKHRocm90dGxlKSwgYnJha2luZyBhbmQgbm9uLWFjdGl2ZSByb2xsaW5nIGZyaWN0aW9uIChudGhyb3R0bGUvYnJlYWspCgoKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuc2tpZEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CiAgICAgICAgICBjb25zdCBtYXhpbXAgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgKiB0aW1lU3RlcCAqIHdoZWVsLmZyaWN0aW9uU2xpcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNpZGUgPSBtYXhpbXA7CiAgICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTsKICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gcm9sbGluZ0ZyaWN0aW9uOyAvL3doZWVsSW5mby5lbmdpbmVGb3JjZSogdGltZVN0ZXA7CgogICAgICAgICAgY29uc3QgeCA9IHdoZWVsLmZvcndhcmRJbXB1bHNlICogZndkRmFjdG9yIC8gd2hlZWwuZm9yd2FyZEFjY2VsZXJhdGlvbjsKICAgICAgICAgIGNvbnN0IHkgPSB3aGVlbC5zaWRlSW1wdWxzZSAqIHNpZGVGYWN0b3IgLyB3aGVlbC5zaWRlQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5OwogICAgICAgICAgd2hlZWwuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpbXB1bHNlU3F1YXJlZCA+IG1heGltcFNxdWFyZWQpIHsKICAgICAgICAgICAgdGhpcy5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7CiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IG1heGltcCAvIE1hdGguc3FydChpbXB1bHNlU3F1YXJlZCk7CiAgICAgICAgICAgIHdoZWVsLnNraWRJbmZvICo9IGZhY3RvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsaWRpbmcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CgogICAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICAgIGlmICh3aGVlbC5za2lkSW5mbyA8IDEpIHsKICAgICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBhcHBseSB0aGUgaW1wdWxzZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxfcG9zKTsgLy8gY2Fubm9ucyBhcHBseWltcHVsc2UgaXMgdXNpbmcgd29ybGQgY29vcmQgZm9yIHRoZSBwb3NpdGlvbgogICAgICAgIC8vcmVsX3Bvcy5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgIGlmICh3aGVlbC5mb3J3YXJkSW1wdWxzZSAhPT0gMCkgewogICAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0uc2NhbGUod2hlZWwuZm9yd2FyZEltcHVsc2UsIGltcHVsc2UpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbF9wb3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgICBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBheGxlW2ldLnNjYWxlKHdoZWVsLnNpZGVJbXB1bHNlLCBzaWRlSW1wKTsgLy8gU2NhbGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIGluIHRoZSB1cCBkaXJlY3Rpb24gd2l0aCByb2xsSW5mbHVlbmNlLgogICAgICAgICAgLy8gSWYgcm9sbEluZmx1ZW5jZSBpcyAxLCB0aGUgaW1wdWxzZSB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIGhpdFBvaW50IChlYXN5IHRvIHJvbGwgb3ZlciksIGlmIGl0IGlzIHplcm8gaXQgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBzYW1lIHBsYW5lIGFzIHRoZSBjZW50ZXIgb2YgbWFzcyAobm90IGVhc3kgdG8gcm9sbCBvdmVyKS4KCiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb0xvY2FsRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlOwogICAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MpOyAvL2FwcGx5IGZyaWN0aW9uIGltcHVsc2Ugb24gdGhlIGdyb3VuZAoKICAgICAgICAgIHNpZGVJbXAuc2NhbGUoLTEsIHNpZGVJbXApOwogICAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM0ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM1ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTsKICBuZXcgUmF5KCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3JheXZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FzdFJheV90YXJnZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGRpcmVjdGlvbnMgPSBbbmV3IFZlYzMoMSwgMCwgMCksIG5ldyBWZWMzKDAsIDEsIDApLCBuZXcgVmVjMygwLCAwLCAxKV07CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gbmV3IFZlYzMoKTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9heGxlID0gW107CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTID0gW107CiAgY29uc3Qgc2lkZUZyaWN0aW9uU3RpZmZuZXNzMiA9IDE7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY2FsY1JvbGxpbmdGcmljdGlvbihib2R5MCwgYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQsIG1heEltcHVsc2UpIHsKICAgIGxldCBqMSA9IDA7CiAgICBjb25zdCBjb250YWN0UG9zV29ybGQgPSBmcmljdGlvblBvc1dvcmxkOyAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7CiAgICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CgogICAgY29uc3QgdmVsMSA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMTsKICAgIGNvbnN0IHZlbDIgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDsgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTAucG9zaXRpb24sIHJlbF9wb3MxKTsKICAgIC8vIGNvbnRhY3RQb3NXb3JsZC52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMik7CgogICAgYm9keTAuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwxKTsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHZyZWwgPSBmcmljdGlvbkRpcmVjdGlvbldvcmxkLmRvdCh2ZWwpOwogICAgY29uc3QgZGVub20wID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5MCwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCk7CiAgICBjb25zdCBkZW5vbTEgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IHJlbGF4YXRpb24gPSAxOwogICAgY29uc3QgamFjRGlhZ0FCSW52ID0gcmVsYXhhdGlvbiAvIChkZW5vbTAgKyBkZW5vbTEpOyAvLyBjYWxjdWxhdGUgaiB0aGF0IG1vdmVzIHVzIHRvIHplcm8gcmVsYXRpdmUgdmVsb2NpdHkKCiAgICBqMSA9IC12cmVsICogamFjRGlhZ0FCSW52OwoKICAgIGlmIChtYXhJbXB1bHNlIDwgajEpIHsKICAgICAgajEgPSBtYXhJbXB1bHNlOwogICAgfQoKICAgIGlmIChqMSA8IC1tYXhJbXB1bHNlKSB7CiAgICAgIGoxID0gLW1heEltcHVsc2U7CiAgICB9CgogICAgcmV0dXJuIGoxOwogIH0KCiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbSA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keSwgcG9zLCBub3JtYWwpIHsKICAgIGNvbnN0IHIwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMDsKICAgIGNvbnN0IGMwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMDsKICAgIGNvbnN0IHZlYyA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjOwogICAgY29uc3QgbSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbTsKICAgIHBvcy52c3ViKGJvZHkucG9zaXRpb24sIHIwKTsKICAgIHIwLmNyb3NzKG5vcm1hbCwgYzApOwogICAgYm9keS5pbnZJbmVydGlhV29ybGQudm11bHQoYzAsIG0pOwogICAgbS5jcm9zcyhyMCwgdmVjKTsKICAgIHJldHVybiBib2R5Lmludk1hc3MgKyBub3JtYWwuZG90KHZlYyk7CiAgfQoKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwgPSBuZXcgVmVjMygpOyAvLyBiaWxhdGVyYWwgY29uc3RyYWludCBiZXR3ZWVuIHR3byBkeW5hbWljIG9iamVjdHMKCiAgZnVuY3Rpb24gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChib2R5MSwgcG9zMSwgYm9keTIsIHBvczIsIG5vcm1hbCkgewogICAgY29uc3Qgbm9ybWFsTGVuU3FyID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTsKCiAgICBpZiAobm9ybWFsTGVuU3FyID4gMS4xKSB7CiAgICAgIHJldHVybiAwOyAvLyBubyBpbXB1bHNlCiAgICB9IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgIC8vIHBvczEudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gcG9zMi52c3ViKGJvZHkyLnBvc2l0aW9uLCByZWxfcG9zMik7CgoKICAgIGNvbnN0IHZlbDEgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDE7CiAgICBjb25zdCB2ZWwyID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyOwogICAgY29uc3QgdmVsID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWw7CiAgICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MxLCB2ZWwxKTsKICAgIGJvZHkyLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczIsIHZlbDIpOwogICAgdmVsMS52c3ViKHZlbDIsIHZlbCk7CiAgICBjb25zdCByZWxfdmVsID0gbm9ybWFsLmRvdCh2ZWwpOwogICAgY29uc3QgY29udGFjdERhbXBpbmcgPSAwLjI7CiAgICBjb25zdCBtYXNzVGVybSA9IDEgLyAoYm9keTEuaW52TWFzcyArIGJvZHkyLmludk1hc3MpOwogICAgY29uc3QgaW1wdWxzZSA9IC1jb250YWN0RGFtcGluZyAqIHJlbF92ZWwgKiBtYXNzVGVybTsKICAgIHJldHVybiBpbXB1bHNlOwogIH0KCiAgLyoqCiAgICogU3BoZXJpY2FsIHNoYXBlCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzID0gMQogICAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cykKICAgKiAgICAgY29uc3Qgc3BoZXJlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBzcGhlcmVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHNwaGVyZUJvZHkpCiAgICovCiAgY2xhc3MgU3BoZXJlIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlNQSEVSRQogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDsKCiAgICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGhlcmUgcmFkaXVzIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYSAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IEkgPSAyLjAgKiBtYXNzICogdGhpcy5yYWRpdXMgKiB0aGlzLnJhZGl1cyAvIDUuMDsKICAgICAgdGFyZ2V0LnggPSBJOwogICAgICB0YXJnZXQueSA9IEk7CiAgICAgIHRhcmdldC56ID0gSTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKiB2b2x1bWUgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAzKSAvIDMuMDsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMucmFkaXVzOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIGNvbnN0IHIgPSB0aGlzLnJhZGl1czsKICAgICAgY29uc3QgYXhlcyA9IFsneCcsICd5JywgJ3onXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGF4ID0gYXhlc1tpXTsKICAgICAgICBtaW5bYXhdID0gcG9zW2F4XSAtIHI7CiAgICAgICAgbWF4W2F4XSA9IHBvc1theF0gKyByOwogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEN5bGluZGVyIGNsYXNzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHJhZGl1c1RvcCA9IDAuNQogICAqICAgICBjb25zdCByYWRpdXNCb3R0b20gPSAwLjUKICAgKiAgICAgY29uc3QgaGVpZ2h0ID0gMgogICAqICAgICBjb25zdCBudW1TZWdtZW50cyA9IDEyCiAgICogICAgIGNvbnN0IGN5bGluZGVyU2hhcGUgPSBuZXcgQ0FOTk9OLkN5bGluZGVyKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKQogICAqICAgICBjb25zdCBjeWxpbmRlckJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY3lsaW5kZXJTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGN5bGluZGVyQm9keSkKICAgKi8KCiAgY2xhc3MgQ3lsaW5kZXIgZXh0ZW5kcyBDb252ZXhQb2x5aGVkcm9uIHsKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4gKi8KCiAgICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLiAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHJhZGl1c1RvcCBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIHJhZGl1c0JvdHRvbSBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4KICAgICAqIEBwYXJhbSBudW1TZWdtZW50cyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKSB7CiAgICAgIGlmIChyYWRpdXNUb3AgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c1RvcCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c0JvdHRvbSA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChoZWlnaHQgPT09IHZvaWQgMCkgewogICAgICAgIGhlaWdodCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChudW1TZWdtZW50cyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbnVtU2VnbWVudHMgPSA4OwogICAgICB9CgogICAgICBpZiAocmFkaXVzVG9wIDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGN5bGluZGVyIHJhZGl1c1RvcCBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzQm90dG9tIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgY29uc3QgTiA9IG51bVNlZ21lbnRzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBheGVzID0gW107CiAgICAgIGNvbnN0IGZhY2VzID0gW107CiAgICAgIGNvbnN0IGJvdHRvbWZhY2UgPSBbXTsKICAgICAgY29uc3QgdG9wZmFjZSA9IFtdOwogICAgICBjb25zdCBjb3MgPSBNYXRoLmNvczsKICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW47IC8vIEZpcnN0IGJvdHRvbSBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKDApLCAtaGVpZ2h0ICogMC41LCByYWRpdXNCb3R0b20gKiBjb3MoMCkpKTsKICAgICAgYm90dG9tZmFjZS5wdXNoKDApOyAvLyBGaXJzdCB0b3AgcG9pbnQKCiAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbigwKSwgaGVpZ2h0ICogMC41LCByYWRpdXNUb3AgKiBjb3MoMCkpKTsKICAgICAgdG9wZmFjZS5wdXNoKDEpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMSk7CiAgICAgICAgY29uc3QgdGhldGFOID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAwLjUpOwoKICAgICAgICBpZiAoaSA8IE4gLSAxKSB7CiAgICAgICAgICAvLyBCb3R0b20KICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c0JvdHRvbSAqIHNpbih0aGV0YSksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIGJvdHRvbWZhY2UucHVzaCgyICogaSArIDIpOyAvLyBUb3AKCiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNUb3AgKiBzaW4odGhldGEpLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIHRvcGZhY2UucHVzaCgyICogaSArIDMpOyAvLyBGYWNlCgogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMiAqIGkgKyAzLCAyICogaSArIDJdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMSwgMF0pOyAvLyBDb25uZWN0CiAgICAgICAgfSAvLyBBeGlzOiB3ZSBjYW4gY3V0IG9mZiBoYWxmIG9mIHRoZW0gaWYgd2UgaGF2ZSBldmVuIG51bWJlciBvZiBzZWdtZW50cwoKCiAgICAgICAgaWYgKE4gJSAyID09PSAxIHx8IGkgPCBOIC8gMikgewogICAgICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKC1zaW4odGhldGFOKSwgMCwgY29zKHRoZXRhTikpKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZhY2VzLnB1c2goYm90dG9tZmFjZSk7CiAgICAgIGF4ZXMucHVzaChuZXcgVmVjMygwLCAxLCAwKSk7IC8vIFJlb3JkZXIgdG9wIGZhY2UKCiAgICAgIGNvbnN0IHRlbXAgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9wZmFjZS5sZW5ndGg7IGkrKykgewogICAgICAgIHRlbXAucHVzaCh0b3BmYWNlW3RvcGZhY2UubGVuZ3RoIC0gaSAtIDFdKTsKICAgICAgfQoKICAgICAgZmFjZXMucHVzaCh0ZW1wKTsKICAgICAgc3VwZXIoewogICAgICAgIHZlcnRpY2VzLAogICAgICAgIGZhY2VzLAogICAgICAgIGF4ZXMKICAgICAgfSk7CiAgICAgIHRoaXMudHlwZSA9IFNoYXBlLnR5cGVzLkNZTElOREVSOwogICAgICB0aGlzLnJhZGl1c1RvcCA9IHJhZGl1c1RvcDsKICAgICAgdGhpcy5yYWRpdXNCb3R0b20gPSByYWRpdXNCb3R0b207CiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLm51bVNlZ21lbnRzID0gbnVtU2VnbWVudHM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogUGFydGljbGUgc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGFydGljbGVTaGFwZSA9IG5ldyBDQU5OT04uUGFydGljbGUoKQogICAqICAgICBjb25zdCBwYXJ0aWNsZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogcGFydGljbGVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHBhcnRpY2xlQm9keSkKICAgKi8KICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICBtaW4uY29weShwb3MpOwogICAgICBtYXguY29weShwb3MpOwogICAgfQoKICB9CgogIC8qKgogICAqIEEgcGxhbmUsIGZhY2luZyBpbiB0aGUgWiBkaXJlY3Rpb24uIFRoZSBwbGFuZSBoYXMgaXRzIHN1cmZhY2UgYXQgej0wIGFuZCBldmVyeXRoaW5nIGJlbG93IHo9MCBpcyBhc3N1bWVkIHRvIGJlIHNvbGlkIHBsYW5lLiBUbyBtYWtlIHRoZSBwbGFuZSBmYWNlIGluIHNvbWUgb3RoZXIgZGlyZWN0aW9uIHRoYW4geiwgeW91IG11c3QgcHV0IGl0IGluc2lkZSBhIEJvZHkgYW5kIHJvdGF0ZSB0aGF0IGJvZHkuIFNlZSB0aGUgZGVtb3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGxhbmVTaGFwZSA9IG5ldyBDQU5OT04uUGxhbmUoKQogICAqICAgICBjb25zdCBwbGFuZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAwLCBzaGFwZTogIHBsYW5lU2hhcGUgfSkKICAgKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGxhbmVCb2R5KQogICAqLwogIGNsYXNzIFBsYW5lIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHdvcmxkTm9ybWFsICovCgogICAgLyoqIHdvcmxkTm9ybWFsTmVlZHNVcGRhdGUgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUExBTkUKICAgICAgfSk7IC8vIFdvcmxkIG9yaWVudGVkIG5vcm1hbAoKICAgICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgfQogICAgLyoqIGNvbXB1dGVXb3JsZE5vcm1hbCAqLwoKCiAgICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy53b3JsZE5vcm1hbDsKICAgICAgbi5zZXQoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQobiwgbik7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHBsYW5lIGlzIGluZmluaXRlLi4uCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIFRoZSBwbGFuZSBBQUJCIGlzIGluZmluaXRlLCBleGNlcHQgaWYgdGhlIG5vcm1hbCBpcyBwb2ludGluZyBhbG9uZyBhbnkgYXhpcwogICAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgegoKICAgICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTsKICAgICAgY29uc3QgbWF4VmFsID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgbWluLnNldCgtbWF4VmFsLCAtbWF4VmFsLCAtbWF4VmFsKTsKICAgICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTsKCiAgICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHsKICAgICAgICBtYXgueCA9IHBvcy54OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueCA9PT0gLTEpIHsKICAgICAgICBtaW4ueCA9IHBvcy54OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC55ID09PSAxKSB7CiAgICAgICAgbWF4LnkgPSBwb3MueTsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7CiAgICAgICAgbWluLnkgPSBwb3MueTsKICAgICAgfQoKICAgICAgaWYgKHRlbXBOb3JtYWwueiA9PT0gMSkgewogICAgICAgIG1heC56ID0gcG9zLno7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC56ID09PSAtMSkgewogICAgICAgIG1pbi56ID0gcG9zLno7CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CgogIH0KICBjb25zdCB0ZW1wTm9ybWFsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogSGVpZ2h0ZmllbGQgc2hhcGUgY2xhc3MuIEhlaWdodCBkYXRhIGlzIGdpdmVuIGFzIGFuIGFycmF5LiBUaGVzZSBkYXRhIHBvaW50cyBhcmUgc3ByZWFkIG91dCBldmVubHkgd2l0aCBhIGdpdmVuIGRpc3RhbmNlLgogICAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHkKICAgKiBAdG9kbyBzaG91bGQgYmUgcG9zc2libGUgdG8gc2NhbGUgYWxvbmcgYWxsIGF4ZXMKICAgKiBAdG9kbyBSZWZhY3RvciBlbGVtZW50U2l6ZSB0byBlbGVtZW50U2l6ZVggYW5kIGVsZW1lbnRTaXplWQogICAqCiAgICogQGV4YW1wbGUKICAgKiAgICAgLy8gR2VuZXJhdGUgc29tZSBoZWlnaHQgZGF0YSAoeS12YWx1ZXMpLgogICAqICAgICBjb25zdCBkYXRhID0gW10KICAgKiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHsKICAgKiAgICAgICAgIGNvbnN0IHkgPSAwLjUgKiBNYXRoLmNvcygwLjIgKiBpKQogICAqICAgICAgICAgZGF0YS5wdXNoKHkpCiAgICogICAgIH0KICAgKgogICAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkU2hhcGUgPSBuZXcgQ0FOTk9OLkhlaWdodGZpZWxkKGRhdGEsIHsKICAgKiAgICAgICAgIGVsZW1lbnRTaXplOiAxIC8vIERpc3RhbmNlIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9ucwogICAqICAgICB9KQogICAqICAgICBjb25zdCBoZWlnaHRmaWVsZEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBzaGFwZTogaGVpZ2h0ZmllbGRTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGhlaWdodGZpZWxkQm9keSkKICAgKi8KICBjbGFzcyBIZWlnaHRmaWVsZCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXggdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBNaW5pbXVtIHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi4KICAgICAqIEB0b2RvIGVsZW1lbnRTaXplWCBhbmQgWQogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZGF0YSwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIG1heFZhbHVlOiBudWxsLAogICAgICAgIG1pblZhbHVlOiBudWxsLAogICAgICAgIGVsZW1lbnRTaXplOiAxCiAgICAgIH0pOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuSEVJR0hURklFTEQKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMubWF4VmFsdWUgPSBvcHRpb25zLm1heFZhbHVlOwogICAgICB0aGlzLm1pblZhbHVlID0gb3B0aW9ucy5taW5WYWx1ZTsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7CgogICAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMubWF4VmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsgLy8gImlfal9pc1VwcGVyIiA9PiB7IGNvbnZleDogLi4uLCBvZmZzZXQ6IC4uLiB9CiAgICAgIC8vIGZvciBleGFtcGxlOgogICAgICAvLyBfY2FjaGVkUGlsbGFyc1siMF8yXzEiXQoKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1pblZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWluVmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPCBtaW5WYWx1ZSkgewogICAgICAgICAgICBtaW5WYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1heFZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1heFZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWF4VmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkgewogICAgICAgICAgICBtYXhWYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgaGVpZ2h0IHZhbHVlIGF0IGFuIGluZGV4LiBEb24ndCBmb3JnZXQgdG8gdXBkYXRlIG1heFZhbHVlIGFuZCBtaW5WYWx1ZSBhZnRlciB5b3UncmUgZG9uZS4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRWYWx1ZUF0SW5kZXgoeGksIHlpLCB2YWx1ZSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZQoKICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpOwoKICAgICAgaWYgKHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWkgLSAxLCB0cnVlKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4L21pbiBpbiBhIHJlY3RhbmdsZSBpbiB0aGUgbWF0cml4IGRhdGEKICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHQgYXJyYXksIGlmIGl0IHdhcyBwYXNzZWQgaW4uIE1pbmltdW0gd2lsbCBiZSBhdCBwb3NpdGlvbiAwIGFuZCBtYXggYXQgMS4KICAgICAqLwoKCiAgICBnZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIC8vIEdldCBtYXggYW5kIG1pbiBvZiB0aGUgZGF0YQogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOyAvLyBTZXQgZmlyc3QgdmFsdWUKCiAgICAgIGxldCBtYXggPSB0aGlzLm1pblZhbHVlOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDw9IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykgewogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4KSB7CiAgICAgICAgICAgIG1heCA9IGhlaWdodDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlc3VsdFswXSA9IHRoaXMubWluVmFsdWU7CiAgICAgIHJlc3VsdFsxXSA9IG1heDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFR3by1lbGVtZW50IGFycmF5CiAgICAgKiBAcGFyYW0gY2xhbXAgSWYgdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBoZWlnaHRmaWVsZCBlZGdlLgogICAgICovCgoKICAgIGdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCByZXN1bHQsIGNsYW1wKSB7CiAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAogICAgICBjb25zdCB3ID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7CiAgICAgIGxldCB5aSA9IE1hdGguZmxvb3IoeSAvIHcpOwogICAgICByZXN1bHRbMF0gPSB4aTsKICAgICAgcmVzdWx0WzFdID0geWk7CgogICAgICBpZiAoY2xhbXApIHsKICAgICAgICAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwogICAgICAgIGlmICh4aSA8IDApIHsKICAgICAgICAgIHhpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh5aSA8IDApIHsKICAgICAgICAgIHlpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHhpID0gZGF0YS5sZW5ndGggLSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkgewogICAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCgogICAgICBpZiAoeGkgPCAwIHx8IHlpIDwgMCB8fCB4aSA+PSBkYXRhLmxlbmd0aCAtIDEgfHwgeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBnZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYykgewogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgbG93ZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSB4aSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSB5aSkgKiogMjsKICAgICAgY29uc3QgdXBwZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSAoeGkgKyAxKSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSAoeWkgKyAxKSkgKiogMjsKICAgICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjsKICAgICAgdGhpcy5nZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKTsKICAgICAgcmV0dXJuIHVwcGVyOwogICAgfQoKICAgIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGEgPSBnZXROb3JtYWxBdF9hOwogICAgICBjb25zdCBiID0gZ2V0Tm9ybWFsQXRfYjsKICAgICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7CiAgICAgIGNvbnN0IGUwID0gZ2V0Tm9ybWFsQXRfZTA7CiAgICAgIGNvbnN0IGUxID0gZ2V0Tm9ybWFsQXRfZTE7CiAgICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiLnZzdWIoYSwgZTApOwogICAgICBjLnZzdWIoYSwgZTEpOwogICAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTsKICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gQUFCQiBvZiBhIHNxdWFyZSBpbiB0aGUgaGVpZ2h0ZmllbGQKICAgICAqIEBwYXJhbSB4aQogICAgICogQHBhcmFtIHlpCiAgICAgKiBAcGFyYW0gcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0QWFiYkF0SW5kZXgoeGksIHlpLCBfcmVmKSB7CiAgICAgIGxldCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBfcmVmOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIGAke3hpfV8ke3lpfV8ke2dldFVwcGVyVHJpYW5nbGUgPyAxIDogMH1gOwogICAgfQoKICAgIGdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV07CiAgICB9CgogICAgc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCBjb252ZXgsIG9mZnNldCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXSA9IHsKICAgICAgICBjb252ZXgsCiAgICAgICAgb2Zmc2V0CiAgICAgIH07CiAgICB9CgogICAgY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgZGVsZXRlIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB0cmlhbmdsZSBmcm9tIHRoZSBoZWlnaHRmaWVsZAogICAgICovCgoKICAgIGdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgYS5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pOwogICAgICAgIGIuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICAgIGMuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgICAgYi5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7CiAgICAgICAgYy5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgaW4gdGhlIHRlcnJhaW4gaW4gdGhlIGZvcm0gb2YgYSB0cmlhbmd1bGFyIGNvbnZleCBzaGFwZS4KICAgICAqLwoKCiAgICBnZXRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgbGV0IHJlc3VsdCA9IHRoaXMucGlsbGFyQ29udmV4OwogICAgICBsZXQgb2Zmc2V0UmVzdWx0ID0gdGhpcy5waWxsYXJPZmZzZXQ7CgogICAgICBpZiAodGhpcy5jYWNoZUVuYWJsZWQpIHsKICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpOwoKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBkYXRhLmNvbnZleDsKICAgICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gZGF0YS5vZmZzZXQ7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICByZXN1bHQgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICAgIG9mZnNldFJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSByZXN1bHQ7CiAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBvZmZzZXRSZXN1bHQ7CiAgICAgIH0KCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZmFjZXMgPSByZXN1bHQuZmFjZXM7IC8vIFJldXNlIHZlcnRzIGlmIHBvc3NpYmxlCgogICAgICByZXN1bHQudmVydGljZXMubGVuZ3RoID0gNjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgICAgaWYgKCFyZXN1bHQudmVydGljZXNbaV0pIHsKICAgICAgICAgIHJlc3VsdC52ZXJ0aWNlc1tpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFJldXNlIGZhY2VzIGlmIHBvc3NpYmxlCgoKICAgICAgZmFjZXMubGVuZ3RoID0gNTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgaWYgKCFmYWNlc1tpXSkgewogICAgICAgICAgZmFjZXNbaV0gPSBbXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gcmVzdWx0LnZlcnRpY2VzOwogICAgICBjb25zdCBoID0gKE1hdGgubWluKGRhdGFbeGldW3lpXSwgZGF0YVt4aSArIDFdW3lpXSwgZGF0YVt4aV1beWkgKyAxXSwgZGF0YVt4aSArIDFdW3lpICsgMV0pIC0gdGhpcy5taW5WYWx1ZSkgLyAyICsgdGhpcy5taW5WYWx1ZTsKCiAgICAgIGlmICghZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC4yNSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuMjUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyB0b3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gLXggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAwOwogICAgICAgIGZhY2VzWzJdWzFdID0gMjsKICAgICAgICBmYWNlc1syXVsyXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bM10gPSAzOyAvLyAteSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDE7CiAgICAgICAgZmFjZXNbM11bMV0gPSAwOwogICAgICAgIGZhY2VzWzNdWzJdID0gMzsKICAgICAgICBmYWNlc1szXVszXSA9IDQ7IC8vICt4eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDQ7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA1OwogICAgICAgIGZhY2VzWzRdWzJdID0gMjsKICAgICAgICBmYWNlc1s0XVszXSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lCiAgICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlCiAgICAgICAgKHlpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXIKICAgICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbMF0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSAtIGgpOwogICAgICAgIHZlcnRzWzFdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1syXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1szXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyBUb3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gK3ggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAyOwogICAgICAgIGZhY2VzWzJdWzFdID0gNTsKICAgICAgICBmYWNlc1syXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbMl1bM10gPSAwOyAvLyAreSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDM7CiAgICAgICAgZmFjZXNbM11bMV0gPSA0OwogICAgICAgIGZhY2VzWzNdWzJdID0gMTsKICAgICAgICBmYWNlc1szXVszXSA9IDA7IC8vIC14eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDE7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA0OwogICAgICAgIGZhY2VzWzRdWzJdID0gNTsKICAgICAgICBmYWNlc1s0XVszXSA9IDI7CiAgICAgIH0KCiAgICAgIHJlc3VsdC5jb21wdXRlTm9ybWFscygpOwogICAgICByZXN1bHQuY29tcHV0ZUVkZ2VzKCk7CiAgICAgIHJlc3VsdC51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB0aGlzLnNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgcmVzdWx0LCBvZmZzZXRSZXN1bHQpOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHRlcnJhaW4gaXMgaW5maW5pdGUKICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoqIEBUT0RPIGRvIGl0IHByb3Blcmx5ICovCiAgICAgIG1pbi5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CiAgICAgIG1heC5zZXQoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIFVzZSB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBtaW4vbWF4IHZhbHVlcwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBzID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IG5ldyBWZWMzKGRhdGEubGVuZ3RoICogcywgZGF0YVswXS5sZW5ndGggKiBzLCBNYXRoLm1heChNYXRoLmFicyh0aGlzLm1heFZhbHVlKSwgTWF0aC5hYnModGhpcy5taW5WYWx1ZSkpKS5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgaGVpZ2h0IHZhbHVlcyBmcm9tIGFuIGltYWdlLiBDdXJyZW50bHkgb25seSBzdXBwb3J0ZWQgaW4gYnJvd3Nlci4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRzRnJvbUltYWdlKGltYWdlLCBzY2FsZSkgewogICAgICBjb25zdCB7CiAgICAgICAgeCwKICAgICAgICB6LAogICAgICAgIHkKICAgICAgfSA9IHNjYWxlOwogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7CiAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApOwogICAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTsKICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy5kYXRhOwogICAgICBtYXRyaXgubGVuZ3RoID0gMDsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IE1hdGguYWJzKHgpIC8gaW1hZ2VEYXRhLndpZHRoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEuaGVpZ2h0OyBpKyspIHsKICAgICAgICBjb25zdCByb3cgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbWFnZURhdGEud2lkdGg7IGorKykgewogICAgICAgICAgY29uc3QgYSA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNF07CiAgICAgICAgICBjb25zdCBiID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMV07CiAgICAgICAgICBjb25zdCBjID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMl07CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSAoYSArIGIgKyBjKSAvIDQgLyAyNTUgKiB6OwoKICAgICAgICAgIGlmICh4IDwgMCkgewogICAgICAgICAgICByb3cucHVzaChoZWlnaHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm93LnVuc2hpZnQoaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh5IDwgMCkgewogICAgICAgICAgbWF0cml4LnVuc2hpZnQocm93KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWF0cml4LnB1c2gocm93KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTsKICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQoKICB9CiAgY29uc3QgZ2V0SGVpZ2h0QXRfaWR4ID0gW107CiAgY29uc3QgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldE5vcm1hbEF0X2UxID0gbmV3IFZlYzMoKTsgLy8gZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXJ5Y2VudHJpY19jb29yZGluYXRlX3N5c3RlbQoKICBmdW5jdGlvbiBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcmVzdWx0KSB7CiAgICByZXN1bHQueCA9ICgoYnkgLSBjeSkgKiAoeCAtIGN4KSArIChjeCAtIGJ4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTsKICAgIHJlc3VsdC56ID0gMSAtIHJlc3VsdC54IC0gcmVzdWx0Lnk7CiAgfQoKICAvKioKICAgKiBPY3RyZWVOb2RlCiAgICovCiAgY2xhc3MgT2N0cmVlTm9kZSB7CiAgICAvKiogVGhlIHJvb3Qgbm9kZSAqLwoKICAgIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi8KCiAgICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqLwoKICAgIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsKSB7CiAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbGV2ZWwgPSAwOwogICAgICB9CgogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoewogICAgICAgIHJvb3Q6IG51bGwsCiAgICAgICAgYWFiYgogICAgICB9KTsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHR5cGVvZiBvcHRpb25zLm1heERlcHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4RGVwdGggOiA4OwogICAgfQoKICB9CiAgY29uc3QgaGFsZkRpYWdvbmFsID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBBQUJCID0gbmV3IEFBQkIoKTsKCiAgLyoqCiAgICogVHJpbWVzaC4KICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBIb3cgdG8gbWFrZSBhIG1lc2ggd2l0aCBhIHNpbmdsZSB0cmlhbmdsZQogICAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFsKICAgKiAgICAgICAgIDAsIDAsIDAsIC8vIHZlcnRleCAwCiAgICogICAgICAgICAxLCAwLCAwLCAvLyB2ZXJ0ZXggMQogICAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDIKICAgKiAgICAgXQogICAqICAgICBjb25zdCBpbmRpY2VzID0gWwogICAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMAogICAqICAgICBdCiAgICogICAgIGNvbnN0IHRyaW1lc2hTaGFwZSA9IG5ldyBDQU5OT04uVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcykKICAgKi8KICBjbGFzcyBUcmltZXNoIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiB2ZXJ0aWNlcwogICAgICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VycywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIHRyaWFuZ2xlIGNvbnNpc3RzIG9mLiBUaGUgbGVuZ3RoIG9mIHRoaXMgYXJyYXkgaXMgdGh1cyAzIHRpbWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbm9ybWFscyBkYXRhLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlcyB0byB2ZXJ0ZXggcGFpcnMsIG1ha2luZyB1cCBhbGwgdW5pcXVlIGVkZ2VzIGluIHRoZSB0cmltZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBzY2FsaW5nIG9mIHRoZSBtZXNoLiBVc2UgLnNldFNjYWxlKCkgdG8gc2V0IGl0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC4KICAgICAqLwogICAgY29uc3RydWN0b3IodmVydGljZXMsIGluZGljZXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlRSSU1FU0gKICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKTsKICAgICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7CiAgICAgIHRoaXMubm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kaWNlcy5sZW5ndGgpOwogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmVkZ2VzID0gbnVsbDsKICAgICAgdGhpcy5zY2FsZSA9IG5ldyBWZWMzKDEsIDEsIDEpOwogICAgICB0aGlzLnRyZWUgPSBuZXcgT2N0cmVlKCk7CiAgICAgIHRoaXMudXBkYXRlRWRnZXMoKTsKICAgICAgdGhpcy51cGRhdGVOb3JtYWxzKCk7CiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMudXBkYXRlVHJlZSgpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVUcmVlCiAgICAgKi8KCgogICAgdXBkYXRlVHJlZSgpIHsKICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZTsKICAgICAgdHJlZS5yZXNldCgpOwogICAgICB0cmVlLmFhYmIuY29weSh0aGlzLmFhYmIpOwogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7IC8vIFRoZSBsb2NhbCBtZXNoIEFBQkIgaXMgc2NhbGVkLCBidXQgdGhlIG9jdHJlZSBBQUJCIHNob3VsZCBiZSB1bnNjYWxlZAoKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueiAqPSAxIC8gc2NhbGUuejsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueiAqPSAxIC8gc2NhbGUuejsgLy8gSW5zZXJ0IGFsbCB0cmlhbmdsZXMKCiAgICAgIGNvbnN0IHRyaWFuZ2xlQUFCQiA9IG5ldyBBQUJCKCk7CiAgICAgIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBvaW50cyA9IFthLCBiLCBjXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpOwogICAgICAgIC8vIEdldCB1bnNjYWxlZCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwoKICAgICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKCiAgICAgICAgdHJpYW5nbGVBQUJCLnNldEZyb21Qb2ludHMocG9pbnRzKTsKICAgICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpOwogICAgICB9CgogICAgICB0cmVlLnJlbW92ZUVtcHR5Tm9kZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRyaWFuZ2xlcyBpbiBhIGxvY2FsIEFBQkIgZnJvbSB0aGUgdHJpbWVzaC4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJlZmVyZW5jaW5nIHRoZSBxdWVyaWVkIHRyaWFuZ2xlcy4KICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZXNJbkFBQkIoYWFiYiwgcmVzdWx0KSB7CiAgICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbAoKICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICBjb25zdCBpc3ggPSBzY2FsZS54OwogICAgICBjb25zdCBpc3kgPSBzY2FsZS55OwogICAgICBjb25zdCBpc3ogPSBzY2FsZS56OwogICAgICBjb25zdCBsID0gdW5zY2FsZWRBQUJCLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB1bnNjYWxlZEFBQkIudXBwZXJCb3VuZDsKICAgICAgbC54IC89IGlzeDsKICAgICAgbC55IC89IGlzeTsKICAgICAgbC56IC89IGlzejsKICAgICAgdS54IC89IGlzeDsKICAgICAgdS55IC89IGlzeTsKICAgICAgdS56IC89IGlzejsKICAgICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRTY2FsZQogICAgICovCgoKICAgIHNldFNjYWxlKHNjYWxlKSB7CiAgICAgIGNvbnN0IHdhc1VuaWZvcm0gPSB0aGlzLnNjYWxlLnggPT09IHRoaXMuc2NhbGUueSAmJiB0aGlzLnNjYWxlLnkgPT09IHRoaXMuc2NhbGUuejsKICAgICAgY29uc3QgaXNVbmlmb3JtID0gc2NhbGUueCA9PT0gc2NhbGUueSAmJiBzY2FsZS55ID09PSBzY2FsZS56OwoKICAgICAgaWYgKCEod2FzVW5pZm9ybSAmJiBpc1VuaWZvcm0pKSB7CiAgICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy4KICAgICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5zY2FsZS5jb3B5KHNjYWxlKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuIFdpbGwgc2F2ZSBpbiB0aGUgYC5ub3JtYWxzYCBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGVOb3JtYWxzKCkgewogICAgICBjb25zdCBuID0gY29tcHV0ZU5vcm1hbHNfbjsgLy8gR2VuZXJhdGUgbm9ybWFscwoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMubm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICB0aGlzLmdldFZlcnRleChhLCB2YSk7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYiwgdmIpOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTsKICAgICAgICBUcmltZXNoLmNvbXB1dGVOb3JtYWwodmIsIHZhLCB2Yywgbik7CiAgICAgICAgbm9ybWFsc1tpM10gPSBuLng7CiAgICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55OwogICAgICAgIG5vcm1hbHNbaTMgKyAyXSA9IG4uejsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuZWRnZXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlRWRnZXMoKSB7CiAgICAgIGNvbnN0IGVkZ2VzID0ge307CgogICAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4gewogICAgICAgIGNvbnN0IGtleSA9IGEgPCBiID8gYCR7YX1fJHtifWAgOiBgJHtifV8ke2F9YDsKICAgICAgICBlZGdlc1trZXldID0gdHJ1ZTsKICAgICAgfTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICBhZGQoYSwgYik7CiAgICAgICAgYWRkKGIsIGMpOwogICAgICAgIGFkZChjLCBhKTsKICAgICAgfQoKICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGVkZ2VzKTsKICAgICAgdGhpcy5lZGdlcyA9IG5ldyBJbnQxNkFycmF5KGtleXMubGVuZ3RoICogMik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGldID0gcGFyc2VJbnQoaW5kaWNlc1swXSwgMTApOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGkgKyAxXSA9IHBhcnNlSW50KGluZGljZXNbMV0sIDEwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXgKICAgICAqIEBwYXJhbSBmaXJzdE9yU2Vjb25kIDAgb3IgMSwgZGVwZW5kaW5nIG9uIHdoaWNoIG9uZSBvZiB0aGUgdmVydGljZXMgeW91IG5lZWQuCiAgICAgKiBAcGFyYW0gdmVydGV4U3RvcmUgV2hlcmUgdG8gc3RvcmUgdGhlIHJlc3VsdAogICAgICovCgoKICAgIGdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCBmaXJzdE9yU2Vjb25kLCB2ZXJ0ZXhTdG9yZSkgewogICAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodmVydGV4SW5kZXgsIHZlcnRleFN0b3JlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdmVjdG9yIGFsb25nIGFuIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0RWRnZVZlY3RvcihlZGdlSW5kZXgsIHZlY3RvclN0b3JlKSB7CiAgICAgIGNvbnN0IHZhID0gZ2V0RWRnZVZlY3Rvcl92YTsKICAgICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiOwogICAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAwLCB2YSk7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDEsIHZiKTsKICAgICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdmVydGV4IGkuCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0VmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CgogICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpOwoKICAgICAgb3V0LnggKj0gc2NhbGUueDsKICAgICAgb3V0LnkgKj0gc2NhbGUueTsKICAgICAgb3V0LnogKj0gc2NhbGUuejsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHJhdyB2ZXJ0ZXggaQogICAgICogQHJldHVybiBUaGUgIm91dCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIF9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICByZXR1cm4gb3V0LnNldCh2ZXJ0aWNlc1tpM10sIHZlcnRpY2VzW2kzICsgMV0sIHZlcnRpY2VzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZXJ0ZXggZnJvbSB0aGUgdHJpbWVzaCx0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHsKICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgb3V0KTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvcywgcXVhdCwgb3V0LCBvdXQpOwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiB0cmlhbmdsZSBpLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGdldE5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQodGhpcy5ub3JtYWxzW2kzXSwgdGhpcy5ub3JtYWxzW2kzICsgMV0sIHRoaXMubm9ybWFsc1tpMyArIDJdKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTsKICAgICAgY29uc3QgeCA9IGNsaV9hYWJiLnVwcGVyQm91bmQueCAtIGNsaV9hYWJiLmxvd2VyQm91bmQueDsKICAgICAgY29uc3QgeSA9IGNsaV9hYWJiLnVwcGVyQm91bmQueSAtIGNsaV9hYWJiLmxvd2VyQm91bmQueTsKICAgICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQoMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopLCAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGxvY2FsIEFBQkIgZm9yIHRoZSB0cmltZXNoCiAgICAgKi8KCgogICAgY29tcHV0ZUxvY2FsQUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0OwogICAgICB0aGlzLmdldFZlcnRleCgwLCB2KTsKICAgICAgbC5jb3B5KHYpOwogICAgICB1LmNvcHkodik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CgogICAgICAgIGlmICh2LnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkgewogICAgICAgICAgdS54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGwueSkgewogICAgICAgICAgbC55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgLmFhYmJgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7CiAgICB9CiAgICAvKioKICAgICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBBc3N1bWUgcG9pbnRzIGFyZSBkaXN0cmlidXRlZCB3aXRoIGxvY2FsICgwLDAsMCkgYXMgY2VudGVyCiAgICAgIGxldCBtYXgyID0gMDsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdmVydGljZXMubGVuZ3RoIC8gMzsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoKICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDMsCiAgICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICAgICAgY29uc3QgbWlueCxtaW55LG1pbnosbWF4eCxtYXh5LG1heHo7CiAgICAgICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDsKICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7CiAgICAgICAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICAgICAgICBwb3MudmFkZCh2LCB2KTsKICAgICAgICAgICAgICBpZiAodi54IDwgbWlueCB8fCBtaW54PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW55ID0gdi55OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnkgPiBtYXh5IHx8IG1heHk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh5ID0gdi55OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueiA8IG1pbnogfHwgbWluej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueiA+IG1heHogfHwgbWF4ej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHogPSB2Lno7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbWluLnNldChtaW54LG1pbnksbWlueik7CiAgICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTsKICAgICAgICAgICovCiAgICAgIC8vIEZhc3RlciBhcHByb3hpbWF0aW9uIHVzaW5nIGxvY2FsIEFBQkIKICAgICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiOwogICAgICBmcmFtZS5wb3NpdGlvbiA9IHBvczsKICAgICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7CiAgICAgIHRoaXMuYWFiYi50b1dvcmxkRnJhbWUoZnJhbWUsIHJlc3VsdCk7CiAgICAgIG1pbi5jb3B5KHJlc3VsdC5sb3dlckJvdW5kKTsKICAgICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIFRyaW1lc2ggaW5zdGFuY2UsIHNoYXBlZCBhcyBhIHRvcnVzLgogICAgICovCgoKICAgIHN0YXRpYyBjcmVhdGVUb3J1cyhyYWRpdXMsIHR1YmUsIHJhZGlhbFNlZ21lbnRzLCB0dWJ1bGFyU2VnbWVudHMsIGFyYykgewogICAgICBpZiAocmFkaXVzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpdXMgPSAxOwogICAgICB9CgogICAgICBpZiAodHViZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHViZSA9IDAuNTsKICAgICAgfQoKICAgICAgaWYgKHJhZGlhbFNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpYWxTZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmICh0dWJ1bGFyU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHR1YnVsYXJTZWdtZW50cyA9IDY7CiAgICAgIH0KCiAgICAgIGlmIChhcmMgPT09IHZvaWQgMCkgewogICAgICAgIGFyYyA9IE1hdGguUEkgKiAyOwogICAgICB9CgogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBpbmRpY2VzID0gW107CgogICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjOwogICAgICAgICAgY29uc3QgdiA9IGogLyByYWRpYWxTZWdtZW50cyAqIE1hdGguUEkgKiAyOwogICAgICAgICAgY29uc3QgeCA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5jb3ModSk7CiAgICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTsKICAgICAgICAgIGNvbnN0IHogPSB0dWJlICogTWF0aC5zaW4odik7CiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHgsIHksIHopOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxOwogICAgICAgICAgY29uc3QgYiA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGMgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaTsKICAgICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTsKICAgICAgICAgIGluZGljZXMucHVzaChhLCBiLCBkKTsKICAgICAgICAgIGluZGljZXMucHVzaChiLCBjLCBkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcyk7CiAgICB9CgogIH0KICBjb25zdCBjb21wdXRlTm9ybWFsc19uID0gbmV3IFZlYzMoKTsKICBjb25zdCB1bnNjYWxlZEFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICBjb25zdCBhYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2xpX2FhYmIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWUgPSBuZXcgVHJhbnNmb3JtKCk7CiAgY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIgPSBuZXcgQUFCQigpOwoKICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIHNvbHZlciBiYXNlIGNsYXNzLgogICAqLwogIGNsYXNzIFNvbHZlciB7CiAgICAvKioKICAgICAqIEFsbCBlcXVhdGlvbnMgdG8gYmUgc29sdmVkCiAgICAgKi8KCiAgICAvKioKICAgICAqIEB0b2RvIHJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NlcyEKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdAogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgcmV0dXJuICgvLyBTaG91bGQgcmV0dXJuIHRoZSBudW1iZXIgb2YgaXRlcmF0aW9ucyBkb25lIQogICAgICAgIDAKICAgICAgKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgYWRkRXF1YXRpb24oZXEpIHsKICAgICAgaWYgKGVxLmVuYWJsZWQgJiYgIWVxLmJpLmlzVHJpZ2dlciAmJiAhZXEuYmouaXNUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgcmVtb3ZlRXF1YXRpb24oZXEpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IGkgPSBlcXMuaW5kZXhPZihlcSk7CgogICAgICBpZiAoaSAhPT0gLTEpIHsKICAgICAgICBlcXMuc3BsaWNlKGksIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhbGwgZXF1YXRpb25zCiAgICAgKi8KCgogICAgcmVtb3ZlQWxsRXF1YXRpb25zKCkgewogICAgICB0aGlzLmVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgZXF1YXRpb24gR2F1c3MtU2VpZGVsIHNvbHZlci4KICAgKiBAdG9kbyBUaGUgc3Bvb2sgcGFyYW1ldGVycyBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciBlYWNoIGNvbnN0cmFpbnQsIG5vdCBnbG9iYWxseS4KICAgKiBAc2VlIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDA5L2xlY3R1cmVzL3Nwb29rbm90ZXMucGRmCiAgICovCiAgY2xhc3MgR1NTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLgogICAgICogVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBsZXQgaXRlciA9IDA7CiAgICAgIGNvbnN0IG1heEl0ZXIgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IHRvbFNxdWFyZWQgPSB0aGlzLnRvbGVyYW5jZSAqIHRoaXMudG9sZXJhbmNlOwogICAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgTmVxID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaCA9IGR0OwogICAgICBsZXQgQjsKICAgICAgbGV0IGludkM7CiAgICAgIGxldCBkZWx0YWxhbWJkYTsKICAgICAgbGV0IGRlbHRhbGFtYmRhVG90OwogICAgICBsZXQgR1dsYW1iZGE7CiAgICAgIGxldCBsYW1iZGFqOyAvLyBVcGRhdGUgc29sdmUgbWFzcwoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFRoaW5ncyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIGl0ZXJhdGlvbiBjYW4gYmUgY29tcHV0ZWQgb25jZQoKCiAgICAgIGNvbnN0IGludkNzID0gR1NTb2x2ZXJfc29sdmVfaW52Q3M7CiAgICAgIGNvbnN0IEJzID0gR1NTb2x2ZXJfc29sdmVfQnM7CiAgICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTsKICAgICAgaW52Q3MubGVuZ3RoID0gTmVxOwogICAgICBCcy5sZW5ndGggPSBOZXE7CiAgICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2ldOwogICAgICAgIGxhbWJkYVtpXSA9IDAuMDsKICAgICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7CiAgICAgICAgaW52Q3NbaV0gPSAxLjAgLyBjLmNvbXB1dGVDKCk7CiAgICAgIH0KCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICAvLyBSZXNldCB2bGFtYmRhCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7CiAgICAgICAgICBjb25zdCB3bGFtYmRhID0gYi53bGFtYmRhOwogICAgICAgICAgdmxhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICB9IC8vIEl0ZXJhdGUgb3ZlciBlcXVhdGlvbnMKCgogICAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykgewogICAgICAgICAgLy8gQWNjdW11bGF0ZSB0aGUgdG90YWwgZXJyb3IgZm9yIGVhY2ggaXRlcmF0aW9uLgogICAgICAgICAgZGVsdGFsYW1iZGFUb3QgPSAwLjA7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uCgogICAgICAgICAgICBCID0gQnNbal07CiAgICAgICAgICAgIGludkMgPSBpbnZDc1tqXTsKICAgICAgICAgICAgbGFtYmRhaiA9IGxhbWJkYVtqXTsKICAgICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpOwogICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGludkMgKiAoQiAtIEdXbGFtYmRhIC0gYy5lcHMgKiBsYW1iZGFqKTsgLy8gQ2xhbXAgaWYgd2UgYXJlIG5vdCB3aXRoaW4gdGhlIG1pbi9tYXggaW50ZXJ2YWwKCiAgICAgICAgICAgIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPCBjLm1pbkZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1pbkZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1heEZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFtYmRhW2pdICs9IGRlbHRhbGFtYmRhOwogICAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpCgogICAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7CiAgICAgICAgICB9IC8vIElmIHRoZSB0b3RhbCBlcnJvciBpcyBzbWFsbCBlbm91Z2ggLSBzdG9wIGl0ZXJhdGUKCgogICAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eQoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHYgPSBiLnZlbG9jaXR5OwogICAgICAgICAgY29uc3QgdyA9IGIuYW5ndWxhclZlbG9jaXR5OwogICAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7CiAgICAgICAgICB2LnZhZGQoYi52bGFtYmRhLCB2KTsKICAgICAgICAgIGIud2xhbWJkYS52bXVsKGIuYW5ndWxhckZhY3RvciwgYi53bGFtYmRhKTsKICAgICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpOwogICAgICAgIH0gLy8gU2V0IHRoZSBgLm11bHRpcGxpZXJgIHByb3BlcnR5IG9mIGVhY2ggZXF1YXRpb24KCgogICAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgICBjb25zdCBpbnZEdCA9IDEgLyBoOwoKICAgICAgICB3aGlsZSAobC0tKSB7CiAgICAgICAgICBlcXVhdGlvbnNbbF0ubXVsdGlwbGllciA9IGxhbWJkYVtsXSAqIGludkR0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZXI7CiAgICB9CgogIH0gLy8gSnVzdCB0ZW1wb3JhcnkgbnVtYmVyIGhvbGRlcnMgdGhhdCB3ZSB3YW50IHRvIHJldXNlIGVhY2ggaXRlcmF0aW9uLgoKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9sYW1iZGEgPSBbXTsKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9pbnZDcyA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX0JzID0gW107CgogIC8qKgogICAqIFNwbGl0cyB0aGUgZXF1YXRpb25zIGludG8gaXNsYW5kcyBhbmQgc29sdmVzIHRoZW0gaW5kZXBlbmRlbnRseS4gQ2FuIGltcHJvdmUgcGVyZm9ybWFuY2UuCiAgICovCiAgY2xhc3MgU3BsaXRTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLgogICAgICovCgogICAgLyoqIHN1YnNvbHZlciAqLwogICAgY29uc3RydWN0b3Ioc3Vic29sdmVyKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyOwogICAgICB0aGlzLm5vZGVzID0gW107CiAgICAgIHRoaXMubm9kZVBvb2wgPSBbXTsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlICh0aGlzLm5vZGVQb29sLmxlbmd0aCA8IDEyOCkgewogICAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY3JlYXRlTm9kZQogICAgICovCgoKICAgIGNyZWF0ZU5vZGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYm9keTogbnVsbCwKICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgZXFzOiBbXSwKICAgICAgICB2aXNpdGVkOiBmYWxzZQogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSB0aGUgc3Vic3lzdGVtcwogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlczsKICAgICAgY29uc3Qgbm9kZVBvb2wgPSB0aGlzLm5vZGVQb29sOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlCgogICAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykgewogICAgICAgIG5vZGVQb29sLnB1c2godGhpcy5jcmVhdGVOb2RlKCkpOwogICAgICB9CgogICAgICBub2Rlcy5sZW5ndGggPSBOYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOYm9kaWVzOyBpKyspIHsKICAgICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldOwogICAgICB9IC8vIFJlc2V0IG5vZGUgdmFsdWVzCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKICAgICAgICBub2RlLmJvZHkgPSBib2RpZXNbaV07CiAgICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwOwogICAgICAgIG5vZGUuZXFzLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS52aXNpdGVkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykgewogICAgICAgIGNvbnN0IGVxID0gZXF1YXRpb25zW2tdOwogICAgICAgIGNvbnN0IGkgPSBib2RpZXMuaW5kZXhPZihlcS5iaSk7CiAgICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTsKICAgICAgICBjb25zdCBuaSA9IG5vZGVzW2ldOwogICAgICAgIGNvbnN0IG5qID0gbm9kZXNbal07CiAgICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7CiAgICAgICAgbmkuZXFzLnB1c2goZXEpOwogICAgICAgIG5qLmNoaWxkcmVuLnB1c2gobmkpOwogICAgICAgIG5qLmVxcy5wdXNoKGVxKTsKICAgICAgfQoKICAgICAgbGV0IGNoaWxkOwogICAgICBsZXQgbiA9IDA7CiAgICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7CiAgICAgIHN1YnNvbHZlci50b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTsKICAgICAgc3Vic29sdmVyLml0ZXJhdGlvbnMgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkOwoKICAgICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHsKICAgICAgICBlcXMubGVuZ3RoID0gMDsKICAgICAgICBkdW1teVdvcmxkLmJvZGllcy5sZW5ndGggPSAwOwogICAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTsKICAgICAgICBjb25zdCBOZXFzID0gZXFzLmxlbmd0aDsKICAgICAgICBlcXMgPSBlcXMuc29ydChzb3J0QnlJZCk7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHsKICAgICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pOwogICAgICAgIH0KCiAgICAgICAgc3Vic29sdmVyLnNvbHZlKGR0LCBkdW1teVdvcmxkKTsKICAgICAgICBzdWJzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7CiAgICAgICAgbisrOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KCiAgfSAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3Vic3lzdGVtcwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyA9IFtdOyAvLyBBbGwgYWxsb2NhdGVkIG5vZGUgb2JqZWN0cwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9lcXMgPSBbXTsgLy8gVGVtcCBhcnJheQoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkID0gewogICAgYm9kaWVzOiBbXQogIH07IC8vIFRlbXAgb2JqZWN0CgogIGNvbnN0IFNUQVRJQyA9IEJvZHkuU1RBVElDOwoKICBmdW5jdGlvbiBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSB7CiAgICBjb25zdCBObm9kZXMgPSBub2Rlcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ub2RlczsgaSsrKSB7CiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKCiAgICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zdCBxdWV1ZSA9IFtdOwoKICBmdW5jdGlvbiBiZnMocm9vdCwgdmlzaXRGdW5jLCBiZHMsIGVxcykgewogICAgcXVldWUucHVzaChyb290KTsKICAgIHJvb3QudmlzaXRlZCA9IHRydWU7CiAgICB2aXNpdEZ1bmMocm9vdCwgYmRzLCBlcXMpOwoKICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOyAvLyBMb29wIG92ZXIgdW52aXNpdGVkIGNoaWxkIG5vZGVzCgogICAgICBsZXQgY2hpbGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7CiAgICAgICAgdmlzaXRGdW5jKGNoaWxkLCBiZHMsIGVxcyk7CiAgICAgICAgcXVldWUucHVzaChjaGlsZCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHZpc2l0RnVuYyhub2RlLCBiZHMsIGVxcykgewogICAgYmRzLnB1c2gobm9kZS5ib2R5KTsKICAgIGNvbnN0IE5lcXMgPSBub2RlLmVxcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICBjb25zdCBlcSA9IG5vZGUuZXFzW2ldOwoKICAgICAgaWYgKCFlcXMuaW5jbHVkZXMoZXEpKSB7CiAgICAgICAgZXFzLnB1c2goZXEpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7CiAgICByZXR1cm4gYi5pZCAtIGEuaWQ7CiAgfQoKICAvKioKICAgKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC4KICAgKi8KICBjbGFzcyBQb29sIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLm9iamVjdHMgPSBbXTsKICAgICAgdGhpcy50eXBlID0gT2JqZWN0OwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbiBvYmplY3QgYWZ0ZXIgdXNlCiAgICAgKi8KICAgIHJlbGVhc2UoKSB7CiAgICAgIGNvbnN0IE5hcmdzID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYXJnczsgaSsrKSB7CiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2goaSA8IDAgfHwgYXJndW1lbnRzLmxlbmd0aCA8PSBpID8gdW5kZWZpbmVkIDogYXJndW1lbnRzW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBvYmplY3QKICAgICAqLwoKCiAgICBnZXQoKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0T2JqZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cy5wb3AoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYW4gb2JqZWN0LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gZWFjaCBzdWJjbGFzcy4KICAgICAqLwoKCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nCiAgICAgKi8KCgogICAgcmVzaXplKHNpemUpIHsKICAgICAgY29uc3Qgb2JqZWN0cyA9IHRoaXMub2JqZWN0czsKCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA+IHNpemUpIHsKICAgICAgICBvYmplY3RzLnBvcCgpOwogICAgICB9CgogICAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7CiAgICAgICAgb2JqZWN0cy5wdXNoKHRoaXMuY29uc3RydWN0T2JqZWN0KCkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQoKICAvKioKICAgKiBWZWMzUG9vbAogICAqLwoKICBjbGFzcyBWZWMzUG9vbCBleHRlbmRzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMudHlwZSA9IFZlYzM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSB2ZWN0b3IKICAgICAqLwogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKICBjb25zdCBDT0xMSVNJT05fVFlQRVMgPSB7CiAgICBzcGhlcmVTcGhlcmU6IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHNwaGVyZVBsYW5lOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5QTEFORSwKICAgIGJveEJveDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQk9YLAogICAgc3BoZXJlQm94OiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBwbGFuZUJveDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBjb252ZXhDb252ZXg6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVDb252ZXg6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBwbGFuZUNvbnZleDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgYm94Q29udmV4OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgc3BoZXJlSGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgYm94SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgY29udmV4SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCwKICAgIHNwaGVyZVBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHBsYW5lUGFydGljbGU6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBib3hQYXJ0aWNsZTogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBjb252ZXhQYXJ0aWNsZTogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgY3lsaW5kZXJDeWxpbmRlcjogU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVDeWxpbmRlcjogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwbGFuZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgYm94Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgY29udmV4Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwYXJ0aWNsZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgc3BoZXJlVHJpbWVzaDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuVFJJTUVTSCwKICAgIHBsYW5lVHJpbWVzaDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5UUklNRVNICiAgfTsKCiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwogIGNsYXNzIE5hcnJvd3BoYXNlIHsKICAgIC8qKgogICAgICogSW50ZXJuYWwgc3RvcmFnZSBvZiBwb29sZWQgY29udGFjdCBwb2ludHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvb2xlZCB2ZWN0b3JzLgogICAgICovCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGxhbmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVQbGFuZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveENvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVIZWlnaHRmaWVsZF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEhlaWdodGZpZWxkXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4SGVpZ2h0ZmllbGRdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lUGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveFBhcnRpY2xlXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94UGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4UGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5oZWlnaHRmaWVsZEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wYXJ0aWNsZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFydGljbGVDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVUcmltZXNoXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2hdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICAvLyBVc2VycyBtYXkgcHJvdmlkZSBhIGZvcmNlIGRpZmZlcmVudCBmcm9tIGdsb2JhbCBncmF2aXR5IHRvIHVzZSB3aGVuIGNvbXB1dGluZyBjb250YWN0IGZyaWN0aW9uLgogICAgICAgIGNvbnN0IG11ZyA9IGZyaWN0aW9uICogKHdvcmxkLmZyaWN0aW9uR3Jhdml0eSB8fCB3b3JsZC5ncmF2aXR5KS5sZW5ndGgoKTsKICAgICAgICBsZXQgcmVkdWNlZE1hc3MgPSBib2R5QS5pbnZNYXNzICsgYm9keUIuaW52TWFzczsKCiAgICAgICAgaWYgKHJlZHVjZWRNYXNzID4gMCkgewogICAgICAgICAgcmVkdWNlZE1hc3MgPSAxIC8gcmVkdWNlZE1hc3M7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBwb29sID0gdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgICBjb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7CiAgICAgICAgYzEuYmkgPSBjMi5iaSA9IGJvZHlBOwogICAgICAgIGMxLmJqID0gYzIuYmogPSBib2R5QjsKICAgICAgICBjMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZyAqIHJlZHVjZWRNYXNzOwogICAgICAgIGMxLm1heEZvcmNlID0gYzIubWF4Rm9yY2UgPSBtdWcgKiByZWR1Y2VkTWFzczsgLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCgogICAgICAgIGMxLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMS5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7CiAgICAgICAgYzIucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpOwogICAgICAgIGMyLnJqLmNvcHkoY29udGFjdEVxdWF0aW9uLnJqKTsgLy8gQ29uc3RydWN0IHRhbmdlbnRzCgogICAgICAgIGNvbnRhY3RFcXVhdGlvbi5uaS50YW5nZW50cyhjMS50LCBjMi50KTsgLy8gU2V0IHNwb29rIHBhcmFtcwoKICAgICAgICBjMS5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7CiAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjb250YWN0RXF1YXRpb24uZW5hYmxlZDsKICAgICAgICBvdXRBcnJheS5wdXNoKGMxLCBjMik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVGFrZSB0aGUgYXZlcmFnZSBOIGxhdGVzdCBjb250YWN0IHBvaW50IG9uIHRoZSBwbGFuZS4KICAgICAqLwoKCiAgICBjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKSB7CiAgICAgIC8vIFRoZSBsYXN0IGNvbnRhY3RFcXVhdGlvbgogICAgICBsZXQgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDFdOyAvLyBDcmVhdGUgdGhlIHJlc3VsdDogdHdvICJhdmVyYWdlIiBmcmljdGlvbiBlcXVhdGlvbnMKCiAgICAgIGlmICghdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpIHx8IG51bUNvbnRhY3RzID09PSAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBmMSA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAyXTsKICAgICAgY29uc3QgZjIgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMV07CiAgICAgIGF2ZXJhZ2VOb3JtYWwuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zZXRaZXJvKCk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNldFplcm8oKTsKICAgICAgY29uc3QgYm9keUEgPSBjLmJpOwogICAgICBjLmJqOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG51bUNvbnRhY3RzOyBpKyspIHsKICAgICAgICBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMSAtIGldOwoKICAgICAgICBpZiAoYy5iaSAhPT0gYm9keUEpIHsKICAgICAgICAgIGF2ZXJhZ2VOb3JtYWwudmFkZChjLm5pLCBhdmVyYWdlTm9ybWFsKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEEpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF2ZXJhZ2VOb3JtYWwudnN1YihjLm5pLCBhdmVyYWdlTm9ybWFsKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEEpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJpLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBpbnZOdW1Db250YWN0cyA9IDEgLyBudW1Db250YWN0czsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJpKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJqKTsKICAgICAgZjIucmkuY29weShmMS5yaSk7IC8vIFNob3VsZCBiZSB0aGUgc2FtZQoKICAgICAgZjIucmouY29weShmMS5yaik7CiAgICAgIGF2ZXJhZ2VOb3JtYWwubm9ybWFsaXplKCk7CiAgICAgIGF2ZXJhZ2VOb3JtYWwudGFuZ2VudHMoZjEudCwgZjIudCk7IC8vIHJldHVybiBlcTsKICAgIH0KICAgIC8qKgogICAgICogR2VuZXJhdGUgYWxsIGNvbnRhY3RzIGJldHdlZW4gYSBsaXN0IG9mIGJvZHkgcGFpcnMKICAgICAqIEBwYXJhbSBwMSBBcnJheSBvZiBib2R5IGluZGljZXMKICAgICAqIEBwYXJhbSBwMiBBcnJheSBvZiBib2R5IGluZGljZXMKICAgICAqIEBwYXJhbSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgZ2VuZXJhdGVkIGNvbnRhY3RzCiAgICAgKiBAcGFyYW0gb2xkY29udGFjdHMgT3B0aW9uYWwuIEFycmF5IG9mIHJldXNhYmxlIGNvbnRhY3Qgb2JqZWN0cwogICAgICovCgoKICAgIGdldENvbnRhY3RzKHAxLCBwMiwgd29ybGQsIHJlc3VsdCwgb2xkY29udGFjdHMsIGZyaWN0aW9uUmVzdWx0LCBmcmljdGlvblBvb2wpIHsKICAgICAgLy8gU2F2ZSBvbGQgY29udGFjdCBvYmplY3RzCiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IG9sZGNvbnRhY3RzOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gZnJpY3Rpb25Qb29sOwogICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IGZyaWN0aW9uUmVzdWx0OwogICAgICBjb25zdCBxaSA9IHRtcFF1YXQxOwogICAgICBjb25zdCBxaiA9IHRtcFF1YXQyOwogICAgICBjb25zdCB4aSA9IHRtcFZlYzE7CiAgICAgIGNvbnN0IHhqID0gdG1wVmVjMjsKCiAgICAgIGZvciAobGV0IGsgPSAwLCBOID0gcDEubGVuZ3RoOyBrICE9PSBOOyBrKyspIHsKICAgICAgICAvLyBHZXQgY3VycmVudCBjb2xsaXNpb24gYm9kaWVzCiAgICAgICAgY29uc3QgYmkgPSBwMVtrXTsKICAgICAgICBjb25zdCBiaiA9IHAyW2tdOyAvLyBHZXQgY29udGFjdCBtYXRlcmlhbAoKICAgICAgICBsZXQgYm9keUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7CgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgYm9keUNvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmdldENvbnRhY3RNYXRlcmlhbChiaS5tYXRlcmlhbCwgYmoubWF0ZXJpYWwpIHx8IG51bGw7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBqdXN0VGVzdCA9IGJpLnR5cGUgJiBCb2R5LktJTkVNQVRJQyAmJiBiai50eXBlICYgQm9keS5TVEFUSUMgfHwgYmkudHlwZSAmIEJvZHkuU1RBVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQyB8fCBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuS0lORU1BVElDOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpLnNoYXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYmkucXVhdGVybmlvbi5tdWx0KGJpLnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgICBiaS5xdWF0ZXJuaW9uLnZtdWx0KGJpLnNoYXBlT2Zmc2V0c1tpXSwgeGkpOwogICAgICAgICAgeGkudmFkZChiaS5wb3NpdGlvbiwgeGkpOwogICAgICAgICAgY29uc3Qgc2kgPSBiaS5zaGFwZXNbaV07CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiai5zaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgLy8gQ29tcHV0ZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygc2hhcGVzCiAgICAgICAgICAgIGJqLnF1YXRlcm5pb24ubXVsdChiai5zaGFwZU9yaWVudGF0aW9uc1tqXSwgcWopOwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KGJqLnNoYXBlT2Zmc2V0c1tqXSwgeGopOwogICAgICAgICAgICB4ai52YWRkKGJqLnBvc2l0aW9uLCB4aik7CiAgICAgICAgICAgIGNvbnN0IHNqID0gYmouc2hhcGVzW2pdOwoKICAgICAgICAgICAgaWYgKCEoc2kuY29sbGlzaW9uRmlsdGVyTWFzayAmIHNqLmNvbGxpc2lvbkZpbHRlckdyb3VwICYmIHNqLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzaS5jb2xsaXNpb25GaWx0ZXJHcm91cCkpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IC8vIEdldCBjb2xsaXNpb24gbWF0ZXJpYWwKCgogICAgICAgICAgICBsZXQgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICAgICAgaWYgKHNpLm1hdGVyaWFsICYmIHNqLm1hdGVyaWFsKSB7CiAgICAgICAgICAgICAgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoc2kubWF0ZXJpYWwsIHNqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSBzaGFwZUNvbnRhY3RNYXRlcmlhbCB8fCBib2R5Q29udGFjdE1hdGVyaWFsIHx8IHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7IC8vIEdldCBjb250YWN0cwoKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXJJbmRleCA9IHNpLnR5cGUgfCBzai50eXBlOwogICAgICAgICAgICBjb25zdCByZXNvbHZlciA9IHRoaXNbcmVzb2x2ZXJJbmRleF07CgogICAgICAgICAgICBpZiAocmVzb2x2ZXIpIHsKICAgICAgICAgICAgICBsZXQgcmV0dmFsID0gZmFsc2U7IC8vIFRPIERPOiBpbnZlc3RpZ2F0ZSB3aHkgc3BoZXJlUGFydGljbGUgYW5kIGNvbnZleFBhcnRpY2xlCiAgICAgICAgICAgICAgLy8gcmVzb2x2ZXJzIGV4cGVjdCBzaSBhbmQgc2ogc2hhcGVzIHRvIGJlIGluIHJldmVyc2Ugb3JkZXIKICAgICAgICAgICAgICAvLyAoaS5lLiBsYXJnZXIgaW50ZWdlciB2YWx1ZSB0eXBlIGZpcnN0IGluc3RlYWQgb2Ygc21hbGxlciBmaXJzdCkKCiAgICAgICAgICAgICAgaWYgKHNpLnR5cGUgPCBzai50eXBlKSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyZXR2YWwgJiYganVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG92ZXJsYXAKICAgICAgICAgICAgICAgIHdvcmxkLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgICAgICAgICAgIHdvcmxkLmJvZHlPdmVybGFwS2VlcGVyLnNldChiaS5pZCwgYmouaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwaGVyZVNwaGVyZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICByZXR1cm4geGkuZGlzdGFuY2VTcXVhcmVkKHhqKSA8IChzaS5yYWRpdXMgKyBzai5yYWRpdXMpICoqIDI7CiAgICAgIH0gLy8gV2Ugd2lsbCBoYXZlIG9ubHkgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlCgoKICAgICAgY29uc3QgY29udGFjdEVxID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHhqLnZzdWIoeGksIGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5uaS5ub3JtYWxpemUoKTsgLy8gQ29udGFjdCBwb2ludCBsb2NhdGlvbnMKCiAgICAgIGNvbnRhY3RFcS5yaS5jb3B5KGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5yai5jb3B5KGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5yaS5zY2FsZShzaS5yYWRpdXMsIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yai5zY2FsZSgtc2oucmFkaXVzLCBjb250YWN0RXEucmopOwogICAgICBjb250YWN0RXEucmkudmFkZCh4aSwgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJpLnZzdWIoYmkucG9zaXRpb24sIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yai52YWRkKHhqLCBjb250YWN0RXEucmopOwogICAgICBjb250YWN0RXEucmoudnN1Yihiai5wb3NpdGlvbiwgY29udGFjdEVxLnJqKTsKICAgICAgdGhpcy5yZXN1bHQucHVzaChjb250YWN0RXEpOwogICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgIH0KCiAgICBzcGhlcmVQbGFuZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBXZSB3aWxsIGhhdmUgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlCiAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgci5uaS5zZXQoMCwgMCwgMSk7CiAgICAgIHFqLnZtdWx0KHIubmksIHIubmkpOwogICAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gYm9keSBpIGlzIHRoZSBzcGhlcmUsIGZsaXAgbm9ybWFsCgogICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyBOZWVkZWQ/CiAgICAgIC8vIFZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gY29udGFjdCBwb2ludAoKICAgICAgci5uaS5zY2FsZShzaS5yYWRpdXMsIHIucmkpOyAvLyBQcm9qZWN0IGRvd24gc3BoZXJlIG9uIHBsYW5lCgogICAgICB4aS52c3ViKHhqLCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpOwogICAgICByLm5pLnNjYWxlKHIubmkuZG90KHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSksIHBsYW5lX3RvX3NwaGVyZV9vcnRobyk7CiAgICAgIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS52c3ViKHBsYW5lX3RvX3NwaGVyZV9vcnRobywgci5yaik7IC8vIFRoZSBzcGhlcmUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHBsYW5lCgogICAgICBpZiAoLXBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS5kb3Qoci5uaSkgPD0gc2kucmFkaXVzKSB7CiAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IC8vIE1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIGJvZHkKCgogICAgICAgIGNvbnN0IHJpID0gci5yaTsKICAgICAgICBjb25zdCByaiA9IHIucmo7CiAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgYm94Qm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZUJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCB2M3Bvb2wgPSB0aGlzLnYzcG9vbDsgLy8gd2UgcmVmZXIgdG8gdGhlIGJveCBhcyBib2R5IGoKCiAgICAgIGNvbnN0IHNpZGVzID0gc3BoZXJlQm94X3NpZGVzOwogICAgICB4aS52c3ViKHhqLCBib3hfdG9fc3BoZXJlKTsKICAgICAgc2ouZ2V0U2lkZU5vcm1hbHMoc2lkZXMsIHFqKTsKICAgICAgY29uc3QgUiA9IHNpLnJhZGl1czsKCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mbwoKICAgICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zOwogICAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTsKICAgICAgY29uc3Qgc2lkZV9uczIgPSBzcGhlcmVCb3hfc2lkZV9uczI7CiAgICAgIGxldCBzaWRlX2ggPSBudWxsOwogICAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwOwogICAgICBsZXQgc2lkZV9kb3QxID0gMDsKICAgICAgbGV0IHNpZGVfZG90MiA9IDA7CiAgICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDsKCiAgICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykgewogICAgICAgIC8vIEdldCB0aGUgcGxhbmUgc2lkZSBub3JtYWwgKG5zKQogICAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zOwogICAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7CiAgICAgICAgY29uc3QgaCA9IG5zLmxlbmd0aCgpOwogICAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZQoKICAgICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7CgogICAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zCiAgICAgICAgICBjb25zdCBuczEgPSBzcGhlcmVCb3hfbnMxOwogICAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjsKICAgICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTsKICAgICAgICAgIG5zMi5jb3B5KHNpZGVzWyhpZHggKyAyKSAlIDNdKTsKICAgICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpOwogICAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7CiAgICAgICAgICBuczEubm9ybWFsaXplKCk7CiAgICAgICAgICBuczIubm9ybWFsaXplKCk7CiAgICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTsKICAgICAgICAgIGNvbnN0IGRvdDIgPSBib3hfdG9fc3BoZXJlLmRvdChuczIpOwoKICAgICAgICAgIGlmIChkb3QxIDwgaDEgJiYgZG90MSA+IC1oMSAmJiBkb3QyIDwgaDIgJiYgZG90MiA+IC1oMikgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpOwoKICAgICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHsKICAgICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDsKICAgICAgICAgICAgICBzaWRlX2RvdDEgPSBkb3QxOwogICAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7CiAgICAgICAgICAgICAgc2lkZV9oID0gaDsKICAgICAgICAgICAgICBzaWRlX25zLmNvcHkobnMpOwogICAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTsKICAgICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7CiAgICAgICAgICAgICAgc2lkZV9wZW5ldHJhdGlvbnMrKzsKCiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzaWRlX3BlbmV0cmF0aW9ucykgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBzaWRlX25zLnNjYWxlKC1SLCByLnJpKTsgLy8gU3BoZXJlIHIKCiAgICAgICAgci5uaS5jb3B5KHNpZGVfbnMpOwogICAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmUKCiAgICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMSwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfSAvLyBDaGVjayBjb3JuZXJzCgoKICAgICAgbGV0IHJqID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSAyICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykgewogICAgICAgICAgICByai5zZXQoMCwgMCwgMCk7CgogICAgICAgICAgICBpZiAoaikgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKCiAgICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKHJqKTsKICAgICAgcmogPSBudWxsOyAvLyBDaGVjayBlZGdlcwoKICAgICAgY29uc3QgZWRnZVRhbmdlbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyCgogICAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBkaXN0ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgaWYgKGogJSAzICE9PSBrICUgMykgewogICAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50CiAgICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7CiAgICAgICAgICAgIGVkZ2VUYW5nZW50Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTsKICAgICAgICAgICAgci5jb3B5KHhpKTsKICAgICAgICAgICAgci52c3ViKGVkZ2VDZW50ZXIsIHIpOwogICAgICAgICAgICByLnZzdWIoeGosIHIpOwogICAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KCiAgICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRoaXJkIHNpZGUgb3J0aG9nb25hbCB0byB0aGlzIG9uZQoKICAgICAgICAgICAgbGV0IGwgPSAwOwoKICAgICAgICAgICAgd2hpbGUgKGwgPT09IGogJSAzIHx8IGwgPT09IGsgJSAzKSB7CiAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudAoKCiAgICAgICAgICAgIGRpc3QuY29weSh4aSk7CiAgICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKGVkZ2VDZW50ZXIsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0CgogICAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7CiAgICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTsKCiAgICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqCgogICAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTsKICAgICAgICAgICAgICByZXMubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1Yih4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKGJpLnBvc2l0aW9uLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopOwogICAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocmVzKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpOwogICAgfQoKICAgIHBsYW5lQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmlkID0gc2ouaWQ7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHsKICAgICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwoKICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7CiAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgICAgc2VwQXhpcy5uZWdhdGUoci5uaSk7CiAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTsKICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQoKICAgICAgICAgIHJpLnZzdWIoeGksIHJpKTsKICAgICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOwogICAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBmYWNlcyA9IHNqLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOwogICAgICAvLyAgICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVycwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCiAgICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7CiAgICAgICAgcWoudm11bHQodiwgd29ybGRDb3JuZXIpOwogICAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTsKICAgICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyOwogICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICB3b3JsZENvcm5lci52c3ViKHhqLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9ucwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBmYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGkrKykgewogICAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsOwogICAgICAgIHFqLnZtdWx0KG5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBHZXQgYSB3b3JsZCB2ZXJ0ZXggZnJvbSB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZFBvaW50ID0gc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQ7CiAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpOwogICAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsCgogICAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7CiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7CiAgICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjOwogICAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLgoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3Qgd29ybGRQb2ludFRvU3BoZXJlID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludDsKICAgICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7CgogICAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvbgogICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gW107IC8vIEZhY2UgdmVydGljZXMsIGluIHdvcmxkIGNvb3JkcwoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOdmVydHMgPSBmYWNlLmxlbmd0aDsgaiAhPT0gTnZlcnRzOyBqKyspIHsKICAgICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIHhqLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHsKICAgICAgICAgICAgLy8gSXMgdGhlIHNwaGVyZSBjZW50ZXIgaW4gdGhlIGZhY2UgcG9seWdvbj8KICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0CgogICAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlCgogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1wZW5ldHJhdGlvbiwgcGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTsKCiAgICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsgLy8gV2Ugb25seSBleHBlY3QgKm9uZSogZmFjZSBjb250YWN0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBFZGdlPwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZmFjZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXMKICAgICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpOwogICAgICAgICAgICAgIHhqLnZhZGQodjEsIHYxKTsKICAgICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvcgoKICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7CiAgICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0OwogICAgICAgICAgICAgIGVkZ2UudW5pdChlZGdlVW5pdCk7IC8vIHAgaXMgeGkgcHJvamVjdGVkIG9udG8gdGhlIGVkZ2UKCiAgICAgICAgICAgICAgY29uc3QgcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7CiAgICAgICAgICAgICAgY29uc3QgZG90ID0gdjFfdG9feGkuZG90KGVkZ2VVbml0KTsKICAgICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApOwogICAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZQoKICAgICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHAudnN1Yih4aSwgeGlfdG9fcCk7IC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MgoKICAgICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgICAvLyBFZGdlIGNvbnRhY3QhCiAgICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTsKICAgICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkgewogICAgICAvLyBTaW1wbHkgcmV0dXJuIHRoZSBwb2ludHMgYmVoaW5kIHRoZSBwbGFuZS4KICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDsKICAgICAgd29ybGROb3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwogICAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgY29udmV4IHZlcnRleAogICAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pOwogICAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICBjb252ZXhQb3NpdGlvbi52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDsKICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7CiAgICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZQogICAgICAgICAgLy8gcmogaXMgbm93IGp1c3QgdGhlIHZlY3RvciBmcm9tIHRoZSBjb252ZXggY2VudGVyIHRvIHRoZSB2ZXJ0ZXgKCiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKGNvbnZleFBvc2l0aW9uLCByLnJqKTsgLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKICAgICAgICAgIHIucmkudmFkZChwbGFuZVBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihjb252ZXhCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgIH0KICAgIH0KCiAgICBib3hDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgcmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBudW1Db250YWN0c0JlZm9yZSA9IHJlc3VsdC5sZW5ndGg7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7CgogICAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvKgogICAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMQogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG51bUNvbnRhY3RzIC0gMTsgaysrKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICovCgogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHJhZGl1cyA9IGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBjb252ZXhQb3MsIGxvY2FsQ29udmV4UG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyCiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgeGkudnN1Yih4aiwgbm9ybWFsKTsKICAgICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHIucmouY29weShub3JtYWwpOwogICAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zOwogICAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCiAgICAgICAgLy8gR2V0IHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZDsKICAgICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7CiAgICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTsKICAgICAgICAvLyByaiBpcyBub3cgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICByLnJqLmNvcHkocHJvamVjdGVkKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgbGV0IHBlbmV0cmF0ZWRGYWNlSW5kZXggPSAtMTsKICAgICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDsKICAgICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7CiAgICAgIGxldCBtaW5QZW5ldHJhdGlvbiA9IG51bGw7CgogICAgICBjb25zdCBsb2NhbCA9IGNvbnZleFBhcnRpY2xlX2xvY2FsOwogICAgICBsb2NhbC5jb3B5KHhpKTsKICAgICAgbG9jYWwudnN1Yih4aiwgbG9jYWwpOyAvLyBDb252ZXJ0IHBvc2l0aW9uIHRvIHJlbGF0aXZlIHRoZSBjb252ZXggb3JpZ2luCgogICAgICBxai5jb25qdWdhdGUoY3FqKTsKICAgICAgY3FqLnZtdWx0KGxvY2FsLCBsb2NhbCk7CgogICAgICBpZiAoc2oucG9pbnRJc0luc2lkZShsb2NhbCkpIHsKICAgICAgICBpZiAoc2oud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRWZXJ0aWNlcyh4aiwgcWopOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNqLndvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSkgewogICAgICAgICAgc2ouY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocWopOwogICAgICAgIH0gLy8gRm9yIGVhY2ggd29ybGQgcG9seWdvbiBpbiB0aGUgcG9seWhlZHJhCgoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbmZhY2VzID0gc2ouZmFjZXMubGVuZ3RoOyBpICE9PSBuZmFjZXM7IGkrKykgewogICAgICAgICAgLy8gQ29uc3RydWN0IHdvcmxkIGZhY2UgdmVydGljZXMKICAgICAgICAgIGNvbnN0IHZlcnRzID0gW3NqLndvcmxkVmVydGljZXNbc2ouZmFjZXNbaV1bMF1dXTsKICAgICAgICAgIGNvbnN0IG5vcm1hbCA9IHNqLndvcmxkRmFjZU5vcm1hbHNbaV07IC8vIENoZWNrIGhvdyBtdWNoIHRoZSBwYXJ0aWNsZSBwZW5ldHJhdGVzIHRoZSBwb2x5Z29uIHBsYW5lLgoKICAgICAgICAgIHhpLnZzdWIodmVydHNbMF0sIGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwogICAgICAgICAgY29uc3QgcGVuZXRyYXRpb24gPSAtbm9ybWFsLmRvdChjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTsKCiAgICAgICAgICBpZiAobWluUGVuZXRyYXRpb24gPT09IG51bGwgfHwgTWF0aC5hYnMocGVuZXRyYXRpb24pIDwgTWF0aC5hYnMobWluUGVuZXRyYXRpb24pKSB7CiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtaW5QZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZUluZGV4ID0gaTsKICAgICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuY29weShub3JtYWwpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHBlbmV0cmF0ZWRGYWNlSW5kZXggIT09IC0xKSB7CiAgICAgICAgICAvLyBTZXR1cCBjb250YWN0CiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLnNjYWxlKG1pblBlbmV0cmF0aW9uLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsgLy8gcmogaXMgdGhlIHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgZmFjZQoKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudmFkZCh4aSwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICB3b3JsZFBlbmV0cmF0aW9uVmVjLnZzdWIoeGosIHdvcmxkUGVuZXRyYXRpb25WZWMpOwogICAgICAgICAgci5yai5jb3B5KHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvL2NvbnN0IHByb2plY3RlZFRvRmFjZSA9IHhpLnZzdWIoeGopLnZhZGQod29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICAvL3Byb2plY3RlZFRvRmFjZS5jb3B5KHIucmopOwogICAgICAgICAgLy9xai52bXVsdChyLnJqLHIucmopOwoKICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCgogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybignUG9pbnQgZm91bmQgaW5zaWRlIGNvbnZleCwgYnV0IGRpZCBub3QgZmluZCBwZW5ldHJhdGluZyBmYWNlIScpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXIoaGZTaGFwZSwgY29udmV4U2hhcGUsIGhmUG9zLCBjb252ZXhQb3MsIGhmUXVhdCwgY29udmV4UXVhdCwgaGZCb2R5LCBjb252ZXhCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHBhcnRpY2xlQ3lsaW5kZXIoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZVRyaW1lc2goc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgc3BoZXJlUG9zLCB0cmltZXNoUG9zLCBzcGhlcmVRdWF0LCB0cmltZXNoUXVhdCwgc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBlZGdlVmVydGV4QSA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEE7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhCID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QjsKICAgICAgY29uc3QgZWRnZVZlY3RvciA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvcjsKICAgICAgY29uc3QgZWRnZVZlY3RvclVuaXQgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0OwogICAgICBjb25zdCBsb2NhbFNwaGVyZVBvcyA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVQb3M7CiAgICAgIGNvbnN0IHRtcCA9IHNwaGVyZVRyaW1lc2hfdG1wOwogICAgICBjb25zdCBsb2NhbFNwaGVyZUFBQkIgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlQUFCQjsKICAgICAgY29uc3QgdjIgPSBzcGhlcmVUcmltZXNoX3YyOwogICAgICBjb25zdCByZWxwb3MgPSBzcGhlcmVUcmltZXNoX3JlbHBvczsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gc3BoZXJlVHJpbWVzaF90cmlhbmdsZXM7IC8vIENvbnZlcnQgc3BoZXJlIHBvc2l0aW9uIHRvIGxvY2FsIGluIHRoZSB0cmltZXNoCgogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGFhYmIgb2YgdGhlIHNwaGVyZSBsb2NhbGx5IGluIHRoZSB0cmltZXNoCgogICAgICBjb25zdCBzcGhlcmVSYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7CiAgICAgIGxvY2FsU3BoZXJlQUFCQi5sb3dlckJvdW5kLnNldChsb2NhbFNwaGVyZVBvcy54IC0gc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy55IC0gc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy56IC0gc3BoZXJlUmFkaXVzKTsKICAgICAgbG9jYWxTcGhlcmVBQUJCLnVwcGVyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogKyBzcGhlcmVSYWRpdXMpOwogICAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVzSW5BQUJCKGxvY2FsU3BoZXJlQUFCQiwgdHJpYW5nbGVzKTsgLy9mb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgdHJpYW5nbGVzLnB1c2goaSk7IC8vIEFsbAogICAgICAvLyBWZXJ0aWNlcwoKICAgICAgY29uc3QgdiA9IHNwaGVyZVRyaW1lc2hfdjsKICAgICAgY29uc3QgcmFkaXVzU3F1YXJlZCA9IHNwaGVyZVNoYXBlLnJhZGl1cyAqIHNwaGVyZVNoYXBlLnJhZGl1czsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCB2KTsgLy8gQ2hlY2sgdmVydGV4IG92ZXJsYXAgaW4gc3BoZXJlCgogICAgICAgICAgdi52c3ViKGxvY2FsU3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgIGlmIChyZWxwb3MubGVuZ3RoU3F1YXJlZCgpIDw9IHJhZGl1c1NxdWFyZWQpIHsKICAgICAgICAgICAgLy8gU2FmZSB1cAogICAgICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsKICAgICAgICAgICAgdi52c3ViKHNwaGVyZVBvcywgcmVscG9zKTsKCiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCBzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICAgIHIubmkuY29weShyZWxwb3MpOwogICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyByaSBpcyB0aGUgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byB0aGUgc3BoZXJlIHN1cmZhY2UKCiAgICAgICAgICAgIHIucmkuY29weShyLm5pKTsKICAgICAgICAgICAgci5yaS5zY2FsZShzcGhlcmVTaGFwZS5yYWRpdXMsIHIucmkpOwogICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICByLnJqLmNvcHkodik7CiAgICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdAoKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBhbGwgZWRnZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyBqXSwgZWRnZVZlcnRleEEpOwogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgKGogKyAxKSAlIDNdLCBlZGdlVmVydGV4Qik7CiAgICAgICAgICBlZGdlVmVydGV4Qi52c3ViKGVkZ2VWZXJ0ZXhBLCBlZGdlVmVjdG9yKTsgLy8gUHJvamVjdCBzcGhlcmUgcG9zaXRpb24gdG8gdGhlIGVkZ2UKCiAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhCLCB0bXApOwogICAgICAgICAgY29uc3QgcG9zaXRpb25BbG9uZ0VkZ2VCID0gdG1wLmRvdChlZGdlVmVjdG9yKTsKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICBsZXQgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yKTsKCiAgICAgICAgICBpZiAocG9zaXRpb25BbG9uZ0VkZ2VBID4gMCAmJiBwb3NpdGlvbkFsb25nRWRnZUIgPCAwKSB7CiAgICAgICAgICAgIC8vIE5vdyBjaGVjayB0aGUgb3J0aG9nb25hbCBkaXN0YW5jZSBmcm9tIGVkZ2UgdG8gc3BoZXJlIGNlbnRlcgogICAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5jb3B5KGVkZ2VWZWN0b3IpOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5ub3JtYWxpemUoKTsKICAgICAgICAgICAgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yVW5pdCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LnNjYWxlKHBvc2l0aW9uQWxvbmdFZGdlQSwgdG1wKTsKICAgICAgICAgICAgdG1wLnZhZGQoZWRnZVZlcnRleEEsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBjZW50ZXIgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBlZGdlLCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2ggZnJhbWUKCiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7CgogICAgICAgICAgICBpZiAoZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgICB0bXAudnN1Yihsb2NhbFNwaGVyZVBvcywgci5uaSk7CiAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApOwogICAgICAgICAgICAgIHRtcC52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBUcmlhbmdsZSBmYWNlcwoKCiAgICAgIGNvbnN0IHZhID0gc3BoZXJlVHJpbWVzaF92YTsKICAgICAgY29uc3QgdmIgPSBzcGhlcmVUcmltZXNoX3ZiOwogICAgICBjb25zdCB2YyA9IHNwaGVyZVRyaW1lc2hfdmM7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHNwaGVyZVRyaW1lc2hfbm9ybWFsOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVWZXJ0aWNlcyh0cmlhbmdsZXNbaV0sIHZhLCB2YiwgdmMpOwogICAgICAgIHRyaW1lc2hTaGFwZS5nZXROb3JtYWwodHJpYW5nbGVzW2ldLCBub3JtYWwpOwogICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIodmEsIHRtcCk7CiAgICAgICAgbGV0IGRpc3QgPSB0bXAuZG90KG5vcm1hbCk7CiAgICAgICAgbm9ybWFsLnNjYWxlKGRpc3QsIHRtcCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih0bXAsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIHRyaWFuZ2xlIHBsYW5lCgogICAgICAgIGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7CgogICAgICAgIGlmIChSYXkucG9pbnRJblRyaWFuZ2xlKHRtcCwgdmEsIHZiLCB2YykgJiYgZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihzcGhlcmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApOwogICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5uaSwgci5uaSk7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KCiAgICBwbGFuZVRyaW1lc2gocGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBwbGFuZVBvcywgdHJpbWVzaFBvcywgcGxhbmVRdWF0LCB0cmltZXNoUXVhdCwgcGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIE1ha2UgY29udGFjdHMhCiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBub3JtYWwgPSBwbGFuZVRyaW1lc2hfbm9ybWFsOwogICAgICBub3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLnZlcnRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vIEdldCB3b3JsZCB2ZXJ0ZXggZnJvbSB0cmltZXNoCiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleChpLCB2KTsgLy8gU2FmZSB1cAoKICAgICAgICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgICAgICAgdjIuY29weSh2KTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsgLy8gQ2hlY2sgcGxhbmUgc2lkZQoKICAgICAgICBjb25zdCByZWxwb3MgPSBwbGFuZVRyaW1lc2hfcmVscG9zOwogICAgICAgIHYudnN1YihwbGFuZVBvcywgcmVscG9zKTsKICAgICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHBsYW5lQm9keSwgdHJpbWVzaEJvZHksIHBsYW5lU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWwKICAgICAgICAgIC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVUcmltZXNoX3Byb2plY3RlZDsKICAgICAgICAgIG5vcm1hbC5zY2FsZShyZWxwb3MuZG90KG5vcm1hbCksIHByb2plY3RlZCk7CiAgICAgICAgICB2LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpOyAvLyByaSBpcyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uCgogICAgICAgICAgci5yaS5jb3B5KHByb2plY3RlZCk7CiAgICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdAoKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfQogICAgICB9CiAgICB9IC8vIGNvbnZleFRyaW1lc2goCiAgICAvLyAgIHNpOiBDb252ZXhQb2x5aGVkcm9uLCBzajogVHJpbWVzaCwgeGk6IFZlYzMsIHhqOiBWZWMzLCBxaTogUXVhdGVybmlvbiwgcWo6IFF1YXRlcm5pb24sCiAgICAvLyAgIGJpOiBCb2R5LCBiajogQm9keSwgcnNpPzogU2hhcGUgfCBudWxsLCByc2o/OiBTaGFwZSB8IG51bGwsCiAgICAvLyAgIGZhY2VMaXN0QT86IG51bWJlcltdIHwgbnVsbCwgZmFjZUxpc3RCPzogbnVtYmVyW10gfCBudWxsLAogICAgLy8gKSB7CiAgICAvLyAgIGNvbnN0IHNlcEF4aXMgPSBjb252ZXhDb252ZXhfc2VwQXhpczsKICAgIC8vICAgaWYoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKXsKICAgIC8vICAgICAgIHJldHVybjsKICAgIC8vICAgfQogICAgLy8gICAvLyBDb25zdHJ1Y3QgYSB0ZW1wIGh1bGwgZm9yIGVhY2ggdHJpYW5nbGUKICAgIC8vICAgY29uc3QgaHVsbEIgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgLy8gICBodWxsQi5mYWNlcyA9IFtbMCwxLDJdXTsKICAgIC8vICAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogICAgLy8gICBjb25zdCB2YiA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICAgIC8vICAgaHVsbEIudmVydGljZXMgPSBbCiAgICAvLyAgICAgICB2YSwKICAgIC8vICAgICAgIHZiLAogICAgLy8gICAgICAgdmMKICAgIC8vICAgXTsKICAgIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzai5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgLy8gICAgICAgY29uc3QgdHJpYW5nbGVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgLy8gICAgICAgc2ouZ2V0Tm9ybWFsKGksIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgIGh1bGxCLmZhY2VOb3JtYWxzID0gW3RyaWFuZ2xlTm9ybWFsXTsKICAgIC8vICAgICAgIHNqLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgdmEsIHZiLCB2Yyk7CiAgICAvLyAgICAgICBsZXQgZCA9IHNpLnRlc3RTZXBBeGlzKHRyaWFuZ2xlTm9ybWFsLCBodWxsQiwgeGksIHFpLCB4aiwgcWopOwogICAgLy8gICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgIHRyaWFuZ2xlTm9ybWFsLnNjYWxlKC0xLCB0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICAgICAgZCA9IHNpLnRlc3RTZXBBeGlzKHRyaWFuZ2xlTm9ybWFsLCBodWxsQiwgeGksIHFpLCB4aiwgcWopOwogICAgLy8gICAgICAgICAgIGlmKCFkKXsKICAgIC8vICAgICAgICAgICAgICAgY29udGludWU7CiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgfQogICAgLy8gICAgICAgY29uc3QgcmVzOiBDb252ZXhQb2x5aGVkcm9uQ29udGFjdFBvaW50W10gPSBbXTsKICAgIC8vICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgIC8vICAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSxxaSxodWxsQix4aixxaix0cmlhbmdsZU5vcm1hbCwtMTAwLDEwMCxyZXMpOwogICAgLy8gICAgICAgZm9yKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKXsKICAgIC8vICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksYmosc2ksc2oscnNpLHJzaiksCiAgICAvLyAgICAgICAgICAgICAgIHJpID0gci5yaSwKICAgIC8vICAgICAgICAgICAgICAgcmogPSByLnJqOwogICAgLy8gICAgICAgICAgIHIubmkuY29weSh0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAvLyAgICAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7CiAgICAvLyAgICAgICAgICAgcS5tdWx0KHJlc1tqXS5kZXB0aCwgcSk7CiAgICAvLyAgICAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpOwogICAgLy8gICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsKICAgIC8vICAgICAgICAgICAvLyBDb250YWN0IHBvaW50cyBhcmUgaW4gd29ybGQgY29vcmRpbmF0ZXMuIFRyYW5zZm9ybSBiYWNrIHRvIHJlbGF0aXZlCiAgICAvLyAgICAgICAgICAgcmkudnN1Yih4aSxyaSk7CiAgICAvLyAgICAgICAgICAgcmoudnN1Yih4aixyaik7CiAgICAvLyAgICAgICAgICAgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKICAgIC8vICAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAvLyAgICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgLy8gICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgIC8vICAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAvLyAgICAgICAgICAgcmVzdWx0LnB1c2gocik7CiAgICAvLyAgICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0KCgogIH0KICBjb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogIGNvbnN0IHBsYW5lVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lVHJpbWVzaF9yZWxwb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lVHJpbWVzaF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWwKCiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkgewogICAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDsKICAgIGNvbnN0IE4gPSB2ZXJ0cy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleAoKICAgICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7CiAgICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZQoKICAgICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CgogICAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwOwogICAgICBwLnZzdWIodiwgdmVydGV4X3RvX3ApOyAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgIGNvbnN0IHIgPSBlZGdlX3hfbm9ybWFsLmRvdCh2ZXJ0ZXhfdG9fcCk7IC8vIElmIGFsbCBzdWNoIGRvdCBwcm9kdWN0cyBoYXZlIHNhbWUgc2lnbiwgd2UgYXJlIGluc2lkZSB0aGUgcG9seWdvbi4KCiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCB8fCByID4gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gdHJ1ZSB8fCByIDw9IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwOwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgIH0KICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIGNvbnN0IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZVVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF92ID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcHJvamVjdGVkID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfc2VwQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4Q29udmV4X3EgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlU3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7IC8vIFdJUAoKICBjb25zdCBjcWogPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX2xvY2FsID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCA9IFswXTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKCiAgY2xhc3MgT3ZlcmxhcEtlZXBlciB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmN1cnJlbnQgPSBbXTsKICAgICAgdGhpcy5wcmV2aW91cyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBnZXRLZXkKICAgICAqLwoKCiAgICBnZXRLZXkoaSwgaikgewogICAgICBpZiAoaiA8IGkpIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIGkgPDwgMTYgfCBqOwogICAgfQogICAgLyoqCiAgICAgKiBzZXQKICAgICAqLwoKCiAgICBzZXQoaSwgaikgewogICAgICAvLyBJbnNlcnRpb24gc29ydC4gVGhpcyB3YXkgdGhlIGRpZmYgd2lsbCBoYXZlIGxpbmVhciBjb21wbGV4aXR5LgogICAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleShpLCBqKTsKICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDsKICAgICAgbGV0IGluZGV4ID0gMDsKCiAgICAgIHdoaWxlIChrZXkgPiBjdXJyZW50W2luZGV4XSkgewogICAgICAgIGluZGV4Kys7CiAgICAgIH0KCiAgICAgIGlmIChrZXkgPT09IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgcmV0dXJuOyAvLyBQYWlyIHdhcyBhbHJlYWR5IGFkZGVkCiAgICAgIH0KCiAgICAgIGZvciAobGV0IGogPSBjdXJyZW50Lmxlbmd0aCAtIDE7IGogPj0gaW5kZXg7IGotLSkgewogICAgICAgIGN1cnJlbnRbaiArIDFdID0gY3VycmVudFtqXTsKICAgICAgfQoKICAgICAgY3VycmVudFtpbmRleF0gPSBrZXk7CiAgICB9CiAgICAvKioKICAgICAqIHRpY2sKICAgICAqLwoKCiAgICB0aWNrKCkgewogICAgICBjb25zdCB0bXAgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMucHJldmlvdXM7CiAgICAgIHRoaXMucHJldmlvdXMgPSB0bXA7CiAgICAgIHRoaXMuY3VycmVudC5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBnZXREaWZmCiAgICAgKi8KCgogICAgZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIGNvbnN0IGIgPSB0aGlzLnByZXZpb3VzOwogICAgICBjb25zdCBhbCA9IGEubGVuZ3RoOwogICAgICBjb25zdCBibCA9IGIubGVuZ3RoOwogICAgICBsZXQgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlBID0gYVtpXTsKCiAgICAgICAgd2hpbGUgKGtleUEgPiBiW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGtleUEgPT09IGJbal07CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2goYWRkaXRpb25zLCBrZXlBKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGogPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibDsgaSsrKSB7CiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICAgICAgY29uc3Qga2V5QiA9IGJbaV07CgogICAgICAgIHdoaWxlIChrZXlCID4gYVtqXSkgewogICAgICAgICAgaisrOwogICAgICAgIH0KCiAgICAgICAgZm91bmQgPSBhW2pdID09PSBrZXlCOwoKICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICB1bnBhY2tBbmRQdXNoKHJlbW92YWxzLCBrZXlCKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQoKICBmdW5jdGlvbiB1bnBhY2tBbmRQdXNoKGFycmF5LCBrZXkpIHsKICAgIGFycmF5LnB1c2goKGtleSAmIDB4ZmZmZjAwMDApID4+IDE2LCBrZXkgJiAweDAwMDBmZmZmKTsKICB9CgogIGNvbnN0IGdldEtleSA9IChpLCBqKSA9PiBpIDwgaiA/IGAke2l9LSR7an1gIDogYCR7an0tJHtpfWA7CiAgLyoqCiAgICogVHVwbGVEaWN0aW9uYXJ5CiAgICovCgoKICBjbGFzcyBUdXBsZURpY3Rpb25hcnkgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZGF0YSA9IHsKICAgICAgICBrZXlzOiBbXQogICAgICB9OwogICAgfQoKICAgIC8qKiBnZXQgKi8KICAgIGdldChpLCBqKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsKICAgICAgcmV0dXJuIHRoaXMuZGF0YVtrZXldOwogICAgfQogICAgLyoqIHNldCAqLwoKCiAgICBzZXQoaSwgaiwgdmFsdWUpIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOyAvLyBDaGVjayBpZiBrZXkgYWxyZWFkeSBleGlzdHMKCiAgICAgIGlmICghdGhpcy5nZXQoaSwgaikpIHsKICAgICAgICB0aGlzLmRhdGEua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVtrZXldID0gdmFsdWU7CiAgICB9CiAgICAvKiogZGVsZXRlICovCgoKICAgIGRlbGV0ZShpLCBqKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGEua2V5cy5pbmRleE9mKGtleSk7CgogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgdGhpcy5kYXRhLmtleXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQoKICAgICAgZGVsZXRlIHRoaXMuZGF0YVtrZXldOwogICAgfQogICAgLyoqIHJlc2V0ICovCgoKICAgIHJlc2V0KCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBrZXlzID0gZGF0YS5rZXlzOwoKICAgICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkgewogICAgICAgIGNvbnN0IGtleSA9IGtleXMucG9wKCk7CiAgICAgICAgZGVsZXRlIGRhdGFba2V5XTsKICAgICAgfQogICAgfQoKICB9CgogIC8qKgogICAqIFRoZSBwaHlzaWNzIHdvcmxkCiAgICovCiAgY2xhc3MgV29ybGQgZXh0ZW5kcyBFdmVudFRhcmdldCB7CiAgICAvKioKICAgICAqIEN1cnJlbnRseSAvIGxhc3QgdXNlZCB0aW1lc3RlcC4gSXMgc2V0IHRvIC0xIGlmIG5vdCBhdmFpbGFibGUuIFRoaXMgdmFsdWUgaXMgdXBkYXRlZCBiZWZvcmUgZWFjaCBpbnRlcm5hbCBzdGVwLCB3aGljaCBtZWFucyB0aGF0IGl0IGlzICJmcmVzaCIgaW5zaWRlIGV2ZW50IGNhbGxiYWNrcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTWFrZXMgYm9kaWVzIGdvIHRvIHNsZWVwIHdoZW4gdGhleSd2ZSBiZWVuIGluYWN0aXZlLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIHRoZSBjdXJyZW50IGNvbnRhY3RzIChpbnN0YW5jZXMgb2YgQ29udGFjdEVxdWF0aW9uKSBpbiB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhvdyBvZnRlbiB0byBub3JtYWxpemUgcXVhdGVybmlvbnMuIFNldCB0byAwIGZvciBldmVyeSBzdGVwLCAxIGZvciBldmVyeSBzZWNvbmQgZXRjLi4gQSBsYXJnZXIgdmFsdWUgaW5jcmVhc2VzIHBlcmZvcm1hbmNlLiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gYSBzbWFsbGVyIHZhbHVlICh6ZXJvIHRvIGJlIHN1cmUgbm90aGluZyBjYW4gZ28gd3JvbmcpLgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSB0byB1c2UgZmFzdCBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIEl0IGlzIG9mdGVuIGVub3VnaCBhY2N1cmF0ZSB0byB1c2UuCiAgICAgKiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gZmFsc2UuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgd2FsbC1jbG9jayB0aW1lIHNpbmNlIHNpbXVsYXRpb24gc3RhcnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE51bWJlciBvZiB0aW1lc3RlcHMgdGFrZW4gc2luY2Ugc3RhcnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERlZmF1bHQgYW5kIGxhc3QgdGltZXN0ZXAgc2l6ZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBncmF2aXR5IG9mIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogR3Jhdml0eSB0byB1c2Ugd2hlbiBhcHByb3hpbWF0aW5nIHRoZSBmcmljdGlvbiBtYXggZm9yY2UgKG11Km1hc3MqZ3Jhdml0eSkuCiAgICAgKiBJZiB1bmRlZmluZWQsIGdsb2JhbCBncmF2aXR5IHdpbGwgYmUgdXNlZC4KICAgICAqIFVzZSB0byBlbmFibGUgZnJpY3Rpb24gaW4gYSBXb3JsZCB3aXRoIGEgbnVsbCBncmF2aXR5IHZlY3RvciAobm8gZ3Jhdml0eSkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBicm9hZHBoYXNlIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBOYWl2ZUJyb2FkcGhhc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIGJvZGllcyBpbiB0aGlzIHdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRydWUgaWYgYW55IGJvZGllcyBhcmUgbm90IHNsZWVwaW5nLCBmYWxzZSBpZiBldmVyeSBib2R5IGlzIHNsZWVwaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgc29sdmVyIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBHU1NvbHZlcgogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25NYXRyaXgKICAgICAqLwoKICAgIC8qKgogICAgICogQ29sbGlzaW9uTWF0cml4IGZyb20gdGhlIHByZXZpb3VzIHN0ZXAuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBhZGRlZCBjb250YWN0bWF0ZXJpYWxzLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGxvb2sgdXAgYSBDb250YWN0TWF0ZXJpYWwgZ2l2ZW4gdHdvIGluc3RhbmNlcyBvZiBNYXRlcmlhbC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGRlZmF1bHQgbWF0ZXJpYWwgb2YgdGhlIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhpcyBjb250YWN0IG1hdGVyaWFsIGlzIHVzZWQgaWYgbm8gc3VpdGFibGUgY29udGFjdG1hdGVyaWFsIGlzIGZvdW5kIGZvciBhIGNvbnRhY3QuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRpbWUgYWNjdW11bGF0b3IgZm9yIGludGVycG9sYXRpb24uCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vZ2FtZS1waHlzaWNzL2ZpeC15b3VyLXRpbWVzdGVwLwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5kdCA9IC0xOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSAhIW9wdGlvbnMuYWxsb3dTbGVlcDsKICAgICAgdGhpcy5jb250YWN0cyA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwIDogMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgOiBmYWxzZTsKICAgICAgdGhpcy50aW1lID0gMC4wOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSAwOwogICAgICB0aGlzLmRlZmF1bHRfZHQgPSAxIC8gNjA7CiAgICAgIHRoaXMubmV4dElkID0gMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmdyYXZpdHkpIHsKICAgICAgICB0aGlzLmdyYXZpdHkuY29weShvcHRpb25zLmdyYXZpdHkpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5mcmljdGlvbkdyYXZpdHkpIHsKICAgICAgICB0aGlzLmZyaWN0aW9uR3Jhdml0eSA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5mcmljdGlvbkdyYXZpdHkuY29weShvcHRpb25zLmZyaWN0aW9uR3Jhdml0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuYnJvYWRwaGFzZSA9IG9wdGlvbnMuYnJvYWRwaGFzZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5icm9hZHBoYXNlIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwogICAgICB0aGlzLmJvZGllcyA9IFtdOwogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGZhbHNlOwogICAgICB0aGlzLnNvbHZlciA9IG9wdGlvbnMuc29sdmVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNvbHZlciA6IG5ldyBHU1NvbHZlcigpOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107CiAgICAgIHRoaXMubmFycm93cGhhc2UgPSBuZXcgTmFycm93cGhhc2UodGhpcyk7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gbmV3IEFycmF5Q29sbGlzaW9uTWF0cml4KCk7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7CiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzID0gW107CiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSBuZXcgVHVwbGVEaWN0aW9uYXJ5KCk7CiAgICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCdkZWZhdWx0Jyk7CiAgICAgIHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbCA9IG5ldyBDb250YWN0TWF0ZXJpYWwodGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHRoaXMuZGVmYXVsdE1hdGVyaWFsLCB7CiAgICAgICAgZnJpY3Rpb246IDAuMywKICAgICAgICByZXN0aXR1dGlvbjogMC4wCiAgICAgIH0pOwogICAgICB0aGlzLmRvUHJvZmlsaW5nID0gZmFsc2U7CiAgICAgIHRoaXMucHJvZmlsZSA9IHsKICAgICAgICBzb2x2ZTogMCwKICAgICAgICBtYWtlQ29udGFjdENvbnN0cmFpbnRzOiAwLAogICAgICAgIGJyb2FkcGhhc2U6IDAsCiAgICAgICAgaW50ZWdyYXRlOiAwLAogICAgICAgIG5hcnJvd3BoYXNlOiAwCiAgICAgIH07CiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSAwOwogICAgICB0aGlzLnN1YnN5c3RlbXMgPSBbXTsKICAgICAgdGhpcy5hZGRCb2R5RXZlbnQgPSB7CiAgICAgICAgdHlwZTogJ2FkZEJvZHknLAogICAgICAgIGJvZHk6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQgPSB7CiAgICAgICAgdHlwZTogJ3JlbW92ZUJvZHknLAogICAgICAgIGJvZHk6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5pZFRvQm9keU1hcCA9IHt9OwogICAgICB0aGlzLmJyb2FkcGhhc2Uuc2V0V29ybGQodGhpcyk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29udGFjdCBtYXRlcmlhbCBiZXR3ZWVuIG1hdGVyaWFscyBtMSBhbmQgbTIKICAgICAqIEByZXR1cm4gVGhlIGNvbnRhY3QgbWF0ZXJpYWwgaWYgaXQgd2FzIGZvdW5kLgogICAgICovCgoKICAgIGdldENvbnRhY3RNYXRlcmlhbChtMSwgbTIpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuZ2V0KG0xLmlkLCBtMi5pZCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0b3JlIG9sZCBjb2xsaXNpb24gc3RhdGUgaW5mbwogICAgICovCgoKICAgIGNvbGxpc2lvbk1hdHJpeFRpY2soKSB7CiAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdGhpcy5jb2xsaXNpb25NYXRyaXg7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gdGVtcDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXgucmVzZXQoKTsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci50aWNrKCk7CiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgY29uc3RyYWludCB0byB0aGUgc2ltdWxhdGlvbi4KICAgICAqLwoKCiAgICBhZGRDb25zdHJhaW50KGMpIHsKICAgICAgdGhpcy5jb25zdHJhaW50cy5wdXNoKGMpOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmVzIGEgY29uc3RyYWludAogICAgICovCgoKICAgIHJlbW92ZUNvbnN0cmFpbnQoYykgewogICAgICBjb25zdCBpZHggPSB0aGlzLmNvbnN0cmFpbnRzLmluZGV4T2YoYyk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIHRoaXMuY29uc3RyYWludHMuc3BsaWNlKGlkeCwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmF5Y2FzdCB0ZXN0CiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLnJheWNhc3RBbGwsIC5yYXljYXN0Q2xvc2VzdCBvciAucmF5Y2FzdEFueSBpbnN0ZWFkLgogICAgICovCgoKICAgIHJheVRlc3QoZnJvbSwgdG8sIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmF5Y2FzdFJlc3VsdCkgewogICAgICAgIC8vIERvIHJheWNhc3RDbG9zZXN0CiAgICAgICAgdGhpcy5yYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgewogICAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZQogICAgICAgIH0sIHJlc3VsdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdEFsbAogICAgICAgIHRoaXMucmF5Y2FzdEFsbChmcm9tLCB0bywgewogICAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZQogICAgICAgIH0sIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QgYWdhaW5zdCBhbGwgYm9kaWVzLiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBmb3IgZWFjaCBoaXQgd2l0aCBhIFJheWNhc3RSZXN1bHQgYXMgc2luZ2xlIGFyZ3VtZW50LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdEFsbChmcm9tLCB0bywgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFMTDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QW55KGZyb20sIHRvLCBvcHRpb25zLCByZXN1bHQpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFOWTsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCByZXR1cm4gaW5mb3JtYXRpb24gb2YgdGhlIGNsb3Nlc3QgaGl0LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdENsb3Nlc3QoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQ0xPU0VTVDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgcmlnaWQgYm9keSB0byB0aGUgc2ltdWxhdGlvbi4KICAgICAqIEB0b2RvIElmIHRoZSBzaW11bGF0aW9uIGhhcyBub3QgeWV0IHN0YXJ0ZWQsIHdoeSByZWNyZXRlIGFuZCBjb3B5IGFycmF5cyBmb3IgZWFjaCBib2R5PyBBY2N1bXVsYXRlIGluIGR5bmFtaWMgYXJyYXlzIGluIHRoaXMgY2FzZS4KICAgICAqIEB0b2RvIEFkZGluZyBhbiBhcnJheSBvZiBib2RpZXMgc2hvdWxkIGJlIHBvc3NpYmxlLiBUaGlzIHdvdWxkIHNhdmUgc29tZSBsb29wcyB0b28KICAgICAqLwoKCiAgICBhZGRCb2R5KGJvZHkpIHsKICAgICAgaWYgKHRoaXMuYm9kaWVzLmluY2x1ZGVzKGJvZHkpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBib2R5LmluZGV4ID0gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgICB0aGlzLmJvZGllcy5wdXNoKGJvZHkpOwogICAgICBib2R5LndvcmxkID0gdGhpczsKICAgICAgYm9keS5pbml0UG9zaXRpb24uY29weShib2R5LnBvc2l0aW9uKTsKICAgICAgYm9keS5pbml0VmVsb2NpdHkuY29weShib2R5LnZlbG9jaXR5KTsKICAgICAgYm9keS50aW1lTGFzdFNsZWVweSA9IHRoaXMudGltZTsKCiAgICAgIGlmIChib2R5IGluc3RhbmNlb2YgQm9keSkgewogICAgICAgIGJvZHkuaW5pdEFuZ3VsYXJWZWxvY2l0eS5jb3B5KGJvZHkuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgICBib2R5LmluaXRRdWF0ZXJuaW9uLmNvcHkoYm9keS5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyh0aGlzLmJvZGllcy5sZW5ndGgpOwogICAgICB0aGlzLmFkZEJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLmFkZEJvZHlFdmVudCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhIHJpZ2lkIGJvZHkgZnJvbSB0aGUgc2ltdWxhdGlvbi4KICAgICAqLwoKCiAgICByZW1vdmVCb2R5KGJvZHkpIHsKICAgICAgYm9keS53b3JsZCA9IG51bGw7CiAgICAgIGNvbnN0IG4gPSB0aGlzLmJvZGllcy5sZW5ndGggLSAxOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3QgaWR4ID0gYm9kaWVzLmluZGV4T2YoYm9keSk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIGJvZGllcy5zcGxpY2UoaWR4LCAxKTsgLy8gVG9kbzogc2hvdWxkIHVzZSBhIGdhcmJhZ2UgZnJlZSBtZXRob2QKICAgICAgICAvLyBSZWNvbXB1dGUgaW5kZXgKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYm9kaWVzW2ldLmluZGV4ID0gaTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldE51bU9iamVjdHMobik7CiAgICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQuYm9keSA9IGJvZHk7CiAgICAgICAgZGVsZXRlIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF07CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMucmVtb3ZlQm9keUV2ZW50KTsKICAgICAgfQogICAgfQoKICAgIGdldEJvZHlCeUlkKGlkKSB7CiAgICAgIHJldHVybiB0aGlzLmlkVG9Cb2R5TWFwW2lkXTsKICAgIH0KICAgIC8qKgogICAgICogQHRvZG8gTWFrZSBhIGZhc3RlciBtYXAKICAgICAqLwoKCiAgICBnZXRTaGFwZUJ5SWQoaWQpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlcyA9IGJvZGllc1tpXS5zaGFwZXM7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tqXTsKCiAgICAgICAgICBpZiAoc2hhcGUuaWQgPT09IGlkKSB7CiAgICAgICAgICAgIHJldHVybiBzaGFwZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGEgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgV29ybGQKICAgICAqLwoKCiAgICBhZGRDb250YWN0TWF0ZXJpYWwoY21hdCkgewogICAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbAogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMucHVzaChjbWF0KTsgLy8gQWRkIGN1cnJlbnQgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgbWF0ZXJpYWwgdGFibGUKCiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuc2V0KGNtYXQubWF0ZXJpYWxzWzBdLmlkLCBjbWF0Lm1hdGVyaWFsc1sxXS5pZCwgY21hdCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb250YWN0IG1hdGVyaWFsIGZyb20gdGhlIFdvcmxkLgogICAgICovCgoKICAgIHJlbW92ZUNvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29udGFjdG1hdGVyaWFscy5pbmRleE9mKGNtYXQpOwoKICAgICAgaWYgKGlkeCA9PT0gLTEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5zcGxpY2UoaWR4LCAxKTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5kZWxldGUoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogU3RlcCB0aGUgc2ltdWxhdGlvbiBmb3J3YXJkIGtlZXBpbmcgdHJhY2sgb2YgbGFzdCBjYWxsZWQgdGltZQogICAgICogdG8gYmUgYWJsZSB0byBzdGVwIHRoZSB3b3JsZCBhdCBhIGZpeGVkIHJhdGUsIGluZGVwZW5kZW50bHkgb2YgZnJhbWVyYXRlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlIChkZWZhdWx0OiAxIC8gNjApLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwgKGRlZmF1bHQ6IDEwKS4KICAgICAqIEBzZWUgaHR0cHM6Ly9nYWZmZXJvbmdhbWVzLmNvbS9wb3N0L2ZpeF95b3VyX3RpbWVzdGVwLwogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBSdW4gdGhlIHNpbXVsYXRpb24gaW5kZXBlbmRlbnRseSBvZiBmcmFtZXJhdGUgZXZlcnkgMSAvIDYwIG1zCiAgICAgKiAgICAgd29ybGQuZml4ZWRTdGVwKCkKICAgICAqLwoKCiAgICBmaXhlZFN0ZXAoZHQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChkdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgZHQgPSAxIC8gNjA7CiAgICAgIH0KCiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgY29uc3QgdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDsgLy8gc2Vjb25kcwoKICAgICAgaWYgKCF0aGlzLmxhc3RDYWxsVGltZSkgewogICAgICAgIHRoaXMuc3RlcChkdCwgdW5kZWZpbmVkLCBtYXhTdWJTdGVwcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGxlZCA9IHRpbWUgLSB0aGlzLmxhc3RDYWxsVGltZTsKICAgICAgICB0aGlzLnN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKICAgICAgfQoKICAgICAgdGhpcy5sYXN0Q2FsbFRpbWUgPSB0aW1lOwogICAgfQogICAgLyoqCiAgICAgKiBTdGVwIHRoZSBwaHlzaWNzIHdvcmxkIGZvcndhcmQgaW4gdGltZS4KICAgICAqCiAgICAgKiBUaGVyZSBhcmUgdHdvIG1vZGVzLiBUaGUgc2ltcGxlIG1vZGUgaXMgZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbi4gSW4gdGhpcyBjYXNlIHlvdSBvbmx5IHVzZSB0aGUgZmlyc3QgYXJndW1lbnQuIFRoZSBzZWNvbmQgY2FzZSB1c2VzIGludGVycG9sYXRpb24uIEluIHRoYXQgeW91IGFsc28gcHJvdmlkZSB0aGUgdGltZSBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgdXNlZCwgYXMgd2VsbCBhcyB0aGUgbWF4aW11bSBmaXhlZCB0aW1lc3RlcHMgdG8gdGFrZS4KICAgICAqCiAgICAgKiBAcGFyYW0gZHQgVGhlIGZpeGVkIHRpbWUgc3RlcCBzaXplIHRvIHVzZS4KICAgICAqIEBwYXJhbSB0aW1lU2luY2VMYXN0Q2FsbGVkIFRoZSB0aW1lIGVsYXBzZWQgc2luY2UgdGhlIGZ1bmN0aW9uIHdhcyBsYXN0IGNhbGxlZC4KICAgICAqIEBwYXJhbSBtYXhTdWJTdGVwcyBNYXhpbXVtIG51bWJlciBvZiBmaXhlZCBzdGVwcyB0byB0YWtlIHBlciBmdW5jdGlvbiBjYWxsIChkZWZhdWx0OiAxMCkuCiAgICAgKiBAc2VlIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE4MDQyNjE1NDUzMS9odHRwOi8vYnVsbGV0cGh5c2ljcy5vcmcvbWVkaWF3aWtpLTEuNS44L2luZGV4LnBocC9TdGVwcGluZ19UaGVfV29ybGQjV2hhdF9kb190aGVfcGFyYW1ldGVyc190b19idER5bmFtaWNzV29ybGQ6OnN0ZXBTaW11bGF0aW9uX21lYW4uM0YKICAgICAqIEBleGFtcGxlCiAgICAgKiAgICAgLy8gZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbgogICAgICogICAgIHdvcmxkLnN0ZXAoMSAvIDYwKQogICAgICovCgoKICAgIHN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIEZpeGVkLCBzaW1wbGUgc3RlcHBpbmcKICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7IC8vIEluY3JlbWVudCB0aW1lCgogICAgICAgIHRoaXMudGltZSArPSBkdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgICAgY29uc3QgdDAgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBsZXQgc3Vic3RlcHMgPSAwOwoKICAgICAgICB3aGlsZSAodGhpcy5hY2N1bXVsYXRvciA+PSBkdCAmJiBzdWJzdGVwcyA8IG1heFN1YlN0ZXBzKSB7CiAgICAgICAgICAvLyBEbyBmaXhlZCBzdGVwcyB0byBjYXRjaCB1cAogICAgICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpOwogICAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSBkdDsKICAgICAgICAgIHN1YnN0ZXBzKys7CgogICAgICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gdDAgPiBkdCAqIDEwMDApIHsKICAgICAgICAgICAgLy8gVGhlIGZyYW1lcmF0ZSBpcyBub3QgaW50ZXJhY3RpdmUgYW55bW9yZS4KICAgICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLgogICAgICAgICAgICAvLyBCZXR0ZXIgYmFpbCBvdXQuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gUmVtb3ZlIHRoZSBleGNlc3MgYWNjdW11bGF0b3IsIHNpbmNlIHdlIG1heSBub3QKICAgICAgICAvLyBoYXZlIGhhZCBlbm91Z2ggc3Vic3RlcHMgYXZhaWxhYmxlIHRvIGNhdGNoIHVwCgoKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gdGhpcy5hY2N1bXVsYXRvciAlIGR0OwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjY3VtdWxhdG9yIC8gZHQ7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSB0aGlzLmJvZGllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdOwogICAgICAgICAgYi5wcmV2aW91c1Bvc2l0aW9uLmxlcnAoYi5wb3NpdGlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRQb3NpdGlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5zbGVycChiLnF1YXRlcm5pb24sIHQsIGIuaW50ZXJwb2xhdGVkUXVhdGVybmlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudGltZSArPSB0aW1lU2luY2VMYXN0Q2FsbGVkOwogICAgICB9CiAgICB9CgogICAgaW50ZXJuYWxTdGVwKGR0KSB7CiAgICAgIHRoaXMuZHQgPSBkdDsKICAgICAgY29uc3QgY29udGFjdHMgPSB0aGlzLmNvbnRhY3RzOwogICAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7CiAgICAgIGNvbnN0IHAyID0gV29ybGRfc3RlcF9wMjsKICAgICAgY29uc3QgTiA9IHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IHNvbHZlciA9IHRoaXMuc29sdmVyOwogICAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5OwogICAgICBjb25zdCBkb1Byb2ZpbGluZyA9IHRoaXMuZG9Qcm9maWxpbmc7CiAgICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGU7CiAgICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7CiAgICAgIGxldCBwcm9maWxpbmdTdGFydCA9IC1JbmZpbml0eTsKICAgICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzOwogICAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgIGdyYXZpdHkubGVuZ3RoKCk7CiAgICAgIGNvbnN0IGd4ID0gZ3Jhdml0eS54OwogICAgICBjb25zdCBneSA9IGdyYXZpdHkueTsKICAgICAgY29uc3QgZ3ogPSBncmF2aXR5Lno7CiAgICAgIGxldCBpID0gMDsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0gLy8gQWRkIGdyYXZpdHkgdG8gYWxsIG9iamVjdHMKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgPT09IERZTkFNSUMpIHsKICAgICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMgYm9kaWVzCiAgICAgICAgICBjb25zdCBmID0gYmkuZm9yY2U7CiAgICAgICAgICBjb25zdCBtID0gYmkubWFzczsKICAgICAgICAgIGYueCArPSBtICogZ3g7CiAgICAgICAgICBmLnkgKz0gbSAqIGd5OwogICAgICAgICAgZi56ICs9IG0gKiBnejsKICAgICAgICB9CiAgICAgIH0gLy8gVXBkYXRlIHN1YnN5c3RlbXMKCgogICAgICBmb3IgKGxldCBpID0gMCwgTnN1YnN5c3RlbXMgPSB0aGlzLnN1YnN5c3RlbXMubGVuZ3RoOyBpICE9PSBOc3Vic3lzdGVtczsgaSsrKSB7CiAgICAgICAgdGhpcy5zdWJzeXN0ZW1zW2ldLnVwZGF0ZSgpOwogICAgICB9IC8vIENvbGxpc2lvbiBkZXRlY3Rpb24KCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBwMS5sZW5ndGggPSAwOyAvLyBDbGVhbiB1cCBwYWlyIGFycmF5cyBmcm9tIGxhc3Qgc3RlcAoKICAgICAgcDIubGVuZ3RoID0gMDsKICAgICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmJyb2FkcGhhc2UgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBjb25zdHJhaW5lZCBwYWlycyB3aXRoIGNvbGxpZGVDb25uZWN0ZWQgPT0gZmFsc2UKCgogICAgICBsZXQgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CgogICAgICAgIGlmICghYy5jb2xsaWRlQ29ubmVjdGVkKSB7CiAgICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHsKICAgICAgICAgICAgaWYgKGMuYm9keUEgPT09IHAxW2pdICYmIGMuYm9keUIgPT09IHAyW2pdIHx8IGMuYm9keUIgPT09IHAxW2pdICYmIGMuYm9keUEgPT09IHAyW2pdKSB7CiAgICAgICAgICAgICAgcDEuc3BsaWNlKGosIDEpOwogICAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhUaWNrKCk7IC8vIEdlbmVyYXRlIGNvbnRhY3RzCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBvbGRjb250YWN0cyA9IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHM7CiAgICAgIGNvbnN0IE5vbGRDb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRDb250YWN0czsgaSsrKSB7CiAgICAgICAgb2xkY29udGFjdHMucHVzaChjb250YWN0c1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnRhY3RzLmxlbmd0aCA9IDA7IC8vIFRyYW5zZmVyIEZyaWN0aW9uRXF1YXRpb24gZnJvbSBjdXJyZW50IGxpc3QgdG8gdGhlIHBvb2wgZm9yIHJldXNlCgogICAgICBjb25zdCBOb2xkRnJpY3Rpb25FcXVhdGlvbnMgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRGcmljdGlvbkVxdWF0aW9uczsgaSsrKSB7CiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblBvb2wucHVzaCh0aGlzLmZyaWN0aW9uRXF1YXRpb25zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgICB0aGlzLm5hcnJvd3BoYXNlLmdldENvbnRhY3RzKHAxLCBwMiwgdGhpcywgY29udGFjdHMsIG9sZGNvbnRhY3RzLCAvLyBUbyBiZSByZXVzZWQKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucywgZnJpY3Rpb25FcXVhdGlvblBvb2wpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5uYXJyb3dwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBBZGQgYWxsIGZyaWN0aW9uIGVxcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICBjb25zdCBuY29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gbmNvbnRhY3RzOyBrKyspIHsKICAgICAgICAvLyBDdXJyZW50IGNvbnRhY3QKICAgICAgICBjb25zdCBjID0gY29udGFjdHNba107IC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBpbmRlY2VzCgogICAgICAgIGNvbnN0IGJpID0gYy5iaTsKICAgICAgICBjb25zdCBiaiA9IGMuYmo7CiAgICAgICAgY29uc3Qgc2kgPSBjLnNpOwogICAgICAgIGNvbnN0IHNqID0gYy5zajsgLy8gR2V0IGNvbGxpc2lvbiBwcm9wZXJ0aWVzCgogICAgICAgIGxldCBjbTsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBjbSA9IHRoaXMuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjbSA9IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsKICAgICAgICB9IC8vIGMuZW5hYmxlZCA9IGJpLmNvbGxpc2lvblJlc3BvbnNlICYmIGJqLmNvbGxpc2lvblJlc3BvbnNlICYmIHNpLmNvbGxpc2lvblJlc3BvbnNlICYmIHNqLmNvbGxpc2lvblJlc3BvbnNlOwoKCiAgICAgICAgY20uZnJpY3Rpb247IC8vIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgICAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkgewogICAgICAgICAgICBiaS5tYXRlcmlhbC5mcmljdGlvbiAqIGJqLm1hdGVyaWFsLmZyaWN0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChiaS5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwICYmIGJqLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBjLnNldFNwb29rUGFyYW1zKAogICAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sCiAgICAgICAgLy8gICAgICAgICAgIGR0CiAgICAgICAgLy8gICAgICAgKTsKCgogICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihjKTsgLy8gLy8gQWRkIGZyaWN0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgICAgICAvLyBpZihtdSA+IDApewogICAgICAgIC8vIAkvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIAljb25zdCBtdWcgPSBtdSAqIGdub3JtOwogICAgICAgIC8vIAljb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7CiAgICAgICAgLy8gCWlmKHJlZHVjZWRNYXNzID4gMCl7CiAgICAgICAgLy8gCQlyZWR1Y2VkTWFzcyA9IDEvcmVkdWNlZE1hc3M7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyAJY29uc3QgcG9vbCA9IGZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIC8vIAljb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7CiAgICAgICAgLy8gCWNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5wdXNoKGMxLCBjMik7CiAgICAgICAgLy8gCWMxLmJpID0gYzIuYmkgPSBiaTsKICAgICAgICAvLyAJYzEuYmogPSBjMi5iaiA9IGJqOwogICAgICAgIC8vIAljMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCiAgICAgICAgLy8gCWMxLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMxLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCWMyLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMyLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCS8vIENvbnN0cnVjdCB0YW5nZW50cwogICAgICAgIC8vIAljLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOwogICAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zCiAgICAgICAgLy8gICAgICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkOwogICAgICAgIC8vIAkvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlcgogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzEpOwogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzIpOwogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKGJpLmFsbG93U2xlZXAgJiYgYmkudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJpLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiai50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQiA9IGJqLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJqLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7CiAgICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQSA9IGJpLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJpLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEEgPSBiaS5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQSA+PSBzcGVlZExpbWl0U3F1YXJlZEEgKiAyKSB7CiAgICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gLy8gTm93IHdlIGtub3cgdGhhdCBpIGFuZCBqIGFyZSBpbiBjb250YWN0LiBTZXQgY29sbGlzaW9uIG1hdHJpeCBzdGF0ZQoKCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0KGJpLCBiaiwgdHJ1ZSk7CgogICAgICAgIGlmICghdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cy5nZXQoYmksIGJqKSkgewogICAgICAgICAgLy8gRmlyc3QgY29udGFjdCEKICAgICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC4KICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiajsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmNvbnRhY3QgPSBjOwogICAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7CiAgICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5ib2R5ID0gYmk7CiAgICAgICAgICBiai5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZW1pdENvbnRhY3RFdmVudHMoKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBXYWtlIHVwIGJvZGllcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSkgewogICAgICAgICAgYmkud2FrZVVwKCk7CiAgICAgICAgICBiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzCgoKICAgICAgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CiAgICAgICAgYy51cGRhdGUoKTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5lcSA9IGMuZXF1YXRpb25zLmxlbmd0aDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGVxID0gYy5lcXVhdGlvbnNbal07CiAgICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpOwogICAgICAgIH0KICAgICAgfSAvLyBTb2x2ZSB0aGUgY29uc3RyYWluZWQgc3lzdGVtCgoKICAgICAgc29sdmVyLnNvbHZlKGR0LCB0aGlzKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuc29sdmUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXIKCgogICAgICBzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7IC8vIEFwcGx5IGRhbXBpbmcsIHNlZSBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYnVsbGV0L2lzc3Vlcy9kZXRhaWw/aWQ9NzQgZm9yIGRldGFpbHMKCiAgICAgIGNvbnN0IHBvdyA9IE1hdGgucG93OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGxkID0gcG93KDEuMCAtIGJpLmxpbmVhckRhbXBpbmcsIGR0KTsKICAgICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTsKICAgICAgICAgIHYuc2NhbGUobGQsIHYpOwogICAgICAgICAgY29uc3QgYXYgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CgogICAgICAgICAgaWYgKGF2KSB7CiAgICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7CiAgICAgICAgICAgIGF2LnNjYWxlKGFkLCBhdik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQpOyAvLyBMZWFwIGZyb2cKICAgICAgLy8gdm5ldyA9IHYgKyBoKmYvbQogICAgICAvLyB4bmV3ID0geCArIGgqdm5ldwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfQoKICAgICAgY29uc3Qgc3RlcG51bWJlciA9IHRoaXMuc3RlcG51bWJlcjsKICAgICAgY29uc3QgcXVhdE5vcm1hbGl6ZSA9IHN0ZXBudW1iZXIgJSAodGhpcy5xdWF0Tm9ybWFsaXplU2tpcCArIDEpID09PSAwOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplRmFzdCA9IHRoaXMucXVhdE5vcm1hbGl6ZUZhc3Q7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBib2RpZXNbaV0uaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2xlYXJGb3JjZXMoKTsKICAgICAgdGhpcy5icm9hZHBoYXNlLmRpcnR5ID0gdHJ1ZTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuaW50ZWdyYXRlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXIKCgogICAgICB0aGlzLnN0ZXBudW1iZXIgKz0gMTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIFNsZWVwaW5nIHVwZGF0ZQoKICAgICAgbGV0IGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CgogICAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7CiAgICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CgogICAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CiAgICAgICAgICBiaS5zbGVlcFRpY2sodGhpcy50aW1lKTsKCiAgICAgICAgICBpZiAoYmkuc2xlZXBTdGF0ZSAhPT0gQm9keS5TTEVFUElORykgewogICAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7CiAgICB9CgogICAgZW1pdENvbnRhY3RFdmVudHMoKSB7CiAgICAgIGNvbnN0IGhhc0JlZ2luQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkgewogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChoYXNFbmRDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaV0pOwogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUEgPSBlbmRDb250YWN0RXZlbnQuYm9keUIgPSBudWxsOwogICAgICB9CgogICAgICBhZGRpdGlvbnMubGVuZ3RoID0gcmVtb3ZhbHMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZFNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kU2hhcGVDb250YWN0Jyk7CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QgfHwgaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaV0pOwogICAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5OwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJlZ2luU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZFNoYXBlQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVtb3ZhbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBzaGFwZUEuYm9keTsKICAgICAgICAgIGlmIChzaGFwZUIpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbGwgYm9keSBmb3JjZXMgaW4gdGhlIHdvcmxkIHRvIHplcm8uCiAgICAgKi8KCgogICAgY2xlYXJGb3JjZXMoKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgIGIuZm9yY2U7CiAgICAgICAgYi50b3JxdWU7CiAgICAgICAgYi5mb3JjZS5zZXQoMCwgMCwgMCk7CiAgICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApOwogICAgICB9CiAgICB9CgogIH0gLy8gVGVtcCBzdHVmZgoKICBuZXcgQUFCQigpOwogIGNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKQoKICBjb25zdCBwZXJmb3JtYW5jZSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307CgogIGlmICghcGVyZm9ybWFuY2Uubm93KSB7CiAgICBsZXQgbm93T2Zmc2V0ID0gRGF0ZS5ub3coKTsKCiAgICBpZiAocGVyZm9ybWFuY2UudGltaW5nICYmIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQpIHsKICAgICAgbm93T2Zmc2V0ID0gcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDsKICAgIH0KCiAgICBwZXJmb3JtYW5jZS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0OwogIH0KCiAgbmV3IFZlYzMoKTsgLy8gRGlzcGF0Y2hlZCBhZnRlciB0aGUgd29ybGQgaGFzIHN0ZXBwZWQgZm9yd2FyZCBpbiB0aW1lLgogIC8vIFJldXNhYmxlIGV2ZW50IG9iamVjdHMgdG8gc2F2ZSBtZW1vcnkuCgogIGNvbnN0IFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwb3N0U3RlcCcKICB9OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLgoKICBjb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwcmVTdGVwJwogIH07CiAgY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7CiAgICB0eXBlOiBCb2R5LkNPTExJREVfRVZFTlRfTkFNRSwKICAgIGJvZHk6IG51bGwsCiAgICBjb250YWN0OiBudWxsCiAgfTsgLy8gUG9vbHMgZm9yIHVudXNlZCBvYmplY3RzCgogIGNvbnN0IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHMgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107IC8vIFJldXNhYmxlIGFycmF5cyBmb3IgY29sbGlzaW9uIHBhaXJzCgogIGNvbnN0IFdvcmxkX3N0ZXBfcDEgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50cwoKICBjb25zdCBhZGRpdGlvbnMgPSBbXTsKICBjb25zdCByZW1vdmFscyA9IFtdOwogIGNvbnN0IGJlZ2luQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBlbmRDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwogIGNvbnN0IGVuZFNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZFNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKCiAgY29uc3QgYWRkQ29udGFjdE1hdGVyaWFsID0gKHdvcmxkLCBjcmVhdGVNYXRlcmlhbCwgX3JlZiwgdXVpZCkgPT4gewogICAgbGV0IFttYXRlcmlhbEEsIG1hdGVyaWFsQiwgb3B0aW9uc10gPSBfcmVmOwogICAgY29uc3QgbWF0QSA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsQSk7CiAgICBjb25zdCBtYXRCID0gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWxCKTsKICAgIGNvbnN0IGNvbnRhY3RNYXRlcmlhbCA9IG5ldyBDb250YWN0TWF0ZXJpYWwobWF0QSwgbWF0Qiwgb3B0aW9ucyk7CiAgICBjb250YWN0TWF0ZXJpYWwudXVpZCA9IHV1aWQ7CiAgICB3b3JsZC5hZGRDb250YWN0TWF0ZXJpYWwoY29udGFjdE1hdGVyaWFsKTsKICB9OwogIGNvbnN0IHJlbW92ZUNvbnRhY3RNYXRlcmlhbCA9ICh3b3JsZCwgY21VVUlEKSA9PiB7CiAgICBjb25zdCBpbmRleCA9IHdvcmxkLmNvbnRhY3RtYXRlcmlhbHMuZmluZEluZGV4KF9yZWYyID0+IHsKICAgICAgbGV0IHsKICAgICAgICB1dWlkCiAgICAgIH0gPSBfcmVmMjsKICAgICAgcmV0dXJuIHV1aWQgPT09IGNtVVVJRDsKICAgIH0pOwogICAgY29uc3QgW3sKICAgICAgaWQ6IGkKICAgIH0sIHsKICAgICAgaWQ6IGoKICAgIH1dID0gd29ybGQuY29udGFjdG1hdGVyaWFsc1tpbmRleF0ubWF0ZXJpYWxzOwogICAgd29ybGQuY29udGFjdG1hdGVyaWFscy5zcGxpY2UoaW5kZXgsIDEpOwogICAgZGVsZXRlIHdvcmxkLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmRhdGFbaSA8IGogPyBgJHtpfS0ke2p9YCA6IGAke2p9LSR7aX1gXTsKICB9OwoKICBsZXQgbWF0ZXJpYWxJZCA9IDA7CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWxGYWN0b3J5ID0gbWF0ZXJpYWxzID0+IGZ1bmN0aW9uIChuYW1lT3JPcHRpb25zKSB7CiAgICBpZiAobmFtZU9yT3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgIG5hbWVPck9wdGlvbnMgPSB7fTsKICAgIH0KCiAgICBjb25zdCBtYXRlcmlhbE9wdGlvbnMgPSB0eXBlb2YgbmFtZU9yT3B0aW9ucyA9PT0gJ3N0cmluZycgPyB7CiAgICAgIG5hbWU6IG5hbWVPck9wdGlvbnMKICAgIH0gOiB7CiAgICAgIG5hbWU6IFN5bWJvbC5mb3IoYE1hdGVyaWFsJHttYXRlcmlhbElkKyt9YCksCiAgICAgIC4uLm5hbWVPck9wdGlvbnMKICAgIH07CiAgICBjb25zdCB7CiAgICAgIG5hbWUKICAgIH0gPSBtYXRlcmlhbE9wdGlvbnM7CiAgICBtYXRlcmlhbHNbbmFtZV0gPSBtYXRlcmlhbHNbbmFtZV0gfHwgbmV3IE1hdGVyaWFsKG1hdGVyaWFsT3B0aW9ucyk7CiAgICByZXR1cm4gbWF0ZXJpYWxzW25hbWVdOwogIH07CgogIC8qKgogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCdjYW5ub24tZXMnKS5NYXRlcmlhbE9wdGlvbnMgfSBNYXRlcmlhbE9wdGlvbnMKICAgKi8KCiAgY29uc3QgbWFrZVZlYzMgPSBfcmVmID0+IHsKICAgIGxldCBbeCwgeSwgel0gPSBfcmVmOwogICAgcmV0dXJuIG5ldyBWZWMzKHgsIHksIHopOwogIH07CgogIGNvbnN0IHByZXBhcmVTcGhlcmUgPSBhcmdzID0+IEFycmF5LmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdOwoKICBjb25zdCBwcmVwYXJlQ29udmV4UG9seWhlZHJvbiA9IF9yZWYyID0+IHsKICAgIGxldCBbdiwgZmFjZXMsIG4sIGEsIGJvdW5kaW5nU3BoZXJlUmFkaXVzXSA9IF9yZWYyOwogICAgcmV0dXJuIFt7CiAgICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzLAogICAgICBmYWNlcywKICAgICAgbm9ybWFsczogbiA/IG4ubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgdmVydGljZXM6IHYgPyB2Lm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQKICAgIH1dOwogIH07CgogIGZ1bmN0aW9uIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpIHsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlICdCb3gnOgogICAgICAgIHJldHVybiBuZXcgQm94KG5ldyBWZWMzKC4uLmFyZ3MubWFwKHYgPT4gdiAvIDIpKSk7CiAgICAgIC8vIGV4dGVudHMgPT4gaGFsZkV4dGVudHMKCiAgICAgIGNhc2UgJ0NvbnZleFBvbHloZWRyb24nOgogICAgICAgIHJldHVybiBuZXcgQ29udmV4UG9seWhlZHJvbiguLi5wcmVwYXJlQ29udmV4UG9seWhlZHJvbihhcmdzKSk7CgogICAgICBjYXNlICdDeWxpbmRlcic6CiAgICAgICAgcmV0dXJuIG5ldyBDeWxpbmRlciguLi5hcmdzKTsKICAgICAgLy8gWyByYWRpdXNUb3AsIHJhZGl1c0JvdHRvbSwgaGVpZ2h0LCBudW1TZWdtZW50cyBdID0gYXJncwoKICAgICAgY2FzZSAnSGVpZ2h0ZmllbGQnOgogICAgICAgIHJldHVybiBuZXcgSGVpZ2h0ZmllbGQoLi4uYXJncyk7CiAgICAgIC8vIFsgQXJyYXkgZGF0YSwgb3B0aW9uczoge21pblZhbHVlLCBtYXhWYWx1ZSwgZWxlbWVudFNpemV9ICBdID0gYXJncwoKICAgICAgY2FzZSAnUGFydGljbGUnOgogICAgICAgIHJldHVybiBuZXcgUGFydGljbGUoKTsKICAgICAgLy8gbm8gYXJncwoKICAgICAgY2FzZSAnUGxhbmUnOgogICAgICAgIHJldHVybiBuZXcgUGxhbmUoKTsKICAgICAgLy8gbm8gYXJncywgaW5maW5pdGUgeCBhbmQgeQoKICAgICAgY2FzZSAnU3BoZXJlJzoKICAgICAgICByZXR1cm4gbmV3IFNwaGVyZSguLi5wcmVwYXJlU3BoZXJlKGFyZ3MpKTsKICAgICAgLy8gcmFkaXVzID0gYXJncwoKICAgICAgY2FzZSAnVHJpbWVzaCc6CiAgICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKC4uLmFyZ3MpOwogICAgICAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJncwogICAgfQogIH0KICAvKioKICAgKiBAZnVuY3Rpb24KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnV1aWQKICAgKiBAcGFyYW0ge0JvZHlQcm9wc30gb3B0aW9ucy5wcm9wcwogICAqIEBwYXJhbSB7Qm9keVNoYXBlVHlwZX0gb3B0aW9ucy50eXBlCiAgICogQHBhcmFtIHsobWF0ZXJpYWxPcHRpb25zOiBNYXRlcmlhbE9wdGlvbnMpID0+IE1hdGVyaWFsID19IG9wdGlvbnMuY3JlYXRlTWF0ZXJpYWwKICAgKiBAcmV0dXJucyB7Qm9keX0KICAgKi8KCgogIGNvbnN0IHByb3BzVG9Cb2R5ID0gb3B0aW9ucyA9PiB7CiAgICBjb25zdCB7CiAgICAgIHV1aWQsCiAgICAgIHByb3BzLAogICAgICB0eXBlLAogICAgICBjcmVhdGVNYXRlcmlhbCA9IG1hdGVyaWFsT3B0aW9ucyA9PiBuZXcgTWF0ZXJpYWwobWF0ZXJpYWxPcHRpb25zKQogICAgfSA9IG9wdGlvbnM7CiAgICBjb25zdCB7CiAgICAgIGFuZ3VsYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgYXJncyA9IFtdLAogICAgICBjb2xsaXNpb25SZXNwb25zZSwKICAgICAgbGluZWFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICBtYXNzLAogICAgICBtYXRlcmlhbCwKICAgICAgb25Db2xsaWRlLAogICAgICBwb3NpdGlvbiA9IFswLCAwLCAwXSwKICAgICAgcm90YXRpb24gPSBbMCwgMCwgMF0sCiAgICAgIHNoYXBlcywKICAgICAgdHlwZTogYm9keVR5cGUsCiAgICAgIHZlbG9jaXR5ID0gWzAsIDAsIDBdLAogICAgICAuLi5leHRyYQogICAgfSA9IHByb3BzOwogICAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHsgLi4uZXh0cmEsCiAgICAgIG1hc3M6IGJvZHlUeXBlID09PSAnU3RhdGljJyA/IDAgOiBtYXNzLAogICAgICBtYXRlcmlhbDogbWF0ZXJpYWwgPyBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbCkgOiB1bmRlZmluZWQsCiAgICAgIHR5cGU6IGJvZHlUeXBlID8gQm9keVtib2R5VHlwZS50b1VwcGVyQ2FzZSgpXSA6IHVuZGVmaW5lZAogICAgfSk7CiAgICBib2R5LnV1aWQgPSB1dWlkOwoKICAgIGlmIChjb2xsaXNpb25SZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvZHkuY29sbGlzaW9uUmVzcG9uc2UgPSBjb2xsaXNpb25SZXNwb25zZTsKICAgIH0KCiAgICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykgewogICAgICBzaGFwZXMuZm9yRWFjaChfcmVmMyA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBhcmdzLAogICAgICAgICAgcG9zaXRpb24sCiAgICAgICAgICByb3RhdGlvbiwKICAgICAgICAgIG1hdGVyaWFsLAogICAgICAgICAgLi4uZXh0cmEKICAgICAgICB9ID0gX3JlZjM7CiAgICAgICAgY29uc3Qgc2hhcGVCb2R5ID0gYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSwgcG9zaXRpb24gPyBuZXcgVmVjMyguLi5wb3NpdGlvbikgOiB1bmRlZmluZWQsIHJvdGF0aW9uID8gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoLi4ucm90YXRpb24pIDogdW5kZWZpbmVkKTsKICAgICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQoKICAgIGJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pOwogICAgYm9keS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdKTsKICAgIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pOwogICAgYm9keS5hbmd1bGFyVmVsb2NpdHkuc2V0KGFuZ3VsYXJWZWxvY2l0eVswXSwgYW5ndWxhclZlbG9jaXR5WzFdLCBhbmd1bGFyVmVsb2NpdHlbMl0pOwogICAgYm9keS5saW5lYXJGYWN0b3Iuc2V0KGxpbmVhckZhY3RvclswXSwgbGluZWFyRmFjdG9yWzFdLCBsaW5lYXJGYWN0b3JbMl0pOwogICAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKTsKICAgIHJldHVybiBib2R5OwogIH07CgogIGNvbnN0IGFkZEJvZGllcyA9IChzdGF0ZSwgY3JlYXRlTWF0ZXJpYWwsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzLAogICAgICB0eXBlLAogICAgICB1dWlkCiAgICB9ID0gX3JlZjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5KHsKICAgICAgICBjcmVhdGVNYXRlcmlhbCwKICAgICAgICBwcm9wczogcHJvcHNbaV0sCiAgICAgICAgdHlwZSwKICAgICAgICB1dWlkOiB1dWlkW2ldCiAgICAgIH0pOwogICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpOwogICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKSBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCBfcmVmMiA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBib2R5LAogICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgY29udGFjdAogICAgICAgIH0gPSBfcmVmMjsKICAgICAgICBpZiAoIWJvZHkudXVpZCB8fCAhdGFyZ2V0LnV1aWQpIHJldHVybjsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBuaSwKICAgICAgICAgIHJpLAogICAgICAgICAgcmosCiAgICAgICAgICBiaSwKICAgICAgICAgIGJqLAogICAgICAgICAgaWQKICAgICAgICB9ID0gY29udGFjdDsKICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBiaS5wb3NpdGlvbi52YWRkKHJpKTsKICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKTsKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGJvZHk6IGJvZHkudXVpZCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlcnM6IHsKICAgICAgICAgICAgYm9keUZpbHRlckdyb3VwOiBib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJHcm91cDogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJNYXNrOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyTWFzawogICAgICAgICAgfSwKICAgICAgICAgIGNvbnRhY3Q6IHsKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1c2UgaWQgaW5zdGVhZCBvZiB1dWlkCiAgICAgICAgICAgIGJpOiBiaS51dWlkLAogICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IHVzZSBpZCBpbnN0ZWFkIG9mIHV1aWQKICAgICAgICAgICAgYmo6IGJqLnV1aWQsCiAgICAgICAgICAgIC8vIE5vcm1hbCBvZiB0aGUgY29udGFjdCwgcmVsYXRpdmUgdG8gdGhlIGNvbGxpZGluZyBib2R5CiAgICAgICAgICAgIGNvbnRhY3ROb3JtYWw6IGNvbnRhY3ROb3JtYWwudG9BcnJheSgpLAogICAgICAgICAgICAvLyBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY29udGFjdAogICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksCiAgICAgICAgICAgIGlkLAogICAgICAgICAgICBpbXBhY3RWZWxvY2l0eTogY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCksCiAgICAgICAgICAgIG5pOiBuaS50b0FycmF5KCksCiAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksCiAgICAgICAgICAgIHJqOiByai50b0FycmF5KCkKICAgICAgICAgIH0sCiAgICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsCiAgICAgICAgICB0eXBlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH07CgogIGNvbnN0IHRyaXBsZXRUb1ZlYzMgPSB0ID0+IHQgPyBuZXcgVmVjMyguLi50KSA6IHVuZGVmaW5lZDsKCiAgY29uc3QgYWRkQ29uc3RyYWludCA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBhbmdsZSwKICAgICAgICBheGlzQSwKICAgICAgICBheGlzQiwKICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgIGRpc3RhbmNlLAogICAgICAgIG1heEZvcmNlLAogICAgICAgIG1heE11bHRpcGxpZXIsCiAgICAgICAgcGl2b3RBLAogICAgICAgIHBpdm90QiwKICAgICAgICB0d2lzdEFuZ2xlLAogICAgICAgIHdha2VVcEJvZGllcwogICAgICB9XSwKICAgICAgdHlwZSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBsZXQgY29uc3RyYWludDsKCiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgdHJpcGxldFRvVmVjMyhwaXZvdEEpLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB0cmlwbGV0VG9WZWMzKHBpdm90QiksIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0NvbmVUd2lzdCc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25lVHdpc3RDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGFuZ2xlLAogICAgICAgICAgYXhpc0E6IHRyaXBsZXRUb1ZlYzMoYXhpc0EpLAogICAgICAgICAgYXhpc0I6IHRyaXBsZXRUb1ZlYzMoYXhpc0IpLAogICAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICAgIG1heEZvcmNlLAogICAgICAgICAgcGl2b3RBOiB0cmlwbGV0VG9WZWMzKHBpdm90QSksCiAgICAgICAgICBwaXZvdEI6IHRyaXBsZXRUb1ZlYzMocGl2b3RCKSwKICAgICAgICAgIHR3aXN0QW5nbGUKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0hpbmdlJzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IEhpbmdlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBheGlzQTogdHJpcGxldFRvVmVjMyhheGlzQSksCiAgICAgICAgICBheGlzQjogdHJpcGxldFRvVmVjMyhheGlzQiksCiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgbWF4Rm9yY2UsCiAgICAgICAgICBwaXZvdEE6IHRyaXBsZXRUb1ZlYzMocGl2b3RBKSwKICAgICAgICAgIHBpdm90QjogdHJpcGxldFRvVmVjMyhwaXZvdEIpCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgZGlzdGFuY2UsIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0xvY2snOgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgTG9ja0NvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgbWF4Rm9yY2UKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQsCiAgICAgICAgICB3YWtlVXBCb2RpZXMKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgIH0KCiAgICBjb25zdHJhaW50LnV1aWQgPSB1dWlkOwogICAgc3RhdGUud29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KTsKCiAgICBpZiAobWF4TXVsdGlwbGllciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGNvbnN0IHBvc3RTdGVwQ29uc3RyYWludCA9ICgpID0+IHsKICAgICAgICAvLyBUaGUgbXVsdGlwbGllciBpcyBwcm9wb3J0aW9uYWwgdG8gaG93IG11Y2ggZm9yY2UgaXMgYWRkZWQgdG8gdGhlIGJvZGllcyBieSB0aGUgY29uc3RyYWludC4KICAgICAgICAvLyBJZiB0aGlzIGV4Y2VlZHMgYSBsaW1pdCB0aGUgY29uc3RyYWludCBpcyBkaXNhYmxlZC4KICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gTWF0aC5hYnMoY29uc3RyYWludC5lcXVhdGlvbnNbMF0ubXVsdGlwbGllcik7CgogICAgICAgIGlmIChtdWx0aXBsaWVyID4gbWF4TXVsdGlwbGllcikgewogICAgICAgICAgY29uc3RyYWludC5kaXNhYmxlKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgc3RhdGUuY29uc3RyYWludHNbdXVpZF0gPSBwb3N0U3RlcENvbnN0cmFpbnQ7CiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbdXVpZF0pOwogICAgfQogIH07CgogIGZ1bmN0aW9uIHRvVXBwZXJjYXNlKHN0cikgewogICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpOwogIH0KCiAgY29uc3QgYWRkUmF5ID0gKHN0YXRlLCBfcmVmKSA9PiB7CiAgICBsZXQgewogICAgICBwcm9wczogewogICAgICAgIGZyb20sCiAgICAgICAgbW9kZSwKICAgICAgICB0bywKICAgICAgICAuLi5yYXlPcHRpb25zCiAgICAgIH0sCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgY29uc3QgcmF5ID0gbmV3IFJheSh0cmlwbGV0VG9WZWMzKGZyb20pLCB0cmlwbGV0VG9WZWMzKHRvKSk7CiAgICBjb25zdCBvcHRpb25zID0gewogICAgICBtb2RlOiBSQVlfTU9ERVNbdG9VcHBlcmNhc2UobW9kZSldLAogICAgICByZXN1bHQ6IG5ldyBSYXljYXN0UmVzdWx0KCksCiAgICAgIC4uLnJheU9wdGlvbnMKICAgIH07CgogICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHsKICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKTsKICAgICAgaWYgKCFvcHRpb25zLnJlc3VsdCB8fCAhb3B0aW9ucy5yZXN1bHQuYm9keSkgcmV0dXJuOwogICAgICBjb25zdCB7CiAgICAgICAgYm9keSwKICAgICAgICBzaGFwZSwKICAgICAgICByYXlGcm9tV29ybGQsCiAgICAgICAgcmF5VG9Xb3JsZCwKICAgICAgICBoaXROb3JtYWxXb3JsZCwKICAgICAgICBoaXRQb2ludFdvcmxkLAogICAgICAgIC4uLnJlc3QKICAgICAgfSA9IG9wdGlvbnMucmVzdWx0OwogICAgICBjb25zdCBib2R5VVVJRCA9IGJvZHkudXVpZDsKICAgICAgaWYgKCFib2R5VVVJRCkgcmV0dXJuOwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBib2R5OiBib2R5VVVJRCwKICAgICAgICBoaXROb3JtYWxXb3JsZDogaGl0Tm9ybWFsV29ybGQudG9BcnJheSgpLAogICAgICAgIGhpdFBvaW50V29ybGQ6IGhpdFBvaW50V29ybGQudG9BcnJheSgpLAogICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgIHJheTogewogICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IHJheS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IHJheS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSwKICAgICAgICAgIGZyb20sCiAgICAgICAgICB0bywKICAgICAgICAgIHV1aWQKICAgICAgICB9LAogICAgICAgIHJheUZyb21Xb3JsZDogcmF5RnJvbVdvcmxkLnRvQXJyYXkoKSwKICAgICAgICByYXlUb1dvcmxkOiByYXlUb1dvcmxkLnRvQXJyYXkoKSwKICAgICAgICBzaGFwZTogc2hhcGUgPyB7IC4uLnNoYXBlLAogICAgICAgICAgYm9keTogYm9keVVVSUQKICAgICAgICB9IDogbnVsbCwKICAgICAgICB0eXBlOiAncmF5aGl0JywKICAgICAgICAuLi5yZXN0CiAgICAgIH0pOwogICAgfTsKCiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1t1dWlkXSk7CiAgfTsKCiAgY29uc3QgYWRkUmF5Y2FzdFZlaGljbGUgPSAoc3RhdGUsIGRhdGEpID0+IHsKICAgIGNvbnN0IFtjaGFzc2lzQm9keSwgd2hlZWxzLCB3aGVlbEluZm9zLCBpbmRleEZvcndhcmRBeGlzLCBpbmRleFJpZ2h0QXhpcywgaW5kZXhVcEF4aXNdID0gZGF0YS5wcm9wczsKICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgUmF5Y2FzdFZlaGljbGUoewogICAgICBjaGFzc2lzQm9keTogc3RhdGUuYm9kaWVzW2NoYXNzaXNCb2R5XSwKICAgICAgaW5kZXhGb3J3YXJkQXhpcywKICAgICAgaW5kZXhSaWdodEF4aXMsCiAgICAgIGluZGV4VXBBeGlzCiAgICB9KTsKICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgewogICAgICAgIGF4bGVMb2NhbCwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsCiAgICAgICAgZGlyZWN0aW9uTG9jYWwsCiAgICAgICAgLi4ucmVzdAogICAgICB9ID0gd2hlZWxJbmZvc1tpXTsKICAgICAgdmVoaWNsZS5hZGRXaGVlbCh7CiAgICAgICAgYXhsZUxvY2FsOiB0cmlwbGV0VG9WZWMzKGF4bGVMb2NhbCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsOiB0cmlwbGV0VG9WZWMzKGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IHRyaXBsZXRUb1ZlYzMoZGlyZWN0aW9uTG9jYWwpLAogICAgICAgIC4uLnJlc3QKICAgICAgfSk7CiAgICB9CgogICAgY29uc3QgcHJlU3RlcCA9ICgpID0+IHsKICAgICAgdmVoaWNsZS51cGRhdGVWZWhpY2xlKHN0YXRlLndvcmxkLmR0KTsKICAgIH07CgogICAgY29uc3QgcG9zdFN0ZXAgPSAoKSA9PiB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVoaWNsZS53aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmVoaWNsZS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTsKICAgICAgICBjb25zdCB0ID0gdmVoaWNsZS53aGVlbEluZm9zW2ldLndvcmxkVHJhbnNmb3JtOwogICAgICAgIGNvbnN0IHdoZWVsQm9keSA9IHN0YXRlLmJvZGllc1t3aGVlbHNbaV1dOwogICAgICAgIHdoZWVsQm9keS5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pOwogICAgICAgIHdoZWVsQm9keS5xdWF0ZXJuaW9uLmNvcHkodC5xdWF0ZXJuaW9uKTsKICAgICAgfQogICAgfTsKCiAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdID0gewogICAgICBwb3N0U3RlcCwKICAgICAgcHJlU3RlcCwKICAgICAgdmVoaWNsZQogICAgfTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBwcmVTdGVwKTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgcG9zdFN0ZXApOwogIH07CgogIGNvbnN0IGFkZFNwcmluZyA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBkYW1waW5nLAogICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICBsb2NhbEFuY2hvckIsCiAgICAgICAgcmVzdExlbmd0aCwKICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgIHdvcmxkQW5jaG9yQgogICAgICB9XSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgZGFtcGluZywKICAgICAgbG9jYWxBbmNob3JBOiB0cmlwbGV0VG9WZWMzKGxvY2FsQW5jaG9yQSksCiAgICAgIGxvY2FsQW5jaG9yQjogdHJpcGxldFRvVmVjMyhsb2NhbEFuY2hvckIpLAogICAgICByZXN0TGVuZ3RoLAogICAgICBzdGlmZm5lc3MsCiAgICAgIHdvcmxkQW5jaG9yQTogdHJpcGxldFRvVmVjMyh3b3JsZEFuY2hvckEpLAogICAgICB3b3JsZEFuY2hvckI6IHRyaXBsZXRUb1ZlYzMod29ybGRBbmNob3JCKQogICAgfSk7CiAgICBzcHJpbmcudXVpZCA9IHV1aWQ7CgogICAgY29uc3QgcG9zdFN0ZXBTcHJpbmcgPSAoKSA9PiBzcHJpbmcuYXBwbHlGb3JjZSgpOwoKICAgIHN0YXRlLnNwcmluZ3NbdXVpZF0gPSBwb3N0U3RlcFNwcmluZzsKICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZzsgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCgogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKTsKICB9OwoKICBmdW5jdGlvbiBlbWl0QmVnaW5Db250YWN0KF9yZWYpIHsKICAgIGxldCB7CiAgICAgIGJvZHlBLAogICAgICBib2R5QgogICAgfSA9IF9yZWY7CiAgICBpZiAoIShib2R5QSAhPSBudWxsICYmIGJvZHlBLnV1aWQpIHx8ICEoYm9keUIgIT0gbnVsbCAmJiBib2R5Qi51dWlkKSkgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGJvZHlBOiBib2R5QS51dWlkLAogICAgICBib2R5QjogYm9keUIudXVpZCwKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlQmVnaW4nCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KF9yZWYyKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmMjsKICAgIGlmICghKGJvZHlBICE9IG51bGwgJiYgYm9keUEudXVpZCkgfHwgIShib2R5QiAhPSBudWxsICYmIGJvZHlCLnV1aWQpKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkLAogICAgICBvcDogJ2V2ZW50JywKICAgICAgdHlwZTogJ2NvbGxpZGVFbmQnCiAgICB9KTsKICB9CgogIGNvbnN0IGluaXQgPSAod29ybGQsIF9yZWYzKSA9PiB7CiAgICBsZXQgewogICAgICBhbGxvd1NsZWVwLAogICAgICBheGlzSW5kZXggPSAwLAogICAgICBicm9hZHBoYXNlLAogICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICBmcmljdGlvbkdyYXZpdHksCiAgICAgIGdyYXZpdHksCiAgICAgIGl0ZXJhdGlvbnMsCiAgICAgIHF1YXROb3JtYWxpemVGYXN0LAogICAgICBxdWF0Tm9ybWFsaXplU2tpcCwKICAgICAgc29sdmVyLAogICAgICB0b2xlcmFuY2UKICAgIH0gPSBfcmVmMzsKICAgIHdvcmxkLmFsbG93U2xlZXAgPSBhbGxvd1NsZWVwOwogICAgd29ybGQuZ3Jhdml0eS5zZXQoLi4uZ3Jhdml0eSk7CiAgICB3b3JsZC5mcmljdGlvbkdyYXZpdHkgPSBmcmljdGlvbkdyYXZpdHkgPyBuZXcgVmVjMyguLi5mcmljdGlvbkdyYXZpdHkpIDogdW5kZWZpbmVkOwogICAgd29ybGQucXVhdE5vcm1hbGl6ZUZhc3QgPSBxdWF0Tm9ybWFsaXplRmFzdDsKICAgIHdvcmxkLnF1YXROb3JtYWxpemVTa2lwID0gcXVhdE5vcm1hbGl6ZVNraXA7CgogICAgaWYgKHNvbHZlciA9PT0gJ1NwbGl0JykgewogICAgICB3b3JsZC5zb2x2ZXIgPSBuZXcgU3BsaXRTb2x2ZXIobmV3IEdTU29sdmVyKCkpOwogICAgfQoKICAgIGlmICh3b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICB3b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlOwogICAgICB3b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnM7CiAgICB9CgogICAgd29ybGQuYnJvYWRwaGFzZSA9IGJyb2FkcGhhc2UgPT09ICdTQVAnID8gbmV3IFNBUEJyb2FkcGhhc2Uod29ybGQpIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwoKICAgIGlmICh3b3JsZC5icm9hZHBoYXNlIGluc3RhbmNlb2YgU0FQQnJvYWRwaGFzZSkgewogICAgICB3b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleDsKICAgIH0KCiAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KTsKICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnLCBlbWl0RW5kQ29udGFjdCk7CiAgICBPYmplY3QuYXNzaWduKHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpOwogIH07CgogIGNvbnN0IGlzUW9yViA9IHYgPT4gdiBpbnN0YW5jZW9mIFF1YXRlcm5pb24gfHwgdiBpbnN0YW5jZW9mIFZlYzM7CgogIGNvbnN0IHN0ZXAgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHBvc2l0aW9ucywKICAgICAgcHJvcHM6IHsKICAgICAgICBtYXhTdWJTdGVwcywKICAgICAgICBzdGVwU2l6ZSwKICAgICAgICB0aW1lU2luY2VMYXN0Q2FsbGVkCiAgICAgIH0sCiAgICAgIHF1YXRlcm5pb25zCiAgICB9ID0gX3JlZjsKICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RlcFNpemUsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCBwID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLnBvc2l0aW9uOwogICAgICBjb25zdCBxID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLnF1YXRlcm5pb247CiAgICAgIHBvc2l0aW9uc1szICogaSArIDBdID0gcC54OwogICAgICBwb3NpdGlvbnNbMyAqIGkgKyAxXSA9IHAueTsKICAgICAgcG9zaXRpb25zWzMgKiBpICsgMl0gPSBwLno7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMF0gPSBxLng7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMV0gPSBxLnk7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMl0gPSBxLno7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgM10gPSBxLnc7CiAgICB9CgogICAgY29uc3Qgb2JzZXJ2YXRpb25zID0gW107CgogICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKSkgewogICAgICBjb25zdCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF07CiAgICAgIGNvbnN0IHsKICAgICAgICBib2RpZXMsCiAgICAgICAgdmVoaWNsZXMKICAgICAgfSA9IHN0YXRlOwogICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldCA9PT0gJ3ZlaGljbGVzJyA/IC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHZlaGljbGVzW3V1aWRdLnZlaGljbGVbdHlwZV0gOiAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IERpZmZlcmVudGlhdGUgdGhlc2UgInR5cGVzIgogICAgICBib2RpZXNbdXVpZF1bdHlwZV07CiAgICAgIGNvbnN0IHNlcmlhbGl6YWJsZVZhbHVlID0gaXNRb3JWKHZhbHVlKSA/IHZhbHVlLnRvQXJyYXkoKSA6IHZhbHVlOwogICAgICBvYnNlcnZhdGlvbnMucHVzaChbTnVtYmVyKGlkKSwgc2VyaWFsaXphYmxlVmFsdWUsIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHR5cGVdKTsKICAgIH0KCiAgICBjb25zdCBtZXNzYWdlID0gewogICAgICBhY3RpdmU6IHN0YXRlLndvcmxkLmhhc0FjdGl2ZUJvZGllcywKICAgICAgb2JzZXJ2YXRpb25zLAogICAgICBvcDogJ2ZyYW1lJywKICAgICAgcG9zaXRpb25zLAogICAgICBxdWF0ZXJuaW9ucwogICAgfTsKCiAgICBpZiAoc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcpIHsKICAgICAgbWVzc2FnZS5ib2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMucmVkdWNlKChib2RpZXMsIGJvZHkpID0+IHsKICAgICAgICBpZiAoYm9keS51dWlkKSBib2RpZXMucHVzaChib2R5LnV1aWQpOwogICAgICAgIHJldHVybiBib2RpZXM7CiAgICAgIH0sIFtdKTsKICAgICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSBmYWxzZTsKICAgIH0KCiAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFtwb3NpdGlvbnMuYnVmZmVyLCBxdWF0ZXJuaW9ucy5idWZmZXJdKTsKICB9OwoKICBjb25zdCBzdGF0ZSA9IHsKICAgIGJvZGllczoge30sCiAgICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsCiAgICBjb25zdHJhaW50czoge30sCiAgICBtYXRlcmlhbHM6IHt9LAogICAgcmF5czoge30sCiAgICBzcHJpbmdJbnN0YW5jZXM6IHt9LAogICAgc3ByaW5nczoge30sCiAgICBzdWJzY3JpcHRpb25zOiB7fSwKICAgIHZlaGljbGVzOiB7fSwKICAgIHdvcmxkOiBuZXcgV29ybGQoKQogIH07CgogIC8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPSJ0cnVlIi8+CgogIGNvbnN0IGlzSGluZ2VDb25zdHJhaW50ID0gYyA9PiBjIGluc3RhbmNlb2YgSGluZ2VDb25zdHJhaW50OwoKICBmdW5jdGlvbiBzeW5jQm9kaWVzKCkgewogICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSB0cnVlOwogICAgc3RhdGUuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYm9kaWVzLCBib2R5KSA9PiBib2R5LnV1aWQgPyB7IC4uLmJvZGllcywKICAgICAgW2JvZHkudXVpZF06IGJvZHkKICAgIH0gOiBib2RpZXMsIHt9KTsKICB9CgogIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgTmFpdmVCcm9hZHBoYXNlLAogICAgU0FQQnJvYWRwaGFzZQogIH07CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWwgPSBjcmVhdGVNYXRlcmlhbEZhY3Rvcnkoc3RhdGUubWF0ZXJpYWxzKTsKCiAgc2VsZi5vbm1lc3NhZ2UgPSBfcmVmID0+IHsKICAgIGxldCB7CiAgICAgIGRhdGEKICAgIH0gPSBfcmVmOwoKICAgIHN3aXRjaCAoZGF0YS5vcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBpbml0KHN0YXRlLndvcmxkLCBkYXRhLnByb3BzKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3N0ZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0ZXAoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQm9kaWVzJzoKICAgICAgICB7CiAgICAgICAgICBhZGRCb2RpZXMoc3RhdGUsIGNyZWF0ZU1hdGVyaWFsLCBkYXRhKTsKICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZUJvZGllcyc6CiAgICAgICAgewogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbZGF0YS51dWlkW2ldXSk7CiAgICAgICAgICB9CgogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGlkLAogICAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICAgIHR5cGUKICAgICAgICAgIH0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF0gPSBbZGF0YS51dWlkLCB0eXBlLCB0YXJnZXRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgIHsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW2RhdGEucHJvcHNdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UG9zaXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnBvc2l0aW9uLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0sIGRhdGEucHJvcHNbM10pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Um90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VmVsb2NpdHknOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldExpbmVhckZhY3Rvcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubGluZWFyRmFjdG9yLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubWFzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0udXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldE1hdGVyaWFsJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5tYXRlcmlhbCA9IGRhdGEucHJvcHMgPyBjcmVhdGVNYXRlcmlhbChkYXRhLnByb3BzKSA6IG51bGw7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5saW5lYXJEYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbGxvd1NsZWVwJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbGxvd1NsZWVwID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXBTcGVlZExpbWl0ID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwVGltZUxpbWl0JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5zbGVlcFRpbWVMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25GaWx0ZXJHcm91cCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyTWFzayA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25SZXNwb25zZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Rml4ZWRSb3RhdGlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uZml4ZWRSb3RhdGlvbiA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRGcmljdGlvbkdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmZyaWN0aW9uR3Jhdml0eSA9IGRhdGEucHJvcHMgPyBuZXcgVmVjMyguLi5kYXRhLnByb3BzKSA6IHVuZGVmaW5lZDsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldElzVHJpZ2dlcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uaXNUcmlnZ2VyID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VG9sZXJhbmNlJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci50b2xlcmFuY2UgPSBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRJdGVyYXRpb25zJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci5pdGVyYXRpb25zID0gZGF0YS5wcm9wczsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QnJvYWRwaGFzZSc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYCR7ZGF0YS5wcm9wc31Ccm9hZHBoYXNlYF0gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBeGlzSW5kZXgnOgogICAgICAgIGlmIChzdGF0ZS53b3JsZC5icm9hZHBoYXNlIGluc3RhbmNlb2YgU0FQQnJvYWRwaGFzZSkgewogICAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBkYXRhLnByb3BzID09PSB1bmRlZmluZWQgfHwgZGF0YS5wcm9wcyA9PT0gbnVsbCA/IDAgOiBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUZvcmNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUltcHVsc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5SW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlMb2NhbEZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsRm9yY2UobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSksIG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsSW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlUb3JxdWUnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5VG9ycXVlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOgogICAgICAgIHsKICAgICAgICAgIGFkZENvbnN0cmFpbnQoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWYyID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQKICAgICAgICAgIH0gPSBfcmVmMjsKICAgICAgICAgIHJldHVybiB1dWlkID09PSBkYXRhLnV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gc3RhdGUud29ybGQucmVtb3ZlQ29uc3RyYWludChjKSk7CgogICAgICAgIGlmIChzdGF0ZS5jb25zdHJhaW50c1tkYXRhLnV1aWRdKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF0pOwogICAgICAgICAgZGVsZXRlIHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF07CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmVuYWJsZSgpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkubWFwKGMgPT4gYy5kaXNhYmxlKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludE1vdG9yJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLmVuYWJsZU1vdG9yKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5kaXNhYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JTcGVlZCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5zZXRNb3RvclNwZWVkKGRhdGEucHJvcHMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3Rvck1heEZvcmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLnNldE1vdG9yTWF4Rm9yY2UoZGF0YS5wcm9wcykpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYWRkU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBhZGRTcHJpbmcoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nU3RpZmZuZXNzJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5zdGlmZm5lc3MgPSBkYXRhLnByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW2RhdGEudXVpZF0ucmVzdExlbmd0aCA9IGRhdGEucHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRTcHJpbmdEYW1waW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5kYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZVNwcmluZyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW2RhdGEudXVpZF0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkUmF5JzoKICAgICAgICB7CiAgICAgICAgICBhZGRSYXkoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5JzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1tkYXRhLnV1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW2RhdGEudXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXljYXN0VmVoaWNsZSc6CiAgICAgICAgewogICAgICAgICAgYWRkUmF5Y2FzdFZlaGljbGUoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnByZVN0ZXApOwogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnBvc3RTdGVwKTsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS53b3JsZCA9IG51bGw7CiAgICAgICAgICBkZWxldGUgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFJheWNhc3RWZWhpY2xlU3RlZXJpbmdWYWx1ZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhcHBseVJheWNhc3RWZWhpY2xlRW5naW5lRm9yY2UnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS52ZWhpY2xlLmFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVCcmFrZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JyYWtlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICBhZGRDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGNyZWF0ZU1hdGVyaWFsLCBkYXRhLnByb3BzLCBkYXRhLnV1aWQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICByZW1vdmVDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGRhdGEudXVpZCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICd3YWtlVXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLndha2VVcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2xlZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnNsZWVwKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgfTsKCn0pKCk7Cgo=",null,!1);class KY extends VY{get axisIndex(){return this.config.axisIndex}set axisIndex(e){this.config.axisIndex=e,this.postMessage({op:"setAxisIndex",props:e})}get broadphase(){return this.config.broadphase}set broadphase(e){this.config.broadphase=e,this.postMessage({op:"setBroadphase",props:e})}get frictionGravity(){return this.config.frictionGravity}set frictionGravity(e){this.config.frictionGravity=e,this.postMessage({op:"setFrictionGravity",props:e})}get gravity(){return this.config.gravity}set gravity(e){this.config.gravity=e,this.postMessage({op:"setGravity",props:e})}get iterations(){return this.config.iterations}set iterations(e){this.config.iterations=e,this.postMessage({op:"setIterations",props:e})}get tolerance(){return this.config.tolerance}set tolerance(e){this.config.tolerance=e,this.postMessage({op:"setTolerance",props:e})}constructor(e){let{allowSleep:t=!1,axisIndex:n=0,broadphase:l="Naive",defaultContactMaterial:s={contactEquationStiffness:1e6},frictionGravity:o=null,gravity:g=[0,-9.81,0],iterations:r=5,quatNormalizeFast:I=!1,quatNormalizeSkip:C=0,size:u=1e3,solver:d="GS",tolerance:A=.001}=e;super(),this.messageQueue=[],this.worker=null,this.config={allowSleep:t,axisIndex:n,broadphase:l,defaultContactMaterial:s,frictionGravity:o,gravity:g,iterations:r,quatNormalizeFast:I,quatNormalizeSkip:C,size:u,solver:d,tolerance:A},this.buffers={positions:new Float32Array(u*3),quaternions:new Float32Array(u*4)}}addBodies(e){let{props:t,type:n,uuid:l}=e;this.postMessage({op:"addBodies",props:t,type:n,uuid:l})}addConstraint(e){let{props:[t,n,l],type:s,uuid:o}=e;this.postMessage({op:"addConstraint",props:[t,n,l],type:s,uuid:o})}addContactMaterial(e){let{props:t,uuid:n}=e;this.postMessage({op:"addContactMaterial",props:t,uuid:n})}addRay(e){let{props:t,uuid:n}=e;this.postMessage({op:"addRay",props:t,uuid:n})}addRaycastVehicle(e){let{props:[t,n,l,s,o,g],uuid:r}=e;this.postMessage({op:"addRaycastVehicle",props:[t,n,l,s,o,g],uuid:r})}addSpring(e){let{props:[t,n,l],uuid:s}=e;this.postMessage({op:"addSpring",props:[t,n,l],uuid:s})}applyForce(e){let{props:t,uuid:n}=e;this.postMessage({op:"applyForce",props:t,uuid:n})}applyImpulse(e){let{props:t,uuid:n}=e;this.postMessage({op:"applyImpulse",props:t,uuid:n})}applyLocalForce(e){let{props:t,uuid:n}=e;this.postMessage({op:"applyLocalForce",props:t,uuid:n})}applyLocalImpulse(e){let{props:t,uuid:n}=e;this.postMessage({op:"applyLocalImpulse",props:t,uuid:n})}applyRaycastVehicleEngineForce(e){let{props:t,uuid:n}=e;this.postMessage({op:"applyRaycastVehicleEngineForce",props:t,uuid:n})}applyTorque(e){let{props:t,uuid:n}=e;this.postMessage({op:"applyTorque",props:t,uuid:n})}connect(){this.worker=new zY,this.worker.onmessage=e=>{if(e.data.op==="frame"){this.buffers.positions=e.data.positions,this.buffers.quaternions=e.data.quaternions,this.emit(e.data.op,e.data);return}this.emit(e.data.type,e.data)};for(const e of this.messageQueue)this.worker.postMessage(e);this.messageQueue.length=0}disableConstraint(e){let{uuid:t}=e;this.postMessage({op:"disableConstraint",uuid:t})}disableConstraintMotor(e){let{uuid:t}=e;this.postMessage({op:"disableConstraintMotor",uuid:t})}disconnect(){this.worker&&(this.worker.onmessage=null)}enableConstraint(e){let{uuid:t}=e;this.postMessage({op:"enableConstraint",uuid:t})}enableConstraintMotor(e){let{uuid:t}=e;this.postMessage({op:"enableConstraintMotor",uuid:t})}init(){const{allowSleep:e,axisIndex:t,broadphase:n,defaultContactMaterial:l,frictionGravity:s,gravity:o,iterations:g,quatNormalizeFast:r,quatNormalizeSkip:I,solver:C,tolerance:u}=this.config;this.postMessage({op:"init",props:{allowSleep:e,axisIndex:t,broadphase:n,defaultContactMaterial:l,frictionGravity:s,gravity:o,iterations:g,quatNormalizeFast:r,quatNormalizeSkip:I,solver:C,tolerance:u}})}removeBodies(e){let{uuid:t}=e;this.postMessage({op:"removeBodies",uuid:t})}removeConstraint(e){let{uuid:t}=e;this.postMessage({op:"removeConstraint",uuid:t})}removeContactMaterial(e){let{uuid:t}=e;this.postMessage({op:"removeContactMaterial",uuid:t})}removeRay(e){let{uuid:t}=e;this.postMessage({op:"removeRay",uuid:t})}removeRaycastVehicle(e){let{uuid:t}=e;this.postMessage({op:"removeRaycastVehicle",uuid:t})}removeSpring(e){let{uuid:t}=e;this.postMessage({op:"removeSpring",uuid:t})}setAllowSleep(e){let{props:t,uuid:n}=e;this.postMessage({op:"setAllowSleep",props:t,uuid:n})}setAngularDamping(e){let{props:t,uuid:n}=e;this.postMessage({op:"setAngularDamping",props:t,uuid:n})}setAngularFactor(e){let{props:t,uuid:n}=e;this.postMessage({op:"setAngularFactor",props:t,uuid:n})}setAngularVelocity(e){let{props:t,uuid:n}=e;this.postMessage({op:"setAngularVelocity",props:t,uuid:n})}setCollisionFilterGroup(e){let{props:t,uuid:n}=e;this.postMessage({op:"setCollisionFilterGroup",props:t,uuid:n})}setCollisionFilterMask(e){let{props:t,uuid:n}=e;this.postMessage({op:"setCollisionFilterMask",props:t,uuid:n})}setCollisionResponse(e){let{props:t,uuid:n}=e;this.postMessage({op:"setCollisionResponse",props:t,uuid:n})}setConstraintMotorMaxForce(e){let{props:t,uuid:n}=e;this.postMessage({op:"setConstraintMotorMaxForce",props:t,uuid:n})}setConstraintMotorSpeed(e){let{props:t,uuid:n}=e;this.postMessage({op:"setConstraintMotorSpeed",props:t,uuid:n})}setFixedRotation(e){let{props:t,uuid:n}=e;this.postMessage({op:"setFixedRotation",props:t,uuid:n})}setIsTrigger(e){let{props:t,uuid:n}=e;this.postMessage({op:"setIsTrigger",props:t,uuid:n})}setLinearDamping(e){let{props:t,uuid:n}=e;this.postMessage({op:"setLinearDamping",props:t,uuid:n})}setLinearFactor(e){let{props:t,uuid:n}=e;this.postMessage({op:"setLinearFactor",props:t,uuid:n})}setMass(e){let{props:t,uuid:n}=e;this.postMessage({op:"setMass",props:t,uuid:n})}setMaterial(e){let{props:t,uuid:n}=e;this.postMessage({op:"setMaterial",props:t,uuid:n})}setPosition(e){let{props:t,uuid:n}=e;this.postMessage({op:"setPosition",props:t,uuid:n})}setQuaternion(e){let{props:[t,n,l,s],uuid:o}=e;this.postMessage({op:"setQuaternion",props:[t,n,l,s],uuid:o})}setRaycastVehicleBrake(e){let{props:t,uuid:n}=e;this.postMessage({op:"setRaycastVehicleBrake",props:t,uuid:n})}setRaycastVehicleSteeringValue(e){let{props:t,uuid:n}=e;this.postMessage({op:"setRaycastVehicleSteeringValue",props:t,uuid:n})}setRotation(e){let{props:t,uuid:n}=e;this.postMessage({op:"setRotation",props:t,uuid:n})}setSleepSpeedLimit(e){let{props:t,uuid:n}=e;this.postMessage({op:"setSleepSpeedLimit",props:t,uuid:n})}setSleepTimeLimit(e){let{props:t,uuid:n}=e;this.postMessage({op:"setSleepTimeLimit",props:t,uuid:n})}setSpringDamping(e){let{props:t,uuid:n}=e;this.postMessage({op:"setSpringDamping",props:t,uuid:n})}setSpringRestLength(e){let{props:t,uuid:n}=e;this.postMessage({op:"setSpringRestLength",props:t,uuid:n})}setSpringStiffness(e){let{props:t,uuid:n}=e;this.postMessage({op:"setSpringStiffness",props:t,uuid:n})}setUserData(e){let{props:t,uuid:n}=e;this.postMessage({op:"setUserData",props:t,uuid:n})}setVelocity(e){let{props:t,uuid:n}=e;this.postMessage({op:"setVelocity",props:t,uuid:n})}sleep(e){let{uuid:t}=e;this.postMessage({op:"sleep",uuid:t})}step(e){var t;const{buffers:{positions:n,quaternions:l}}=this;!n.byteLength&&!l.byteLength||(t=this.worker)==null||t.postMessage({op:"step",positions:n,props:e,quaternions:l},[n.buffer,l.buffer])}subscribe(e){let{props:{id:t,target:n,type:l},uuid:s}=e;this.postMessage({op:"subscribe",props:{id:t,target:n,type:l},uuid:s})}terminate(){var e;(e=this.worker)==null||e.terminate(),this.worker=null}unsubscribe(e){let{props:t}=e;this.postMessage({op:"unsubscribe",props:t})}wakeUp(e){let{uuid:t}=e;this.postMessage({op:"wakeUp",uuid:t})}postMessage(e){if(this.worker)return this.worker.postMessage(e);this.messageQueue.push(e)}}class Ls{constructor(e){e===void 0&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){e===void 0&&(e=new M);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){t===void 0&&(t=new M);const n=this.elements,l=e.x,s=e.y,o=e.z;return t.x=n[0]*l+n[1]*s+n[2]*o,t.y=n[3]*l+n[4]*s+n[5]*o,t.z=n[6]*l+n[7]*s+n[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){t===void 0&&(t=new Ls);const n=this.elements,l=e.elements,s=t.elements,o=n[0],g=n[1],r=n[2],I=n[3],C=n[4],u=n[5],d=n[6],A=n[7],m=n[8],f=l[0],p=l[1],b=l[2],B=l[3],y=l[4],Z=l[5],q=l[6],W=l[7],S=l[8];return s[0]=o*f+g*B+r*q,s[1]=o*p+g*y+r*W,s[2]=o*b+g*Z+r*S,s[3]=I*f+C*B+u*q,s[4]=I*p+C*y+u*W,s[5]=I*b+C*Z+u*S,s[6]=d*f+A*B+m*q,s[7]=d*p+A*y+m*W,s[8]=d*b+A*Z+m*S,t}scale(e,t){t===void 0&&(t=new Ls);const n=this.elements,l=t.elements;for(let s=0;s!==3;s++)l[3*s+0]=e.x*n[3*s+0],l[3*s+1]=e.y*n[3*s+1],l[3*s+2]=e.z*n[3*s+2];return t}solve(e,t){t===void 0&&(t=new M);const n=3,l=4,s=[];let o,g;for(o=0;o<n*l;o++)s.push(0);for(o=0;o<3;o++)for(g=0;g<3;g++)s[o+l*g]=this.elements[o+3*g];s[3+4*0]=e.x,s[3+4*1]=e.y,s[3+4*2]=e.z;let r=3;const I=r;let C;const u=4;let d;do{if(o=I-r,s[o+l*o]===0){for(g=o+1;g<I;g++)if(s[o+l*g]!==0){C=u;do d=u-C,s[d+l*o]+=s[d+l*g];while(--C);break}}if(s[o+l*o]!==0)for(g=o+1;g<I;g++){const A=s[o+l*g]/s[o+l*o];C=u;do d=u-C,s[d+l*g]=d<=o?0:s[d+l*g]-s[d+l*o]*A;while(--C)}}while(--r);if(t.z=s[2*l+3]/s[2*l+2],t.y=(s[1*l+3]-s[1*l+2]*t.z)/s[1*l+1],t.x=(s[0*l+3]-s[0*l+2]*t.z-s[0*l+1]*t.y)/s[0*l+0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,n){if(n===void 0)return this.elements[t+3*e];this.elements[t+3*e]=n}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";const t=",";for(let n=0;n<9;n++)e+=this.elements[n]+t;return e}reverse(e){e===void 0&&(e=new Ls);const t=3,n=6,l=HY;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)l[s+n*o]=this.elements[s+3*o];l[3+6*0]=1,l[3+6*1]=0,l[3+6*2]=0,l[4+6*0]=0,l[4+6*1]=1,l[4+6*2]=0,l[5+6*0]=0,l[5+6*1]=0,l[5+6*2]=1;let g=3;const r=g;let I;const C=n;let u;do{if(s=r-g,l[s+n*s]===0){for(o=s+1;o<r;o++)if(l[s+n*o]!==0){I=C;do u=C-I,l[u+n*s]+=l[u+n*o];while(--I);break}}if(l[s+n*s]!==0)for(o=s+1;o<r;o++){const d=l[s+n*o]/l[s+n*s];I=C;do u=C-I,l[u+n*o]=u<=s?0:l[u+n*o]-l[u+n*s]*d;while(--I)}}while(--g);s=2;do{o=s-1;do{const d=l[s+n*o]/l[s+n*s];I=n;do u=n-I,l[u+n*o]=l[u+n*o]-l[u+n*s]*d;while(--I)}while(o--)}while(--s);s=2;do{const d=1/l[s+n*s];I=n;do u=n-I,l[u+n*s]=l[u+n*s]*d;while(--I)}while(s--);s=2;do{o=2;do{if(u=l[t+o+n*s],isNaN(u)||u===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,u)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,n=e.y,l=e.z,s=e.w,o=t+t,g=n+n,r=l+l,I=t*o,C=t*g,u=t*r,d=n*g,A=n*r,m=l*r,f=s*o,p=s*g,b=s*r,B=this.elements;return B[3*0+0]=1-(d+m),B[3*0+1]=C-b,B[3*0+2]=u+p,B[3*1+0]=C+b,B[3*1+1]=1-(I+m),B[3*1+2]=A-f,B[3*2+0]=u-p,B[3*2+1]=A+f,B[3*2+2]=1-(I+d),this}transpose(e){e===void 0&&(e=new Ls);const t=this.elements,n=e.elements;let l;return n[0]=t[0],n[4]=t[4],n[8]=t[8],l=t[1],n[1]=t[3],n[3]=l,l=t[2],n[2]=t[6],n[6]=l,l=t[5],n[5]=t[7],n[7]=l,e}}const HY=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class M{constructor(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.z=n}cross(e,t){t===void 0&&(t=new M);const n=e.x,l=e.y,s=e.z,o=this.x,g=this.y,r=this.z;return t.x=g*s-r*l,t.y=r*n-o*s,t.z=o*l-g*n,t}set(e,t,n){return this.x=e,this.y=t,this.z=n,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(t)t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z;else return new M(this.x+e.x,this.y+e.y,this.z+e.z)}vsub(e,t){if(t)t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z;else return new M(this.x-e.x,this.y-e.y,this.z-e.z)}crossmat(){return new Ls([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,n=this.z,l=Math.sqrt(e*e+t*t+n*n);if(l>0){const s=1/l;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return l}unit(e){e===void 0&&(e=new M);const t=this.x,n=this.y,l=this.z;let s=Math.sqrt(t*t+n*n+l*l);return s>0?(s=1/s,e.x=t*s,e.y=n*s,e.z=l*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,n=this.y,l=this.z,s=e.x,o=e.y,g=e.z;return Math.sqrt((s-t)*(s-t)+(o-n)*(o-n)+(g-l)*(g-l))}distanceSquared(e){const t=this.x,n=this.y,l=this.z,s=e.x,o=e.y,g=e.z;return(s-t)*(s-t)+(o-n)*(o-n)+(g-l)*(g-l)}scale(e,t){t===void 0&&(t=new M);const n=this.x,l=this.y,s=this.z;return t.x=e*n,t.y=e*l,t.z=e*s,t}vmul(e,t){return t===void 0&&(t=new M),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,n){return n===void 0&&(n=new M),n.x=this.x+e*t.x,n.y=this.y+e*t.y,n.z=this.z+e*t.z,n}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(e){return e===void 0&&(e=new M),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const n=this.length();if(n>0){const l=NY,s=1/n;l.set(this.x*s,this.y*s,this.z*s);const o=MY;Math.abs(l.x)<.9?(o.set(1,0,0),l.cross(o,e)):(o.set(0,1,0),l.cross(o,e)),l.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,n){const l=this.x,s=this.y,o=this.z;n.x=l+(e.x-l)*t,n.y=s+(e.y-s)*t,n.z=o+(e.z-o)*t}almostEquals(e,t){return t===void 0&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return e===void 0&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(Ap),Ap.almostEquals(e,t)}clone(){return new M(this.x,this.y,this.z)}}M.ZERO=new M(0,0,0);M.UNIT_X=new M(1,0,0);M.UNIT_Y=new M(0,1,0);M.UNIT_Z=new M(0,0,1);const NY=new M,MY=new M,Ap=new M;class yl{constructor(e){e===void 0&&(e={}),this.lowerBound=new M,this.upperBound=new M,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,n,l){const s=this.lowerBound,o=this.upperBound,g=n;s.copy(e[0]),g&&g.vmult(s,s),o.copy(s);for(let r=1;r<e.length;r++){let I=e[r];g&&(g.vmult(I,hp),I=hp),I.x>o.x&&(o.x=I.x),I.x<s.x&&(s.x=I.x),I.y>o.y&&(o.y=I.y),I.y<s.y&&(s.y=I.y),I.z>o.z&&(o.z=I.z),I.z<s.z&&(s.z=I.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),l&&(s.x-=l,s.y-=l,s.z-=l,o.x+=l,o.y+=l,o.z+=l),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return new yl().copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,n=this.upperBound,l=e.lowerBound,s=e.upperBound,o=l.x<=n.x&&n.x<=s.x||t.x<=s.x&&s.x<=n.x,g=l.y<=n.y&&n.y<=s.y||t.y<=s.y&&s.y<=n.y,r=l.z<=n.z&&n.z<=s.z||t.z<=s.z&&s.z<=n.z;return o&&g&&r}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,n=this.upperBound,l=e.lowerBound,s=e.upperBound;return t.x<=l.x&&n.x>=s.x&&t.y<=l.y&&n.y>=s.y&&t.z<=l.z&&n.z>=s.z}getCorners(e,t,n,l,s,o,g,r){const I=this.lowerBound,C=this.upperBound;e.copy(I),t.set(C.x,I.y,I.z),n.set(C.x,C.y,I.z),l.set(I.x,C.y,C.z),s.set(C.x,I.y,C.z),o.set(I.x,C.y,I.z),g.set(I.x,I.y,C.z),r.copy(C)}toLocalFrame(e,t){const n=mp,l=n[0],s=n[1],o=n[2],g=n[3],r=n[4],I=n[5],C=n[6],u=n[7];this.getCorners(l,s,o,g,r,I,C,u);for(let d=0;d!==8;d++){const A=n[d];e.pointToLocal(A,A)}return t.setFromPoints(n)}toWorldFrame(e,t){const n=mp,l=n[0],s=n[1],o=n[2],g=n[3],r=n[4],I=n[5],C=n[6],u=n[7];this.getCorners(l,s,o,g,r,I,C,u);for(let d=0;d!==8;d++){const A=n[d];e.pointToWorld(A,A)}return t.setFromPoints(n)}overlapsRay(e){const{direction:t,from:n}=e,l=1/t.x,s=1/t.y,o=1/t.z,g=(this.lowerBound.x-n.x)*l,r=(this.upperBound.x-n.x)*l,I=(this.lowerBound.y-n.y)*s,C=(this.upperBound.y-n.y)*s,u=(this.lowerBound.z-n.z)*o,d=(this.upperBound.z-n.z)*o,A=Math.max(Math.max(Math.min(g,r),Math.min(I,C)),Math.min(u,d)),m=Math.min(Math.min(Math.max(g,r),Math.max(I,C)),Math.max(u,d));return!(m<0||A>m)}}const hp=new M,mp=[new M,new M,new M,new M,new M,new M,new M,new M];class Ii{constructor(e,t,n,l){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),l===void 0&&(l=1),this.x=e,this.y=t,this.z=n,this.w=l}set(e,t,n,l){return this.x=e,this.y=t,this.z=n,this.w=l,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const n=Math.sin(t*.5);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(t*.5),this}toAxisAngle(e){e===void 0&&(e=new M),this.normalize();const t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const n=FY,l=LY;e.tangents(n,l),this.setFromAxisAngle(n,Math.PI)}else{const n=e.cross(t);this.x=n.x,this.y=n.y,this.z=n.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){t===void 0&&(t=new Ii);const n=this.x,l=this.y,s=this.z,o=this.w,g=e.x,r=e.y,I=e.z,C=e.w;return t.x=n*C+o*g+l*I-s*r,t.y=l*C+o*r+s*g-n*I,t.z=s*C+o*I+n*r-l*g,t.w=o*C-n*g-l*r-s*I,t}inverse(e){e===void 0&&(e=new Ii);const t=this.x,n=this.y,l=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+n*n+l*l+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return e===void 0&&(e=new Ii),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){t===void 0&&(t=new M);const n=e.x,l=e.y,s=e.z,o=this.x,g=this.y,r=this.z,I=this.w,C=I*n+g*s-r*l,u=I*l+r*n-o*s,d=I*s+o*l-g*n,A=-o*n-g*l-r*s;return t.x=C*I+A*-o+u*-r-d*-g,t.y=u*I+A*-g+d*-o-C*-r,t.z=d*I+A*-r+C*-g-u*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){t===void 0&&(t="YZX");let n,l,s;const o=this.x,g=this.y,r=this.z,I=this.w;switch(t){case"YZX":const C=o*g+r*I;if(C>.499&&(n=2*Math.atan2(o,I),l=Math.PI/2,s=0),C<-.499&&(n=-2*Math.atan2(o,I),l=-Math.PI/2,s=0),n===void 0){const u=o*o,d=g*g,A=r*r;n=Math.atan2(2*g*I-2*o*r,1-2*d-2*A),l=Math.asin(2*C),s=Math.atan2(2*o*I-2*g*r,1-2*u-2*A)}break;default:throw new Error(`Euler order ${t} not supported yet.`)}e.y=n,e.z=l,e.x=s}setFromEuler(e,t,n,l){l===void 0&&(l="XYZ");const s=Math.cos(e/2),o=Math.cos(t/2),g=Math.cos(n/2),r=Math.sin(e/2),I=Math.sin(t/2),C=Math.sin(n/2);return l==="XYZ"?(this.x=r*o*g+s*I*C,this.y=s*I*g-r*o*C,this.z=s*o*C+r*I*g,this.w=s*o*g-r*I*C):l==="YXZ"?(this.x=r*o*g+s*I*C,this.y=s*I*g-r*o*C,this.z=s*o*C-r*I*g,this.w=s*o*g+r*I*C):l==="ZXY"?(this.x=r*o*g-s*I*C,this.y=s*I*g+r*o*C,this.z=s*o*C+r*I*g,this.w=s*o*g-r*I*C):l==="ZYX"?(this.x=r*o*g-s*I*C,this.y=s*I*g+r*o*C,this.z=s*o*C-r*I*g,this.w=s*o*g+r*I*C):l==="YZX"?(this.x=r*o*g+s*I*C,this.y=s*I*g+r*o*C,this.z=s*o*C-r*I*g,this.w=s*o*g-r*I*C):l==="XZY"&&(this.x=r*o*g-s*I*C,this.y=s*I*g-r*o*C,this.z=s*o*C+r*I*g,this.w=s*o*g+r*I*C),this}clone(){return new Ii(this.x,this.y,this.z,this.w)}slerp(e,t,n){n===void 0&&(n=new Ii);const l=this.x,s=this.y,o=this.z,g=this.w;let r=e.x,I=e.y,C=e.z,u=e.w,d,A,m,f,p;return A=l*r+s*I+o*C+g*u,A<0&&(A=-A,r=-r,I=-I,C=-C,u=-u),1-A>1e-6?(d=Math.acos(A),m=Math.sin(d),f=Math.sin((1-t)*d)/m,p=Math.sin(t*d)/m):(f=1-t,p=t),n.x=f*l+p*r,n.y=f*s+p*I,n.z=f*o+p*C,n.w=f*g+p*u,n}integrate(e,t,n,l){l===void 0&&(l=new Ii);const s=e.x*n.x,o=e.y*n.y,g=e.z*n.z,r=this.x,I=this.y,C=this.z,u=this.w,d=t*.5;return l.x+=d*(s*u+o*C-g*I),l.y+=d*(o*u+g*r-s*C),l.z+=d*(g*u+s*I-o*r),l.w+=d*(-s*r-o*I-g*C),l}}const FY=new M,LY=new M,_Y={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class Ue{constructor(e){e===void 0&&(e={}),this.id=Ue.idCounter++,this.type=e.type||0,this.boundingSphereRadius=0,this.collisionResponse=e.collisionResponse?e.collisionResponse:!0,this.collisionFilterGroup=e.collisionFilterGroup!==void 0?e.collisionFilterGroup:1,this.collisionFilterMask=e.collisionFilterMask!==void 0?e.collisionFilterMask:-1,this.material=e.material?e.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(e,t){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(e,t,n,l){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}Ue.idCounter=0;Ue.types=_Y;class vi{constructor(e){e===void 0&&(e={}),this.position=new M,this.quaternion=new Ii,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return vi.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return vi.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return t===void 0&&(t=new M),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,n,l){return l===void 0&&(l=new M),n.vsub(e,l),t.conjugate(pp),pp.vmult(l,l),l}static pointToWorldFrame(e,t,n,l){return l===void 0&&(l=new M),t.vmult(n,l),l.vadd(e,l),l}static vectorToWorldFrame(e,t,n){return n===void 0&&(n=new M),e.vmult(t,n),n}static vectorToLocalFrame(e,t,n,l){return l===void 0&&(l=new M),t.w*=-1,t.vmult(n,l),t.w*=-1,l}}const pp=new Ii;new M;new M;new M;new M;new M,new M,new M,new M,new M,new M,new M,new M;new M;new Ii;new yl;new Ls;new Ls;new Ls;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new Ii;new M;new M;new M;new M;class Q3{constructor(){this.rayFromWorld=new M,this.rayToWorld=new M,this.hitNormalWorld=new M,this.hitPointWorld=new M,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,n,l,s,o,g){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(l),this.shape=s,this.body=o,this.distance=g}}let qG,wG,WG,SG,VG,RG,XG;const Lh={CLOSEST:1,ANY:2,ALL:4};qG=Ue.types.SPHERE;wG=Ue.types.PLANE;WG=Ue.types.BOX;SG=Ue.types.CYLINDER;VG=Ue.types.CONVEXPOLYHEDRON;RG=Ue.types.HEIGHTFIELD;XG=Ue.types.TRIMESH;class ei{get[qG](){return this._intersectSphere}get[wG](){return this._intersectPlane}get[WG](){return this._intersectBox}get[SG](){return this._intersectConvex}get[VG](){return this._intersectConvex}get[RG](){return this._intersectHeightfield}get[XG](){return this._intersectTrimesh}constructor(e,t){e===void 0&&(e=new M),t===void 0&&(t=new M),this.from=e.clone(),this.to=t.clone(),this.direction=new M,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ei.ANY,this.result=new Q3,this.hasHit=!1,this.callback=n=>{}}intersectWorld(e,t){return this.mode=t.mode||ei.ANY,this.result=t.result||new Q3,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=typeof t.checkCollisionResponse<"u"?t.checkCollisionResponse:!0,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(fp),a5.length=0,e.broadphase.aabbQuery(e,fp,a5),this.intersectBodies(a5),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const n=this.checkCollisionResponse;if(n&&!e.collisionResponse||(this.collisionFilterGroup&e.collisionFilterMask)===0||(e.collisionFilterGroup&this.collisionFilterMask)===0)return;const l=kY,s=TY;for(let o=0,g=e.shapes.length;o<g;o++){const r=e.shapes[o];if(!(n&&!r.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],l),l.vadd(e.position,l),this.intersectShape(r,s,l,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let n=0,l=e.length;!this.result.shouldStop&&n<l;n++)this.intersectBody(e[n])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,n,l){const s=this.from;if(lz(s,this.direction,n)>e.boundingSphereRadius)return;const g=this[e.type];g&&g.call(this,e,t,n,l,e)}_intersectBox(e,t,n,l,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,l,s)}_intersectPlane(e,t,n,l,s){const o=this.from,g=this.to,r=this.direction,I=new M(0,0,1);t.vmult(I,I);const C=new M;o.vsub(n,C);const u=C.dot(I);g.vsub(n,C);const d=C.dot(I);if(u*d>0||o.distanceTo(g)<u)return;const A=I.dot(r);if(Math.abs(A)<this.precision)return;const m=new M,f=new M,p=new M;o.vsub(n,m);const b=-I.dot(m)/A;r.scale(b,f),o.vadd(f,p),this.reportIntersection(I,p,s,l,-1)}getAABB(e){const{lowerBound:t,upperBound:n}=e,l=this.to,s=this.from;t.x=Math.min(l.x,s.x),t.y=Math.min(l.y,s.y),t.z=Math.min(l.z,s.z),n.x=Math.max(l.x,s.x),n.y=Math.max(l.y,s.y),n.z=Math.max(l.z,s.z)}_intersectHeightfield(e,t,n,l,s){e.data,e.elementSize;const o=EY;o.from.copy(this.from),o.to.copy(this.to),vi.pointToLocalFrame(n,t,o.from,o.from),vi.pointToLocalFrame(n,t,o.to,o.to),o.updateDirection();const g=JY;let r,I,C,u;r=I=0,C=u=e.data.length-1;const d=new yl;o.getAABB(d),e.getIndexOfPosition(d.lowerBound.x,d.lowerBound.y,g,!0),r=Math.max(r,g[0]),I=Math.max(I,g[1]),e.getIndexOfPosition(d.upperBound.x,d.upperBound.y,g,!0),C=Math.min(C,g[0]+1),u=Math.min(u,g[1]+1);for(let A=r;A<C;A++)for(let m=I;m<u;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(A,m,d),!!d.overlapsRay(o)){if(e.getConvexTrianglePillar(A,m,!1),vi.pointToWorldFrame(n,t,e.pillarOffset,s0),this._intersectConvex(e.pillarConvex,t,s0,l,s,bp),this.result.shouldStop)return;e.getConvexTrianglePillar(A,m,!0),vi.pointToWorldFrame(n,t,e.pillarOffset,s0),this._intersectConvex(e.pillarConvex,t,s0,l,s,bp)}}}_intersectSphere(e,t,n,l,s){const o=this.from,g=this.to,r=e.radius,I=(g.x-o.x)**2+(g.y-o.y)**2+(g.z-o.z)**2,C=2*((g.x-o.x)*(o.x-n.x)+(g.y-o.y)*(o.y-n.y)+(g.z-o.z)*(o.z-n.z)),u=(o.x-n.x)**2+(o.y-n.y)**2+(o.z-n.z)**2-r**2,d=C**2-4*I*u,A=UY,m=DY;if(!(d<0))if(d===0)o.lerp(g,d,A),A.vsub(n,m),m.normalize(),this.reportIntersection(m,A,s,l,-1);else{const f=(-C-Math.sqrt(d))/(2*I),p=(-C+Math.sqrt(d))/(2*I);if(f>=0&&f<=1&&(o.lerp(g,f,A),A.vsub(n,m),m.normalize(),this.reportIntersection(m,A,s,l,-1)),this.result.shouldStop)return;p>=0&&p<=1&&(o.lerp(g,p,A),A.vsub(n,m),m.normalize(),this.reportIntersection(m,A,s,l,-1))}}_intersectConvex(e,t,n,l,s,o){const g=QY,r=Gp,I=o&&o.faceList||null,C=e.faces,u=e.vertices,d=e.faceNormals,A=this.direction,m=this.from,f=this.to,p=m.distanceTo(f),b=I?I.length:C.length,B=this.result;for(let y=0;!B.shouldStop&&y<b;y++){const Z=I?I[y]:y,q=C[Z],W=d[Z],S=t,x=n;r.copy(u[q[0]]),S.vmult(r,r),r.vadd(x,r),r.vsub(m,r),S.vmult(W,g);const V=A.dot(g);if(Math.abs(V)<this.precision)continue;const X=g.dot(r)/V;if(!(X<0)){A.scale(X,Bi),Bi.vadd(m,Bi),Vl.copy(u[q[0]]),S.vmult(Vl,Vl),x.vadd(Vl,Vl);for(let k=1;!B.shouldStop&&k<q.length-1;k++){is.copy(u[q[k]]),ls.copy(u[q[k+1]]),S.vmult(is,is),S.vmult(ls,ls),x.vadd(is,is),x.vadd(ls,ls);const $=Bi.distanceTo(m);!(ei.pointInTriangle(Bi,Vl,is,ls)||ei.pointInTriangle(Bi,is,Vl,ls))||$>p||this.reportIntersection(g,Bi,s,l,Z)}}}}_intersectTrimesh(e,t,n,l,s,o){const g=PY,r=nz,I=iz,C=Gp,u=OY,d=jY,A=$Y,m=tz,f=ez,p=e.indices;e.vertices;const b=this.from,B=this.to,y=this.direction;I.position.copy(n),I.quaternion.copy(t),vi.vectorToLocalFrame(n,t,y,u),vi.pointToLocalFrame(n,t,b,d),vi.pointToLocalFrame(n,t,B,A),A.x*=e.scale.x,A.y*=e.scale.y,A.z*=e.scale.z,d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,A.vsub(d,u),u.normalize();const Z=d.distanceSquared(A);e.tree.rayQuery(this,I,r);for(let q=0,W=r.length;!this.result.shouldStop&&q!==W;q++){const S=r[q];e.getNormal(S,g),e.getVertex(p[S*3],Vl),Vl.vsub(d,C);const x=u.dot(g),V=g.dot(C)/x;if(V<0)continue;u.scale(V,Bi),Bi.vadd(d,Bi),e.getVertex(p[S*3+1],is),e.getVertex(p[S*3+2],ls);const X=Bi.distanceSquared(d);!(ei.pointInTriangle(Bi,is,Vl,ls)||ei.pointInTriangle(Bi,Vl,is,ls))||X>Z||(vi.vectorToWorldFrame(t,g,f),vi.pointToWorldFrame(n,t,Bi,m),this.reportIntersection(f,m,s,l,S))}r.length=0}reportIntersection(e,t,n,l,s){const o=this.from,g=this.to,r=o.distanceTo(t),I=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(I.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case ei.ALL:this.hasHit=!0,I.set(o,g,e,t,n,l,r),I.hasHit=!0,this.callback(I);break;case ei.CLOSEST:(r<I.distance||!I.hasHit)&&(this.hasHit=!0,I.hasHit=!0,I.set(o,g,e,t,n,l,r));break;case ei.ANY:this.hasHit=!0,I.hasHit=!0,I.set(o,g,e,t,n,l,r),I.shouldStop=!0;break}}static pointInTriangle(e,t,n,l){l.vsub(t,Sg),n.vsub(t,V1),e.vsub(t,I5);const s=Sg.dot(Sg),o=Sg.dot(V1),g=Sg.dot(I5),r=V1.dot(V1),I=V1.dot(I5);let C,u;return(C=r*g-o*I)>=0&&(u=s*I-o*g)>=0&&C+u<s*r-o*o}}ei.CLOSEST=Lh.CLOSEST;ei.ANY=Lh.ANY;ei.ALL=Lh.ALL;const fp=new yl,a5=[],V1=new M,I5=new M,kY=new M,TY=new Ii,Bi=new M,Vl=new M,is=new M,ls=new M;new M;new Q3;const bp={faceList:[0]},s0=new M,EY=new ei,JY=[],UY=new M,DY=new M,QY=new M;new M;new M;const Gp=new M,PY=new M,OY=new M,jY=new M,$Y=new M,ez=new M,tz=new M;new yl;const nz=[],iz=new vi,Sg=new M,o0=new M;function lz(i,e,t){t.vsub(i,Sg);const n=Sg.dot(e);return e.scale(n,o0),o0.vadd(i,o0),t.distanceTo(o0)}new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new ei;new M;new M;new M;new M(1,0,0),new M(0,1,0),new M(0,0,1);new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new yl;new M;new yl;new M;new M;new M;new M;new M;new M;new M;new yl;new M;new vi;new yl;Ue.types.SPHERE,Ue.types.SPHERE|Ue.types.PLANE,Ue.types.BOX|Ue.types.BOX,Ue.types.SPHERE|Ue.types.BOX,Ue.types.PLANE|Ue.types.BOX,Ue.types.CONVEXPOLYHEDRON,Ue.types.SPHERE|Ue.types.CONVEXPOLYHEDRON,Ue.types.PLANE|Ue.types.CONVEXPOLYHEDRON,Ue.types.BOX|Ue.types.CONVEXPOLYHEDRON,Ue.types.SPHERE|Ue.types.HEIGHTFIELD,Ue.types.BOX|Ue.types.HEIGHTFIELD,Ue.types.CONVEXPOLYHEDRON|Ue.types.HEIGHTFIELD,Ue.types.PARTICLE|Ue.types.SPHERE,Ue.types.PLANE|Ue.types.PARTICLE,Ue.types.BOX|Ue.types.PARTICLE,Ue.types.PARTICLE|Ue.types.CONVEXPOLYHEDRON,Ue.types.CYLINDER,Ue.types.SPHERE|Ue.types.CYLINDER,Ue.types.PLANE|Ue.types.CYLINDER,Ue.types.BOX|Ue.types.CYLINDER,Ue.types.CONVEXPOLYHEDRON|Ue.types.CYLINDER,Ue.types.HEIGHTFIELD|Ue.types.CYLINDER,Ue.types.PARTICLE|Ue.types.CYLINDER,Ue.types.SPHERE|Ue.types.TRIMESH,Ue.types.PLANE|Ue.types.TRIMESH;new M;new M;new M;new M;new M;new Ii;new Ii;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new yl;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M,new M,new M,new M,new M,new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new M;new Ii;new M;new M;new M;new M;new M;new M;new M;new M;new M;new yl;new ei;const R1=globalThis.performance||{};if(!R1.now){let i=Date.now();R1.timing&&R1.timing.navigationStart&&(i=R1.timing.navigationStart),R1.now=()=>Date.now()-i}new M;class _s{constructor(e){e===void 0&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){e===void 0&&(e=new F);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){t===void 0&&(t=new F);const n=this.elements,l=e.x,s=e.y,o=e.z;return t.x=n[0]*l+n[1]*s+n[2]*o,t.y=n[3]*l+n[4]*s+n[5]*o,t.z=n[6]*l+n[7]*s+n[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){t===void 0&&(t=new _s);const n=this.elements,l=e.elements,s=t.elements,o=n[0],g=n[1],r=n[2],I=n[3],C=n[4],u=n[5],d=n[6],A=n[7],m=n[8],f=l[0],p=l[1],b=l[2],B=l[3],y=l[4],Z=l[5],q=l[6],W=l[7],S=l[8];return s[0]=o*f+g*B+r*q,s[1]=o*p+g*y+r*W,s[2]=o*b+g*Z+r*S,s[3]=I*f+C*B+u*q,s[4]=I*p+C*y+u*W,s[5]=I*b+C*Z+u*S,s[6]=d*f+A*B+m*q,s[7]=d*p+A*y+m*W,s[8]=d*b+A*Z+m*S,t}scale(e,t){t===void 0&&(t=new _s);const n=this.elements,l=t.elements;for(let s=0;s!==3;s++)l[3*s+0]=e.x*n[3*s+0],l[3*s+1]=e.y*n[3*s+1],l[3*s+2]=e.z*n[3*s+2];return t}solve(e,t){t===void 0&&(t=new F);const n=3,l=4,s=[];let o,g;for(o=0;o<n*l;o++)s.push(0);for(o=0;o<3;o++)for(g=0;g<3;g++)s[o+l*g]=this.elements[o+3*g];s[3+4*0]=e.x,s[3+4*1]=e.y,s[3+4*2]=e.z;let r=3;const I=r;let C;const u=4;let d;do{if(o=I-r,s[o+l*o]===0){for(g=o+1;g<I;g++)if(s[o+l*g]!==0){C=u;do d=u-C,s[d+l*o]+=s[d+l*g];while(--C);break}}if(s[o+l*o]!==0)for(g=o+1;g<I;g++){const A=s[o+l*g]/s[o+l*o];C=u;do d=u-C,s[d+l*g]=d<=o?0:s[d+l*g]-s[d+l*o]*A;while(--C)}}while(--r);if(t.z=s[2*l+3]/s[2*l+2],t.y=(s[1*l+3]-s[1*l+2]*t.z)/s[1*l+1],t.x=(s[0*l+3]-s[0*l+2]*t.z-s[0*l+1]*t.y)/s[0*l+0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,n){if(n===void 0)return this.elements[t+3*e];this.elements[t+3*e]=n}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";const t=",";for(let n=0;n<9;n++)e+=this.elements[n]+t;return e}reverse(e){e===void 0&&(e=new _s);const t=3,n=6,l=sz;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)l[s+n*o]=this.elements[s+3*o];l[3+6*0]=1,l[3+6*1]=0,l[3+6*2]=0,l[4+6*0]=0,l[4+6*1]=1,l[4+6*2]=0,l[5+6*0]=0,l[5+6*1]=0,l[5+6*2]=1;let g=3;const r=g;let I;const C=n;let u;do{if(s=r-g,l[s+n*s]===0){for(o=s+1;o<r;o++)if(l[s+n*o]!==0){I=C;do u=C-I,l[u+n*s]+=l[u+n*o];while(--I);break}}if(l[s+n*s]!==0)for(o=s+1;o<r;o++){const d=l[s+n*o]/l[s+n*s];I=C;do u=C-I,l[u+n*o]=u<=s?0:l[u+n*o]-l[u+n*s]*d;while(--I)}}while(--g);s=2;do{o=s-1;do{const d=l[s+n*o]/l[s+n*s];I=n;do u=n-I,l[u+n*o]=l[u+n*o]-l[u+n*s]*d;while(--I)}while(o--)}while(--s);s=2;do{const d=1/l[s+n*s];I=n;do u=n-I,l[u+n*s]=l[u+n*s]*d;while(--I)}while(s--);s=2;do{o=2;do{if(u=l[t+o+n*s],isNaN(u)||u===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,u)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,n=e.y,l=e.z,s=e.w,o=t+t,g=n+n,r=l+l,I=t*o,C=t*g,u=t*r,d=n*g,A=n*r,m=l*r,f=s*o,p=s*g,b=s*r,B=this.elements;return B[3*0+0]=1-(d+m),B[3*0+1]=C-b,B[3*0+2]=u+p,B[3*1+0]=C+b,B[3*1+1]=1-(I+m),B[3*1+2]=A-f,B[3*2+0]=u-p,B[3*2+1]=A+f,B[3*2+2]=1-(I+d),this}transpose(e){e===void 0&&(e=new _s);const t=this.elements,n=e.elements;let l;return n[0]=t[0],n[4]=t[4],n[8]=t[8],l=t[1],n[1]=t[3],n[3]=l,l=t[2],n[2]=t[6],n[6]=l,l=t[5],n[5]=t[7],n[7]=l,e}}const sz=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class F{constructor(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.z=n}cross(e,t){t===void 0&&(t=new F);const n=e.x,l=e.y,s=e.z,o=this.x,g=this.y,r=this.z;return t.x=g*s-r*l,t.y=r*n-o*s,t.z=o*l-g*n,t}set(e,t,n){return this.x=e,this.y=t,this.z=n,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(t)t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z;else return new F(this.x+e.x,this.y+e.y,this.z+e.z)}vsub(e,t){if(t)t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z;else return new F(this.x-e.x,this.y-e.y,this.z-e.z)}crossmat(){return new _s([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,n=this.z,l=Math.sqrt(e*e+t*t+n*n);if(l>0){const s=1/l;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return l}unit(e){e===void 0&&(e=new F);const t=this.x,n=this.y,l=this.z;let s=Math.sqrt(t*t+n*n+l*l);return s>0?(s=1/s,e.x=t*s,e.y=n*s,e.z=l*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,n=this.y,l=this.z,s=e.x,o=e.y,g=e.z;return Math.sqrt((s-t)*(s-t)+(o-n)*(o-n)+(g-l)*(g-l))}distanceSquared(e){const t=this.x,n=this.y,l=this.z,s=e.x,o=e.y,g=e.z;return(s-t)*(s-t)+(o-n)*(o-n)+(g-l)*(g-l)}scale(e,t){t===void 0&&(t=new F);const n=this.x,l=this.y,s=this.z;return t.x=e*n,t.y=e*l,t.z=e*s,t}vmul(e,t){return t===void 0&&(t=new F),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,n){return n===void 0&&(n=new F),n.x=this.x+e*t.x,n.y=this.y+e*t.y,n.z=this.z+e*t.z,n}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(e){return e===void 0&&(e=new F),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const n=this.length();if(n>0){const l=oz,s=1/n;l.set(this.x*s,this.y*s,this.z*s);const o=gz;Math.abs(l.x)<.9?(o.set(1,0,0),l.cross(o,e)):(o.set(0,1,0),l.cross(o,e)),l.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,n){const l=this.x,s=this.y,o=this.z;n.x=l+(e.x-l)*t,n.y=s+(e.y-s)*t,n.z=o+(e.z-o)*t}almostEquals(e,t){return t===void 0&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return e===void 0&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(yp),yp.almostEquals(e,t)}clone(){return new F(this.x,this.y,this.z)}}F.ZERO=new F(0,0,0);F.UNIT_X=new F(1,0,0);F.UNIT_Y=new F(0,1,0);F.UNIT_Z=new F(0,0,1);const oz=new F,gz=new F,yp=new F;class Bl{constructor(e){e===void 0&&(e={}),this.lowerBound=new F,this.upperBound=new F,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,n,l){const s=this.lowerBound,o=this.upperBound,g=n;s.copy(e[0]),g&&g.vmult(s,s),o.copy(s);for(let r=1;r<e.length;r++){let I=e[r];g&&(g.vmult(I,Bp),I=Bp),I.x>o.x&&(o.x=I.x),I.x<s.x&&(s.x=I.x),I.y>o.y&&(o.y=I.y),I.y<s.y&&(s.y=I.y),I.z>o.z&&(o.z=I.z),I.z<s.z&&(s.z=I.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),l&&(s.x-=l,s.y-=l,s.z-=l,o.x+=l,o.y+=l,o.z+=l),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return new Bl().copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,n=this.upperBound,l=e.lowerBound,s=e.upperBound,o=l.x<=n.x&&n.x<=s.x||t.x<=s.x&&s.x<=n.x,g=l.y<=n.y&&n.y<=s.y||t.y<=s.y&&s.y<=n.y,r=l.z<=n.z&&n.z<=s.z||t.z<=s.z&&s.z<=n.z;return o&&g&&r}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,n=this.upperBound,l=e.lowerBound,s=e.upperBound;return t.x<=l.x&&n.x>=s.x&&t.y<=l.y&&n.y>=s.y&&t.z<=l.z&&n.z>=s.z}getCorners(e,t,n,l,s,o,g,r){const I=this.lowerBound,C=this.upperBound;e.copy(I),t.set(C.x,I.y,I.z),n.set(C.x,C.y,I.z),l.set(I.x,C.y,C.z),s.set(C.x,I.y,C.z),o.set(I.x,C.y,I.z),g.set(I.x,I.y,C.z),r.copy(C)}toLocalFrame(e,t){const n=Zp,l=n[0],s=n[1],o=n[2],g=n[3],r=n[4],I=n[5],C=n[6],u=n[7];this.getCorners(l,s,o,g,r,I,C,u);for(let d=0;d!==8;d++){const A=n[d];e.pointToLocal(A,A)}return t.setFromPoints(n)}toWorldFrame(e,t){const n=Zp,l=n[0],s=n[1],o=n[2],g=n[3],r=n[4],I=n[5],C=n[6],u=n[7];this.getCorners(l,s,o,g,r,I,C,u);for(let d=0;d!==8;d++){const A=n[d];e.pointToWorld(A,A)}return t.setFromPoints(n)}overlapsRay(e){const{direction:t,from:n}=e,l=1/t.x,s=1/t.y,o=1/t.z,g=(this.lowerBound.x-n.x)*l,r=(this.upperBound.x-n.x)*l,I=(this.lowerBound.y-n.y)*s,C=(this.upperBound.y-n.y)*s,u=(this.lowerBound.z-n.z)*o,d=(this.upperBound.z-n.z)*o,A=Math.max(Math.max(Math.min(g,r),Math.min(I,C)),Math.min(u,d)),m=Math.min(Math.min(Math.max(g,r),Math.max(I,C)),Math.max(u,d));return!(m<0||A>m)}}const Bp=new F,Zp=[new F,new F,new F,new F,new F,new F,new F,new F];class ci{constructor(e,t,n,l){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),l===void 0&&(l=1),this.x=e,this.y=t,this.z=n,this.w=l}set(e,t,n,l){return this.x=e,this.y=t,this.z=n,this.w=l,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const n=Math.sin(t*.5);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(t*.5),this}toAxisAngle(e){e===void 0&&(e=new F),this.normalize();const t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const n=rz,l=az;e.tangents(n,l),this.setFromAxisAngle(n,Math.PI)}else{const n=e.cross(t);this.x=n.x,this.y=n.y,this.z=n.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){t===void 0&&(t=new ci);const n=this.x,l=this.y,s=this.z,o=this.w,g=e.x,r=e.y,I=e.z,C=e.w;return t.x=n*C+o*g+l*I-s*r,t.y=l*C+o*r+s*g-n*I,t.z=s*C+o*I+n*r-l*g,t.w=o*C-n*g-l*r-s*I,t}inverse(e){e===void 0&&(e=new ci);const t=this.x,n=this.y,l=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+n*n+l*l+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return e===void 0&&(e=new ci),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){t===void 0&&(t=new F);const n=e.x,l=e.y,s=e.z,o=this.x,g=this.y,r=this.z,I=this.w,C=I*n+g*s-r*l,u=I*l+r*n-o*s,d=I*s+o*l-g*n,A=-o*n-g*l-r*s;return t.x=C*I+A*-o+u*-r-d*-g,t.y=u*I+A*-g+d*-o-C*-r,t.z=d*I+A*-r+C*-g-u*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){t===void 0&&(t="YZX");let n,l,s;const o=this.x,g=this.y,r=this.z,I=this.w;switch(t){case"YZX":const C=o*g+r*I;if(C>.499&&(n=2*Math.atan2(o,I),l=Math.PI/2,s=0),C<-.499&&(n=-2*Math.atan2(o,I),l=-Math.PI/2,s=0),n===void 0){const u=o*o,d=g*g,A=r*r;n=Math.atan2(2*g*I-2*o*r,1-2*d-2*A),l=Math.asin(2*C),s=Math.atan2(2*o*I-2*g*r,1-2*u-2*A)}break;default:throw new Error(`Euler order ${t} not supported yet.`)}e.y=n,e.z=l,e.x=s}setFromEuler(e,t,n,l){l===void 0&&(l="XYZ");const s=Math.cos(e/2),o=Math.cos(t/2),g=Math.cos(n/2),r=Math.sin(e/2),I=Math.sin(t/2),C=Math.sin(n/2);return l==="XYZ"?(this.x=r*o*g+s*I*C,this.y=s*I*g-r*o*C,this.z=s*o*C+r*I*g,this.w=s*o*g-r*I*C):l==="YXZ"?(this.x=r*o*g+s*I*C,this.y=s*I*g-r*o*C,this.z=s*o*C-r*I*g,this.w=s*o*g+r*I*C):l==="ZXY"?(this.x=r*o*g-s*I*C,this.y=s*I*g+r*o*C,this.z=s*o*C+r*I*g,this.w=s*o*g-r*I*C):l==="ZYX"?(this.x=r*o*g-s*I*C,this.y=s*I*g+r*o*C,this.z=s*o*C-r*I*g,this.w=s*o*g+r*I*C):l==="YZX"?(this.x=r*o*g+s*I*C,this.y=s*I*g+r*o*C,this.z=s*o*C-r*I*g,this.w=s*o*g-r*I*C):l==="XZY"&&(this.x=r*o*g-s*I*C,this.y=s*I*g-r*o*C,this.z=s*o*C+r*I*g,this.w=s*o*g+r*I*C),this}clone(){return new ci(this.x,this.y,this.z,this.w)}slerp(e,t,n){n===void 0&&(n=new ci);const l=this.x,s=this.y,o=this.z,g=this.w;let r=e.x,I=e.y,C=e.z,u=e.w,d,A,m,f,p;return A=l*r+s*I+o*C+g*u,A<0&&(A=-A,r=-r,I=-I,C=-C,u=-u),1-A>1e-6?(d=Math.acos(A),m=Math.sin(d),f=Math.sin((1-t)*d)/m,p=Math.sin(t*d)/m):(f=1-t,p=t),n.x=f*l+p*r,n.y=f*s+p*I,n.z=f*o+p*C,n.w=f*g+p*u,n}integrate(e,t,n,l){l===void 0&&(l=new ci);const s=e.x*n.x,o=e.y*n.y,g=e.z*n.z,r=this.x,I=this.y,C=this.z,u=this.w,d=t*.5;return l.x+=d*(s*u+o*C-g*I),l.y+=d*(o*u+g*r-s*C),l.z+=d*(g*u+s*I-o*r),l.w+=d*(-s*r-o*I-g*C),l}}const rz=new F,az=new F,Iz={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class De{constructor(e){e===void 0&&(e={}),this.id=De.idCounter++,this.type=e.type||0,this.boundingSphereRadius=0,this.collisionResponse=e.collisionResponse?e.collisionResponse:!0,this.collisionFilterGroup=e.collisionFilterGroup!==void 0?e.collisionFilterGroup:1,this.collisionFilterMask=e.collisionFilterMask!==void 0?e.collisionFilterMask:-1,this.material=e.material?e.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(e,t){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(e,t,n,l){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}De.idCounter=0;De.types=Iz;class xi{constructor(e){e===void 0&&(e={}),this.position=new F,this.quaternion=new ci,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return xi.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return xi.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return t===void 0&&(t=new F),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,n,l){return l===void 0&&(l=new F),n.vsub(e,l),t.conjugate(vp),vp.vmult(l,l),l}static pointToWorldFrame(e,t,n,l){return l===void 0&&(l=new F),t.vmult(n,l),l.vadd(e,l),l}static vectorToWorldFrame(e,t,n){return n===void 0&&(n=new F),e.vmult(t,n),n}static vectorToLocalFrame(e,t,n,l){return l===void 0&&(l=new F),t.w*=-1,t.vmult(n,l),t.w*=-1,l}}const vp=new ci;new F;new F;new F;new F;new F,new F,new F,new F,new F,new F,new F,new F;new F;new ci;new Bl;new _s;new _s;new _s;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new ci;new F;new F;new F;new F;class P3{constructor(){this.rayFromWorld=new F,this.rayToWorld=new F,this.hitNormalWorld=new F,this.hitPointWorld=new F,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,n,l,s,o,g){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(l),this.shape=s,this.body=o,this.distance=g}}let YG,zG,KG,HG,NG,MG,FG;const _h={CLOSEST:1,ANY:2,ALL:4};YG=De.types.SPHERE;zG=De.types.PLANE;KG=De.types.BOX;HG=De.types.CYLINDER;NG=De.types.CONVEXPOLYHEDRON;MG=De.types.HEIGHTFIELD;FG=De.types.TRIMESH;class ti{get[YG](){return this._intersectSphere}get[zG](){return this._intersectPlane}get[KG](){return this._intersectBox}get[HG](){return this._intersectConvex}get[NG](){return this._intersectConvex}get[MG](){return this._intersectHeightfield}get[FG](){return this._intersectTrimesh}constructor(e,t){e===void 0&&(e=new F),t===void 0&&(t=new F),this.from=e.clone(),this.to=t.clone(),this.direction=new F,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=ti.ANY,this.result=new P3,this.hasHit=!1,this.callback=n=>{}}intersectWorld(e,t){return this.mode=t.mode||ti.ANY,this.result=t.result||new P3,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=typeof t.checkCollisionResponse<"u"?t.checkCollisionResponse:!0,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(xp),c5.length=0,e.broadphase.aabbQuery(e,xp,c5),this.intersectBodies(c5),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const n=this.checkCollisionResponse;if(n&&!e.collisionResponse||(this.collisionFilterGroup&e.collisionFilterMask)===0||(e.collisionFilterGroup&this.collisionFilterMask)===0)return;const l=cz,s=Cz;for(let o=0,g=e.shapes.length;o<g;o++){const r=e.shapes[o];if(!(n&&!r.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],l),l.vadd(e.position,l),this.intersectShape(r,s,l,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let n=0,l=e.length;!this.result.shouldStop&&n<l;n++)this.intersectBody(e[n])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,n,l){const s=this.from;if(xz(s,this.direction,n)>e.boundingSphereRadius)return;const g=this[e.type];g&&g.call(this,e,t,n,l,e)}_intersectBox(e,t,n,l,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,l,s)}_intersectPlane(e,t,n,l,s){const o=this.from,g=this.to,r=this.direction,I=new F(0,0,1);t.vmult(I,I);const C=new F;o.vsub(n,C);const u=C.dot(I);g.vsub(n,C);const d=C.dot(I);if(u*d>0||o.distanceTo(g)<u)return;const A=I.dot(r);if(Math.abs(A)<this.precision)return;const m=new F,f=new F,p=new F;o.vsub(n,m);const b=-I.dot(m)/A;r.scale(b,f),o.vadd(f,p),this.reportIntersection(I,p,s,l,-1)}getAABB(e){const{lowerBound:t,upperBound:n}=e,l=this.to,s=this.from;t.x=Math.min(l.x,s.x),t.y=Math.min(l.y,s.y),t.z=Math.min(l.z,s.z),n.x=Math.max(l.x,s.x),n.y=Math.max(l.y,s.y),n.z=Math.max(l.z,s.z)}_intersectHeightfield(e,t,n,l,s){e.data,e.elementSize;const o=uz;o.from.copy(this.from),o.to.copy(this.to),xi.pointToLocalFrame(n,t,o.from,o.from),xi.pointToLocalFrame(n,t,o.to,o.to),o.updateDirection();const g=dz;let r,I,C,u;r=I=0,C=u=e.data.length-1;const d=new Bl;o.getAABB(d),e.getIndexOfPosition(d.lowerBound.x,d.lowerBound.y,g,!0),r=Math.max(r,g[0]),I=Math.max(I,g[1]),e.getIndexOfPosition(d.upperBound.x,d.upperBound.y,g,!0),C=Math.min(C,g[0]+1),u=Math.min(u,g[1]+1);for(let A=r;A<C;A++)for(let m=I;m<u;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(A,m,d),!!d.overlapsRay(o)){if(e.getConvexTrianglePillar(A,m,!1),xi.pointToWorldFrame(n,t,e.pillarOffset,g0),this._intersectConvex(e.pillarConvex,t,g0,l,s,qp),this.result.shouldStop)return;e.getConvexTrianglePillar(A,m,!0),xi.pointToWorldFrame(n,t,e.pillarOffset,g0),this._intersectConvex(e.pillarConvex,t,g0,l,s,qp)}}}_intersectSphere(e,t,n,l,s){const o=this.from,g=this.to,r=e.radius,I=(g.x-o.x)**2+(g.y-o.y)**2+(g.z-o.z)**2,C=2*((g.x-o.x)*(o.x-n.x)+(g.y-o.y)*(o.y-n.y)+(g.z-o.z)*(o.z-n.z)),u=(o.x-n.x)**2+(o.y-n.y)**2+(o.z-n.z)**2-r**2,d=C**2-4*I*u,A=Az,m=hz;if(!(d<0))if(d===0)o.lerp(g,d,A),A.vsub(n,m),m.normalize(),this.reportIntersection(m,A,s,l,-1);else{const f=(-C-Math.sqrt(d))/(2*I),p=(-C+Math.sqrt(d))/(2*I);if(f>=0&&f<=1&&(o.lerp(g,f,A),A.vsub(n,m),m.normalize(),this.reportIntersection(m,A,s,l,-1)),this.result.shouldStop)return;p>=0&&p<=1&&(o.lerp(g,p,A),A.vsub(n,m),m.normalize(),this.reportIntersection(m,A,s,l,-1))}}_intersectConvex(e,t,n,l,s,o){const g=mz,r=wp,I=o&&o.faceList||null,C=e.faces,u=e.vertices,d=e.faceNormals,A=this.direction,m=this.from,f=this.to,p=m.distanceTo(f),b=I?I.length:C.length,B=this.result;for(let y=0;!B.shouldStop&&y<b;y++){const Z=I?I[y]:y,q=C[Z],W=d[Z],S=t,x=n;r.copy(u[q[0]]),S.vmult(r,r),r.vadd(x,r),r.vsub(m,r),S.vmult(W,g);const V=A.dot(g);if(Math.abs(V)<this.precision)continue;const X=g.dot(r)/V;if(!(X<0)){A.scale(X,Zi),Zi.vadd(m,Zi),Rl.copy(u[q[0]]),S.vmult(Rl,Rl),x.vadd(Rl,Rl);for(let k=1;!B.shouldStop&&k<q.length-1;k++){ss.copy(u[q[k]]),os.copy(u[q[k+1]]),S.vmult(ss,ss),S.vmult(os,os),x.vadd(ss,ss),x.vadd(os,os);const $=Zi.distanceTo(m);!(ti.pointInTriangle(Zi,Rl,ss,os)||ti.pointInTriangle(Zi,ss,Rl,os))||$>p||this.reportIntersection(g,Zi,s,l,Z)}}}}_intersectTrimesh(e,t,n,l,s,o){const g=pz,r=Zz,I=vz,C=wp,u=fz,d=bz,A=Gz,m=Bz,f=yz,p=e.indices;e.vertices;const b=this.from,B=this.to,y=this.direction;I.position.copy(n),I.quaternion.copy(t),xi.vectorToLocalFrame(n,t,y,u),xi.pointToLocalFrame(n,t,b,d),xi.pointToLocalFrame(n,t,B,A),A.x*=e.scale.x,A.y*=e.scale.y,A.z*=e.scale.z,d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,A.vsub(d,u),u.normalize();const Z=d.distanceSquared(A);e.tree.rayQuery(this,I,r);for(let q=0,W=r.length;!this.result.shouldStop&&q!==W;q++){const S=r[q];e.getNormal(S,g),e.getVertex(p[S*3],Rl),Rl.vsub(d,C);const x=u.dot(g),V=g.dot(C)/x;if(V<0)continue;u.scale(V,Zi),Zi.vadd(d,Zi),e.getVertex(p[S*3+1],ss),e.getVertex(p[S*3+2],os);const X=Zi.distanceSquared(d);!(ti.pointInTriangle(Zi,ss,Rl,os)||ti.pointInTriangle(Zi,Rl,ss,os))||X>Z||(xi.vectorToWorldFrame(t,g,f),xi.pointToWorldFrame(n,t,Zi,m),this.reportIntersection(f,m,s,l,S))}r.length=0}reportIntersection(e,t,n,l,s){const o=this.from,g=this.to,r=o.distanceTo(t),I=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(I.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case ti.ALL:this.hasHit=!0,I.set(o,g,e,t,n,l,r),I.hasHit=!0,this.callback(I);break;case ti.CLOSEST:(r<I.distance||!I.hasHit)&&(this.hasHit=!0,I.hasHit=!0,I.set(o,g,e,t,n,l,r));break;case ti.ANY:this.hasHit=!0,I.hasHit=!0,I.set(o,g,e,t,n,l,r),I.shouldStop=!0;break}}static pointInTriangle(e,t,n,l){l.vsub(t,Vg),n.vsub(t,X1),e.vsub(t,C5);const s=Vg.dot(Vg),o=Vg.dot(X1),g=Vg.dot(C5),r=X1.dot(X1),I=X1.dot(C5);let C,u;return(C=r*g-o*I)>=0&&(u=s*I-o*g)>=0&&C+u<s*r-o*o}}ti.CLOSEST=_h.CLOSEST;ti.ANY=_h.ANY;ti.ALL=_h.ALL;const xp=new Bl,c5=[],X1=new F,C5=new F,cz=new F,Cz=new ci,Zi=new F,Rl=new F,ss=new F,os=new F;new F;new P3;const qp={faceList:[0]},g0=new F,uz=new ti,dz=[],Az=new F,hz=new F,mz=new F;new F;new F;const wp=new F,pz=new F,fz=new F,bz=new F,Gz=new F,yz=new F,Bz=new F;new Bl;const Zz=[],vz=new xi,Vg=new F,r0=new F;function xz(i,e,t){t.vsub(i,Vg);const n=Vg.dot(e);return e.scale(n,r0),r0.vadd(i,r0),t.distanceTo(r0)}new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new ti;new F;new F;new F;new F(1,0,0),new F(0,1,0),new F(0,0,1);new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new Bl;new F;new Bl;new F;new F;new F;new F;new F;new F;new F;new Bl;new F;new xi;new Bl;De.types.SPHERE,De.types.SPHERE|De.types.PLANE,De.types.BOX|De.types.BOX,De.types.SPHERE|De.types.BOX,De.types.PLANE|De.types.BOX,De.types.CONVEXPOLYHEDRON,De.types.SPHERE|De.types.CONVEXPOLYHEDRON,De.types.PLANE|De.types.CONVEXPOLYHEDRON,De.types.BOX|De.types.CONVEXPOLYHEDRON,De.types.SPHERE|De.types.HEIGHTFIELD,De.types.BOX|De.types.HEIGHTFIELD,De.types.CONVEXPOLYHEDRON|De.types.HEIGHTFIELD,De.types.PARTICLE|De.types.SPHERE,De.types.PLANE|De.types.PARTICLE,De.types.BOX|De.types.PARTICLE,De.types.PARTICLE|De.types.CONVEXPOLYHEDRON,De.types.CYLINDER,De.types.SPHERE|De.types.CYLINDER,De.types.PLANE|De.types.CYLINDER,De.types.BOX|De.types.CYLINDER,De.types.CONVEXPOLYHEDRON|De.types.CYLINDER,De.types.HEIGHTFIELD|De.types.CYLINDER,De.types.PARTICLE|De.types.CYLINDER,De.types.SPHERE|De.types.TRIMESH,De.types.PLANE|De.types.TRIMESH;new F;new F;new F;new F;new F;new ci;new ci;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new Bl;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F,new F,new F,new F,new F,new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new F;new ci;new F;new F;new F;new F;new F;new F;new F;new F;new F;new Bl;new ti;const Y1=globalThis.performance||{};if(!Y1.now){let i=Date.now();Y1.timing&&Y1.timing.navigationStart&&(i=Y1.timing.navigationStart),Y1.now=()=>Date.now()-i}new F;const qz=Ce.exports.createContext(null),wz=()=>Ce.exports.useContext(qz),LG=Ce.exports.createContext(null),Wz=()=>{const i=Ce.exports.useContext(LG);if(!i)throw new Error("Physics context not found. @react-three/cannon & components can only be used within a Physics provider");return i};new bn;new K(1,1,1);new K;new st;const Wp=new yt;function Sz(i){const e=Ce.exports.useRef(null);return i&&typeof i!="function"?i:e}function Sp(i){return i.charAt(0).toUpperCase()+i.slice(1)}function _n(i,e){const t=e===void 0?"":`/${e}`;return typeof i=="function"?null:i&&i.current&&`${i.current.uuid}${t}`}const Vz=new gr,Rz=new bn,Xz=i=>e=>i(Vz.setFromQuaternion(Rz.fromArray(e)).toArray());let _G=0;function u5(i,e,t,n,l,s){return s===void 0&&(s="bodies"),o=>{const g=_G++;t[g]={[n]:o};const r=_n(i,l);return r&&e.subscribe({props:{id:g,target:s,type:n},uuid:r}),()=>{delete t[g],e.unsubscribe({props:g})}}}function Vp(i,e){let{position:t=[0,0,0],rotation:n=[0,0,0],userData:l={}}=e;i.userData=l,i.position.set(...t),i.rotation.set(...n),i.updateMatrix()}function Rp(i,e,t){let{onCollide:n,onCollideBegin:l,onCollideEnd:s}=e;i[t]={collide:n,collideBegin:l,collideEnd:s}}function Yz(i,e,t,n,l){n===void 0&&(n=null),l===void 0&&(l=[]);const s=Sz(n),{events:o,refs:g,scaleOverrides:r,subscriptions:I,worker:C}=Wz(),u=wz();Ce.exports.useLayoutEffect(()=>{s.current||(s.current=new yt);const A=s.current,m=C,f=A instanceof Ug?(A.instanceMatrix.setUsage(Qf),A.count):1,p=A instanceof Ug?new Array(f).fill(0).map((B,y)=>`${A.uuid}/${y}`):[A.uuid],b=A instanceof Ug?p.map((B,y)=>{const Z=e(y);return Vp(Wp,Z),A.setMatrixAt(y,Wp.matrix),A.instanceMatrix.needsUpdate=!0,g[B]=A,u==null||u.add(B,Z,i),Rp(o,Z,B),{...Z,args:t(Z.args)}}):p.map((B,y)=>{const Z=e(y);return Vp(A,Z),g[B]=A,u==null||u.add(B,Z,i),Rp(o,Z,B),{...Z,args:t(Z.args)}});return m.addBodies({props:b.map(B=>{let{onCollide:y,onCollideBegin:Z,onCollideEnd:q,...W}=B;return{onCollide:Boolean(y),...W}}),type:i,uuid:p}),()=>{p.forEach(B=>{delete g[B],u==null||u.remove(B),delete o[B]}),m.removeBodies({uuid:p})}},l);const d=Ce.exports.useMemo(()=>{const A=(y,Z)=>{const q=`set${Sp(y)}`;return{set:W=>{const S=_n(s,Z);S&&C[q]({props:W,uuid:S})},subscribe:u5(s,C,I,y,Z)}},m=y=>({copy:q=>{let{w:W,x:S,y:x,z:V}=q;const X=_n(s,y);X&&C.setQuaternion({props:[S,x,V,W],uuid:X})},set:(q,W,S,x)=>{const V=_n(s,y);V&&C.setQuaternion({props:[q,W,S,x],uuid:V})},subscribe:u5(s,C,I,"quaternion",y)}),f=y=>({copy:Z=>{let{x:q,y:W,z:S}=Z;const x=_n(s,y);x&&C.setRotation({props:[q,W,S],uuid:x})},set:(Z,q,W)=>{const S=_n(s,y);S&&C.setRotation({props:[Z,q,W],uuid:S})},subscribe:Z=>{const q=_G++,W="bodies",S="quaternion",x=_n(s,y);return I[q]={[S]:Xz(Z)},x&&C.subscribe({props:{id:q,target:W,type:S},uuid:x}),()=>{delete I[q],C.unsubscribe({props:q})}}}),p=(y,Z)=>{const q=`set${Sp(y)}`;return{copy:W=>{let{x:S,y:x,z:V}=W;const X=_n(s,Z);X&&C[q]({props:[S,x,V],uuid:X})},set:(W,S,x)=>{const V=_n(s,Z);V&&C[q]({props:[W,S,x],uuid:V})},subscribe:u5(s,C,I,y,Z)}};function b(y){return{allowSleep:A("allowSleep",y),angularDamping:A("angularDamping",y),angularFactor:p("angularFactor",y),angularVelocity:p("angularVelocity",y),applyForce(Z,q){const W=_n(s,y);W&&C.applyForce({props:[Z,q],uuid:W})},applyImpulse(Z,q){const W=_n(s,y);W&&C.applyImpulse({props:[Z,q],uuid:W})},applyLocalForce(Z,q){const W=_n(s,y);W&&C.applyLocalForce({props:[Z,q],uuid:W})},applyLocalImpulse(Z,q){const W=_n(s,y);W&&C.applyLocalImpulse({props:[Z,q],uuid:W})},applyTorque(Z){const q=_n(s,y);q&&C.applyTorque({props:[Z],uuid:q})},collisionFilterGroup:A("collisionFilterGroup",y),collisionFilterMask:A("collisionFilterMask",y),collisionResponse:A("collisionResponse",y),fixedRotation:A("fixedRotation",y),isTrigger:A("isTrigger",y),linearDamping:A("linearDamping",y),linearFactor:p("linearFactor",y),mass:A("mass",y),material:A("material",y),position:p("position",y),quaternion:m(y),rotation:f(y),scaleOverride(Z){const q=_n(s,y);q&&(r[q]=new K(...Z))},sleep(){const Z=_n(s,y);Z&&C.sleep({uuid:Z})},sleepSpeedLimit:A("sleepSpeedLimit",y),sleepTimeLimit:A("sleepTimeLimit",y),userData:A("userData",y),velocity:p("velocity",y),wakeUp(){const Z=_n(s,y);Z&&C.wakeUp({uuid:Z})}}}const B={};return{...b(void 0),at:y=>B[y]||(B[y]=b(y))}},[]);return[s,d]}function zz(i,e,t){return Yz("Plane",i,()=>[],e,t)}const Kz=new K,Hz=new K(1,1,1),Nz=new bn,a0=new st;function Xp(i,e,t,n,l){return n===void 0&&(n=Hz),i!==void 0?(a0.compose(Kz.fromArray(e,i*3),Nz.fromArray(t,i*4),n),l&&(l.matrixAutoUpdate=!1,l.matrix.copy(a0)),a0):a0.identity()}function Mz(i){let{allowSleep:e=!1,axisIndex:t=0,broadphase:n="Naive",children:l,defaultContactMaterial:s={contactEquationStiffness:1e6},frictionGravity:o=null,gravity:g=[0,-9.81,0],isPaused:r=!1,iterations:I=5,maxSubSteps:C=10,quatNormalizeFast:u=!1,quatNormalizeSkip:d=0,shouldInvalidate:A=!0,size:m=1e3,solver:f="GS",stepSize:p=1/60,tolerance:b=.001}=i;const{invalidate:B}=Fi(),[{bodies:y,events:Z,refs:q,scaleOverrides:W,subscriptions:S,worker:x}]=Ce.exports.useState(()=>({bodies:{},events:{},refs:{},scaleOverrides:{},subscriptions:{},worker:new KY({allowSleep:e,axisIndex:t,broadphase:n,defaultContactMaterial:s,frictionGravity:o,gravity:g,iterations:I,quatNormalizeFast:u,quatNormalizeSkip:d,size:m,solver:f,tolerance:b})}));let V=0;const X=Ce.exports.useCallback((oe,R)=>{r||(V+=R,x.step({maxSubSteps:C,stepSize:p,timeSinceLastCalled:V}),V=0)},[r,C,p]),k=oe=>{var R;let{body:Y,contact:{bi:H,bj:J,...P},target:ne,...fe}=oe;const We=(R=Z[ne])==null?void 0:R.collide;We&&We({body:q[Y],contact:{bi:q[H],bj:q[J],...P},target:q[ne],...fe})},$=oe=>{var R,Y;let{bodyA:H,bodyB:J}=oe;const P=(R=Z[H])==null?void 0:R.collideBegin;P&&P({body:q[J],op:"event",target:q[H],type:"collideBegin"});const ne=(Y=Z[J])==null?void 0:Y.collideBegin;ne&&ne({body:q[H],op:"event",target:q[J],type:"collideBegin"})},Q=oe=>{var R,Y;let{bodyA:H,bodyB:J}=oe;const P=(R=Z[H])==null?void 0:R.collideEnd;P&&P({body:q[J],op:"event",target:q[H],type:"collideEnd"});const ne=(Y=Z[J])==null?void 0:Y.collideEnd;ne&&ne({body:q[H],op:"event",target:q[J],type:"collideEnd"})},E=oe=>{let{active:R,bodies:Y=[],observations:H,positions:J,quaternions:P}=oe;for(let ne=0;ne<Y.length;ne++)y[Y[ne]]=ne;if(H.forEach(ne=>{let[fe,We,le]=ne;const Te=(S[fe]||{})[le];Te&&Te(We)}),R){for(const ne of Object.values(q))if(ne instanceof Ug)for(let fe=0;fe<ne.count;fe++){const We=`${ne.uuid}/${fe}`,le=y[We];le!==void 0&&(ne.setMatrixAt(fe,Xp(le,J,P,W[We])),ne.instanceMatrix.needsUpdate=!0)}else{const fe=W[ne.uuid]||ne.scale;Xp(y[ne.uuid],J,P,fe,ne)}A&&B()}},te=oe=>{var R;let{body:Y,ray:{uuid:H,...J},...P}=oe;const ne=(R=Z[H])==null?void 0:R.rayhit;ne&&ne({body:Y?q[Y]:null,ray:{uuid:H,...J},...P})};lg(X),Ce.exports.useEffect(()=>(x.connect(),x.init(),x.on("collide",k),x.on("collideBegin",$),x.on("collideEnd",Q),x.on("frame",E),x.on("rayhit",te),()=>{x.terminate(),x.removeAllListeners()}),[]),Ce.exports.useEffect(()=>{x.axisIndex=t},[t]),Ce.exports.useEffect(()=>{x.broadphase=n},[n]),Ce.exports.useEffect(()=>{x.gravity=g},[g]),Ce.exports.useEffect(()=>{x.iterations=I},[I]),Ce.exports.useEffect(()=>{x.tolerance=b},[b]);const se=Ce.exports.useMemo(()=>({bodies:y,events:Z,refs:q,scaleOverrides:W,subscriptions:S,worker:x}),[y,Z,q,S,x]);return Be(LG.Provider,{value:se,children:l})}function Fz(){return Be(no,{})}function Lz(){return zz(()=>({type:"Static",rotation:[-Math.PI/2,0,0]}),Ce.exports.useRef(null)),Be(no,{children:ln("mesh",{rotation:[-.5*Math.PI,0,0],children:[Be("planeBufferGeometry",{attach:"geometry",args:[30,30]}),Be("meshPhongMaterial",{attach:"material",color:3751494})]})})}function _z(){return Be(no,{})}function kz(){const{progress:i}=aY();return ln(rY,{center:!0,children:[Math.round(i)," % Loaded. Please wait!",Be("h6",{children:"Hello"})]})}class Qt extends Ai{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Dz(t)}),this.register(function(t){return new tK(t)}),this.register(function(t){return new nK(t)}),this.register(function(t){return new Pz(t)}),this.register(function(t){return new Oz(t)}),this.register(function(t){return new jz(t)}),this.register(function(t){return new $z(t)}),this.register(function(t){return new Uz(t)}),this.register(function(t){return new eK(t)}),this.register(function(t){return new Qz(t)}),this.register(function(t){return new Ez(t)}),this.register(function(t){return new iK(t)}),this.register(function(t){return new lK(t)})}load(e,t,n,l){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=As.extractUrlBase(e),this.manager.itemStart(e);const g=function(I){l?l(I):console.error(I),s.manager.itemError(e),s.manager.itemEnd(e)},r=new Gl(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(I){try{s.parse(I,o,function(C){t(C),s.manager.itemEnd(e)},g)}catch(C){g(C)}},n,g)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,l){let s;const o={},g={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(As.decodeText(new Uint8Array(e,0,4))===kG){try{o[bt.KHR_BINARY_GLTF]=new sK(e)}catch(C){l&&l(C);return}s=JSON.parse(o[bt.KHR_BINARY_GLTF].content)}else s=JSON.parse(As.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const r=new pK(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});r.fileLoader.setRequestHeader(this.requestHeader);for(let I=0;I<this.pluginCallbacks.length;I++){const C=this.pluginCallbacks[I](r);g[C.name]=C,o[C.name]=!0}if(s.extensionsUsed)for(let I=0;I<s.extensionsUsed.length;++I){const C=s.extensionsUsed[I],u=s.extensionsRequired||[];switch(C){case bt.KHR_MATERIALS_UNLIT:o[C]=new Jz;break;case bt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[C]=new rK;break;case bt.KHR_DRACO_MESH_COMPRESSION:o[C]=new oK(s,this.dracoLoader);break;case bt.KHR_TEXTURE_TRANSFORM:o[C]=new gK;break;case bt.KHR_MESH_QUANTIZATION:o[C]=new aK;break;default:u.indexOf(C)>=0&&g[C]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+C+'".')}}r.setExtensions(o),r.setPlugins(g),r.parse(n,l)}parseAsync(e,t){const n=this;return new Promise(function(l,s){n.parse(e,t,l,s)})}}function Tz(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const bt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ez{constructor(e){this.parser=e,this.name=bt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,l=t.length;n<l;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let l=t.cache.get(n);if(l)return l;const s=t.json,r=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let I;const C=new Ve(16777215);r.color!==void 0&&C.fromArray(r.color);const u=r.range!==void 0?r.range:0;switch(r.type){case"directional":I=new Sh(C),I.target.position.set(0,0,-1),I.add(I.target);break;case"point":I=new Wh(C),I.distance=u;break;case"spot":I=new wh(C),I.distance=u,r.spot=r.spot||{},r.spot.innerConeAngle=r.spot.innerConeAngle!==void 0?r.spot.innerConeAngle:0,r.spot.outerConeAngle=r.spot.outerConeAngle!==void 0?r.spot.outerConeAngle:Math.PI/4,I.angle=r.spot.outerConeAngle,I.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,I.target.position.set(0,0,-1),I.add(I.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+r.type)}return I.position.set(0,0,0),I.decay=2,r.intensity!==void 0&&(I.intensity=r.intensity),I.name=t.createUniqueName(r.name||"light_"+e),l=Promise.resolve(I),t.cache.add(n,l),l}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],g=(s.extensions&&s.extensions[this.name]||{}).light;return g===void 0?null:this._loadLight(g).then(function(r){return n._getNodeRef(t.cache,g,r)})}}class Jz{constructor(){this.name=bt.KHR_MATERIALS_UNLIT}getMaterialType(){return ki}extendParams(e,t,n){const l=[];e.color=new Ve(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&l.push(n.assignTexture(e,"map",s.baseColorTexture,Yt))}return Promise.all(l)}}class Uz{constructor(e){this.parser=e,this.name=bt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const l=this.parser.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const s=l.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Dz{constructor(e){this.parser=e,this.name=bt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:to}extendMaterialParams(e,t){const n=this.parser,l=n.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const s=[],o=l.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const g=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new me(g,g)}return Promise.all(s)}}class Qz{constructor(e){this.parser=e,this.name=bt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:to}extendMaterialParams(e,t){const n=this.parser,l=n.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const s=[],o=l.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Pz{constructor(e){this.parser=e,this.name=bt.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:to}extendMaterialParams(e,t){const n=this.parser,l=n.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ve(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=l.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Yt)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Oz{constructor(e){this.parser=e,this.name=bt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:to}extendMaterialParams(e,t){const n=this.parser,l=n.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const s=[],o=l.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class jz{constructor(e){this.parser=e,this.name=bt.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:to}extendMaterialParams(e,t){const n=this.parser,l=n.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const s=[],o=l.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const g=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ve(g[0],g[1],g[2]),Promise.all(s)}}class $z{constructor(e){this.parser=e,this.name=bt.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:to}extendMaterialParams(e,t){const l=this.parser.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const s=l.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class eK{constructor(e){this.parser=e,this.name=bt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:to}extendMaterialParams(e,t){const n=this.parser,l=n.json.materials[e];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const s=[],o=l.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const g=o.specularColorFactor||[1,1,1];return t.specularColor=new Ve(g[0],g[1],g[2]),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Yt)),Promise.all(s)}}class tK{constructor(e){this.parser=e,this.name=bt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,l=n.textures[e];if(!l.extensions||!l.extensions[this.name])return null;const s=l.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class nK{constructor(e){this.parser=e,this.name=bt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,l=n.json,s=l.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],g=l.images[o.source];let r=n.textureLoader;if(g.uri){const I=n.options.manager.getHandler(g.uri);I!==null&&(r=I)}return this.detectSupport().then(function(I){if(I)return n.loadTextureImage(e,o.source,r);if(l.extensionsRequired&&l.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class iK{constructor(e){this.name=bt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const l=n.extensions[this.name],s=this.parser.getDependency("buffer",l.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(g){const r=l.byteOffset||0,I=l.byteLength||0,C=l.count,u=l.byteStride,d=new Uint8Array(g,r,I);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(C,u,d,l.mode,l.filter).then(function(A){return A.buffer}):o.ready.then(function(){const A=new ArrayBuffer(C*u);return o.decodeGltfBuffer(new Uint8Array(A),C,u,d,l.mode,l.filter),A})})}else return null}}class lK{constructor(e){this.name=bt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const l=t.meshes[n.mesh];for(const I of l.primitives)if(I.mode!==Cl.TRIANGLES&&I.mode!==Cl.TRIANGLE_STRIP&&I.mode!==Cl.TRIANGLE_FAN&&I.mode!==void 0)return null;const o=n.extensions[this.name].attributes,g=[],r={};for(const I in o)g.push(this.parser.getDependency("accessor",o[I]).then(C=>(r[I]=C,r[I])));return g.length<1?null:(g.push(this.parser.createNodeMesh(e)),Promise.all(g).then(I=>{const C=I.pop(),u=C.isGroup?C.children:[C],d=I[0].count,A=[];for(const m of u){const f=new st,p=new K,b=new bn,B=new K(1,1,1),y=new Ug(m.geometry,m.material,d);for(let Z=0;Z<d;Z++)r.TRANSLATION&&p.fromBufferAttribute(r.TRANSLATION,Z),r.ROTATION&&b.fromBufferAttribute(r.ROTATION,Z),r.SCALE&&B.fromBufferAttribute(r.SCALE,Z),y.setMatrixAt(Z,f.compose(p,b,B));for(const Z in r)Z!=="TRANSLATION"&&Z!=="ROTATION"&&Z!=="SCALE"&&m.geometry.setAttribute(Z,r[Z]);yt.prototype.copy.call(y,m),y.frustumCulled=!1,this.parser.assignFinalMaterial(y),A.push(y)}return C.isGroup?(C.clear(),C.add(...A),C):A[0]}))}}const kG="glTF",z1=12,Yp={JSON:1313821514,BIN:5130562};class sK{constructor(e){this.name=bt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,z1);if(this.header={magic:As.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==kG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-z1,l=new DataView(e,z1);let s=0;for(;s<n;){const o=l.getUint32(s,!0);s+=4;const g=l.getUint32(s,!0);if(s+=4,g===Yp.JSON){const r=new Uint8Array(e,z1+s,o);this.content=As.decodeText(r)}else if(g===Yp.BIN){const r=z1+s;this.body=e.slice(r,r+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class oK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=bt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,l=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,g={},r={},I={};for(const C in o){const u=j3[C]||C.toLowerCase();g[u]=o[C]}for(const C in e.attributes){const u=j3[C]||C.toLowerCase();if(o[C]!==void 0){const d=n.accessors[e.attributes[C]],A=VI[d.componentType];I[u]=A.name,r[u]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(C){return new Promise(function(u){l.decodeDracoFile(C,function(d){for(const A in d.attributes){const m=d.attributes[A],f=r[A];f!==void 0&&(m.normalized=f)}u(d)},g,I)})})}}class gK{constructor(){this.name=bt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class O3 extends _a{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),n=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),g={specular:{value:new Ve().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=g,this.onBeforeCompile=function(r){for(const I in g)r.uniforms[I]=g[I];r.fragmentShader=r.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return g.specular.value},set:function(r){g.specular.value=r}},specularMap:{get:function(){return g.specularMap.value},set:function(r){g.specularMap.value=r,r?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return g.glossiness.value},set:function(r){g.glossiness.value=r}},glossinessMap:{get:function(){return g.glossinessMap.value},set:function(r){g.glossinessMap.value=r,r?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class rK{constructor(){this.name=bt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return O3}extendParams(e,t,n){const l=t.extensions[this.name];e.color=new Ve(1,1,1),e.opacity=1;const s=[];if(Array.isArray(l.diffuseFactor)){const o=l.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(l.diffuseTexture!==void 0&&s.push(n.assignTexture(e,"map",l.diffuseTexture,Yt)),e.emissive=new Ve(0,0,0),e.glossiness=l.glossinessFactor!==void 0?l.glossinessFactor:1,e.specular=new Ve(1,1,1),Array.isArray(l.specularFactor)&&e.specular.fromArray(l.specularFactor),l.specularGlossinessTexture!==void 0){const o=l.specularGlossinessTexture;s.push(n.assignTexture(e,"glossinessMap",o)),s.push(n.assignTexture(e,"specularMap",o,Yt))}return Promise.all(s)}createMaterial(e){const t=new O3(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=$s,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class aK{constructor(){this.name=bt.KHR_MESH_QUANTIZATION}}class TG extends ka{constructor(e,t,n,l){super(e,t,n,l)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,l=this.valueSize,s=e*l*3+l;for(let o=0;o!==l;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,l){const s=this.resultBuffer,o=this.sampleValues,g=this.valueSize,r=g*2,I=g*3,C=l-t,u=(n-t)/C,d=u*u,A=d*u,m=e*I,f=m-I,p=-2*A+3*d,b=A-d,B=1-p,y=b-d+u;for(let Z=0;Z!==g;Z++){const q=o[f+Z+g],W=o[f+Z+r]*C,S=o[m+Z+g],x=o[m+Z]*C;s[Z]=B*q+y*W+p*S+b*x}return s}}const IK=new bn;class cK extends TG{interpolate_(e,t,n,l){const s=super.interpolate_(e,t,n,l);return IK.fromArray(s).normalize().toArray(s),s}}const Cl={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},VI={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},zp={9728:pn,9729:Pt,9984:bI,9985:v2,9986:GI,9987:js},Kp={33071:Tn,33648:Za,10497:Uo},Hp={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},j3={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bo={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},CK={CUBICSPLINE:void 0,LINEAR:nr,STEP:va},d5={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function uK(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new _a({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:To})),i.DefaultMaterial}function K1(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function qg(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function dK(i,e,t){let n=!1,l=!1,s=!1;for(let I=0,C=e.length;I<C;I++){const u=e[I];if(u.POSITION!==void 0&&(n=!0),u.NORMAL!==void 0&&(l=!0),u.COLOR_0!==void 0&&(s=!0),n&&l&&s)break}if(!n&&!l&&!s)return Promise.resolve(i);const o=[],g=[],r=[];for(let I=0,C=e.length;I<C;I++){const u=e[I];if(n){const d=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):i.attributes.position;o.push(d)}if(l){const d=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):i.attributes.normal;g.push(d)}if(s){const d=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):i.attributes.color;r.push(d)}}return Promise.all([Promise.all(o),Promise.all(g),Promise.all(r)]).then(function(I){const C=I[0],u=I[1],d=I[2];return n&&(i.morphAttributes.position=C),l&&(i.morphAttributes.normal=u),s&&(i.morphAttributes.color=d),i.morphTargetsRelative=!0,i})}function AK(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,l=t.length;n<l;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function hK(i){const e=i.extensions&&i.extensions[bt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+Np(e.attributes):t=i.indices+":"+Np(i.attributes)+":"+i.mode,t}function Np(i){let e="";const t=Object.keys(i).sort();for(let n=0,l=t.length;n<l;n++)e+=t[n]+":"+i[t[n]]+";";return e}function $3(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function mK(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class pK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Tz,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,l=navigator.userAgent.indexOf("Firefox")>-1,s=l?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||n||l&&s<98?this.textureLoader=new eI(this.options.manager):this.textureLoader=new kb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,l=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const g={scene:o[0][l.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:l.asset,parser:n,userData:{}};K1(s,g,l),qg(g,l),Promise.all(n._invokeAll(function(r){return r.afterRoot&&r.afterRoot(g)})).then(function(){e(g)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let l=0,s=t.length;l<s;l++){const o=t[l].joints;for(let g=0,r=o.length;g<r;g++)e[o[g]].isBone=!0}for(let l=0,s=e.length;l<s;l++){const o=e[l];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const l=n.clone(),s=(o,g)=>{const r=this.associations.get(o);r!=null&&this.associations.set(g,r);for(const[I,C]of o.children.entries())s(C,g.children[I])};return s(n,l),l.name+="_instance_"+e.uses[t]++,l}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const l=e(t[n]);if(l)return l}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let l=0;l<t.length;l++){const s=e(t[l]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let l=this.cache.get(n);if(!l){switch(e){case"scene":l=this.loadScene(t);break;case"node":l=this.loadNode(t);break;case"mesh":l=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":l=this.loadAccessor(t);break;case"bufferView":l=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":l=this.loadBuffer(t);break;case"material":l=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":l=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":l=this.loadSkin(t);break;case"animation":l=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":l=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,l)}return l}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,l=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(l.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[bt.KHR_BINARY_GLTF].body);const l=this.options;return new Promise(function(s,o){n.load(As.resolveURL(t.uri,l.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const l=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+l)})}loadAccessor(e){const t=this,n=this.json,l=this.json.accessors[e];if(l.bufferView===void 0&&l.sparse===void 0)return Promise.resolve(null);const s=[];return l.bufferView!==void 0?s.push(this.getDependency("bufferView",l.bufferView)):s.push(null),l.sparse!==void 0&&(s.push(this.getDependency("bufferView",l.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",l.sparse.values.bufferView))),Promise.all(s).then(function(o){const g=o[0],r=Hp[l.type],I=VI[l.componentType],C=I.BYTES_PER_ELEMENT,u=C*r,d=l.byteOffset||0,A=l.bufferView!==void 0?n.bufferViews[l.bufferView].byteStride:void 0,m=l.normalized===!0;let f,p;if(A&&A!==u){const b=Math.floor(d/A),B="InterleavedBuffer:"+l.bufferView+":"+l.componentType+":"+b+":"+l.count;let y=t.cache.get(B);y||(f=new I(g,b*A,l.count*A/C),y=new _I(f,A/C),t.cache.add(B,y)),p=new Qo(y,r,d%A/C,m)}else g===null?f=new I(l.count*r):f=new I(g,d,l.count*r),p=new Ft(f,r,m);if(l.sparse!==void 0){const b=Hp.SCALAR,B=VI[l.sparse.indices.componentType],y=l.sparse.indices.byteOffset||0,Z=l.sparse.values.byteOffset||0,q=new B(o[1],y,l.sparse.count*b),W=new I(o[2],Z,l.sparse.count*r);g!==null&&(p=new Ft(p.array.slice(),p.itemSize,p.normalized));for(let S=0,x=q.length;S<x;S++){const V=q[S];if(p.setX(V,W[S*r]),r>=2&&p.setY(V,W[S*r+1]),r>=3&&p.setZ(V,W[S*r+2]),r>=4&&p.setW(V,W[S*r+3]),r>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let g=this.textureLoader;if(o.uri){const r=n.manager.getHandler(o.uri);r!==null&&(g=r)}return this.loadTextureImage(e,s,g)}loadTextureImage(e,t,n){const l=this,s=this.json,o=s.textures[e],g=s.images[t],r=(g.uri||g.bufferView)+":"+o.sampler;if(this.textureCache[r])return this.textureCache[r];const I=this.loadImageSource(t,n).then(function(C){C.flipY=!1,C.name=o.name||g.name||"";const d=(s.samplers||{})[o.sampler]||{};return C.magFilter=zp[d.magFilter]||Pt,C.minFilter=zp[d.minFilter]||js,C.wrapS=Kp[d.wrapS]||Uo,C.wrapT=Kp[d.wrapT]||Uo,l.associations.set(C,{textures:e}),C}).catch(function(){return null});return this.textureCache[r]=I,I}loadImageSource(e,t){const n=this,l=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=l.images[e],g=self.URL||self.webkitURL;let r=o.uri||"",I=!1;if(o.bufferView!==void 0)r=n.getDependency("bufferView",o.bufferView).then(function(u){I=!0;const d=new Blob([u],{type:o.mimeType});return r=g.createObjectURL(d),r});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const C=Promise.resolve(r).then(function(u){return new Promise(function(d,A){let m=d;t.isImageBitmapLoader===!0&&(m=function(f){const p=new un(f);p.needsUpdate=!0,d(p)}),t.load(As.resolveURL(u,s.path),m,void 0,A)})}).then(function(u){return I===!0&&g.revokeObjectURL(r),u.userData.mimeType=o.mimeType||mK(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",r),u});return this.sourceCache[e]=C,C}assignTexture(e,t,n,l){const s=this;return this.getDependency("texture",n.index).then(function(o){if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),s.extensions[bt.KHR_TEXTURE_TRANSFORM]){const g=n.extensions!==void 0?n.extensions[bt.KHR_TEXTURE_TRANSFORM]:void 0;if(g){const r=s.associations.get(o);o=s.extensions[bt.KHR_TEXTURE_TRANSFORM].extendTexture(o,g),s.associations.set(o,r)}}return l!==void 0&&(o.encoding=l),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const l=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const g="PointsMaterial:"+n.uuid;let r=this.cache.get(g);r||(r=new X2,vn.prototype.copy.call(r,n),r.color.copy(n.color),r.map=n.map,r.sizeAttenuation=!1,this.cache.add(g,r)),n=r}else if(e.isLine){const g="LineBasicMaterial:"+n.uuid;let r=this.cache.get(g);r||(r=new li,vn.prototype.copy.call(r,n),r.color.copy(n.color),this.cache.add(g,r)),n=r}if(l||s||o){let g="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(g+="specular-glossiness:"),l&&(g+="derivative-tangents:"),s&&(g+="vertex-colors:"),o&&(g+="flat-shading:");let r=this.cache.get(g);r||(r=n.clone(),s&&(r.vertexColors=!0),o&&(r.flatShading=!0),l&&(r.normalScale&&(r.normalScale.y*=-1),r.clearcoatNormalScale&&(r.clearcoatNormalScale.y*=-1)),this.cache.add(g,r),this.associations.set(r,this.associations.get(n))),n=r}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return _a}loadMaterial(e){const t=this,n=this.json,l=this.extensions,s=n.materials[e];let o;const g={},r=s.extensions||{},I=[];if(r[bt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=l[bt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),I.push(u.extendParams(g,s,t))}else if(r[bt.KHR_MATERIALS_UNLIT]){const u=l[bt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),I.push(u.extendParams(g,s,t))}else{const u=s.pbrMetallicRoughness||{};if(g.color=new Ve(1,1,1),g.opacity=1,Array.isArray(u.baseColorFactor)){const d=u.baseColorFactor;g.color.fromArray(d),g.opacity=d[3]}u.baseColorTexture!==void 0&&I.push(t.assignTexture(g,"map",u.baseColorTexture,Yt)),g.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,g.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(I.push(t.assignTexture(g,"metalnessMap",u.metallicRoughnessTexture)),I.push(t.assignTexture(g,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),I.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,g)})))}s.doubleSided===!0&&(g.side=Hl);const C=s.alphaMode||d5.OPAQUE;if(C===d5.BLEND?(g.transparent=!0,g.depthWrite=!1):(g.transparent=!1,C===d5.MASK&&(g.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ki&&(I.push(t.assignTexture(g,"normalMap",s.normalTexture)),g.normalScale=new me(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;g.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==ki&&(I.push(t.assignTexture(g,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(g.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ki&&(g.emissive=new Ve().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==ki&&I.push(t.assignTexture(g,"emissiveMap",s.emissiveTexture,Yt)),Promise.all(I).then(function(){let u;return o===O3?u=l[bt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(g):u=new o(g),s.name&&(u.name=s.name),qg(u,s),t.associations.set(u,{materials:e}),s.extensions&&K1(l,u,s),u})}createUniqueName(e){const t=qt.sanitizeNodeName(e||"");let n=t;for(let l=1;this.nodeNamesUsed[n];++l)n=t+"_"+l;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,l=this.primitiveCache;function s(g){return n[bt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(g,t).then(function(r){return Mp(r,g,t)})}const o=[];for(let g=0,r=e.length;g<r;g++){const I=e[g],C=hK(I),u=l[C];if(u)o.push(u.promise);else{let d;I.extensions&&I.extensions[bt.KHR_DRACO_MESH_COMPRESSION]?d=s(I):d=Mp(new ut,I,t),l[C]={primitive:I,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,l=this.extensions,s=n.meshes[e],o=s.primitives,g=[];for(let r=0,I=o.length;r<I;r++){const C=o[r].material===void 0?uK(this.cache):this.getDependency("material",o[r].material);g.push(C)}return g.push(t.loadGeometries(o)),Promise.all(g).then(function(r){const I=r.slice(0,r.length-1),C=r[r.length-1],u=[];for(let A=0,m=C.length;A<m;A++){const f=C[A],p=o[A];let b;const B=I[A];if(p.mode===Cl.TRIANGLES||p.mode===Cl.TRIANGLE_STRIP||p.mode===Cl.TRIANGLE_FAN||p.mode===void 0)b=s.isSkinnedMesh===!0?new Ch(f,B):new Mn(f,B),b.isSkinnedMesh===!0&&!b.geometry.attributes.skinWeight.normalized&&b.normalizeSkinWeights(),p.mode===Cl.TRIANGLE_STRIP?b.geometry=Fp(b.geometry,Tf):p.mode===Cl.TRIANGLE_FAN&&(b.geometry=Fp(b.geometry,th));else if(p.mode===Cl.LINES)b=new Tl(f,B);else if(p.mode===Cl.LINE_STRIP)b=new Ps(f,B);else if(p.mode===Cl.LINE_LOOP)b=new uh(f,B);else if(p.mode===Cl.POINTS)b=new dh(f,B);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(b.geometry.morphAttributes).length>0&&AK(b,s),b.name=t.createUniqueName(s.name||"mesh_"+e),qg(b,s),p.extensions&&K1(l,b,p),t.assignFinalMaterial(b),u.push(b)}for(let A=0,m=u.length;A<m;A++)t.associations.set(u[A],{meshes:e,primitives:A});if(u.length===1)return u[0];const d=new Fs;t.associations.set(d,{meshes:e});for(let A=0,m=u.length;A<m;A++)d.add(u[A]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],l=n[n.type];if(!l){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Et(Of.radToDeg(l.yfov),l.aspectRatio||1,l.znear||1,l.zfar||2e6):n.type==="orthographic"&&(t=new Ll(-l.xmag,l.xmag,l.ymag,-l.ymag,l.znear,l.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),qg(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(l){return n.inverseBindMatrices=l,n})}loadAnimation(e){const n=this.json.animations[e],l=[],s=[],o=[],g=[],r=[];for(let I=0,C=n.channels.length;I<C;I++){const u=n.channels[I],d=n.samplers[u.sampler],A=u.target,m=A.node,f=n.parameters!==void 0?n.parameters[d.input]:d.input,p=n.parameters!==void 0?n.parameters[d.output]:d.output;l.push(this.getDependency("node",m)),s.push(this.getDependency("accessor",f)),o.push(this.getDependency("accessor",p)),g.push(d),r.push(A)}return Promise.all([Promise.all(l),Promise.all(s),Promise.all(o),Promise.all(g),Promise.all(r)]).then(function(I){const C=I[0],u=I[1],d=I[2],A=I[3],m=I[4],f=[];for(let b=0,B=C.length;b<B;b++){const y=C[b],Z=u[b],q=d[b],W=A[b],S=m[b];if(y===void 0)continue;y.updateMatrix();let x;switch(Bo[S.path]){case Bo.weights:x=wa;break;case Bo.rotation:x=Po;break;case Bo.position:case Bo.scale:default:x=Wa;break}const V=y.name?y.name:y.uuid,X=W.interpolation!==void 0?CK[W.interpolation]:nr,k=[];Bo[S.path]===Bo.weights?y.traverse(function(Q){Q.morphTargetInfluences&&k.push(Q.name?Q.name:Q.uuid)}):k.push(V);let $=q.array;if(q.normalized){const Q=$3($.constructor),E=new Float32Array($.length);for(let te=0,se=$.length;te<se;te++)E[te]=$[te]*Q;$=E}for(let Q=0,E=k.length;Q<E;Q++){const te=new x(k[Q]+"."+Bo[S.path],Z.array,$,X);W.interpolation==="CUBICSPLINE"&&(te.createInterpolant=function(oe){const R=this instanceof Po?cK:TG;return new R(this.times,this.values,this.getValueSize()/3,oe)},te.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),f.push(te)}}const p=n.name?n.name:"animation_"+e;return new Sa(p,void 0,f)})}createNodeMesh(e){const t=this.json,n=this,l=t.nodes[e];return l.mesh===void 0?null:n.getDependency("mesh",l.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,l.mesh,s);return l.weights!==void 0&&o.traverse(function(g){if(!!g.isMesh)for(let r=0,I=l.weights.length;r<I;r++)g.morphTargetInfluences[r]=l.weights[r]}),o})}loadNode(e){const t=this.json,n=this.extensions,l=this,s=t.nodes[e],o=s.name?l.createUniqueName(s.name):"";return function(){const g=[],r=l._invokeOne(function(I){return I.createNodeMesh&&I.createNodeMesh(e)});return r&&g.push(r),s.camera!==void 0&&g.push(l.getDependency("camera",s.camera).then(function(I){return l._getNodeRef(l.cameraCache,s.camera,I)})),l._invokeAll(function(I){return I.createNodeAttachment&&I.createNodeAttachment(e)}).forEach(function(I){g.push(I)}),Promise.all(g)}().then(function(g){let r;if(s.isBone===!0?r=new R2:g.length>1?r=new Fs:g.length===1?r=g[0]:r=new yt,r!==g[0])for(let I=0,C=g.length;I<C;I++)r.add(g[I]);if(s.name&&(r.userData.name=s.name,r.name=o),qg(r,s),s.extensions&&K1(n,r,s),s.matrix!==void 0){const I=new st;I.fromArray(s.matrix),r.applyMatrix4(I)}else s.translation!==void 0&&r.position.fromArray(s.translation),s.rotation!==void 0&&r.quaternion.fromArray(s.rotation),s.scale!==void 0&&r.scale.fromArray(s.scale);return l.associations.has(r)||l.associations.set(r,{}),l.associations.get(r).nodes=e,r})}loadScene(e){const t=this.json,n=this.extensions,l=this.json.scenes[e],s=this,o=new Fs;l.name&&(o.name=s.createUniqueName(l.name)),qg(o,l),l.extensions&&K1(n,o,l);const g=l.nodes||[],r=[];for(let I=0,C=g.length;I<C;I++)r.push(EG(g[I],o,t,s));return Promise.all(r).then(function(){const I=C=>{const u=new Map;for(const[d,A]of s.associations)(d instanceof vn||d instanceof un)&&u.set(d,A);return C.traverse(d=>{const A=s.associations.get(d);A!=null&&u.set(d,A)}),u};return s.associations=I(o),o})}}function EG(i,e,t,n){const l=t.nodes[i];return n.getDependency("node",i).then(function(s){if(l.skin===void 0)return s;let o;return n.getDependency("skin",l.skin).then(function(g){o=g;const r=[];for(let I=0,C=o.joints.length;I<C;I++)r.push(n.getDependency("node",o.joints[I]));return Promise.all(r)}).then(function(g){return s.traverse(function(r){if(!r.isMesh)return;const I=[],C=[];for(let u=0,d=g.length;u<d;u++){const A=g[u];if(A){I.push(A);const m=new st;o.inverseBindMatrices!==void 0&&m.fromArray(o.inverseBindMatrices.array,u*16),C.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}r.bind(new kI(I,C),r.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(l.children){const g=l.children;for(let r=0,I=g.length;r<I;r++){const C=g[r];o.push(EG(C,s,t,n))}}return Promise.all(o)})}function fK(i,e,t){const n=e.attributes,l=new eg;if(n.POSITION!==void 0){const g=t.json.accessors[n.POSITION],r=g.min,I=g.max;if(r!==void 0&&I!==void 0){if(l.set(new K(r[0],r[1],r[2]),new K(I[0],I[1],I[2])),g.normalized){const C=$3(VI[g.componentType]);l.min.multiplyScalar(C),l.max.multiplyScalar(C)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const g=new K,r=new K;for(let I=0,C=s.length;I<C;I++){const u=s[I];if(u.POSITION!==void 0){const d=t.json.accessors[u.POSITION],A=d.min,m=d.max;if(A!==void 0&&m!==void 0){if(r.setX(Math.max(Math.abs(A[0]),Math.abs(m[0]))),r.setY(Math.max(Math.abs(A[1]),Math.abs(m[1]))),r.setZ(Math.max(Math.abs(A[2]),Math.abs(m[2]))),d.normalized){const f=$3(VI[d.componentType]);r.multiplyScalar(f)}g.max(r)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}l.expandByVector(g)}i.boundingBox=l;const o=new tg;l.getCenter(o.center),o.radius=l.min.distanceTo(l.max)/2,i.boundingSphere=o}function Mp(i,e,t){const n=e.attributes,l=[];function s(o,g){return t.getDependency("accessor",o).then(function(r){i.setAttribute(g,r)})}for(const o in n){const g=j3[o]||o.toLowerCase();g in i.attributes||l.push(s(n[o],g))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(g){i.setIndex(g)});l.push(o)}return qg(i,e),fK(i,e,t),Promise.all(l).then(function(){return e.targets!==void 0?dK(i,e.targets,t):i})}function Fp(i,e){let t=i.getIndex();if(t===null){const o=[],g=i.getAttribute("position");if(g!==void 0){for(let r=0;r<g.count;r++)o.push(r);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,l=[];if(e===th)for(let o=1;o<=n;o++)l.push(t.getX(0)),l.push(t.getX(o)),l.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(l.push(t.getX(o)),l.push(t.getX(o+1)),l.push(t.getX(o+2))):(l.push(t.getX(o+2)),l.push(t.getX(o+1)),l.push(t.getX(o)));l.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(l),s}const bK={0:{ha:770,x_min:81,x_max:688,o:"m 688 412 q 612 95 688 203 q 386 -14 535 -14 q 161 93 239 -14 q 81 401 83 199 l 81 578 q 159 894 81 787 q 385 1001 236 1001 q 608 898 531 1001 q 688 593 686 794 l 688 412 m 607 589 q 552 845 607 758 q 385 932 496 932 q 219 847 275 932 q 162 597 163 762 l 162 403 q 219 144 162 234 q 386 55 277 55 q 550 142 494 55 q 607 399 606 230 l 607 589 z "},1:{ha:770,x_min:121,x_max:471,o:"m 471 0 l 389 0 l 389 890 l 121 790 l 121 866 l 457 991 l 471 991 l 471 0 z "},2:{ha:770,x_min:71,x_max:711,o:"m 711 0 l 93 0 l 93 62 l 431 446 q 548 606 515 543 q 581 729 581 669 q 526 877 581 823 q 374 932 471 932 q 213 868 275 932 q 152 703 152 804 l 71 703 q 109 854 71 786 q 216 962 146 923 q 374 1001 286 1001 q 586 930 510 1001 q 663 736 663 859 q 620 585 663 667 q 468 380 576 503 l 193 68 l 711 68 l 711 0 z "},3:{ha:770,x_min:66,x_max:686,o:"m 273 538 l 357 538 q 479 563 427 538 q 559 630 532 587 q 587 730 587 673 q 533 878 587 825 q 379 932 479 932 q 223 876 284 932 q 163 728 163 820 l 81 728 q 120 868 81 805 q 227 966 159 932 q 379 1001 296 1001 q 591 928 513 1001 q 668 727 668 854 q 623 596 668 656 q 499 506 578 536 q 639 417 591 480 q 686 268 686 355 q 604 64 686 141 q 382 -14 521 -14 q 221 22 294 -14 q 107 120 147 57 q 66 268 66 184 l 148 268 q 214 114 148 174 q 382 55 279 55 q 546 109 488 55 q 605 265 605 163 q 542 416 605 364 q 355 469 478 469 l 273 469 l 273 538 z "},4:{ha:770,x_min:45,x_max:745,o:"m 591 318 l 745 318 l 745 250 l 591 250 l 591 0 l 510 0 l 510 250 l 45 250 l 45 296 l 503 987 l 591 987 l 591 318 m 145 318 l 510 318 l 510 882 l 474 820 l 145 318 z "},5:{ha:770,x_min:114,x_max:709,o:"m 148 506 l 196 987 l 690 987 l 690 912 l 266 912 l 231 578 q 417 633 311 633 q 630 546 551 633 q 709 315 709 459 q 632 73 709 159 q 414 -14 555 -14 q 205 58 286 -14 q 114 260 125 130 l 192 260 q 260 107 203 159 q 414 55 317 55 q 574 122 520 55 q 628 313 628 189 q 568 490 628 422 q 403 559 507 559 q 302 544 345 559 q 212 488 260 530 l 148 506 z "},6:{ha:770,x_min:88,x_max:700,o:"m 572 995 l 572 924 l 562 924 q 283 820 385 924 q 171 530 182 715 q 275 617 212 587 q 416 648 338 648 q 623 558 546 648 q 700 323 700 469 q 664 150 700 227 q 561 30 628 73 q 408 -14 494 -14 q 177 89 266 -14 q 88 355 88 192 l 88 436 q 209 847 88 701 q 551 995 330 992 l 572 995 m 403 578 q 259 533 326 578 q 170 416 192 487 l 170 347 q 236 137 170 218 q 408 56 302 56 q 561 131 503 56 q 620 321 620 206 q 561 508 620 437 q 403 578 503 578 z "},7:{ha:770,x_min:52,x_max:701,o:"m 701 941 l 279 0 l 195 0 l 614 918 l 52 918 l 52 987 l 701 987 l 701 941 z "},8:{ha:770,x_min:72,x_max:701,o:"m 675 733 q 630 596 675 656 q 512 507 585 535 q 649 412 597 477 q 701 262 701 347 q 614 61 701 135 q 387 -14 528 -14 q 158 60 243 -14 q 72 262 72 134 q 121 412 72 346 q 257 507 171 477 q 140 596 184 535 q 97 733 97 656 q 176 928 97 856 q 385 1001 255 1001 q 595 928 515 1001 q 675 733 675 854 m 619 261 q 553 413 619 353 q 385 472 488 472 q 218 414 283 472 q 153 261 153 355 q 216 111 153 167 q 387 55 279 55 q 555 111 492 55 q 619 261 619 166 m 593 734 q 535 875 593 819 q 385 932 476 932 q 236 877 293 932 q 178 734 178 823 q 236 594 178 647 q 386 541 293 541 q 535 594 477 541 q 593 734 593 648 z "},9:{ha:770,x_min:68,x_max:681,o:"m 600 457 q 492 358 556 393 q 352 323 427 323 q 203 367 268 323 q 104 487 139 410 q 68 654 68 564 q 106 832 68 752 q 211 957 144 912 q 367 1001 279 1001 q 598 897 515 1001 q 681 602 681 793 l 681 528 q 567 127 681 261 q 219 -7 453 -7 l 204 -7 l 205 63 l 233 63 q 503 163 410 66 q 600 457 595 261 m 362 393 q 508 442 444 393 q 600 568 573 490 l 600 614 q 537 848 600 765 q 368 931 475 931 q 210 853 272 931 q 149 658 149 776 q 208 469 149 545 q 362 393 267 393 z "},"\0":{ha:0,x_min:0,x_max:0,o:""},"":{ha:0,x_min:0,x_max:0,o:""},"\r":{ha:338,x_min:0,x_max:0,o:""}," ":{ha:338,x_min:0,x_max:0,o:""},"!":{ha:313,x_min:104,x_max:216,o:"m 193 275 l 117 275 l 113 987 l 197 987 l 193 275 m 104 47 q 119 86 104 71 q 159 102 134 102 q 200 86 185 102 q 216 47 216 71 q 200 10 216 25 q 159 -5 185 -5 q 119 10 134 -5 q 104 47 104 25 z "},'"':{ha:399,x_min:97,x_max:325,o:"m 165 947 l 151 734 l 97 734 l 99 1042 l 165 1042 l 165 947 m 325 947 l 311 734 l 256 734 l 259 1042 l 325 1042 l 325 947 z "},"#":{ha:808,x_min:58,x_max:814,o:"m 511 278 l 298 278 l 245 0 l 178 0 l 231 278 l 58 278 l 58 341 l 242 341 l 298 640 l 109 640 l 109 705 l 311 705 l 364 987 l 431 987 l 378 705 l 591 705 l 645 987 l 713 987 l 659 705 l 814 705 l 814 640 l 647 640 l 591 341 l 764 341 l 764 278 l 578 278 l 526 0 l 458 0 l 511 278 m 309 341 l 523 341 l 579 640 l 366 640 l 309 341 z "},$:{ha:770,x_min:78,x_max:692,o:"m 611 243 q 562 367 611 319 q 390 457 513 414 q 175 571 237 505 q 113 743 113 637 q 181 922 113 853 q 366 1000 249 991 l 366 1137 l 435 1137 l 435 1000 q 620 911 554 989 q 685 697 685 832 l 604 697 q 549 866 604 804 q 398 929 494 929 q 248 879 302 929 q 194 744 194 828 q 243 617 194 663 q 412 531 293 571 q 585 453 531 490 q 666 366 639 416 q 692 245 692 315 q 623 65 692 134 q 432 -12 553 -3 l 432 -141 l 363 -141 l 363 -13 q 153 73 227 -4 q 78 283 78 150 l 159 283 q 221 118 159 178 q 393 58 283 58 q 550 109 490 58 q 611 243 611 161 z "},"%":{ha:1026,x_min:74,x_max:958,o:"m 74 798 q 129 944 74 886 q 267 1002 183 1002 q 406 944 351 1002 q 460 793 460 886 l 460 745 q 407 601 460 659 q 269 543 353 543 q 130 600 185 543 q 74 750 74 656 l 74 798 m 140 745 q 175 642 140 682 q 269 601 210 601 q 360 642 326 601 q 395 748 395 683 l 395 798 q 359 902 395 861 q 267 943 324 943 q 175 902 211 943 q 140 793 140 861 l 140 745 m 571 242 q 626 388 571 330 q 764 446 680 446 q 902 388 847 446 q 958 237 958 331 l 958 189 q 903 43 958 101 q 765 -14 848 -14 q 626 43 682 -14 q 571 193 571 100 l 571 242 m 636 189 q 671 85 636 125 q 765 44 706 44 q 858 85 823 44 q 892 193 892 126 l 892 242 q 857 347 892 307 q 764 387 822 387 q 671 347 707 387 q 636 239 636 307 l 636 189 m 294 82 l 243 115 l 726 886 l 777 854 l 294 82 z "},"&":{ha:854,x_min:73,x_max:835,o:"m 274 538 q 188 666 215 610 q 161 777 161 722 q 223 941 161 880 q 389 1001 285 1001 q 541 946 483 1001 q 600 808 600 892 q 487 616 600 710 l 378 532 l 650 216 q 711 441 711 315 l 787 441 q 700 157 787 273 l 835 0 l 737 0 l 652 99 q 528 16 598 46 q 380 -14 458 -14 q 156 59 239 -14 q 73 252 73 131 q 116 388 73 323 q 264 532 158 452 l 274 538 m 380 55 q 499 81 441 55 q 604 155 557 107 l 328 475 l 318 486 l 287 462 q 154 252 154 353 q 215 109 154 163 q 380 55 276 55 m 243 779 q 334 584 243 696 l 423 652 q 494 720 467 683 q 522 808 522 758 q 486 896 522 861 q 388 932 449 932 q 282 889 321 932 q 243 779 243 846 z "},"'":{ha:236,x_min:81,x_max:153,o:"m 153 946 l 142 739 l 81 739 q 84 1042 84 940 l 153 1042 l 153 946 z "},"(":{ha:443,x_min:95,x_max:421,o:"m 95 399 q 133 686 95 547 q 244 941 171 825 q 401 1107 317 1057 l 421 1052 q 332 959 376 1020 q 254 814 288 898 q 198 625 219 730 q 176 387 176 520 q 209 115 176 245 q 297 -116 241 -16 q 421 -267 353 -216 l 401 -319 q 242 -152 315 -267 q 132 101 169 -37 q 95 399 95 239 z "},")":{ha:452,x_min:22,x_max:349,o:"m 349 389 q 312 101 349 239 q 202 -151 275 -37 q 42 -319 130 -266 l 22 -267 q 145 -119 89 -219 q 235 113 202 -20 q 267 401 267 245 q 235 672 267 541 q 145 905 202 802 q 22 1055 87 1008 l 42 1107 q 200 940 127 1055 q 311 686 273 825 q 349 389 349 546 z "},"*":{ha:589,x_min:20,x_max:571,o:"m 245 678 l 20 751 l 41 820 l 267 736 l 264 987 l 334 987 l 329 734 l 549 821 l 571 752 l 345 674 l 496 475 l 439 432 l 294 639 l 155 433 l 98 475 l 245 678 z "},"+":{ha:784,x_min:51,x_max:728,o:"m 427 502 l 728 502 l 728 426 l 427 426 l 427 99 l 345 99 l 345 426 l 51 426 l 51 502 l 345 502 l 345 818 l 427 818 l 427 502 z "},",":{ha:266,x_min:41,x_max:184,o:"m 89 -184 l 41 -149 q 104 22 102 -66 l 104 127 l 184 127 l 184 43 q 89 -184 184 -98 z "},"-":{ha:397,x_min:33,x_max:358,o:"m 358 401 l 33 401 l 33 470 l 358 470 l 358 401 z "},".":{ha:332,x_min:98,x_max:214,o:"m 98 49 q 114 89 98 73 q 156 106 129 106 q 199 89 183 106 q 214 49 214 73 q 199 10 214 25 q 156 -5 183 -5 q 114 10 129 -5 q 98 49 98 25 z "},"/":{ha:551,x_min:20,x_max:506,o:"m 94 -85 l 20 -85 l 433 987 l 506 987 l 94 -85 z "},":":{ha:292,x_min:86,x_max:203,o:"m 86 49 q 101 89 86 73 q 144 106 117 106 q 186 89 171 106 q 202 49 202 73 q 186 10 202 25 q 144 -5 171 -5 q 101 10 117 -5 q 86 49 86 25 m 87 675 q 103 715 87 699 q 145 732 118 732 q 188 715 172 732 q 203 675 203 699 q 188 636 203 651 q 145 621 172 621 q 103 636 118 621 q 87 675 87 651 z "},";":{ha:271,x_min:41,x_max:196,o:"m 80 675 q 95 715 80 699 q 138 732 111 732 q 180 715 165 732 q 196 675 196 699 q 180 636 196 651 q 138 621 165 621 q 95 636 111 621 q 80 675 80 651 m 89 -184 l 41 -149 q 104 22 102 -66 l 104 127 l 184 127 l 184 43 q 89 -184 184 -98 z "},"<":{ha:710,x_min:52,x_max:613,o:"m 141 444 l 613 241 l 613 155 l 52 412 l 52 478 l 613 734 l 613 649 l 141 444 z "},"=":{ha:768,x_min:101,x_max:667,o:"m 667 562 l 101 562 l 101 634 l 667 634 l 667 562 m 667 283 l 101 283 l 101 355 l 667 355 l 667 283 z "},">":{ha:720,x_min:84,x_max:657,o:"m 566 447 l 84 652 l 84 736 l 657 479 l 657 414 l 84 157 l 84 241 l 566 447 z "},"?":{ha:631,x_min:57,x_max:572,o:"m 255 274 q 277 403 256 354 q 364 518 297 452 q 451 611 431 584 q 480 672 470 639 q 491 747 491 705 q 446 880 491 831 q 320 928 401 928 q 189 882 239 928 q 138 756 139 836 l 57 756 q 132 934 58 867 q 320 1001 206 1001 q 504 933 437 1001 q 572 748 572 865 q 538 611 572 675 q 412 461 505 547 q 336 274 336 397 l 255 274 m 244 47 q 259 86 244 71 q 300 102 273 102 q 341 86 326 102 q 356 47 356 71 q 341 10 356 25 q 300 -5 326 -5 q 259 10 273 -5 q 244 47 244 25 z "},"@":{ha:1268,x_min:77,x_max:1198,o:"m 1190 348 q 1153 163 1186 248 q 1061 32 1120 78 q 925 -14 1002 -14 q 818 21 859 -14 q 763 118 777 56 q 561 -14 690 -14 q 419 68 466 -14 q 385 290 372 151 q 435 487 395 400 q 540 622 475 573 q 679 670 605 670 q 770 655 731 670 q 862 597 810 641 l 827 210 q 847 88 821 132 q 933 45 874 45 q 1068 126 1017 45 q 1126 348 1120 208 q 1022 761 1139 623 q 667 900 905 900 q 409 828 524 900 q 227 626 294 757 q 153 324 161 495 q 198 23 144 153 q 358 -176 251 -106 q 614 -246 466 -246 q 737 -231 677 -246 q 838 -193 798 -216 l 859 -247 q 751 -290 821 -273 q 612 -307 682 -307 q 320 -231 442 -307 q 137 -11 198 -155 q 85 324 77 132 q 168 658 93 513 q 373 883 243 804 q 669 963 503 963 q 962 891 842 963 q 1140 680 1082 819 q 1190 348 1198 541 m 456 194 q 494 89 464 126 q 575 52 525 52 q 760 225 701 52 l 791 575 q 684 608 745 608 q 553 548 608 608 q 472 383 498 488 q 456 194 446 277 z "},A:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 z "},B:{ha:851,x_min:125,x_max:774,o:"m 125 0 l 125 987 l 416 987 q 657 922 575 987 q 739 729 739 857 q 697 596 739 652 q 583 515 656 539 q 722 430 669 496 q 774 278 774 364 q 690 74 774 147 q 455 0 606 0 l 125 0 m 208 475 l 208 71 l 458 71 q 628 125 566 71 q 691 277 691 180 q 631 421 691 368 q 465 475 571 475 l 208 475 m 208 545 l 436 545 q 598 594 541 547 q 655 731 655 641 q 596 871 655 826 q 416 916 536 916 l 208 916 l 208 545 z "},C:{ha:902,x_min:89,x_max:824,o:"m 824 308 q 712 69 807 152 q 460 -14 618 -14 q 266 41 351 -14 q 136 197 182 96 q 89 427 90 298 l 89 555 q 135 789 89 687 q 268 946 181 890 q 467 1001 354 1001 q 717 915 625 1001 q 824 678 809 829 l 740 678 q 467 930 709 930 q 253 829 332 930 q 173 552 173 729 l 173 431 q 251 159 173 260 q 460 57 328 57 q 658 120 591 57 q 740 308 724 182 l 824 308 z "},D:{ha:909,x_min:125,x_max:823,o:"m 125 0 l 125 987 l 401 987 q 618 932 522 987 q 769 774 715 877 q 823 539 823 671 l 823 448 q 769 214 823 316 q 618 56 715 111 q 395 0 521 0 l 125 0 m 208 916 l 208 71 l 395 71 q 646 174 551 71 q 740 454 740 277 l 740 541 q 647 813 740 711 q 402 916 554 916 l 208 916 z "},E:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 z "},F:{ha:781,x_min:125,x_max:736,o:"m 669 461 l 208 461 l 208 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 532 l 669 532 l 669 461 z "},G:{ha:949,x_min:98,x_max:838,o:"m 838 117 q 702 21 794 56 q 494 -14 609 -14 q 288 42 378 -14 q 149 199 198 98 q 98 433 99 301 l 98 557 q 202 882 98 763 q 481 1001 306 1001 q 726 923 633 1001 q 837 709 819 846 l 753 709 q 665 874 735 818 q 481 930 595 930 q 262 831 343 930 q 182 554 182 733 l 182 437 q 220 238 182 325 q 330 104 258 152 q 494 57 401 57 q 680 91 602 57 q 754 143 730 113 l 754 398 l 489 398 l 489 469 l 838 469 l 838 117 z "},H:{ha:983,x_min:125,x_max:857,o:"m 857 0 l 772 0 l 772 473 l 208 473 l 208 0 l 125 0 l 125 987 l 208 987 l 208 544 l 772 544 l 772 987 l 857 987 l 857 0 z "},I:{ha:370,x_min:143,x_max:227,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 z "},J:{ha:764,x_min:48,x_max:645,o:"m 561 987 l 645 987 l 645 294 q 564 70 645 153 q 347 -14 483 -14 q 125 62 203 -14 q 48 272 48 137 l 132 272 q 188 111 132 165 q 347 57 244 57 q 500 119 441 57 q 561 289 559 182 l 561 987 z "},K:{ha:876,x_min:125,x_max:851,o:"m 347 490 l 208 353 l 208 0 l 125 0 l 125 987 l 208 987 l 208 455 l 714 987 l 819 987 l 406 548 l 851 0 l 749 0 l 347 490 z "},L:{ha:732,x_min:125,x_max:696,o:"m 209 71 l 696 71 l 696 0 l 125 0 l 125 987 l 209 987 l 209 71 z "},M:{ha:1202,x_min:125,x_max:1076,o:"m 235 987 l 600 116 l 965 987 l 1076 987 l 1076 0 l 993 0 l 993 430 l 1000 871 l 632 0 l 568 0 l 201 867 l 208 433 l 208 0 l 125 0 l 125 987 l 235 987 z "},N:{ha:986,x_min:125,x_max:860,o:"m 860 0 l 777 0 l 209 845 l 209 0 l 125 0 l 125 987 l 209 987 l 777 142 l 777 987 l 860 987 l 860 0 z "},O:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 z "},P:{ha:855,x_min:125,x_max:793,o:"m 208 402 l 208 0 l 125 0 l 125 987 l 461 987 q 704 909 615 987 q 793 692 793 830 q 708 478 793 553 q 459 402 622 402 l 208 402 m 208 473 l 461 473 q 646 530 583 473 q 710 691 710 588 q 647 854 710 793 q 467 916 583 915 l 208 916 l 208 473 z "},Q:{ha:940,x_min:82,x_max:852,o:"m 852 440 q 802 194 852 299 q 660 36 752 90 l 840 -121 l 782 -172 l 581 2 q 467 -14 525 -14 q 267 42 355 -14 q 131 200 179 98 q 82 435 83 302 l 82 546 q 130 785 82 681 q 265 945 178 889 q 466 1001 353 1001 q 669 945 581 1001 q 804 786 756 890 q 852 547 852 682 l 852 440 m 768 547 q 688 827 768 726 q 466 928 607 928 q 247 826 329 928 q 165 543 165 725 l 165 440 q 247 162 165 264 q 467 59 328 59 q 688 160 608 59 q 768 442 768 261 l 768 547 z "},R:{ha:882,x_min:123,x_max:821,o:"m 494 411 l 207 411 l 207 0 l 123 0 l 123 987 l 444 987 q 690 911 602 987 q 779 696 779 834 q 724 529 779 602 q 574 429 668 456 l 821 9 l 821 0 l 732 0 l 494 411 m 207 482 l 463 482 q 631 542 568 482 q 695 696 695 602 q 629 859 695 801 q 442 916 562 916 l 207 916 l 207 482 z "},S:{ha:823,x_min:60,x_max:768,o:"m 684 243 q 626 373 684 325 q 415 464 568 420 q 191 557 262 507 q 91 746 91 629 q 184 930 91 859 q 422 1001 277 1001 q 598 963 521 1001 q 719 857 676 925 q 762 706 762 789 l 677 706 q 608 868 677 807 q 422 930 539 930 q 242 879 309 930 q 175 747 175 829 q 235 625 175 672 q 429 541 296 577 q 630 466 562 505 q 733 372 699 427 q 768 244 768 318 q 674 57 768 127 q 429 -14 581 -14 q 237 24 324 -14 q 105 128 150 61 q 60 282 60 195 l 143 282 q 221 117 143 178 q 429 57 299 57 q 614 108 544 57 q 684 243 684 159 z "},T:{ha:829,x_min:35,x_max:795,o:"m 795 916 l 456 916 l 456 0 l 373 0 l 373 916 l 35 916 l 35 987 l 795 987 l 795 916 z "},U:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 z "},V:{ha:857,x_min:21,x_max:836,o:"m 422 122 l 428 101 l 434 122 l 745 987 l 836 987 l 469 0 l 389 0 l 21 987 l 112 987 l 422 122 z "},W:{ha:1245,x_min:41,x_max:1209,o:"m 307 267 l 338 113 l 375 260 l 589 987 l 665 987 l 876 260 l 913 112 l 945 267 l 1124 987 l 1209 987 l 956 0 l 876 0 l 652 772 l 627 870 l 603 772 l 374 0 l 294 0 l 41 987 l 127 987 l 307 267 z "},X:{ha:850,x_min:37,x_max:813,o:"m 425 570 l 703 987 l 803 987 l 476 500 l 813 0 l 713 0 l 425 431 l 136 0 l 37 0 l 375 500 l 47 987 l 147 987 l 425 570 z "},Y:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 z "},Z:{ha:831,x_min:61,x_max:772,o:"m 162 71 l 772 71 l 772 0 l 61 0 l 61 63 l 647 916 l 79 916 l 79 987 l 750 987 l 750 928 l 162 71 z "},"[":{ha:333,x_min:111,x_max:334,o:"m 334 1059 l 192 1059 l 192 -142 l 334 -142 l 334 -212 l 111 -212 l 111 1128 l 334 1128 l 334 1059 z "},"\\":{ha:547,x_min:33,x_max:524,o:"m 33 987 l 112 987 l 524 -85 l 445 -85 l 33 987 z "},"]":{ha:333,x_min:0,x_max:224,o:"m 0 1128 l 224 1128 l 224 -212 l 0 -212 l 0 -142 l 143 -142 l 143 1059 l 0 1059 l 0 1128 z "},"^":{ha:578,x_min:52,x_max:518,o:"m 286 880 l 131 494 l 52 494 l 255 987 l 316 987 l 518 494 l 439 494 l 286 880 z "},_:{ha:600,x_min:1,x_max:598,o:"m 598 -68 l 1 -68 l 1 0 l 598 0 l 598 -68 z "},"`":{ha:397,x_min:70,x_max:297,o:"m 297 852 l 223 852 l 70 1042 l 168 1042 l 297 852 z "},a:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 z "},b:{ha:770,x_min:105,x_max:696,o:"m 696 359 q 621 87 696 188 q 416 -14 545 -14 q 184 100 263 -14 l 181 0 l 105 0 l 105 1042 l 186 1042 l 186 627 q 415 747 263 747 q 621 648 545 747 q 696 372 696 549 l 696 359 m 615 374 q 559 598 615 519 q 400 677 503 677 q 268 638 322 677 q 186 526 214 600 l 186 195 q 401 57 247 57 q 558 136 502 57 q 615 374 615 216 z "},c:{ha:715,x_min:64,x_max:659,o:"m 377 55 q 519 103 462 55 q 581 227 576 151 l 659 227 q 617 104 656 159 q 514 18 578 49 q 377 -14 450 -14 q 148 87 233 -14 q 64 357 64 187 l 64 381 q 102 573 64 490 q 211 702 140 656 q 376 747 281 747 q 575 675 497 747 q 659 486 654 604 l 581 486 q 519 625 576 572 q 376 678 463 678 q 206 599 267 678 q 145 376 145 519 l 145 353 q 206 134 145 212 q 377 55 267 55 z "},d:{ha:772,x_min:73,x_max:664,o:"m 73 374 q 150 646 73 545 q 357 747 226 747 q 583 630 505 747 l 583 1042 l 664 1042 l 664 0 l 588 0 l 585 98 q 355 -14 507 -14 q 151 89 229 -14 q 73 364 73 191 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 189 520 57 l 583 534 q 372 677 520 677 q 212 596 269 677 q 155 359 155 516 z "},e:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 z "},f:{ha:460,x_min:43,x_max:467,o:"m 164 0 l 164 667 l 43 667 l 43 734 l 164 734 l 164 823 q 221 996 164 935 q 381 1056 279 1056 q 467 1044 427 1056 l 461 977 q 387 985 427 985 q 283 943 320 985 q 245 825 245 901 l 245 734 l 420 734 l 420 667 l 245 667 l 245 0 l 164 0 z "},g:{ha:770,x_min:73,x_max:665,o:"m 73 374 q 150 647 73 546 q 357 747 226 747 q 585 628 507 747 l 589 734 l 665 734 l 665 15 q 585 -210 665 -127 q 370 -292 506 -292 q 224 -258 294 -292 q 115 -167 155 -224 l 160 -118 q 365 -224 246 -224 q 524 -164 467 -224 q 583 3 581 -104 l 583 95 q 355 -14 505 -14 q 151 88 228 -14 q 73 363 73 190 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 191 520 57 l 583 532 q 500 640 554 603 q 372 677 447 677 q 212 596 269 677 q 155 359 155 516 z "},h:{ha:762,x_min:106,x_max:659,o:"m 186 610 q 289 711 227 675 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 1042 l 186 1042 l 186 610 z "},i:{ha:311,x_min:101,x_max:213,o:"m 197 0 l 115 0 l 115 734 l 197 734 l 197 0 m 101 946 q 116 985 101 969 q 157 1001 131 1001 q 198 985 182 1001 q 213 946 213 969 q 198 907 213 923 q 157 892 182 892 q 116 907 131 892 q 101 946 101 923 z "},j:{ha:317,x_min:-71,x_max:210,o:"m 193 734 l 193 -87 q 144 -243 193 -189 q 1 -296 96 -296 q -71 -283 -36 -296 l -69 -216 q -8 -225 -39 -225 q 113 -86 113 -225 l 113 734 l 193 734 m 153 1001 q 195 985 180 1001 q 210 946 210 969 q 195 907 210 923 q 153 892 180 892 q 113 907 127 892 q 98 946 98 923 q 113 985 98 969 q 153 1001 127 1001 z "},k:{ha:680,x_min:106,x_max:674,o:"m 280 370 l 187 280 l 187 0 l 106 0 l 106 1042 l 187 1042 l 187 375 l 264 458 l 545 734 l 647 734 l 336 425 l 674 0 l 577 0 l 280 370 z "},l:{ha:311,x_min:115,x_max:197,o:"m 197 0 l 115 0 l 115 1042 l 197 1042 l 197 0 z "},m:{ha:1231,x_min:102,x_max:1131,o:"m 180 734 l 182 614 q 284 714 223 681 q 420 747 345 747 q 640 605 593 747 q 745 710 680 673 q 890 747 811 747 q 1131 490 1126 747 l 1131 0 l 1050 0 l 1050 484 q 1007 629 1049 582 q 871 677 966 677 q 724 620 784 675 q 656 486 663 565 l 656 0 l 575 0 l 575 490 q 531 630 574 584 q 396 677 487 677 q 264 633 319 677 q 183 503 210 589 l 183 0 l 102 0 l 102 734 l 180 734 z "},n:{ha:763,x_min:106,x_max:659,o:"m 183 734 l 186 608 q 289 712 227 676 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 734 l 183 734 z "},o:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 z "},p:{ha:770,x_min:105,x_max:696,o:"m 696 359 q 620 87 696 188 q 416 -14 544 -14 q 186 92 266 -14 l 186 -282 l 105 -282 l 105 734 l 180 734 l 184 630 q 414 747 264 747 q 621 648 546 747 q 696 371 696 548 l 696 359 m 614 374 q 557 595 614 514 q 396 677 499 677 q 268 641 321 677 q 186 536 214 605 l 186 184 q 269 88 215 121 q 397 55 323 55 q 557 137 500 55 q 614 374 614 218 z "},q:{ha:774,x_min:73,x_max:664,o:"m 73 374 q 150 647 73 546 q 358 747 226 747 q 584 634 507 747 l 588 734 l 664 734 l 664 -282 l 583 -282 l 583 91 q 357 -14 503 -14 q 151 88 228 -14 q 73 363 73 190 l 73 374 m 155 359 q 213 136 155 217 q 372 55 270 55 q 583 182 517 55 l 583 541 q 498 643 552 607 q 373 678 444 678 q 213 597 271 678 q 155 359 155 516 z "},r:{ha:467,x_min:106,x_max:447,o:"m 445 665 q 390 669 419 669 q 261 627 314 669 q 186 504 209 585 l 186 0 l 106 0 l 106 734 l 185 734 l 186 617 q 393 747 251 747 q 447 739 427 747 l 445 665 z "},s:{ha:703,x_min:68,x_max:627,o:"m 545 186 q 497 283 545 247 q 351 341 448 320 q 199 388 253 361 q 119 454 145 415 q 93 547 93 492 q 165 691 93 634 q 351 747 238 747 q 548 687 474 747 q 623 528 623 626 l 541 528 q 487 635 541 593 q 351 678 433 678 q 223 643 271 678 q 174 550 174 607 q 215 465 174 495 q 362 410 255 435 q 522 356 469 385 q 601 288 575 328 q 627 191 627 248 q 552 42 627 98 q 356 -14 477 -14 q 148 48 228 -14 q 68 205 68 111 l 150 205 q 210 95 155 134 q 356 55 265 55 q 493 92 441 55 q 545 186 545 130 z "},t:{ha:446,x_min:16,x_max:397,o:"m 232 922 l 232 734 l 384 734 l 384 667 l 232 667 l 232 178 q 254 87 232 117 q 328 58 276 58 q 393 64 348 58 l 397 -2 q 310 -14 365 -14 q 189 35 227 -14 q 151 178 151 83 l 151 667 l 16 667 l 16 734 l 151 734 l 151 922 l 232 922 z "},u:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 z "},v:{ha:668,x_min:26,x_max:641,o:"m 334 112 l 557 734 l 641 734 l 367 0 l 301 0 l 26 734 l 109 734 l 334 112 z "},w:{ha:1047,x_min:43,x_max:999,o:"m 281 169 l 294 106 l 310 172 l 486 734 l 555 734 l 730 177 l 749 100 l 764 171 l 915 734 l 999 734 l 785 0 l 716 0 l 528 582 l 519 622 l 510 581 l 325 0 l 256 0 l 43 734 l 126 734 l 281 169 z "},x:{ha:675,x_min:33,x_max:642,o:"m 336 436 l 534 734 l 631 734 l 382 374 l 642 0 l 546 0 l 337 311 l 128 0 l 33 0 l 292 374 l 43 734 l 138 734 l 336 436 z "},y:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 z "},z:{ha:675,x_min:59,x_max:636,o:"m 159 68 l 636 68 l 636 0 l 59 0 l 59 60 l 504 664 l 73 664 l 73 734 l 606 734 l 606 673 l 159 68 z "},"{":{ha:458,x_min:46,x_max:452,o:"m 432 -274 q 260 -163 318 -240 q 203 40 203 -87 l 203 190 q 46 368 203 368 l 46 439 q 203 616 203 439 l 203 771 q 260 972 203 895 q 432 1083 317 1048 l 450 1029 q 284 764 284 977 l 284 620 q 159 404 284 453 q 284 188 284 351 l 284 33 q 452 -220 287 -165 l 432 -274 z "},"|":{ha:307,x_min:121,x_max:189,o:"m 189 -183 l 121 -183 l 121 987 l 189 987 l 189 -183 z "},"}":{ha:458,x_min:6,x_max:412,o:"m 6 -220 q 174 33 171 -165 l 174 185 q 304 403 174 357 q 174 619 174 449 l 174 764 q 8 1029 174 978 l 26 1083 q 198 971 142 1048 q 255 767 255 893 l 255 616 q 412 439 255 439 l 412 368 q 255 190 255 368 l 255 40 q 197 -163 255 -87 q 26 -274 140 -240 l 6 -220 z "},"~":{ha:951,x_min:98,x_max:850,o:"m 850 518 q 794 352 850 417 q 650 287 737 287 q 558 306 601 287 q 454 379 516 324 q 363 447 393 433 q 299 461 333 461 q 205 421 239 461 q 172 305 172 381 l 98 304 q 153 470 98 406 q 299 534 208 534 q 394 513 349 534 q 502 436 439 492 q 580 376 547 393 q 650 359 612 359 q 745 401 709 359 q 780 518 780 444 l 850 518 z "},"\xA1":{ha:307,x_min:95,x_max:207,o:"m 118 468 l 193 468 l 198 -243 l 114 -243 l 118 468 m 207 693 q 192 654 207 670 q 151 639 177 639 q 110 654 125 639 q 95 693 95 670 q 110 732 95 716 q 151 747 125 747 q 192 732 177 747 q 207 693 207 716 z "},"\xA2":{ha:756,x_min:81,x_max:676,o:"m 394 55 q 535 102 477 55 q 598 227 592 149 l 676 227 q 601 66 671 132 q 431 -12 532 -1 l 431 -166 l 350 -166 l 350 -11 q 153 102 224 5 q 81 357 81 199 l 81 381 q 152 630 81 532 q 350 745 224 729 l 350 894 l 431 894 l 431 745 q 604 663 536 734 q 676 486 672 592 l 598 486 q 536 625 593 572 q 393 678 479 678 q 223 599 283 678 q 162 376 162 519 l 162 353 q 223 134 162 212 q 394 55 283 55 z "},"\xA3":{ha:793,x_min:63,x_max:742,o:"m 274 437 l 280 250 q 237 71 281 132 l 742 71 l 742 0 l 66 0 l 66 71 l 132 71 q 184 143 167 79 q 197 249 198 193 l 191 437 l 63 437 l 63 508 l 188 508 l 182 705 q 257 921 182 840 q 457 1001 332 1001 q 652 929 581 1001 q 724 738 724 858 l 640 738 q 589 880 640 829 q 451 930 538 930 q 316 870 366 930 q 266 705 266 810 l 272 508 l 505 508 l 505 437 l 274 437 z "},"\xA4":{ha:1004,x_min:74,x_max:932,o:"m 767 90 q 646 14 714 41 q 502 -14 578 -14 q 237 90 349 -14 l 132 -18 l 74 41 l 182 150 q 98 412 98 264 q 188 682 98 566 l 74 798 l 132 857 l 245 742 q 502 837 357 837 q 759 741 647 837 l 874 858 l 932 798 l 817 680 q 905 412 905 564 q 822 152 905 267 l 932 41 l 874 -18 l 767 90 m 174 412 q 218 237 174 319 q 338 109 262 156 q 502 62 415 62 q 665 109 589 62 q 785 238 741 157 q 828 412 828 319 q 784 588 828 507 q 664 715 739 669 q 502 761 589 761 q 339 715 415 761 q 219 588 263 669 q 174 412 174 507 z "},"\xA5":{ha:716,x_min:16,x_max:699,o:"m 357 496 l 605 987 l 699 987 l 428 478 l 640 478 l 640 418 l 397 418 l 397 279 l 640 279 l 640 220 l 397 220 l 397 0 l 314 0 l 314 220 l 74 220 l 74 279 l 314 279 l 314 418 l 74 418 l 74 478 l 286 478 l 16 987 l 111 987 l 357 496 z "},"\xA6":{ha:301,x_min:108,x_max:189,o:"m 108 -183 l 108 340 l 189 340 l 189 -183 l 108 -183 m 189 473 l 108 473 l 108 987 l 189 987 l 189 473 z "},"\xA7":{ha:840,x_min:69,x_max:759,o:"m 759 292 q 717 177 759 224 q 602 108 675 130 q 696 28 663 75 q 729 -94 729 -20 q 644 -271 729 -205 q 411 -336 558 -336 q 272 -317 337 -336 q 160 -259 206 -298 q 69 -43 69 -182 l 151 -42 q 221 -207 151 -148 q 411 -267 291 -267 q 583 -219 519 -267 q 647 -96 647 -172 q 624 -12 647 -43 q 546 47 600 20 q 372 106 492 73 q 193 173 252 138 q 103 257 134 208 q 73 374 73 305 q 113 489 73 441 q 224 559 153 537 q 135 639 166 591 q 104 760 104 686 q 191 935 104 869 q 423 1001 279 1001 q 660 924 575 1001 q 744 709 744 848 l 663 709 q 597 870 663 808 q 423 932 532 932 q 248 885 311 932 q 185 761 185 839 q 206 675 185 707 q 279 618 227 644 q 438 562 330 592 q 635 492 571 527 q 729 409 699 457 q 759 292 759 361 m 308 523 q 195 475 235 514 q 155 375 155 435 q 179 286 155 319 q 257 228 203 254 q 450 164 312 202 l 512 145 q 633 193 588 154 q 677 290 677 232 q 632 397 677 357 q 469 475 587 437 l 308 523 z "},"\xA8":{ha:597,x_min:93,x_max:502,o:"m 93 947 q 108 986 93 970 q 149 1002 123 1002 q 190 986 174 1002 q 205 947 205 970 q 190 909 205 924 q 149 893 174 893 q 108 909 123 893 q 93 947 93 924 m 390 946 q 405 985 390 969 q 446 1001 420 1001 q 487 985 471 1001 q 502 946 502 969 q 487 908 502 924 q 446 892 471 892 q 405 908 420 892 q 390 946 390 924 z "},"\xA9":{ha:1110,x_min:73,x_max:1035,o:"m 760 412 q 705 254 760 309 q 547 199 649 199 q 384 271 446 199 q 321 465 321 342 l 321 526 q 384 716 321 644 q 547 789 446 789 q 705 734 648 789 q 761 576 761 680 l 694 576 q 547 728 694 728 q 432 673 475 728 q 389 523 389 618 l 389 461 q 431 315 389 370 q 547 260 474 260 q 656 296 619 260 q 693 412 693 332 l 760 412 m 130 494 q 185 271 130 375 q 340 105 241 166 q 554 44 440 44 q 766 104 667 44 q 921 269 864 165 q 977 494 977 373 q 921 719 977 615 q 766 882 865 822 q 554 942 667 942 q 338 880 438 942 q 184 715 239 819 q 130 494 130 612 m 73 494 q 136 749 73 631 q 312 933 199 866 q 554 1001 424 1001 q 796 933 684 1001 q 971 749 908 866 q 1035 494 1035 631 q 974 244 1035 361 q 801 57 913 127 q 554 -14 688 -14 q 308 56 420 -14 q 134 243 196 126 q 73 494 73 359 z "},\u00AA:{ha:614,x_min:106,x_max:515,o:"m 440 478 q 426 542 430 507 q 275 469 367 469 q 151 508 196 469 q 106 616 106 548 q 163 732 106 690 q 330 773 220 773 l 424 773 l 424 814 q 397 904 424 872 q 315 936 370 936 q 219 912 254 936 q 184 839 184 888 l 111 843 q 168 957 111 912 q 315 1001 224 1001 q 448 952 399 1001 q 498 813 498 904 l 498 600 q 515 478 498 537 l 440 478 m 289 533 q 364 553 325 533 q 424 604 403 574 l 424 718 l 336 718 q 180 618 180 718 q 289 533 180 533 z "},"\xAB":{ha:633,x_min:83,x_max:564,o:"m 168 363 l 355 100 l 283 100 l 83 357 l 83 370 l 283 627 l 355 627 l 168 363 m 377 363 l 564 100 l 493 100 l 293 357 l 293 370 l 493 627 l 564 627 l 377 363 z "},"\xAC":{ha:758,x_min:84,x_max:635,o:"m 635 262 l 553 262 l 553 454 l 84 454 l 84 526 l 635 526 l 635 262 z "},"\xAE":{ha:1114,x_min:69,x_max:1032,o:"m 69 494 q 133 749 69 631 q 308 933 196 866 q 551 1001 420 1001 q 793 933 681 1001 q 969 749 905 866 q 1032 494 1032 631 q 970 243 1032 359 q 797 56 909 126 q 551 -14 684 -14 q 305 56 417 -14 q 131 243 193 126 q 69 494 69 359 m 127 494 q 183 269 127 373 q 339 104 240 164 q 551 44 437 44 q 763 104 664 44 q 918 269 862 164 q 974 494 974 374 q 919 717 974 614 q 765 881 864 820 q 551 942 667 942 q 338 882 437 942 q 183 719 239 822 q 127 494 127 615 m 441 452 l 441 218 l 374 218 l 374 787 l 549 787 q 703 745 649 787 q 756 618 756 703 q 661 485 756 528 q 728 430 709 467 q 747 342 747 393 q 750 267 747 290 q 759 229 753 244 l 759 218 l 690 218 q 680 341 680 242 q 655 427 680 401 q 568 452 629 452 l 441 452 m 441 513 l 564 513 q 654 542 618 513 q 690 617 690 570 q 660 700 690 675 q 559 726 631 724 l 441 726 l 441 513 z "},"\xAF":{ha:593,x_min:93,x_max:513,o:"m 513 911 l 93 911 l 93 977 l 513 977 l 513 911 z "},"\xB0":{ha:525,x_min:97,x_max:427,o:"m 427 831 q 379 713 427 761 q 263 665 331 665 q 146 713 195 665 q 97 831 97 762 q 146 951 97 901 q 263 1001 196 1001 q 379 951 330 1001 q 427 831 427 901 m 158 831 q 188 756 158 786 q 263 726 218 726 q 337 756 308 726 q 366 831 366 786 q 337 909 366 878 q 263 939 308 939 q 189 909 219 939 q 158 831 158 878 z "},"\xB1":{ha:736,x_min:57,x_max:678,o:"m 413 562 l 678 562 l 678 493 l 413 493 l 413 196 l 338 196 l 338 493 l 57 493 l 57 562 l 338 562 l 338 859 l 413 859 l 413 562 m 653 0 l 87 0 l 87 68 l 653 68 l 653 0 z "},"\xB2":{ha:502,x_min:52,x_max:452,o:"m 452 451 l 65 451 l 65 502 l 282 715 q 354 839 354 789 q 327 908 354 882 q 245 934 299 934 q 155 904 186 934 q 123 824 123 873 l 52 824 q 105 945 52 897 q 244 994 159 994 q 378 951 330 994 q 426 840 426 909 q 346 689 426 772 l 309 652 l 155 510 l 452 510 l 452 451 z "},"\xB3":{ha:502,x_min:48,x_max:441,o:"m 181 751 l 239 751 q 327 777 294 752 q 359 842 359 801 q 330 909 359 884 q 245 934 300 934 q 161 909 194 934 q 129 844 129 884 l 58 844 q 111 951 58 909 q 245 994 164 994 q 381 953 332 994 q 431 843 431 912 q 405 773 431 805 q 332 725 379 741 q 441 597 441 696 q 388 486 441 528 q 246 444 334 444 q 103 487 159 444 q 48 600 48 530 l 120 600 q 156 530 120 557 q 248 503 191 503 q 339 528 307 503 q 370 599 370 554 q 231 695 370 695 l 181 695 l 181 751 z "},"\xB4":{ha:391,x_min:84,x_max:312,o:"m 214 1042 l 312 1042 l 155 852 l 84 852 l 214 1042 z "},\u00B5:{ha:773,x_min:110,x_max:664,o:"m 191 734 l 191 302 q 233 118 191 180 q 369 55 276 55 q 511 94 458 55 q 583 212 563 133 l 583 734 l 664 734 l 664 0 l 590 0 l 585 104 q 374 -14 519 -14 q 191 71 250 -14 l 191 -282 l 110 -282 l 110 734 l 191 734 z "},"\xB6":{ha:660,x_min:56,x_max:543,o:"m 462 0 l 462 353 l 389 353 q 212 392 287 353 q 96 504 136 431 q 56 670 56 576 q 146 901 56 814 q 391 987 237 987 l 543 987 l 543 0 l 462 0 z "},"\xB7":{ha:341,x_min:111,x_max:226,o:"m 111 486 q 125 526 111 510 q 168 543 140 543 q 210 526 195 543 q 226 486 226 510 q 210 447 226 463 q 168 431 195 431 q 125 447 140 431 q 111 486 111 463 z "},"\xB8":{ha:338,x_min:66,x_max:271,o:"m 167 0 l 159 -43 q 271 -159 271 -58 q 217 -258 271 -222 q 71 -295 163 -295 l 66 -242 q 165 -220 127 -242 q 203 -161 203 -198 q 174 -106 203 -121 q 84 -86 144 -92 l 104 0 l 167 0 z "},"\xB9":{ha:502,x_min:85,x_max:315,o:"m 315 451 l 243 451 l 243 901 l 85 853 l 85 914 l 305 987 l 315 987 l 315 451 z "},\u00BA:{ha:625,x_min:92,x_max:530,o:"m 92 768 q 152 936 92 871 q 311 1001 212 1001 q 470 936 410 1001 q 530 764 530 871 l 530 701 q 471 532 530 597 q 312 468 411 468 q 152 532 212 468 q 92 704 92 596 l 92 768 m 165 701 q 203 578 165 623 q 312 532 241 532 q 418 577 379 532 q 457 703 457 622 l 457 768 q 418 891 457 846 q 311 936 378 936 q 204 890 243 936 q 165 764 165 844 l 165 701 z "},"\xBB":{ha:629,x_min:78,x_max:566,o:"m 150 640 l 350 380 l 350 367 l 150 110 l 78 110 l 265 373 l 78 640 l 150 640 m 366 640 l 566 380 l 566 367 l 366 110 l 294 110 l 481 373 l 294 640 l 366 640 z "},"\xBC":{ha:1006,x_min:78,x_max:949,o:"m 307 450 l 235 450 l 235 900 l 78 852 l 78 913 l 298 986 l 307 986 l 307 450 m 281 87 l 231 120 l 713 892 l 763 859 l 281 87 m 863 186 l 949 186 l 949 127 l 863 127 l 863 0 l 791 0 l 791 127 l 521 127 l 518 172 l 787 535 l 863 535 l 863 186 m 595 186 l 791 186 l 791 447 l 770 413 l 595 186 z "},"\xBD":{ha:1050,x_min:68,x_max:974,o:"m 251 87 l 201 120 l 683 892 l 733 859 l 251 87 m 297 450 l 225 450 l 225 900 l 68 852 l 68 913 l 288 986 l 297 986 l 297 450 m 974 0 l 587 0 l 587 51 l 804 264 q 876 388 876 338 q 848 457 876 431 q 767 483 821 483 q 676 453 708 483 q 644 373 644 422 l 573 373 q 627 494 573 446 q 766 543 680 543 q 899 500 851 543 q 947 389 947 458 q 867 238 947 321 l 830 201 l 677 59 l 974 59 l 974 0 z "},"\xBE":{ha:1078,x_min:80,x_max:1027,o:"m 378 87 l 328 120 l 810 892 l 861 859 l 378 87 m 941 186 l 1027 186 l 1027 127 l 941 127 l 941 0 l 869 0 l 869 127 l 599 127 l 596 172 l 865 535 l 941 535 l 941 186 m 673 186 l 869 186 l 869 447 l 848 413 l 673 186 m 213 751 l 271 751 q 358 777 326 752 q 391 842 391 801 q 361 909 391 884 q 277 934 332 934 q 193 909 226 934 q 161 844 161 884 l 90 844 q 143 951 90 909 q 277 994 196 994 q 413 953 363 994 q 463 843 463 912 q 437 773 463 805 q 363 725 411 741 q 473 597 473 696 q 420 486 473 528 q 278 444 366 444 q 135 487 191 444 q 80 600 80 530 l 152 600 q 188 530 152 557 q 280 503 223 503 q 371 528 339 503 q 402 599 402 554 q 262 695 402 695 l 213 695 l 213 751 z "},"\xBF":{ha:637,x_min:60,x_max:578,o:"m 374 466 q 355 342 372 382 q 275 239 338 302 q 195 155 211 175 q 140 -5 140 83 q 186 -140 140 -93 q 318 -188 231 -188 q 447 -140 399 -188 q 496 -14 495 -93 l 578 -14 q 505 -193 576 -126 q 318 -260 434 -260 q 129 -192 197 -260 q 60 -7 60 -124 q 96 137 60 68 q 229 297 132 205 q 291 419 286 345 l 292 466 l 374 466 m 385 693 q 370 654 385 670 q 329 638 355 638 q 288 654 303 638 q 273 693 273 670 q 288 731 273 715 q 329 747 303 747 q 370 731 355 747 q 385 693 385 715 z "},\u00C6:{ha:1265,x_min:12,x_max:1236,o:"m 1236 0 l 682 0 l 671 264 l 267 264 l 111 0 l 12 0 l 609 987 l 1195 987 l 1195 918 l 724 918 l 740 549 l 1139 549 l 1139 479 l 743 479 l 760 68 l 1236 68 l 1236 0 m 312 340 l 668 340 l 644 903 l 312 340 z "},"\xD7":{ha:727,x_min:63,x_max:655,o:"m 63 121 l 306 369 l 73 606 l 127 661 l 359 423 l 591 661 l 645 606 l 412 369 l 655 121 l 602 68 l 359 315 l 117 68 l 63 121 z "},\u00D8:{ha:940,x_min:85,x_max:864,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 254 52 345 -14 l 186 -56 l 115 -56 l 208 91 q 85 446 85 216 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 722 906 621 1001 l 794 1021 l 864 1021 l 763 860 q 854 547 854 738 l 854 440 m 168 440 q 251 159 168 263 l 680 839 q 469 928 599 928 q 250 826 332 928 q 168 543 168 725 l 168 440 m 771 547 q 717 787 771 690 l 294 116 q 471 59 367 59 q 692 160 612 59 q 771 443 771 262 l 771 547 z "},\u00DE:{ha:823,x_min:124,x_max:743,o:"m 205 987 l 205 781 l 426 781 q 595 747 523 781 q 705 648 667 712 q 743 500 743 584 q 661 299 743 375 q 435 220 578 222 l 205 220 l 205 0 l 124 0 l 124 987 l 205 987 m 205 713 l 205 288 l 425 288 q 597 346 532 288 q 662 499 662 404 q 600 652 662 594 q 435 713 538 710 l 205 713 z "},\u00DF:{ha:814,x_min:102,x_max:743,o:"m 184 0 l 102 0 l 102 764 q 167 974 102 900 q 347 1047 232 1047 q 516 990 451 1047 q 581 839 581 932 q 571 767 581 800 q 538 691 562 734 q 506 619 514 647 q 497 559 497 591 q 525 486 497 521 q 618 402 553 450 q 713 308 683 354 q 743 208 743 261 q 671 47 743 109 q 488 -14 600 -14 q 370 3 431 -14 q 281 41 308 19 l 304 109 q 381 72 329 90 q 479 54 433 54 q 612 98 562 54 q 662 208 662 141 q 632 287 662 249 q 540 371 602 326 q 447 462 478 416 q 416 560 416 508 q 458 701 416 625 q 501 834 501 777 q 458 938 501 897 q 354 978 416 978 q 184 770 186 978 l 184 0 z "},\u00E6:{ha:1175,x_min:58,x_max:1124,o:"m 858 -14 q 696 23 764 -14 q 588 126 629 60 q 470 23 547 60 q 298 -14 393 -14 q 121 44 184 -14 q 58 199 58 101 q 133 366 58 305 q 347 429 208 427 l 530 429 l 530 488 q 487 628 530 578 q 358 678 444 678 q 214 634 270 678 q 157 519 157 590 l 77 528 q 156 686 77 625 q 358 747 235 747 q 503 711 443 747 q 590 603 563 675 q 695 709 631 671 q 838 747 759 747 q 1047 666 970 747 q 1124 437 1123 584 l 1124 365 l 611 365 l 611 345 q 676 132 611 209 q 858 55 741 55 q 1078 135 983 55 l 1109 76 q 858 -14 1011 -14 m 311 54 q 436 85 372 54 q 530 160 499 117 l 530 363 l 356 363 q 205 322 263 363 q 140 210 146 281 l 140 196 q 184 92 140 130 q 311 54 229 54 m 838 678 q 687 612 748 678 q 613 431 626 545 l 1044 431 l 1044 452 q 989 617 1044 557 q 838 678 935 678 z "},\u00F0:{ha:808,x_min:101,x_max:715,o:"m 550 884 q 715 437 711 714 l 715 363 q 677 169 715 255 q 571 34 640 82 q 417 -14 503 -14 q 257 28 329 -14 q 143 147 185 70 q 101 316 101 224 q 182 563 101 471 q 398 654 263 654 q 525 628 466 654 q 623 557 583 602 q 481 841 595 727 l 328 747 l 294 796 l 433 883 q 201 1000 340 955 l 227 1070 q 505 926 391 1021 l 636 1008 l 671 959 l 550 884 m 634 424 l 633 463 q 547 551 606 519 q 413 584 488 584 q 243 513 304 584 q 182 316 182 441 q 213 185 182 246 q 297 91 243 125 q 420 56 351 56 q 575 141 515 56 q 634 368 634 225 l 634 424 z "},"\xF7":{ha:789,x_min:49,x_max:726,o:"m 726 437 l 49 437 l 49 515 l 726 515 l 726 437 m 336 738 q 351 778 336 762 q 393 794 366 794 q 435 778 420 794 q 451 738 451 762 q 435 698 451 714 q 393 682 420 682 q 351 698 366 682 q 336 738 336 714 m 336 197 q 351 237 336 221 q 393 254 366 254 q 435 237 420 254 q 451 197 451 221 q 435 158 451 174 q 393 142 420 142 q 351 158 366 142 q 336 197 336 174 z "},\u00F8:{ha:773,x_min:60,x_max:715,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 532 715 465 747 l 585 823 l 649 823 l 581 685 q 680 557 645 636 q 715 378 715 477 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 253 14 315 -14 l 199 -95 l 136 -95 l 203 43 q 98 172 135 91 q 60 355 60 252 l 60 378 m 141 355 q 165 216 141 281 q 236 111 189 152 l 500 649 q 387 678 449 678 q 210 593 278 678 q 141 370 141 508 l 141 355 m 634 378 q 612 509 634 448 q 547 614 589 571 l 284 78 q 389 55 330 55 q 566 139 498 55 q 634 362 634 224 l 634 378 z "},\u00FE:{ha:780,x_min:108,x_max:699,o:"m 699 359 q 623 87 699 188 q 419 -14 547 -14 q 189 92 269 -14 l 189 -282 l 108 -282 l 108 1042 l 189 1042 l 189 632 q 418 747 269 747 q 624 648 548 747 q 699 372 699 549 l 699 359 m 618 374 q 560 595 618 514 q 399 677 503 677 q 271 641 325 677 q 189 536 218 605 l 189 183 q 271 89 218 122 q 401 55 325 55 q 561 137 503 55 q 618 374 618 218 z "},\u0111:{ha:795,x_min:73,x_max:782,o:"m 782 852 l 664 852 l 664 0 l 588 0 l 585 98 q 355 -14 507 -14 q 151 89 229 -14 q 73 364 73 191 l 73 374 q 150 646 73 545 q 357 747 226 747 q 583 630 505 747 l 583 852 l 367 852 l 367 922 l 583 922 l 583 1042 l 664 1042 l 664 922 l 782 922 l 782 852 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 189 520 57 l 583 534 q 372 677 520 677 q 212 596 269 677 q 155 359 155 516 z "},\u0126:{ha:957,x_min:16,x_max:939,o:"m 840 761 l 939 761 l 939 696 l 840 696 l 840 0 l 757 0 l 757 473 l 193 473 l 193 0 l 109 0 l 109 696 l 16 696 l 16 761 l 109 761 l 109 987 l 193 987 l 193 761 l 757 761 l 757 987 l 840 987 l 840 761 m 193 544 l 757 544 l 757 696 l 193 696 l 193 544 z "},\u0131:{ha:309,x_min:114,x_max:195,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 z "},\u0138:{ha:753,x_min:110,x_max:716,o:"m 285 336 l 192 336 l 192 0 l 110 0 l 110 734 l 192 734 l 192 408 l 283 408 l 583 734 l 682 734 l 357 376 l 716 0 l 613 0 l 285 336 z "},\u0141:{ha:734,x_min:14,x_max:693,o:"m 206 554 l 414 620 l 414 559 l 206 493 l 206 71 l 693 71 l 693 0 l 122 0 l 122 466 l 14 432 l 14 493 l 122 527 l 122 987 l 206 987 l 206 554 z "},\u0142:{ha:359,x_min:17,x_max:342,o:"m 220 583 l 342 631 l 342 569 l 220 522 l 220 0 l 139 0 l 139 490 l 17 442 l 17 504 l 139 551 l 139 1042 l 220 1042 l 220 583 z "},\u014A:{ha:972,x_min:123,x_max:852,o:"m 852 987 l 852 -58 q 798 -235 852 -174 q 645 -296 743 -296 q 568 -283 606 -296 l 577 -214 q 644 -225 608 -225 q 736 -182 704 -225 q 768 -58 768 -138 l 768 0 l 206 848 l 206 0 l 123 0 l 123 987 l 206 987 l 768 140 l 768 987 l 852 987 z "},\u014B:{ha:773,x_min:106,x_max:665,o:"m 179 734 l 186 609 q 421 747 260 747 q 604 674 543 747 q 665 454 664 601 l 665 -60 q 611 -236 665 -176 q 459 -296 556 -296 q 375 -283 416 -296 l 385 -214 q 459 -224 415 -224 q 551 -182 519 -224 q 584 -60 584 -140 l 584 446 q 541 620 584 563 q 403 677 498 677 q 270 639 324 677 q 188 525 215 601 l 188 0 l 106 0 l 106 734 l 179 734 z "},\u0152:{ha:1297,x_min:73,x_max:1221,o:"m 1221 0 l 649 0 q 438 -14 521 -14 q 250 36 332 -14 q 121 177 167 86 q 73 384 75 269 l 73 597 q 119 806 73 713 q 248 950 164 899 q 437 1001 331 1001 q 649 987 527 1001 l 1218 987 l 1218 916 l 690 916 l 690 544 l 1152 544 l 1152 473 l 690 473 l 690 71 l 1221 71 l 1221 0 m 438 54 q 607 64 528 54 l 607 922 q 437 932 527 932 q 231 842 307 932 q 155 600 155 753 l 155 391 q 231 145 155 237 q 438 54 308 54 z "},\u0153:{ha:1283,x_min:64,x_max:1236,o:"m 64 378 q 105 570 64 484 q 220 701 146 655 q 388 747 294 747 q 559 700 484 747 q 675 563 633 653 q 789 698 716 648 q 947 747 861 747 q 1158 663 1080 747 q 1236 430 1236 578 l 1236 365 l 718 365 l 718 345 q 785 137 718 220 q 957 55 852 55 q 1177 136 1099 55 l 1213 80 q 957 -14 1122 -14 q 789 35 865 -14 q 675 168 714 84 q 559 33 633 80 q 389 -14 485 -14 q 154 89 243 -14 q 64 361 64 192 l 64 378 m 145 355 q 212 138 145 222 q 389 55 279 55 q 565 138 498 55 q 631 362 631 222 l 631 378 q 564 594 631 510 q 388 678 496 678 q 212 594 279 678 q 145 370 145 510 l 145 355 m 947 678 q 796 610 859 678 q 721 433 734 541 l 1155 433 l 1155 454 q 1098 615 1155 553 q 947 678 1041 678 z "},\u017F:{ha:315,x_min:113,x_max:416,o:"m 113 0 l 113 823 q 169 995 113 935 q 323 1056 224 1056 q 416 1043 367 1056 l 405 978 q 334 987 371 987 q 231 944 267 987 q 194 825 194 901 l 194 0 l 113 0 z "},\u018F:{ha:972,x_min:84,x_max:890,o:"m 492 -14 q 193 101 302 -14 q 84 420 84 216 l 84 500 l 806 500 l 806 546 q 716 828 806 726 q 464 929 627 929 q 186 848 304 929 l 159 910 q 464 1001 276 1001 q 776 878 662 1001 q 890 539 890 755 l 890 455 q 838 214 890 321 q 694 46 786 106 q 492 -14 602 -14 m 492 58 q 712 160 626 58 q 806 432 798 263 l 168 432 l 168 396 q 254 148 168 239 q 492 58 339 58 z "},\u0192:{ha:454,x_min:-40,x_max:463,o:"m 407 667 l 241 667 l 241 -60 q 187 -236 241 -176 q 35 -296 132 -296 q -40 -283 -3 -296 l -31 -216 q 35 -227 -5 -227 q 127 -184 95 -227 q 160 -60 160 -140 l 160 667 l 38 667 l 38 734 l 160 734 l 160 823 q 220 1000 160 939 q 370 1056 276 1056 q 463 1043 414 1056 l 452 976 q 378 985 422 985 q 277 943 312 985 q 241 825 241 901 l 241 734 l 407 734 l 407 667 z "},\u01A0:{ha:968,x_min:90,x_max:982,o:"m 859 440 q 812 201 859 304 q 677 42 765 98 q 475 -14 590 -14 q 274 42 362 -14 q 138 200 186 98 q 90 435 90 302 l 90 546 q 137 784 90 680 q 272 944 184 888 q 474 1001 360 1001 q 638 966 566 1001 q 762 867 711 931 q 871 915 835 870 q 907 1061 907 959 l 982 1061 q 939 886 982 951 q 801 807 896 821 q 859 555 857 701 l 859 440 m 777 547 q 696 827 777 726 q 474 928 615 928 q 255 826 336 928 q 173 543 173 725 l 173 440 q 254 162 173 264 q 475 59 336 59 q 696 160 616 59 q 777 442 777 261 l 777 547 z "},\u01A1:{ha:777,x_min:60,x_max:803,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 620 650 530 747 q 707 689 681 654 q 733 812 733 724 l 803 812 q 767 661 803 713 q 660 596 732 608 q 715 386 713 506 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 141 355 q 209 139 141 224 q 389 55 277 55 q 566 139 498 55 q 634 362 634 224 l 634 378 q 566 593 634 508 q 387 678 497 678 q 210 593 278 678 q 141 370 141 508 l 141 355 z "},\u01AF:{ha:945,x_min:110,x_max:1028,o:"m 805 987 l 805 844 q 921 896 886 850 q 956 1047 956 942 l 1028 1047 q 973 849 1028 913 q 805 781 918 786 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 z "},\u01B0:{ha:814,x_min:103,x_max:842,o:"m 842 800 q 797 640 842 688 q 658 587 753 591 l 658 0 l 579 0 l 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 644 q 764 703 743 648 q 774 800 774 730 l 842 800 z "},"\u0237":{ha:317,x_min:-79,x_max:202,o:"m 202 734 l 202 -60 q 148 -236 202 -175 q -3 -296 94 -296 q -79 -283 -41 -296 l -70 -216 q -3 -227 -41 -227 q 89 -184 57 -227 q 121 -60 121 -140 l 121 734 l 202 734 z "},\u0259:{ha:715,x_min:62,x_max:662,o:"m 342 747 q 505 701 431 747 q 620 572 578 655 q 662 389 662 489 l 662 351 q 621 165 662 249 q 509 34 580 81 q 353 -14 437 -14 q 140 71 218 -14 q 62 302 62 155 l 62 368 l 581 368 l 581 388 q 514 596 581 513 q 342 679 448 679 q 210 656 262 679 q 121 597 157 634 l 87 653 q 342 747 178 747 m 353 55 q 502 123 439 55 q 578 299 565 191 l 144 299 l 144 279 q 201 118 144 180 q 353 55 258 55 z "},"\u02C6":{ha:597,x_min:109,x_max:485,o:"m 485 860 l 485 853 l 410 853 l 296 977 l 182 853 l 109 853 l 109 862 l 270 1035 l 321 1035 l 485 860 z "},"\u02C7":{ha:567,x_min:97,x_max:475,o:"m 286 899 l 403 1031 l 475 1031 l 475 1023 l 315 846 l 257 846 l 97 1023 l 97 1031 l 170 1031 l 286 899 z "},"\u02C9":{ha:593,x_min:93,x_max:513,o:"m 513 911 l 93 911 l 93 977 l 513 977 l 513 911 z "},"\u02D8":{ha:587,x_min:94,x_max:486,o:"m 486 1010 q 432 884 486 932 q 290 836 379 836 q 148 884 201 836 q 94 1010 94 932 l 163 1010 q 196 924 163 954 q 290 895 230 895 q 383 926 349 895 q 416 1010 416 957 l 486 1010 z "},"\u02D9":{ha:311,x_min:100,x_max:212,o:"m 100 937 q 115 976 100 960 q 156 992 130 992 q 197 976 182 992 q 212 937 212 960 q 197 899 212 915 q 156 884 182 884 q 115 899 130 884 q 100 937 100 915 z "},"\u02DA":{ha:431,x_min:79,x_max:341,o:"m 79 946 q 118 1038 79 1000 q 210 1075 156 1075 q 302 1038 264 1075 q 341 946 341 1000 q 304 856 341 892 q 210 819 267 819 q 117 856 154 819 q 79 946 79 892 m 132 946 q 154 890 132 912 q 210 867 176 867 q 267 889 243 867 q 290 946 290 911 q 266 1004 290 982 q 210 1027 242 1027 q 154 1004 177 1027 q 132 946 132 981 z "},"\u02DB":{ha:347,x_min:41,x_max:253,o:"m 235 0 q 139 -90 164 -54 q 114 -159 114 -125 q 172 -216 114 -216 q 243 -193 208 -216 l 253 -250 q 156 -280 209 -280 q 71 -250 102 -280 q 41 -165 41 -220 q 83 -65 41 -115 q 195 25 125 -14 l 235 0 z "},"\u02DC":{ha:604,x_min:72,x_max:528,o:"m 528 1007 q 490 902 528 942 q 396 863 452 863 q 295 900 345 863 q 208 937 246 937 q 154 916 176 937 q 133 857 133 895 l 72 859 q 109 962 72 922 q 204 1003 146 1003 q 260 991 237 1003 q 303 966 283 980 q 344 940 323 951 q 393 928 365 928 q 446 951 424 928 q 468 1011 468 973 l 528 1007 z "},"\u02DD":{ha:524,x_min:81,x_max:527,o:"m 429 1041 l 527 1041 l 338 836 l 256 836 l 429 1041 m 219 1041 l 312 1041 l 155 836 l 81 836 l 219 1041 z "},"\u02F3":{ha:422,x_min:106,x_max:313,o:"m 106 -156 q 137 -87 106 -115 q 211 -59 168 -59 q 283 -87 254 -59 q 313 -156 313 -115 q 283 -223 313 -196 q 211 -250 254 -250 q 137 -223 168 -250 q 106 -156 106 -197 m 156 -156 q 172 -191 156 -177 q 211 -204 188 -204 q 250 -191 234 -204 q 265 -156 265 -177 q 250 -120 265 -134 q 211 -106 234 -106 q 172 -120 188 -106 q 156 -156 156 -134 z "},"\u0300":{ha:0,x_min:-543,x_max:-315,o:"m -315 852 l -389 852 l -543 1042 l -444 1042 l -315 852 z "},"\u0301":{ha:0,x_min:-417,x_max:-189,o:"m -288 1042 l -189 1042 l -347 852 l -417 852 l -288 1042 z "},"\u0303":{ha:0,x_min:-579,x_max:-123,o:"m -123 1007 q -161 902 -123 942 q -255 863 -199 863 q -356 900 -307 863 q -444 937 -405 937 q -497 916 -475 937 q -518 857 -518 895 l -579 859 q -542 962 -579 922 q -447 1003 -505 1003 q -391 991 -414 1003 q -348 966 -368 980 q -307 940 -328 951 q -258 928 -286 928 q -205 951 -227 928 q -183 1011 -183 973 l -123 1007 z "},"\u0309":{ha:0,x_min:-447,x_max:-243,o:"m -424 837 l -424 922 q -338 940 -365 926 q -311 985 -311 953 q -348 1033 -311 1016 q -447 1050 -385 1050 l -442 1102 q -296 1070 -349 1102 q -243 985 -243 1038 q -274 912 -243 940 q -362 879 -304 884 l -363 837 l -424 837 z "},"\u030F":{ha:0,x_min:-663,x_max:-211,o:"m -376 849 l -458 849 l -663 1029 l -559 1029 l -376 849 m -211 849 l -285 849 l -454 1029 l -359 1029 l -211 849 z "},"\u0323":{ha:0,x_min:-456,x_max:-344,o:"m -456 -157 q -441 -118 -456 -134 q -400 -102 -426 -102 q -359 -118 -374 -102 q -344 -157 -344 -134 q -359 -195 -344 -179 q -400 -210 -374 -210 q -441 -195 -426 -210 q -456 -157 -456 -179 z "},"\u0384":{ha:352,x_min:135,x_max:265,o:"m 185 1077 l 265 1077 l 191 871 l 135 871 l 185 1077 z "},"\u0385":{ha:665,x_min:104,x_max:559,o:"m 321 1128 l 412 1128 l 363 958 l 297 958 l 321 1128 m 104 947 q 119 986 104 970 q 159 1002 134 1002 q 201 986 186 1002 q 216 947 216 970 q 201 909 216 924 q 159 893 186 893 q 119 909 134 893 q 104 947 104 924 m 447 946 q 462 985 447 969 q 503 1001 477 1001 q 544 985 528 1001 q 559 946 559 969 q 544 908 559 924 q 503 892 528 892 q 462 908 477 892 q 447 946 447 924 z "},"\u0387":{ha:341,x_min:111,x_max:226,o:"m 111 486 q 125 526 111 510 q 168 543 140 543 q 210 526 195 543 q 226 486 226 510 q 210 447 226 463 q 168 431 195 431 q 125 447 140 431 q 111 486 111 463 z "},\u0393:{ha:766,x_min:125,x_max:721,o:"m 721 916 l 209 916 l 209 0 l 125 0 l 125 987 l 721 987 l 721 916 z "},\u0394:{ha:968,x_min:30,x_max:932,o:"m 527 987 l 932 0 l 30 0 l 448 987 l 527 987 m 146 71 l 817 71 l 486 889 l 146 71 z "},\u0398:{ha:935,x_min:80,x_max:849,o:"m 654 458 l 279 458 l 279 526 l 654 526 l 654 458 m 849 440 q 802 201 849 304 q 667 42 755 98 q 465 -14 580 -14 q 265 42 353 -14 q 129 200 177 98 q 80 435 81 302 l 80 546 q 128 785 80 681 q 263 945 176 889 q 464 1001 351 1001 q 665 946 578 1001 q 800 791 752 891 q 849 558 847 690 l 849 440 m 766 547 q 686 827 766 726 q 464 928 605 928 q 245 826 327 928 q 163 543 163 725 l 163 440 q 244 162 163 264 q 465 59 326 59 q 686 160 606 59 q 766 442 766 261 l 766 547 z "},\u039B:{ha:900,x_min:46,x_max:849,o:"m 447 865 l 136 0 l 46 0 l 407 987 l 488 987 l 849 0 l 759 0 l 447 865 z "},\u039E:{ha:777,x_min:79,x_max:703,o:"m 79 71 l 703 71 l 703 0 l 79 0 l 79 71 m 144 532 l 631 532 l 631 461 l 144 461 l 144 532 m 87 987 l 684 987 l 684 916 l 87 916 l 87 987 z "},\u03A0:{ha:983,x_min:128,x_max:854,o:"m 854 0 l 770 0 l 770 916 l 212 916 l 212 0 l 128 0 l 128 987 l 854 987 l 854 0 z "},\u03A3:{ha:777,x_min:43,x_max:726,o:"m 478 504 l 148 71 l 726 71 l 726 0 l 43 0 l 43 62 l 391 515 l 43 924 l 43 987 l 689 987 l 689 916 l 154 916 l 478 528 l 478 504 z "},\u03A6:{ha:993,x_min:60,x_max:935,o:"m 539 860 q 745 812 654 858 q 885 683 835 766 q 935 496 935 600 q 886 309 935 392 q 746 179 837 226 q 539 130 656 132 l 539 0 l 455 0 l 455 130 q 249 178 338 132 q 109 308 159 224 q 60 494 60 391 q 109 681 60 597 q 249 811 159 764 q 455 860 340 858 l 455 987 l 539 987 l 539 860 m 539 789 l 539 202 q 769 284 687 205 q 852 496 852 364 q 768 707 852 627 q 539 789 685 786 m 143 494 q 226 284 143 363 q 455 202 309 205 l 455 788 q 227 706 311 785 q 143 494 143 627 z "},\u03A8:{ha:964,x_min:83,x_max:877,o:"m 519 336 q 719 426 646 346 q 793 635 793 507 l 793 987 l 877 987 l 877 638 q 782 374 877 474 q 519 264 686 274 l 519 0 l 435 0 l 435 264 q 180 373 274 275 q 83 629 85 471 l 83 987 l 167 987 l 167 635 q 200 485 167 551 q 294 381 234 419 q 435 336 355 343 l 435 987 l 519 987 l 519 336 z "},\u03A9:{ha:909,x_min:81,x_max:819,o:"m 508 81 q 670 222 612 117 q 730 486 728 327 l 730 574 q 653 833 730 736 q 449 930 576 930 q 245 832 321 930 q 170 570 170 734 l 170 494 q 228 226 170 334 q 395 81 287 117 l 395 0 l 81 0 l 81 71 l 277 71 q 136 248 187 136 q 85 494 85 359 l 85 572 q 131 797 85 699 q 259 948 176 895 q 449 1001 342 1001 q 640 947 556 1001 q 768 795 723 893 q 814 573 814 698 l 814 494 q 762 246 814 358 q 623 71 710 134 l 819 71 l 819 0 l 508 0 l 508 81 z "},\u03B1:{ha:782,x_min:75,x_max:777,o:"m 663 734 l 663 182 q 732 59 664 59 q 766 64 746 59 l 777 1 q 711 -14 749 -14 q 626 17 658 -14 q 585 119 595 47 q 355 -14 511 -14 q 158 74 233 -14 q 76 318 83 163 l 75 361 q 151 644 75 541 q 357 747 227 747 q 584 608 511 747 l 593 734 l 663 734 m 157 347 q 212 131 157 208 q 370 54 268 54 q 582 218 519 54 l 582 500 q 498 632 552 585 q 372 678 444 678 q 214 594 271 678 q 157 347 157 510 z "},\u03B2:{ha:823,x_min:120,x_max:739,o:"m 403 1001 q 604 929 528 1001 q 680 741 680 857 q 645 617 680 673 q 546 530 610 561 q 689 437 638 504 q 739 274 739 370 q 656 63 739 140 q 434 -14 573 -14 q 304 9 366 -14 q 201 73 242 33 l 201 -271 l 120 -271 l 120 721 q 158 862 120 797 q 261 964 195 926 q 403 1001 327 1001 m 600 744 q 545 879 600 826 q 403 932 491 932 q 260 871 318 932 q 201 718 201 811 l 201 161 q 293 84 232 113 q 428 55 355 55 q 597 113 537 55 q 658 271 658 171 q 598 428 658 368 q 435 489 538 488 l 336 489 l 336 558 l 397 558 q 600 744 600 558 z "},\u03B3:{ha:680,x_min:30,x_max:653,o:"m 569 734 l 653 734 l 382 21 l 382 -281 l 301 -281 l 301 21 l 30 734 l 114 734 l 328 162 l 342 102 l 359 162 l 569 734 z "},\u03B4:{ha:773,x_min:62,x_max:711,o:"m 148 874 q 216 1009 148 958 q 395 1060 285 1060 q 592 1015 505 1060 l 585 945 q 395 989 490 989 q 275 959 321 989 q 229 876 229 928 q 275 788 229 823 q 417 728 321 753 q 634 591 558 687 q 711 361 711 495 l 711 342 q 670 157 711 239 q 556 31 630 76 q 387 -14 481 -14 q 152 85 243 -14 q 62 347 62 184 l 62 363 q 131 577 62 486 q 300 686 200 668 l 300 692 q 187 767 227 720 q 148 874 148 814 m 144 342 q 211 135 144 214 q 387 55 277 55 q 563 135 497 55 q 629 349 629 215 l 629 363 q 598 493 629 431 q 513 595 567 554 q 395 647 458 636 q 214 567 283 647 q 144 357 144 487 l 144 342 z "},\u03B5:{ha:755,x_min:73,x_max:678,o:"m 73 201 q 225 376 73 337 q 122 443 158 400 q 85 538 85 486 q 162 692 85 637 q 373 747 239 747 q 582 687 498 747 q 666 536 666 627 l 585 536 q 524 638 585 597 q 373 678 463 678 q 223 642 278 678 q 168 540 168 605 q 376 408 168 408 l 496 408 l 496 340 l 366 340 q 209 307 262 340 q 155 200 155 273 q 214 95 155 134 q 373 55 273 55 q 533 99 470 55 q 597 210 597 143 l 678 210 q 592 47 678 109 q 373 -14 507 -14 q 155 45 238 -14 q 73 201 73 104 z "},\u03B6:{ha:683,x_min:50,x_max:627,o:"m 627 987 l 627 935 l 356 589 q 237 405 271 483 q 203 246 203 328 q 241 144 203 182 q 374 81 279 106 l 495 47 q 584 -2 559 26 q 608 -76 608 -30 q 573 -180 608 -124 q 495 -262 539 -236 l 449 -224 q 530 -85 530 -158 q 503 -36 530 -54 q 379 6 476 -18 q 235 56 283 31 q 161 115 188 81 q 122 244 122 163 q 288 621 122 413 l 529 918 l 50 918 l 50 987 l 627 987 z "},\u03B7:{ha:773,x_min:107,x_max:665,o:"m 182 734 l 186 617 q 421 747 264 747 q 605 680 546 747 q 665 469 665 612 l 665 -281 l 584 -281 l 584 465 q 541 626 584 573 q 403 678 498 678 q 189 507 237 678 l 189 0 l 107 0 l 107 734 l 182 734 z "},\u03B8:{ha:795,x_min:94,x_max:701,o:"m 701 418 q 623 98 701 210 q 398 -14 544 -14 q 175 97 254 -14 q 94 409 96 208 l 94 572 q 173 890 94 779 q 397 1001 252 1001 q 621 891 542 1001 q 701 578 700 781 l 701 418 m 175 525 l 620 525 l 620 583 q 561 842 620 752 q 397 932 503 932 q 233 842 291 932 q 175 580 175 751 l 175 525 m 620 456 l 175 456 l 175 409 q 233 149 175 243 q 398 55 292 55 q 559 143 501 55 q 620 399 618 232 l 620 456 z "},\u03B9:{ha:416,x_min:123,x_max:370,o:"m 205 734 l 205 183 q 227 94 205 123 q 300 64 249 64 q 366 71 332 64 l 370 3 q 283 -7 332 -7 q 161 42 199 -7 q 123 184 123 90 l 123 734 l 205 734 z "},\u03BB:{ha:764,x_min:33,x_max:736,o:"m 171 1029 q 323 926 277 1029 l 340 882 l 614 154 q 653 84 633 104 q 701 64 673 64 l 730 67 l 736 0 q 690 -7 720 -7 q 602 20 637 -7 q 538 123 568 47 l 358 603 l 123 0 l 33 0 l 316 713 l 253 876 l 243 898 q 155 960 213 960 l 123 958 l 120 1022 q 171 1029 142 1029 z "},\u03BE:{ha:682,x_min:81,x_max:626,o:"m 612 904 q 442 932 526 932 q 272 889 332 932 q 212 774 212 847 q 464 613 212 613 l 548 613 l 548 543 l 462 543 q 239 481 317 543 q 162 301 162 418 q 219 152 162 210 q 408 61 277 94 q 568 11 538 28 q 612 -28 598 -5 q 626 -85 626 -51 q 595 -175 626 -127 q 515 -258 564 -223 l 467 -219 l 496 -193 q 548 -92 548 -146 q 522 -48 548 -64 q 410 -10 496 -31 q 267 35 324 12 q 168 94 209 58 q 104 180 127 129 q 81 304 81 231 q 139 477 81 406 q 303 578 197 548 q 177 654 223 603 q 130 772 130 705 q 213 940 130 880 q 443 1001 296 1001 q 623 970 545 1001 l 612 904 z "},\u03C0:{ha:827,x_min:35,x_max:808,o:"m 768 664 l 643 664 l 643 185 q 665 94 643 124 q 739 64 686 64 q 804 71 770 64 l 808 3 q 721 -7 770 -7 q 601 40 639 -7 q 562 178 563 87 l 562 664 l 239 664 l 239 0 l 158 0 l 158 664 l 35 664 l 35 734 l 768 734 l 768 664 z "},\u03C1:{ha:773,x_min:107,x_max:696,o:"m 401 747 q 618 643 541 747 q 696 357 696 539 l 696 347 q 622 84 696 181 q 418 -14 548 -14 q 189 90 267 -14 l 189 -282 l 107 -282 l 107 416 q 189 657 109 568 q 401 747 270 747 m 189 182 q 399 55 250 55 q 558 131 502 55 q 615 361 615 208 q 559 593 615 508 q 401 678 504 678 q 248 603 306 678 q 189 399 190 528 l 189 182 z "},\u03C2:{ha:743,x_min:75,x_max:664,o:"m 389 747 q 588 676 511 747 q 664 485 664 606 l 587 485 q 533 626 587 573 q 389 678 479 678 q 220 596 282 678 q 157 375 157 514 l 157 353 q 429 62 157 128 q 561 5 529 37 q 593 -83 593 -26 q 560 -177 593 -125 q 487 -255 526 -229 l 442 -216 l 462 -199 q 515 -92 515 -149 q 493 -38 515 -56 q 403 -5 471 -20 q 158 120 241 30 q 75 352 75 210 l 75 381 q 114 570 75 486 q 225 701 153 654 q 389 747 296 747 z "},\u03C3:{ha:772,x_min:62,x_max:768,o:"m 768 664 l 555 664 q 670 542 629 618 q 711 366 711 465 l 711 343 q 670 161 711 243 q 555 33 629 79 q 387 -14 481 -14 q 152 89 241 -14 q 62 361 62 192 l 62 378 q 152 635 62 536 q 389 734 243 734 l 768 734 l 768 664 m 143 355 q 210 138 143 222 q 387 55 277 55 q 563 138 495 55 q 630 362 630 221 l 630 378 q 563 584 630 503 q 385 664 496 664 q 210 583 277 664 q 143 372 143 502 l 143 355 z "},\u03C4:{ha:710,x_min:52,x_max:657,o:"m 657 665 l 384 665 l 384 186 q 407 89 384 121 q 482 56 431 56 q 549 68 505 56 l 567 7 q 467 -14 528 -14 q 341 36 380 -14 q 302 189 302 85 l 302 665 l 52 665 l 52 734 l 657 734 l 657 665 z "},\u03C5:{ha:743,x_min:105,x_max:659,o:"m 186 734 l 186 271 q 229 110 187 165 q 350 55 271 55 q 515 142 452 55 q 578 366 578 229 q 498 734 576 544 l 587 734 q 642 551 626 637 q 659 368 659 464 q 576 90 659 193 q 353 -14 494 -14 q 169 60 232 -14 q 105 275 105 133 l 105 734 l 186 734 z "},\u03C6:{ha:952,x_min:77,x_max:878,o:"m 431 -13 q 168 100 259 -2 q 77 376 77 201 q 123 585 77 492 q 253 734 170 677 l 296 675 q 196 547 232 628 q 158 375 159 467 q 229 151 158 235 q 431 56 300 68 l 431 593 q 472 695 431 656 q 576 734 513 734 q 729 686 659 734 q 838 555 799 639 q 878 370 878 471 q 781 101 878 205 q 513 -13 684 -2 l 513 -324 l 431 -324 l 431 -13 m 513 56 q 720 153 644 66 q 797 369 797 239 q 733 579 795 495 q 576 664 671 664 q 530 645 548 664 q 513 595 513 625 l 513 56 z "},\u03C8:{ha:949,x_min:82,x_max:875,o:"m 509 734 l 509 56 q 719 154 644 66 q 794 392 794 241 q 699 734 792 557 l 788 734 q 856 561 837 640 q 875 393 875 481 q 780 100 875 204 q 509 -12 684 -4 l 509 -300 l 429 -300 l 429 -12 q 174 101 263 0 q 82 388 85 202 l 82 734 l 163 734 l 163 393 q 232 156 165 243 q 429 57 298 69 l 429 734 l 509 734 z "},\u03C9:{ha:1145,x_min:93,x_max:1052,o:"m 274 734 q 174 359 176 541 q 221 137 174 219 q 355 55 269 55 q 484 121 438 55 q 531 316 530 188 l 531 522 l 613 522 l 613 317 q 660 122 614 189 q 790 55 705 55 q 923 136 874 55 q 971 359 971 218 q 870 734 969 538 l 959 734 q 1031 543 1011 629 q 1052 360 1052 456 q 983 86 1052 186 q 793 -14 915 -14 q 656 28 713 -14 q 572 158 599 71 q 351 -14 519 -14 q 161 87 229 -14 q 93 360 93 187 q 114 549 93 460 q 186 734 136 637 l 274 734 z "},\u03D1:{ha:797,x_min:90,x_max:774,o:"m 774 458 q 662 434 726 438 l 662 284 q 588 64 661 141 q 379 -14 516 -14 q 169 67 247 -14 q 90 292 90 149 l 90 513 l 172 515 l 172 288 q 227 117 172 177 q 379 57 281 57 q 529 112 480 57 q 581 279 578 167 l 581 435 q 331 540 422 450 q 239 775 239 631 l 239 783 q 296 947 239 884 q 443 1009 353 1009 q 604 939 546 1009 q 662 739 662 868 l 662 505 q 767 525 718 509 l 774 458 m 320 769 q 389 589 320 658 q 581 507 457 519 l 581 749 q 443 938 577 938 q 354 898 387 938 q 320 787 321 858 l 320 769 z "},\u03D2:{ha:745,x_min:-32,x_max:783,o:"m 707 995 q 783 977 748 995 l 764 912 q 718 922 747 922 q 656 899 681 922 q 608 824 632 876 l 418 403 l 418 0 l 334 0 l 334 406 l 142 825 q 94 900 118 877 q 34 922 70 922 q -12 912 4 922 l -32 976 q 44 995 2 995 q 142 963 104 995 q 212 861 180 931 l 361 526 l 376 475 l 392 528 l 540 860 q 611 964 574 934 q 707 995 649 995 z "},\u03D6:{ha:1092,x_min:38,x_max:1067,o:"m 1067 664 l 954 664 q 1014 360 1014 525 q 949 87 1014 188 q 768 -14 884 -14 q 547 157 601 -14 q 326 -14 493 -14 q 145 87 210 -14 q 81 360 81 188 q 140 664 81 524 l 38 664 l 38 734 l 1067 734 l 1067 664 m 933 359 q 865 664 930 509 l 229 664 q 161 359 163 508 q 206 137 161 219 q 330 55 251 55 q 459 122 414 55 q 506 316 505 189 l 506 507 l 588 507 l 588 317 q 635 122 589 189 q 765 55 680 55 q 888 137 844 55 q 933 359 933 219 z "},\u0402:{ha:1034,x_min:37,x_max:976,o:"m 798 916 l 414 916 l 414 554 q 529 588 469 575 q 637 600 590 600 q 887 520 798 600 q 976 287 976 440 q 937 134 976 201 q 825 30 898 66 q 651 -7 751 -7 l 650 60 q 828 121 764 60 q 892 287 892 183 q 827 465 892 403 q 637 527 761 527 q 414 481 526 527 l 414 0 l 330 0 l 330 916 l 37 916 l 37 987 l 798 987 l 798 916 z "},\u0404:{ha:917,x_min:90,x_max:825,o:"m 825 308 q 714 69 808 152 q 462 -14 619 -14 q 268 41 352 -14 q 137 197 183 96 q 90 427 91 298 l 90 555 q 136 788 90 686 q 269 945 182 890 q 468 1001 355 1001 q 719 915 627 1001 q 825 678 810 829 l 742 678 q 468 930 711 930 q 256 831 335 930 q 174 566 177 733 l 174 535 l 586 535 l 586 465 l 174 465 l 174 431 q 252 159 174 260 q 462 57 330 57 q 659 120 593 57 q 741 308 726 182 l 825 308 z "},\u0409:{ha:1466,x_min:35,x_max:1390,o:"m 819 987 l 819 575 l 1069 575 q 1240 539 1166 574 q 1352 438 1313 503 q 1390 288 1390 373 q 1302 78 1390 155 q 1061 0 1214 0 l 735 0 l 735 916 l 355 916 l 332 508 q 291 190 319 289 q 211 46 262 90 q 70 0 159 1 l 35 0 l 35 71 l 62 71 q 167 115 132 75 q 221 247 202 156 q 252 529 241 338 l 276 987 l 819 987 m 819 505 l 819 71 l 1063 71 q 1242 130 1177 71 q 1307 289 1307 190 q 1244 443 1307 384 q 1072 505 1181 503 l 819 505 z "},\u040A:{ha:1499,x_min:126,x_max:1423,o:"m 210 532 l 768 532 l 768 987 l 852 987 l 852 561 l 1097 561 q 1271 527 1197 561 q 1384 430 1345 493 q 1423 282 1423 367 q 1336 77 1423 153 q 1098 0 1249 1 l 768 0 l 768 462 l 210 462 l 210 0 l 126 0 l 126 987 l 210 987 l 210 532 m 852 490 l 852 73 l 1096 73 q 1275 130 1211 73 q 1340 283 1340 187 q 1277 432 1340 376 q 1102 490 1213 489 l 852 490 z "},\u040B:{ha:1117,x_min:37,x_max:1e3,o:"m 797 916 l 418 916 l 418 549 q 670 584 545 584 q 919 510 840 584 q 1000 288 998 437 l 1000 0 l 916 0 l 916 283 q 858 457 916 401 q 670 513 800 513 q 418 477 546 513 l 418 0 l 334 0 l 334 916 l 37 916 l 37 987 l 797 987 l 797 916 z "},\u040F:{ha:979,x_min:125,x_max:852,o:"m 125 987 l 210 987 l 210 71 l 768 71 l 768 987 l 852 987 l 852 0 l 534 0 l 534 -239 l 450 -239 l 450 0 l 125 0 l 125 987 z "},\u0411:{ha:871,x_min:120,x_max:776,o:"m 715 916 l 204 916 l 204 559 l 449 559 q 624 525 550 559 q 737 429 698 492 q 776 281 776 366 q 688 75 776 150 q 446 0 601 0 l 120 0 l 120 987 l 715 987 l 715 916 m 204 488 l 204 71 l 448 71 q 627 127 563 71 q 692 282 692 184 q 629 431 692 376 q 454 488 567 486 l 204 488 z "},\u0414:{ha:1005,x_min:48,x_max:960,o:"m 855 71 l 960 71 l 960 -239 l 876 -239 l 876 0 l 132 0 l 132 -239 l 48 -239 l 48 71 l 114 71 q 236 300 189 149 q 292 631 282 451 l 309 987 l 855 987 l 855 71 m 211 71 l 772 71 l 772 916 l 389 916 l 376 633 q 324 309 367 457 q 211 71 281 160 z "},\u0416:{ha:1222,x_min:16,x_max:1207,o:"m 766 470 l 654 470 l 654 0 l 571 0 l 571 470 l 456 470 l 121 0 l 16 0 l 381 510 l 40 987 l 141 987 l 452 541 l 571 541 l 571 987 l 654 987 l 654 541 l 771 541 l 1082 987 l 1182 987 l 841 511 l 1207 0 l 1102 0 l 766 470 z "},\u0417:{ha:826,x_min:61,x_max:762,o:"m 664 730 q 597 876 664 823 q 406 930 530 930 q 229 873 298 930 q 159 728 159 816 l 75 728 q 118 869 75 807 q 238 966 161 931 q 406 1001 315 1001 q 656 930 566 1001 q 747 728 747 859 q 699 593 747 652 q 570 506 651 534 q 762 268 762 454 q 666 63 762 140 q 406 -14 569 -14 q 225 24 307 -14 q 102 126 144 62 q 61 274 61 190 l 144 274 q 218 118 144 179 q 406 56 292 56 q 606 113 534 56 q 679 265 679 170 q 614 416 679 366 q 416 467 550 466 l 290 467 l 290 539 l 412 539 q 600 588 535 540 q 664 730 664 635 z "},\u0418:{ha:986,x_min:127,x_max:857,o:"m 774 987 l 857 987 l 857 0 l 774 0 l 774 845 l 212 0 l 127 0 l 127 987 l 212 987 l 212 143 l 774 987 z "},\u041B:{ha:975,x_min:27,x_max:848,o:"m 848 987 l 848 0 l 765 0 l 765 916 l 348 916 l 325 508 q 283 190 311 289 q 203 46 255 90 q 62 0 151 1 l 27 0 l 27 71 l 54 71 q 159 115 124 75 q 214 247 195 156 q 244 529 233 338 l 269 987 l 848 987 z "},\u0423:{ha:871,x_min:37,x_max:833,o:"m 454 355 l 735 987 l 833 987 l 452 161 l 427 114 q 216 -14 355 -14 q 152 -7 174 -14 l 159 61 q 216 56 174 56 q 351 142 300 56 l 368 173 l 411 261 l 37 987 l 133 987 l 454 355 z "},\u0424:{ha:1031,x_min:52,x_max:983,o:"m 557 887 l 581 887 q 787 836 695 886 q 931 696 880 786 q 983 496 983 606 q 932 296 983 386 q 789 156 881 207 q 583 104 697 105 l 557 104 l 557 -41 l 476 -41 l 476 104 l 457 104 q 248 154 340 104 q 103 294 155 203 q 52 495 52 384 q 103 696 52 606 q 248 837 155 787 q 457 887 341 887 l 476 887 l 476 1028 l 557 1028 l 557 887 m 557 818 l 557 172 l 577 172 q 813 261 725 172 q 901 496 901 350 q 819 723 901 635 q 600 817 737 810 l 557 818 m 458 818 q 221 730 309 818 q 133 495 133 642 q 215 267 133 353 q 435 173 297 180 l 476 172 l 476 818 l 458 818 z "},\u0426:{ha:991,x_min:121,x_max:945,o:"m 121 987 l 205 987 l 205 71 l 764 71 l 764 987 l 848 987 l 848 72 l 945 72 l 939 -238 l 861 -238 l 861 0 l 121 0 l 121 987 z "},\u0427:{ha:924,x_min:117,x_max:798,o:"m 798 987 l 798 0 l 714 0 l 714 449 q 447 410 575 410 q 199 483 279 410 q 117 706 119 555 l 117 987 l 201 987 l 201 711 q 260 536 201 591 q 447 481 319 481 q 714 520 576 481 l 714 987 l 798 987 z "},\u0428:{ha:1286,x_min:123,x_max:1162,o:"m 208 987 l 208 71 l 602 71 l 602 987 l 686 987 l 686 71 l 1079 71 l 1079 987 l 1162 987 l 1162 0 l 123 0 l 123 987 l 208 987 z "},\u0429:{ha:1309,x_min:123,x_max:1256,o:"m 208 987 l 208 71 l 602 71 l 602 987 l 686 987 l 686 71 l 1079 71 l 1079 987 l 1162 987 l 1162 68 l 1256 68 l 1250 -238 l 1176 -238 l 1176 0 l 123 0 l 123 987 l 208 987 z "},\u042A:{ha:1075,x_min:-7,x_max:979,o:"m -7 987 l 408 987 l 408 559 l 652 559 q 827 525 753 559 q 940 429 901 492 q 979 281 979 366 q 892 75 979 150 q 650 0 804 0 l 324 0 l 324 918 l -7 918 l -7 987 m 408 488 l 408 71 l 652 71 q 831 127 766 71 q 895 282 895 184 q 833 431 895 376 q 658 488 770 486 l 408 488 z "},\u042B:{ha:1160,x_min:126,x_max:1027,o:"m 210 559 l 454 559 q 629 525 555 559 q 742 429 703 492 q 781 281 781 366 q 694 75 781 150 q 452 0 606 0 l 126 0 l 126 987 l 210 987 l 210 559 m 210 488 l 210 71 l 454 71 q 633 127 568 71 q 697 282 697 184 q 635 431 697 376 q 460 488 572 486 l 210 488 m 1027 0 l 944 0 l 944 987 l 1027 987 l 1027 0 z "},\u042C:{ha:850,x_min:121,x_max:776,o:"m 204 559 l 449 559 q 624 525 550 559 q 737 429 698 492 q 776 281 776 366 q 688 75 776 150 q 446 0 601 0 l 121 0 l 121 987 l 204 987 l 204 559 m 204 488 l 204 71 l 448 71 q 627 127 563 71 q 692 282 692 184 q 629 431 692 376 q 454 488 567 486 l 204 488 z "},\u042D:{ha:917,x_min:96,x_max:830,o:"m 179 308 q 263 118 196 178 q 458 57 330 57 q 669 160 592 57 q 747 436 747 263 l 747 460 l 334 460 l 334 532 l 747 532 l 747 556 q 667 829 747 728 q 453 930 588 930 q 179 678 210 930 l 96 678 q 203 916 111 831 q 453 1001 296 1001 q 727 879 623 1001 q 830 549 830 758 l 830 431 q 784 198 830 300 q 653 41 737 96 q 458 -14 568 -14 q 205 70 300 -14 q 96 308 111 153 l 179 308 z "},\u042E:{ha:1264,x_min:142,x_max:1177,o:"m 1177 440 q 1129 201 1177 304 q 995 42 1082 98 q 793 -14 907 -14 q 513 110 620 -14 q 407 444 407 234 l 407 465 l 225 465 l 225 0 l 142 0 l 142 987 l 225 987 l 225 534 l 407 534 q 455 785 407 682 q 590 945 503 889 q 791 1001 677 1001 q 992 946 905 1001 q 1127 791 1080 891 q 1177 558 1175 690 l 1177 440 m 1093 547 q 1013 827 1093 726 q 791 928 932 928 q 572 826 654 928 q 490 543 490 725 l 490 440 q 572 162 490 264 q 793 59 653 59 q 1014 160 935 59 q 1093 443 1093 262 l 1093 547 z "},\u042F:{ha:849,x_min:62,x_max:736,o:"m 652 0 l 652 402 l 368 402 l 153 0 l 62 0 l 295 425 q 149 526 199 458 q 99 690 99 593 q 188 908 99 829 q 437 987 276 987 l 736 987 l 736 0 l 652 0 m 182 690 q 244 533 182 593 q 413 473 305 473 l 652 473 l 652 916 l 434 916 q 248 858 313 916 q 182 690 182 799 z "},\u0431:{ha:764,x_min:66,x_max:715,o:"m 401 685 q 628 594 541 685 q 715 352 715 503 l 715 334 q 675 155 715 235 q 561 31 635 75 q 391 -14 487 -14 q 156 83 245 -14 q 66 341 66 180 l 66 406 q 153 770 66 634 q 399 933 239 907 q 542 977 500 949 q 583 1053 583 1005 l 652 1053 q 629 959 652 996 q 557 899 605 922 q 412 861 510 876 q 232 765 300 843 q 144 557 164 688 q 253 650 187 614 q 401 685 318 685 m 147 351 l 147 334 q 214 133 147 210 q 391 55 281 55 q 567 133 500 55 q 633 339 633 212 l 633 357 q 566 544 633 471 q 389 616 498 616 q 214 543 280 616 q 147 351 147 469 z "},\u0432:{ha:777,x_min:115,x_max:702,o:"m 115 0 l 115 734 l 384 734 q 598 684 524 734 q 673 538 673 634 q 640 440 673 483 q 543 377 606 397 q 658 315 614 363 q 702 203 702 267 q 630 53 702 106 q 428 0 559 0 l 115 0 m 195 338 l 195 68 l 431 68 q 572 103 522 68 q 621 205 621 138 q 572 302 621 266 q 431 338 522 338 l 195 338 m 195 406 l 401 406 q 592 536 592 408 q 539 634 592 603 q 384 665 487 665 l 195 665 l 195 406 z "},\u0433:{ha:585,x_min:111,x_max:563,o:"m 563 664 l 192 664 l 192 0 l 111 0 l 111 734 l 563 734 l 563 664 z "},\u0434:{ha:796,x_min:35,x_max:745,o:"m 89 68 l 125 115 q 223 454 210 231 l 236 734 l 669 734 l 669 68 l 745 68 l 745 -216 l 665 -216 l 665 0 l 113 0 l 113 -216 l 35 -216 l 36 68 l 89 68 m 182 68 l 588 68 l 588 658 l 313 658 l 304 467 q 182 68 292 205 z "},\u0436:{ha:1065,x_min:16,x_max:1042,o:"m 667 339 l 569 339 l 569 0 l 488 0 l 488 339 l 391 339 l 119 0 l 16 0 l 320 376 l 50 734 l 149 734 l 389 412 l 488 412 l 488 734 l 569 734 l 569 412 l 668 412 l 909 734 l 1008 734 l 737 376 l 1042 0 l 938 0 l 667 339 z "},\u0437:{ha:703,x_min:66,x_max:631,o:"m 536 540 q 486 642 536 606 q 350 678 437 678 q 215 638 271 678 q 159 536 159 597 l 79 536 q 157 687 79 627 q 350 747 235 747 q 547 692 476 747 q 617 538 617 638 q 585 443 617 486 q 490 376 552 400 q 631 201 631 338 q 554 45 631 102 q 351 -13 477 -13 q 147 49 228 -13 q 66 210 66 111 l 148 210 q 207 99 148 144 q 351 55 265 55 q 496 94 444 55 q 549 200 549 133 q 500 307 549 274 q 353 339 452 339 l 241 339 l 241 410 l 367 410 q 536 540 536 414 z "},\u0438:{ha:781,x_min:111,x_max:669,o:"m 588 734 l 669 734 l 669 0 l 588 0 l 588 603 l 192 0 l 111 0 l 111 734 l 192 734 l 192 130 l 588 734 z "},\u043A:{ha:720,x_min:111,x_max:709,o:"m 305 336 l 193 336 l 193 0 l 111 0 l 111 734 l 193 734 l 193 408 l 304 408 l 573 734 l 675 734 l 374 378 l 709 0 l 602 0 l 305 336 z "},\u043B:{ha:782,x_min:30,x_max:670,o:"m 670 734 l 670 0 l 589 0 l 589 664 l 288 664 l 275 389 q 245 156 267 237 q 178 38 222 76 q 61 0 134 0 l 30 0 l 30 72 l 55 73 q 155 141 125 75 q 195 378 186 208 l 210 734 l 670 734 z "},\u043C:{ha:1015,x_min:115,x_max:904,o:"m 512 110 l 804 734 l 904 734 l 904 0 l 823 0 l 823 602 l 541 0 l 483 0 l 195 616 l 195 0 l 115 0 l 115 734 l 221 734 l 512 110 z "},\u043D:{ha:781,x_min:111,x_max:669,o:"m 669 0 l 588 0 l 588 336 l 193 336 l 193 0 l 111 0 l 111 734 l 193 734 l 193 405 l 588 405 l 588 734 l 669 734 l 669 0 z "},\u043F:{ha:781,x_min:111,x_max:669,o:"m 669 0 l 588 0 l 588 664 l 193 664 l 193 0 l 111 0 l 111 734 l 669 734 l 669 0 z "},\u0442:{ha:660,x_min:27,x_max:633,o:"m 633 665 l 366 665 l 366 0 l 284 0 l 284 665 l 27 665 l 27 734 l 633 734 l 633 665 z "},\u0444:{ha:1006,x_min:75,x_max:931,o:"m 75 361 q 145 644 75 540 q 340 747 216 747 q 460 715 411 747 l 460 1042 l 541 1042 l 541 713 q 666 747 591 747 q 854 653 783 747 q 930 391 924 559 l 931 347 q 861 82 931 179 q 667 -14 790 -14 q 541 18 594 -14 l 541 -282 l 460 -282 l 460 17 q 338 -14 408 -14 q 153 74 222 -14 q 76 317 83 161 l 75 361 m 850 361 q 797 593 850 509 q 648 678 744 678 q 541 648 579 678 l 541 81 q 650 54 584 54 q 798 131 745 54 q 850 361 850 207 m 157 347 q 208 131 157 208 q 354 54 258 54 q 460 82 418 54 l 460 650 q 355 678 421 678 q 209 594 260 678 q 157 347 157 509 z "},\u0446:{ha:791,x_min:111,x_max:744,o:"m 111 734 l 193 734 l 193 68 l 588 68 l 588 734 l 669 734 l 669 68 l 744 68 l 738 -218 l 663 -218 l 663 0 l 111 0 l 111 734 z "},\u0447:{ha:739,x_min:75,x_max:628,o:"m 628 0 l 547 0 l 547 309 q 355 272 446 272 q 143 336 209 272 q 75 536 77 400 l 75 734 l 155 734 l 155 540 q 202 388 157 435 q 355 342 247 342 q 547 377 453 345 l 547 734 l 628 734 l 628 0 z "},\u0448:{ha:1102,x_min:111,x_max:1005,o:"m 193 734 l 193 68 l 519 68 l 519 734 l 600 734 l 600 68 l 924 68 l 924 734 l 1005 734 l 1005 0 l 111 0 l 111 734 l 193 734 z "},\u0449:{ha:1114,x_min:107,x_max:1089,o:"m 189 734 l 189 68 l 515 68 l 515 734 l 597 734 l 597 68 l 920 68 l 920 734 l 1001 734 l 1001 68 l 1089 68 l 1083 -218 l 1008 -218 l 1008 0 l 107 0 l 107 734 l 189 734 z "},\u044A:{ha:875,x_min:24,x_max:817,o:"m 24 734 l 338 734 l 338 467 l 550 467 q 693 438 631 467 q 786 356 754 408 q 817 235 817 304 q 744 64 817 128 q 547 0 671 0 l 258 0 l 258 665 l 24 665 l 24 734 m 338 398 l 338 68 l 549 68 q 686 113 636 68 q 736 233 736 157 q 687 352 736 307 q 555 398 639 397 l 338 398 z "},\u044B:{ha:1043,x_min:115,x_max:923,o:"m 195 467 l 407 467 q 550 438 488 467 q 643 356 611 408 q 674 235 674 304 q 601 64 674 128 q 404 0 528 0 l 115 0 l 115 734 l 195 734 l 195 467 m 195 398 l 195 68 l 406 68 q 543 113 493 68 q 593 233 593 157 q 544 352 593 307 q 412 398 496 397 l 195 398 m 923 0 l 842 0 l 842 734 l 923 734 l 923 0 z "},\u044C:{ha:743,x_min:115,x_max:674,o:"m 195 467 l 407 467 q 550 438 488 467 q 643 356 611 408 q 674 235 674 304 q 601 64 674 128 q 404 0 528 0 l 115 0 l 115 734 l 195 734 l 195 467 m 195 398 l 195 68 l 406 68 q 543 113 493 68 q 593 233 593 157 q 544 352 593 307 q 412 398 496 397 l 195 398 z "},\u044D:{ha:743,x_min:75,x_max:664,o:"m 351 678 q 210 630 267 678 q 154 505 154 581 l 75 505 q 112 627 75 571 q 214 715 149 682 q 351 747 278 747 q 571 653 486 747 q 663 405 656 558 l 664 353 q 625 162 664 247 q 515 32 585 78 q 351 -14 444 -14 q 153 59 231 -14 q 75 248 75 132 l 154 248 q 210 108 154 161 q 351 55 266 55 q 515 131 453 55 q 582 336 577 207 l 250 336 l 250 405 l 582 405 q 514 604 576 529 q 351 678 453 678 z "},\u044E:{ha:1129,x_min:115,x_max:1059,o:"m 195 399 l 405 399 q 451 580 408 500 q 567 704 494 661 q 731 747 640 747 q 968 644 877 747 q 1059 372 1059 541 l 1059 355 q 1018 164 1059 250 q 902 33 977 79 q 732 -14 827 -14 q 502 82 592 -14 q 405 330 412 177 l 195 330 l 195 0 l 115 0 l 115 734 l 195 734 l 195 399 m 485 355 q 553 139 485 224 q 732 55 621 55 q 910 139 842 55 q 978 362 978 224 l 978 378 q 909 593 978 508 q 731 678 841 678 q 553 593 622 678 q 485 370 485 508 l 485 355 z "},\u044F:{ha:754,x_min:63,x_max:641,o:"m 641 734 l 641 0 l 559 0 l 559 296 l 332 296 l 153 0 l 63 0 l 248 306 q 131 382 172 326 q 89 515 89 438 q 160 674 89 614 q 354 734 232 734 l 641 734 m 170 513 q 211 408 170 449 q 326 365 252 366 l 559 365 l 559 665 l 352 665 q 219 624 267 665 q 170 513 170 583 z "},\u0452:{ha:762,x_min:-18,x_max:659,o:"m 396 838 l 186 838 l 186 610 q 289 711 227 675 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 -60 q 605 -236 659 -176 q 453 -296 551 -296 q 370 -283 411 -296 l 379 -216 q 453 -227 408 -227 q 546 -184 513 -227 q 578 -60 578 -140 l 578 478 q 537 628 578 579 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 838 l -18 838 l -18 907 l 106 907 l 106 1042 l 186 1042 l 186 907 l 396 907 l 396 838 z "},\u0454:{ha:743,x_min:73,x_max:668,o:"m 386 55 q 527 102 469 55 q 590 227 584 149 l 668 227 q 626 104 665 159 q 523 18 587 49 q 386 -14 459 -14 q 157 86 241 -14 q 73 359 73 186 l 73 381 q 111 573 73 490 q 219 702 149 656 q 385 747 290 747 q 584 675 506 747 q 668 486 663 604 l 590 486 q 528 625 585 572 q 385 678 471 678 q 219 605 279 678 q 154 401 159 531 l 488 401 l 488 332 l 154 332 q 219 128 159 201 q 386 55 279 55 z "},\u0459:{ha:1187,x_min:24,x_max:1137,o:"m 658 440 l 869 440 q 1069 376 997 439 q 1137 221 1137 316 q 1065 61 1137 122 q 871 0 993 1 l 576 0 l 576 664 l 283 664 l 269 361 q 210 82 257 162 q 62 0 163 2 l 24 0 l 24 72 l 50 73 q 151 141 120 75 q 191 378 181 208 l 205 734 l 658 734 l 658 440 m 658 372 l 658 68 l 868 68 q 1005 110 956 68 q 1055 222 1055 153 q 1006 330 1055 290 q 871 372 956 371 l 658 372 z "},\u045A:{ha:1196,x_min:111,x_max:1147,o:"m 193 442 l 588 442 l 588 734 l 669 734 l 669 440 l 890 440 q 1077 379 1007 437 q 1147 221 1147 321 q 1076 61 1147 121 q 884 0 1004 1 l 588 0 l 588 374 l 193 374 l 193 0 l 111 0 l 111 734 l 193 734 l 193 442 m 669 372 l 669 68 l 880 68 q 1016 110 966 68 q 1066 222 1066 151 q 1016 332 1066 292 q 881 372 965 372 l 669 372 z "},\u045B:{ha:774,x_min:-11,x_max:659,o:"m 404 846 l 186 846 l 186 610 q 289 711 227 675 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 846 l -11 846 l -11 915 l 106 915 l 106 1042 l 186 1042 l 186 915 l 404 915 l 404 846 z "},\u045F:{ha:781,x_min:111,x_max:669,o:"m 193 734 l 193 68 l 588 68 l 588 734 l 669 734 l 669 0 l 433 0 l 433 -239 l 352 -239 l 352 0 l 111 0 l 111 734 l 193 734 z "},\u0460:{ha:1233,x_min:115,x_max:1117,o:"m 1117 987 l 1117 278 q 1044 64 1116 141 q 846 -14 972 -14 q 708 22 768 -14 q 616 129 647 57 q 522 22 583 57 q 381 -14 461 -14 q 188 62 259 -14 q 115 273 117 138 l 115 987 l 199 987 l 199 277 q 249 116 200 175 q 381 56 298 56 q 521 117 470 56 q 573 278 572 177 l 573 987 l 659 987 l 659 278 q 710 117 660 177 q 846 56 760 56 q 982 116 932 56 q 1034 278 1033 176 l 1034 987 l 1117 987 z "},\u0461:{ha:1143,x_min:106,x_max:1022,o:"m 1022 734 l 1022 254 q 954 57 1021 129 q 773 -14 888 -14 q 648 17 703 -14 q 564 114 593 49 q 477 17 533 49 q 350 -14 422 -14 q 173 56 239 -14 q 106 254 108 127 l 106 734 l 187 734 l 187 258 q 239 100 188 155 q 350 54 283 54 q 476 110 429 54 q 524 260 524 165 l 524 734 l 605 734 l 605 260 q 650 109 605 164 q 773 54 696 54 q 894 107 848 54 q 941 254 939 161 l 941 734 l 1022 734 z "},\u0463:{ha:743,x_min:-20,x_max:673,o:"m 416 734 l 195 734 l 195 479 l 406 479 q 549 450 488 479 q 642 366 610 420 q 673 241 673 312 q 600 65 673 130 q 404 0 527 0 l 114 0 l 114 734 l -20 734 l -20 802 l 114 802 l 114 1049 l 195 1049 l 195 802 l 416 802 l 416 734 m 195 410 l 195 68 l 405 68 q 543 114 493 68 q 592 239 592 160 q 544 362 592 315 q 412 410 496 408 l 195 410 z "},\u0464:{ha:1241,x_min:142,x_max:1137,o:"m 226 551 l 402 551 q 506 880 402 759 q 779 1002 609 1002 q 1029 917 936 1002 q 1137 679 1122 832 l 1053 679 q 779 930 1022 930 q 565 830 645 930 q 486 551 486 730 l 846 551 l 846 482 l 486 482 l 486 432 q 563 161 486 264 q 774 58 640 58 q 971 120 905 58 q 1053 309 1038 183 l 1137 309 q 1027 71 1121 154 q 774 -13 932 -13 q 504 110 605 -13 q 402 437 402 233 l 402 482 l 226 482 l 226 0 l 142 0 l 142 987 l 226 987 l 226 551 z "},\u0465:{ha:1033,x_min:113,x_max:957,o:"m 194 408 l 363 408 q 454 656 370 565 q 674 747 538 747 q 873 675 795 747 q 957 486 951 604 l 879 486 q 817 625 873 572 q 674 678 760 678 q 511 608 572 678 q 444 408 450 537 l 764 408 l 764 338 l 443 338 q 508 129 446 202 q 675 55 569 55 q 817 103 760 55 q 879 227 874 151 l 957 227 q 915 104 954 159 q 812 18 876 49 q 675 -14 748 -14 q 450 81 534 -14 q 362 338 367 176 l 194 338 l 194 0 l 113 0 l 113 734 l 194 734 l 194 408 z "},\u0466:{ha:833,x_min:25,x_max:827,o:"m 625 321 l 463 321 l 463 0 l 381 0 l 381 321 l 228 321 l 112 0 l 25 0 l 387 987 l 468 987 l 827 0 l 741 0 l 625 321 m 254 394 l 600 394 l 427 874 l 254 394 z "},\u0467:{ha:732,x_min:17,x_max:702,o:"m 518 235 l 402 235 l 402 0 l 321 0 l 321 235 l 200 235 l 101 0 l 17 0 l 323 734 l 395 734 l 702 0 l 618 0 l 518 235 m 229 304 l 488 304 l 385 549 l 359 637 l 332 549 l 229 304 z "},\u0468:{ha:1219,x_min:155,x_max:1186,o:"m 238 394 l 528 394 l 746 987 l 827 987 l 1186 0 l 1099 0 l 984 321 l 822 321 l 822 0 l 740 0 l 740 321 l 587 321 l 471 0 l 384 0 l 502 322 l 238 322 l 238 0 l 155 0 l 155 987 l 238 987 l 238 394 m 612 394 l 958 394 l 786 874 l 612 394 z "},\u0469:{ha:1046,x_min:136,x_max:1005,o:"m 218 304 l 447 304 l 627 734 l 698 734 l 1005 0 l 921 0 l 821 235 l 705 235 l 705 0 l 624 0 l 624 235 l 503 235 l 404 0 l 320 0 l 418 235 l 218 235 l 218 0 l 136 0 l 136 734 l 218 734 l 218 304 m 532 304 l 791 304 l 688 549 l 662 637 l 635 549 l 532 304 z "},\u046A:{ha:1132,x_min:106,x_max:1025,o:"m 106 0 l 106 268 q 183 463 109 398 q 408 528 256 528 l 475 528 l 183 987 l 952 987 l 660 528 l 724 528 q 950 462 878 528 q 1025 265 1023 396 l 1025 0 l 941 0 l 941 262 q 892 410 941 364 q 728 457 844 456 l 614 457 l 608 447 l 608 0 l 525 0 l 525 450 l 521 457 l 408 457 q 242 413 292 457 q 190 269 193 369 l 190 0 l 106 0 m 562 528 l 573 528 l 812 916 l 323 916 l 562 528 z "},\u046B:{ha:981,x_min:107,x_max:873,o:"m 107 0 l 107 142 q 180 338 110 273 q 401 403 251 403 l 180 734 l 806 734 l 585 403 q 800 338 728 403 q 873 140 871 273 l 873 0 l 792 0 l 792 140 q 744 288 791 243 q 589 334 696 333 l 539 334 l 532 323 l 532 0 l 452 0 l 452 327 l 447 334 l 397 334 q 238 288 285 334 q 189 140 191 243 l 189 0 l 107 0 m 486 403 l 500 403 l 669 664 l 317 664 l 486 403 z "},\u046C:{ha:1501,x_min:142,x_max:1394,o:"m 225 529 l 812 529 l 812 528 l 844 528 l 552 987 l 1321 987 l 1029 528 l 1093 528 q 1319 462 1246 528 q 1394 265 1392 396 l 1394 0 l 1310 0 l 1310 264 q 1261 411 1309 366 q 1100 457 1213 456 l 983 457 l 977 447 l 977 0 l 894 0 l 894 450 l 890 457 l 777 457 q 611 413 661 457 q 559 269 562 369 l 559 0 l 475 0 l 475 264 q 547 460 476 395 l 225 460 l 225 0 l 142 0 l 142 987 l 225 987 l 225 529 m 930 528 l 942 528 l 1181 916 l 692 916 l 930 528 z "},\u046D:{ha:1287,x_min:114,x_max:1179,o:"m 891 403 q 1106 338 1034 403 q 1179 140 1177 273 l 1179 0 l 1098 0 l 1098 140 q 1049 288 1097 243 q 895 334 1002 333 l 845 334 l 838 323 l 838 0 l 758 0 l 758 327 l 753 334 l 692 334 q 542 287 586 331 q 495 145 498 242 l 495 0 l 413 0 l 413 139 q 481 334 414 269 l 195 334 l 195 0 l 114 0 l 114 734 l 195 734 l 195 403 l 707 403 l 486 734 l 1112 734 l 891 403 m 792 403 l 806 403 l 975 664 l 623 664 l 792 403 z "},\u046E:{ha:715,x_min:79,x_max:661,o:"m 645 728 q 598 594 645 652 q 464 507 551 536 q 661 268 661 454 q 566 69 661 144 q 312 -5 471 -5 l 266 -5 q 157 -92 157 -7 q 188 -164 157 -130 q 272 -218 220 -198 l 242 -277 q 126 -200 173 -252 q 79 -90 79 -147 q 127 22 79 -18 q 275 62 176 62 l 316 62 q 507 117 435 62 q 578 265 578 172 q 509 421 578 372 q 308 470 439 470 l 218 470 l 218 540 l 304 540 q 564 730 564 540 q 503 867 564 817 q 329 918 441 917 l 105 918 l 105 987 l 319 987 q 558 918 471 987 q 645 728 645 849 m 389 1164 l 506 1296 l 578 1296 l 578 1288 l 418 1111 l 359 1111 l 200 1289 l 200 1296 l 273 1296 l 389 1164 z "},\u046F:{ha:672,x_min:64,x_max:594,o:"m 497 541 q 444 630 497 597 q 295 664 391 663 l 94 664 l 94 734 l 289 734 q 502 681 425 734 q 579 538 579 628 q 543 442 579 485 q 437 374 506 399 q 594 206 594 334 q 510 53 594 111 q 283 -5 426 -5 l 249 -5 q 141 -92 141 -8 q 172 -163 141 -130 q 257 -218 203 -197 l 227 -277 q 110 -199 155 -251 q 64 -90 64 -147 q 113 22 64 -18 q 259 62 162 62 q 408 80 357 62 q 486 129 458 98 q 513 203 513 161 q 453 306 513 274 q 277 337 393 337 l 187 337 l 187 407 l 275 407 q 497 541 497 407 m 307 941 l 424 1073 l 496 1073 l 496 1065 l 336 887 l 277 887 l 118 1065 l 118 1073 l 191 1073 l 307 941 z "},\u0472:{ha:935,x_min:80,x_max:849,o:"m 849 440 q 802 201 849 304 q 667 42 755 98 q 465 -14 580 -14 q 265 42 353 -14 q 129 200 177 98 q 80 435 81 302 l 80 546 q 128 785 80 681 q 263 945 176 889 q 464 1001 351 1001 q 665 946 578 1001 q 800 791 752 891 q 849 558 847 690 l 849 440 m 163 525 l 766 525 l 766 547 q 686 827 766 726 q 464 928 605 928 q 245 826 327 928 q 163 543 163 725 l 163 525 m 766 456 l 163 456 l 163 440 q 244 162 163 264 q 465 59 326 59 q 686 160 606 59 q 766 442 766 261 l 766 456 z "},\u0473:{ha:785,x_min:60,x_max:715,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 624 644 533 747 q 715 372 715 541 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 633 334 l 142 334 q 215 132 148 210 q 389 55 281 55 q 562 134 496 55 q 633 334 627 212 m 387 678 q 215 601 283 678 q 142 402 148 523 l 633 402 q 558 601 626 524 q 387 678 491 678 z "},\u0474:{ha:855,x_min:19,x_max:836,o:"m 370 173 l 391 99 l 412 173 l 619 819 q 695 957 649 915 q 814 1000 741 1000 l 836 1000 l 835 927 q 782 920 801 927 q 696 806 728 901 l 430 0 l 351 0 l 19 987 l 110 987 l 370 173 z "},\u0475:{ha:684,x_min:30,x_max:695,o:"m 294 184 l 320 91 l 348 184 l 481 608 q 542 714 506 681 q 631 747 578 747 q 695 732 672 747 l 684 667 q 644 675 667 675 q 560 599 588 675 l 353 0 l 288 0 l 30 734 l 114 734 l 294 184 z "},\u047A:{ha:935,x_min:80,x_max:849,o:"m 849 440 q 807 213 849 313 q 687 56 765 113 q 508 -12 610 -2 l 508 -96 l 427 -96 l 427 -12 q 175 124 270 2 q 80 445 80 245 l 80 546 q 123 774 80 673 q 244 932 165 874 q 427 999 323 990 l 427 1080 l 508 1080 l 508 998 q 757 861 665 982 q 849 541 849 739 l 849 440 m 766 547 q 698 809 766 709 q 508 925 630 909 l 508 846 l 427 846 l 427 926 q 235 812 304 911 q 163 555 165 714 l 163 440 q 234 175 163 276 q 427 61 304 75 l 427 140 l 508 140 l 508 61 q 698 176 630 76 q 766 442 766 277 l 766 547 z "},\u047B:{ha:773,x_min:60,x_max:715,o:"m 60 378 q 139 629 60 528 q 347 745 218 730 l 347 821 l 427 821 l 427 745 q 637 629 559 730 q 715 373 715 528 l 715 355 q 636 103 715 204 q 427 -12 557 2 l 427 -90 l 347 -90 l 347 -11 q 139 104 218 4 q 60 359 60 204 l 60 378 m 427 58 q 578 156 522 73 q 634 360 634 238 l 634 378 q 578 576 634 492 q 427 675 522 659 l 427 593 l 347 593 l 347 675 q 197 576 254 660 q 141 373 141 493 l 141 355 q 198 155 141 236 q 347 58 254 73 l 347 138 l 427 138 l 427 58 z "},\u047C:{ha:1226,x_min:115,x_max:1115,o:"m 850 986 q 1043 905 972 986 q 1115 682 1114 825 l 1115 292 q 1043 66 1115 147 q 850 -14 972 -14 q 709 21 770 -14 q 615 127 648 56 q 522 21 583 56 q 381 -14 460 -14 q 187 66 258 -14 q 115 293 115 147 l 115 680 q 186 905 115 823 q 381 986 258 986 l 381 916 q 249 853 298 916 q 199 683 200 791 l 199 292 q 249 119 199 182 q 381 56 298 56 q 521 117 470 56 q 573 277 572 177 l 573 599 l 657 599 l 657 277 q 709 117 658 177 q 850 56 760 56 q 982 120 934 56 q 1031 292 1031 183 l 1031 680 q 982 852 1031 789 q 850 916 934 916 l 850 986 m 926 1139 l 926 1082 l 905 1082 q 728 1136 814 1082 q 597 1189 642 1189 q 496 1077 496 1189 l 433 1077 l 433 1099 q 478 1210 434 1170 q 594 1249 522 1249 q 740 1195 654 1249 q 901 1139 825 1141 l 926 1139 m 559 935 q 608 1025 606 977 l 608 1098 l 679 1098 l 679 1027 q 652 957 678 992 q 593 904 627 922 l 559 935 z "},\u047D:{ha:1109,x_min:96,x_max:1011,o:"m 768 742 q 945 667 880 742 q 1011 458 1010 592 l 1011 271 q 946 61 1011 137 q 768 -14 881 -14 q 639 17 695 -14 q 553 115 583 49 q 467 17 523 49 q 339 -14 411 -14 q 161 61 227 -14 q 96 269 96 136 l 96 456 q 161 666 96 591 q 339 742 226 742 l 339 673 q 221 616 265 673 q 176 460 177 559 l 176 271 q 220 112 176 170 q 339 54 264 54 q 466 110 418 54 q 513 260 513 165 l 513 425 l 593 425 l 593 254 q 642 108 595 161 q 768 54 690 54 q 884 110 840 54 q 930 263 928 166 l 930 456 q 886 615 930 557 q 768 673 842 673 l 768 742 m 869 919 l 869 861 l 849 861 q 671 915 757 861 q 595 956 623 945 q 541 968 567 968 q 439 857 439 968 l 377 857 l 377 876 q 421 989 377 949 q 538 1029 466 1029 q 601 1017 570 1029 q 681 976 633 1006 q 769 932 730 945 q 869 919 809 919 m 496 707 q 544 796 542 748 l 544 869 l 616 869 l 616 800 q 589 728 616 764 q 530 675 562 692 l 496 707 z "},\u047E:{ha:1233,x_min:115,x_max:1117,o:"m 1117 987 l 1117 278 q 1044 64 1116 141 q 846 -14 972 -14 q 708 22 768 -14 q 616 129 647 57 q 522 22 583 57 q 381 -14 461 -14 q 188 62 259 -14 q 115 273 117 138 l 115 987 l 199 987 l 199 277 q 249 116 200 175 q 381 56 298 56 q 521 117 470 56 q 573 278 572 177 l 573 987 l 659 987 l 659 278 q 710 117 660 177 q 846 56 760 56 q 982 116 932 56 q 1034 278 1033 176 l 1034 987 l 1117 987 m 362 1150 l 362 1206 l 874 1206 l 876 1150 l 650 1150 l 650 1074 l 575 1074 l 575 1150 l 362 1150 z "},\u047F:{ha:1143,x_min:106,x_max:1022,o:"m 1022 734 l 1022 254 q 954 57 1021 129 q 773 -14 888 -14 q 648 17 703 -14 q 564 114 593 49 q 477 17 533 49 q 350 -14 422 -14 q 173 56 239 -14 q 106 254 108 127 l 106 734 l 187 734 l 187 258 q 239 100 188 155 q 350 54 283 54 q 476 110 429 54 q 524 260 524 165 l 524 734 l 605 734 l 605 260 q 650 109 605 164 q 773 54 696 54 q 894 107 848 54 q 941 254 939 161 l 941 734 l 1022 734 m 309 932 l 311 987 l 823 987 l 825 932 l 599 932 l 599 844 l 523 844 l 523 932 l 309 932 z "},\u0480:{ha:879,x_min:88,x_max:811,o:"m 510 -248 l 427 -248 l 427 -13 q 180 125 273 -1 q 88 447 88 250 l 88 552 q 135 785 88 682 q 268 945 182 888 q 463 1002 354 1002 q 713 916 621 1002 q 811 679 806 831 l 727 679 q 653 865 719 799 q 463 930 587 930 q 253 825 333 930 q 172 549 172 720 l 172 442 q 250 164 172 272 q 458 56 328 56 l 510 56 l 510 -248 z "},\u0481:{ha:726,x_min:75,x_max:664,o:"m 439 -248 l 358 -248 l 358 -12 q 152 99 229 -1 q 75 357 75 199 l 75 381 q 114 570 75 486 q 225 701 153 654 q 389 747 296 747 q 587 674 509 747 q 664 485 664 600 l 586 485 q 531 624 586 569 q 389 678 476 678 q 220 596 283 678 q 157 375 157 515 l 157 353 q 217 139 157 221 q 382 54 278 57 l 439 54 l 439 -248 z "},"\u0482":{ha:847,x_min:92,x_max:777,o:"m 391 293 l 587 176 l 551 112 l 353 227 l 227 0 l 136 0 l 288 270 l 92 386 l 128 450 l 327 334 l 476 601 l 279 717 l 317 782 l 514 666 l 652 910 l 741 910 l 578 624 l 777 508 l 737 444 l 542 559 l 391 293 z "},"\u0483":{ha:0,x_min:-584,x_max:-163,o:"m -508 908 l -508 825 l -584 825 l -584 962 l -238 962 l -238 1035 l -163 1035 l -163 908 l -508 908 z "},"\u0484":{ha:0,x_min:-608,x_max:-115,o:"m -276 1056 q -160 1016 -204 1056 q -115 903 -115 976 l -115 884 l -178 884 q -279 995 -178 995 q -332 984 -305 995 q -406 944 -359 972 q -496 902 -453 915 q -608 888 -539 888 l -608 946 l -580 946 q -425 1000 -508 948 q -293 1055 -342 1051 l -276 1056 z "},"\u0485":{ha:0,x_min:-442,x_max:-307,o:"m -442 1017 l -442 1107 l -349 1107 l -349 1013 l -307 930 l -345 899 l -442 1017 z "},"\u0486":{ha:0,x_min:-408,x_max:-272,o:"m -369 899 l -408 930 l -366 1013 l -366 1107 l -272 1107 l -272 1017 l -369 899 z "},"\u0488":{ha:0,x_min:-1020,x_max:300,o:"m -512 859 q -473 951 -512 916 q -370 987 -434 987 q -266 951 -305 987 q -227 859 -227 916 l -302 859 q -320 909 -302 890 q -370 928 -337 928 q -418 910 -401 928 q -435 859 -435 892 l -512 859 m -111 671 q -72 764 -111 728 q 31 799 -33 799 q 135 764 95 799 q 174 671 174 729 l 98 671 q 80 722 98 705 q 31 740 62 740 q -17 722 1 740 q -34 671 -34 704 l -111 671 m 15 330 q 55 423 15 388 q 157 458 94 458 q 261 422 222 458 q 300 330 300 387 l 224 330 q 207 381 224 363 q 157 399 189 399 q 109 380 126 399 q 92 330 92 361 l 15 330 m -118 -22 q -79 71 -118 35 q 24 106 -39 106 q 127 71 88 106 q 167 -22 167 35 l 91 -22 q 73 29 91 12 q 24 47 55 47 q -24 28 -7 47 q -41 -22 -41 9 l -118 -22 m -509 -214 q -470 -122 -509 -157 q -366 -87 -431 -87 q -262 -122 -302 -87 q -223 -214 -223 -157 l -299 -214 q -316 -164 -299 -183 q -366 -146 -334 -146 q -415 -164 -397 -146 q -432 -214 -432 -183 l -509 -214 m -901 671 q -861 764 -901 728 q -758 799 -822 799 q -654 764 -693 799 q -614 671 -614 728 l -690 671 q -708 721 -690 703 q -758 740 -725 740 q -806 722 -789 740 q -823 671 -823 704 l -901 671 m -1020 330 q -980 423 -1020 388 q -878 458 -941 458 q -774 422 -813 458 q -734 330 -734 387 l -810 330 q -828 381 -810 363 q -878 399 -846 399 q -926 380 -909 399 q -943 330 -943 361 l -1020 330 m -907 -22 q -868 71 -907 36 q -765 106 -828 106 q -661 71 -701 106 q -621 -22 -621 36 l -698 -22 q -716 29 -698 12 q -765 47 -734 47 q -813 29 -795 47 q -830 -22 -830 11 l -907 -22 z "},"\u0489":{ha:0,x_min:-1015,x_max:243,o:"m -318 -41 l -311 -50 l -393 -280 l -458 -280 l -411 -41 l -318 -41 m -450 764 l -458 773 l -376 1002 l -311 1002 l -358 764 l -450 764 m 9 428 l 18 436 l 243 352 l 243 286 l 9 334 l 9 428 m -780 294 l -789 286 l -1015 370 l -1015 436 l -780 388 l -780 294 m -153 680 l -152 690 l 65 794 l 111 748 l -87 612 l -153 680 m -617 14 l -618 3 l -836 -101 l -882 -54 l -683 81 l -617 14 m -712 583 l -724 585 l -824 806 l -780 852 l -646 650 l -712 583 m -60 109 l -48 108 l 52 -113 l 7 -161 l -125 42 l -60 109 z "},"\u048A":{ha:989,x_min:127,x_max:936,o:"m 774 987 l 857 987 l 857 0 l 774 0 l 774 845 l 212 0 l 127 0 l 127 987 l 212 987 l 212 143 l 774 987 m 694 1230 q 641 1103 694 1152 q 498 1055 587 1055 q 356 1103 410 1055 q 302 1230 302 1151 l 371 1230 q 405 1143 371 1173 q 498 1114 438 1114 q 591 1145 557 1114 q 625 1230 625 1176 l 694 1230 m 841 -215 l 793 -180 q 857 -8 854 -97 l 857 97 l 936 97 l 936 12 q 841 -215 936 -129 z "},"\u048B":{ha:794,x_min:111,x_max:748,o:"m 588 734 l 669 734 l 669 0 l 588 0 l 588 603 l 192 0 l 111 0 l 111 734 l 192 734 l 192 130 l 588 734 m 584 998 q 531 871 584 920 q 388 823 477 823 q 246 871 300 823 q 192 998 192 919 l 261 998 q 295 911 261 941 q 388 882 328 882 q 481 913 448 882 q 515 998 515 944 l 584 998 m 653 -215 l 605 -180 q 669 -8 667 -97 l 669 97 l 748 97 l 748 12 q 653 -215 748 -129 z "},\u048D:{ha:743,x_min:-20,x_max:673,o:"m 416 918 l 195 918 l 195 479 l 406 479 q 549 450 488 479 q 642 366 610 420 q 673 241 673 312 q 600 65 673 130 q 404 0 527 0 l 114 0 l 114 918 l -20 918 l -20 987 l 114 987 l 114 1109 l 195 1109 l 195 987 l 416 987 l 416 918 m 195 410 l 195 68 l 405 68 q 543 114 493 68 q 592 239 592 160 q 544 362 592 315 q 412 410 496 408 l 195 410 z "},\u048E:{ha:878,x_min:122,x_max:791,o:"m 206 402 l 206 0 l 122 0 l 122 987 l 458 987 q 702 909 612 987 q 791 692 791 830 q 702 475 791 551 l 788 378 l 737 332 l 643 437 q 458 402 567 402 l 206 402 m 648 535 q 707 691 707 593 q 644 854 707 793 q 464 916 581 915 l 206 916 l 206 473 l 458 473 q 591 496 537 473 l 510 588 l 562 634 l 648 535 z "},\u048F:{ha:784,x_min:105,x_max:696,o:"m 696 359 q 610 75 696 177 l 685 -16 l 633 -62 l 559 28 q 416 -14 496 -14 q 186 92 266 -14 l 186 -282 l 105 -282 l 105 734 l 180 734 l 184 630 q 414 747 264 747 q 621 648 546 747 q 696 371 696 548 l 696 359 m 614 374 q 557 595 614 514 q 396 677 499 677 q 268 641 321 677 q 186 536 214 605 l 186 184 q 269 88 215 121 q 397 55 323 55 q 511 89 463 55 l 436 181 l 489 227 l 559 140 q 614 363 614 220 l 614 374 z "},\u0490:{ha:761,x_min:120,x_max:717,o:"m 717 918 l 715 918 l 715 916 l 203 916 l 203 0 l 120 0 l 120 987 l 635 987 l 635 1227 l 717 1227 l 717 918 z "},\u0491:{ha:608,x_min:107,x_max:562,o:"m 562 664 l 189 664 l 189 0 l 107 0 l 107 734 l 481 734 l 481 968 l 562 968 l 562 664 z "},\u0494:{ha:802,x_min:125,x_max:744,o:"m 721 916 l 209 916 l 209 561 l 349 561 q 643 460 541 561 q 744 174 744 359 q 706 -16 744 68 q 599 -146 669 -100 q 434 -193 529 -193 l 433 -126 q 602 -45 541 -126 q 663 174 663 37 q 582 408 663 328 q 349 489 501 489 l 209 489 l 209 0 l 125 0 l 125 987 l 721 987 l 721 916 z "},\u0495:{ha:691,x_min:107,x_max:636,o:"m 560 664 l 189 664 l 189 424 l 281 424 q 544 341 452 424 q 636 112 636 259 q 602 -23 636 43 q 511 -129 568 -89 q 382 -182 454 -169 l 360 -119 q 503 -40 454 -98 q 555 112 553 19 q 485 289 556 227 q 283 352 413 352 l 189 352 l 189 0 l 107 0 l 107 734 l 560 734 l 560 664 z "},\u0496:{ha:1271,x_min:16,x_max:1238,o:"m 766 470 l 654 470 l 654 0 l 571 0 l 571 470 l 456 470 l 121 0 l 16 0 l 381 510 l 40 987 l 141 987 l 452 541 l 571 541 l 571 987 l 654 987 l 654 541 l 771 541 l 1082 987 l 1182 987 l 841 511 l 1207 0 l 1102 0 l 766 470 m 1238 -241 l 1156 -241 l 1156 83 l 1238 83 l 1238 -241 z "},\u0497:{ha:1078,x_min:16,x_max:1060,o:"m 667 339 l 569 339 l 569 0 l 488 0 l 488 339 l 391 339 l 119 0 l 16 0 l 320 376 l 50 734 l 149 734 l 389 412 l 488 412 l 488 734 l 569 734 l 569 412 l 668 412 l 909 734 l 1008 734 l 737 376 l 1042 0 l 938 0 l 667 339 m 1060 -241 l 979 -241 l 979 83 l 1060 83 l 1060 -241 z "},\u049A:{ha:928,x_min:128,x_max:876,o:"m 347 463 l 212 463 l 212 0 l 128 0 l 128 987 l 212 987 l 212 534 l 343 534 l 725 987 l 830 987 l 425 502 l 860 0 l 756 0 l 347 463 m 876 -253 l 794 -253 l 794 71 l 876 71 l 876 -253 z "},\u049B:{ha:777,x_min:111,x_max:730,o:"m 305 336 l 193 336 l 193 0 l 111 0 l 111 734 l 193 734 l 193 408 l 304 408 l 573 734 l 675 734 l 374 378 l 709 0 l 602 0 l 305 336 m 730 -241 l 648 -241 l 648 83 l 730 83 l 730 -241 z "},\u049C:{ha:852,x_min:121,x_max:838,o:"m 797 987 l 503 510 l 838 0 l 732 0 l 435 467 l 372 467 l 372 273 l 303 273 l 303 467 l 205 467 l 205 0 l 121 0 l 121 987 l 205 987 l 205 538 l 303 538 l 303 730 l 372 730 l 372 538 l 438 538 l 696 987 l 797 987 z "},\u049D:{ha:750,x_min:110,x_max:737,o:"m 703 734 l 469 380 l 737 0 l 630 0 l 404 336 l 353 336 l 353 175 l 284 175 l 284 336 l 192 336 l 192 0 l 110 0 l 110 734 l 192 734 l 192 408 l 284 408 l 284 572 l 353 572 l 353 408 l 405 408 l 601 734 l 703 734 z "},\u04A0:{ha:1122,x_min:55,x_max:1118,o:"m 605 463 l 469 463 l 469 0 l 386 0 l 386 918 l 55 918 l 55 987 l 469 987 l 469 534 l 601 534 l 983 987 l 1088 987 l 682 502 l 1118 0 l 1014 0 l 605 463 z "},\u04A1:{ha:916,x_min:35,x_max:904,o:"m 500 336 l 387 336 l 387 0 l 306 0 l 306 664 l 35 664 l 35 734 l 387 734 l 387 408 l 499 408 l 768 734 l 871 734 l 569 378 l 904 0 l 797 0 l 500 336 z "},\u04A2:{ha:982,x_min:125,x_max:929,o:"m 857 0 l 772 0 l 772 473 l 208 473 l 208 0 l 125 0 l 125 987 l 208 987 l 208 544 l 772 544 l 772 987 l 857 987 l 857 0 m 929 -241 l 848 -241 l 848 83 l 929 83 l 929 -241 z "},\u04A3:{ha:787,x_min:111,x_max:742,o:"m 669 0 l 588 0 l 588 336 l 193 336 l 193 0 l 111 0 l 111 734 l 193 734 l 193 405 l 588 405 l 588 734 l 669 734 l 669 0 m 742 -241 l 661 -241 l 661 83 l 742 83 l 742 -241 z "},\u04A4:{ha:1399,x_min:123,x_max:1345,o:"m 207 544 l 771 544 l 771 987 l 1345 987 l 1345 918 l 854 918 l 854 0 l 771 0 l 771 473 l 207 473 l 207 0 l 123 0 l 123 987 l 207 987 l 207 544 z "},\u04A5:{ha:1005,x_min:107,x_max:956,o:"m 189 405 l 584 405 l 584 734 l 956 734 l 956 664 l 665 664 l 665 0 l 584 0 l 584 336 l 189 336 l 189 0 l 107 0 l 107 734 l 189 734 l 189 405 z "},\u04A6:{ha:1416,x_min:120,x_max:1352,o:"m 846 566 l 957 566 q 1251 465 1149 566 q 1352 179 1352 364 q 1315 -11 1352 74 q 1207 -141 1277 -95 q 1042 -187 1137 -187 l 1042 -121 q 1210 -39 1149 -121 q 1271 179 1271 42 q 1190 414 1271 333 q 958 494 1109 494 l 846 494 l 846 0 l 762 0 l 762 916 l 203 916 l 203 0 l 120 0 l 120 987 l 846 987 l 846 566 z "},\u04A7:{ha:1183,x_min:107,x_max:1134,o:"m 666 424 l 773 424 q 1040 341 947 424 q 1134 112 1134 258 q 1101 -23 1134 42 q 1011 -128 1067 -87 q 880 -182 955 -168 l 859 -119 q 1003 -38 953 -98 q 1053 112 1053 22 q 980 290 1054 227 q 775 352 907 352 l 666 352 l 666 0 l 585 0 l 585 664 l 189 664 l 189 0 l 107 0 l 107 734 l 666 734 l 666 424 z "},\u04A8:{ha:1032,x_min:83,x_max:972,o:"m 972 -17 q 715 31 830 -17 q 502 -14 619 -14 q 286 44 380 -14 q 138 209 191 102 q 83 448 85 315 l 83 599 q 123 805 83 712 q 234 950 163 899 q 393 1002 304 1002 l 395 928 q 231 836 295 928 q 168 593 168 743 l 168 458 q 210 252 168 345 q 328 109 252 159 q 502 58 404 58 q 629 76 570 58 q 476 241 528 142 q 423 460 423 341 l 423 632 q 457 820 423 736 q 552 950 491 904 q 692 996 614 996 q 887 894 811 996 q 963 625 963 793 l 963 452 q 919 236 963 332 q 793 78 874 140 q 972 54 876 54 l 972 -17 m 507 458 q 560 252 507 342 q 709 113 613 162 q 835 251 790 162 q 880 453 880 340 l 880 633 q 829 843 880 763 q 692 922 778 922 q 558 843 609 922 q 507 629 507 763 l 507 458 z "},\u04A9:{ha:825,x_min:80,x_max:781,o:"m 781 -8 q 578 29 673 -8 q 407 -14 503 -14 q 238 36 313 -14 q 122 174 163 86 q 80 370 81 262 l 80 425 q 145 656 80 566 q 312 747 210 747 l 312 676 q 205 605 249 676 q 161 422 161 534 l 161 373 q 229 144 161 233 q 407 56 296 56 q 499 72 456 56 q 385 203 425 124 q 344 379 344 281 l 344 451 q 400 665 344 583 q 549 747 456 747 q 697 661 639 747 q 755 431 755 574 l 755 366 q 726 206 755 279 q 645 81 697 133 q 781 62 706 62 l 781 -8 m 425 378 q 463 221 425 289 q 570 113 500 154 q 673 375 673 201 l 673 439 q 638 608 673 541 q 549 676 604 676 q 458 615 491 676 q 425 449 425 553 l 425 378 z "},\u04B2:{ha:862,x_min:37,x_max:829,o:"m 425 570 l 703 987 l 803 987 l 476 500 l 813 0 l 713 0 l 425 431 l 136 0 l 37 0 l 375 500 l 47 987 l 147 987 l 425 570 m 829 -241 l 747 -241 l 747 83 l 829 83 l 829 -241 z "},\u04B3:{ha:686,x_min:33,x_max:669,o:"m 336 436 l 534 734 l 631 734 l 382 374 l 642 0 l 546 0 l 337 311 l 128 0 l 33 0 l 292 374 l 43 734 l 138 734 l 336 436 m 669 -241 l 588 -241 l 588 83 l 669 83 l 669 -241 z "},\u04B4:{ha:1206,x_min:24,x_max:1117,o:"m 294 918 l 24 918 l 24 987 l 294 987 l 294 987 l 378 987 l 378 987 l 667 987 l 667 918 l 378 918 l 378 71 l 937 71 l 937 987 l 1020 987 l 1020 72 l 1117 72 l 1111 -238 l 1034 -238 l 1034 0 l 294 0 l 294 918 z "},\u04B5:{ha:907,x_min:19,x_max:856,o:"m 223 665 l 19 665 l 19 734 l 499 734 l 499 665 l 304 665 l 304 68 l 700 68 l 700 734 l 781 734 l 781 68 l 856 68 l 850 -218 l 775 -218 l 775 0 l 223 0 l 223 665 z "},\u04B6:{ha:923,x_min:117,x_max:869,o:"m 798 987 l 798 0 l 714 0 l 714 449 q 447 410 575 410 q 199 483 279 410 q 117 706 119 555 l 117 987 l 201 987 l 201 711 q 260 536 201 591 q 447 481 319 481 q 714 520 576 481 l 714 987 l 798 987 m 869 -241 l 788 -241 l 788 83 l 869 83 l 869 -241 z "},\u04B7:{ha:746,x_min:75,x_max:701,o:"m 628 0 l 547 0 l 547 309 q 355 272 446 272 q 143 336 209 272 q 75 536 77 400 l 75 734 l 155 734 l 155 540 q 202 388 157 435 q 355 342 247 342 q 547 377 453 345 l 547 734 l 628 734 l 628 0 m 701 -241 l 619 -241 l 619 83 l 701 83 l 701 -241 z "},\u04B8:{ha:921,x_min:117,x_max:798,o:"m 201 987 l 201 705 q 260 536 203 590 q 439 481 317 483 l 439 713 l 509 713 l 509 484 q 714 520 606 490 l 714 987 l 798 987 l 798 0 l 714 0 l 714 449 q 509 412 602 418 l 509 244 l 439 244 l 439 410 q 198 485 277 412 q 117 706 119 557 l 117 987 l 201 987 z "},\u04B9:{ha:764,x_min:102,x_max:656,o:"m 656 0 l 574 0 l 574 309 q 436 275 505 283 l 436 160 l 366 160 l 366 272 q 165 342 228 276 q 102 547 102 408 l 102 734 l 184 734 l 184 543 q 226 392 184 440 q 366 342 268 345 l 366 541 l 436 541 l 436 345 q 574 377 511 355 l 574 734 l 656 734 l 656 0 z "},\u04BA:{ha:921,x_min:113,x_max:793,o:"m 113 0 l 113 987 l 196 987 l 196 538 q 464 576 335 576 q 711 504 631 576 q 793 281 791 431 l 793 0 l 710 0 l 710 276 q 651 450 709 394 q 464 505 593 505 q 196 467 334 505 l 196 0 l 113 0 z "},\u04BC:{ha:1048,x_min:24,x_max:966,o:"m 640 -14 q 343 95 452 -14 q 234 399 234 205 l 234 497 q 78 568 132 508 q 24 730 24 629 l 95 730 q 129 617 95 661 q 234 563 163 573 l 234 585 q 282 798 234 702 q 414 947 330 894 q 600 1000 498 1000 q 869 884 772 1000 q 966 564 966 768 l 966 495 l 318 495 l 318 393 q 402 146 318 235 q 640 56 486 56 q 905 137 793 56 l 930 75 q 640 -14 825 -14 m 318 560 l 882 560 l 882 589 q 806 837 882 747 q 600 928 730 928 q 396 831 473 928 q 318 578 318 735 l 318 560 z "},\u04BD:{ha:819,x_min:-7,x_max:751,o:"m 475 -14 q 306 33 382 -14 q 189 161 231 79 q 146 346 146 243 l 146 375 q 32 443 71 391 q -7 579 -7 495 l 62 579 q 151 439 62 466 q 256 662 169 577 q 460 747 342 747 q 672 656 594 747 q 751 407 751 565 l 751 361 l 227 361 l 227 346 q 299 138 227 221 q 479 55 370 55 q 594 79 544 55 q 684 155 644 102 l 735 116 q 475 -14 646 -14 m 460 678 q 306 611 369 678 q 230 431 243 544 l 670 431 l 670 439 q 610 612 667 545 q 460 678 553 678 z "},\u04C3:{ha:852,x_min:121,x_max:810,o:"m 205 0 l 121 0 l 121 987 l 205 987 l 205 543 l 324 543 l 694 987 l 795 987 l 424 543 q 709 440 608 541 q 810 155 810 340 q 772 -35 810 50 q 664 -166 734 -120 q 498 -212 594 -212 l 498 -144 q 664 -64 602 -144 q 726 155 726 16 q 647 388 726 307 q 416 469 568 469 l 205 469 l 205 0 z "},\u04C4:{ha:732,x_min:110,x_max:677,o:"m 380 406 q 600 314 523 392 q 677 105 677 237 q 643 -26 677 37 q 554 -130 610 -90 q 423 -182 498 -169 l 401 -119 q 543 -42 492 -100 q 596 105 594 16 q 526 276 597 216 q 318 336 455 336 l 192 336 l 192 0 l 110 0 l 110 734 l 192 734 l 192 408 l 283 408 l 572 734 l 675 734 l 380 406 z "},"\u04C5":{ha:980,x_min:27,x_max:927,o:"m 848 987 l 848 0 l 765 0 l 765 916 l 348 916 l 325 508 q 283 190 311 289 q 203 46 255 90 q 62 0 151 1 l 27 0 l 27 71 l 54 71 q 159 115 124 75 q 214 247 195 156 q 244 529 233 338 l 269 987 l 848 987 m 832 -215 l 784 -180 q 848 -8 846 -97 l 848 97 l 927 97 l 927 12 q 832 -215 927 -129 z "},"\u04C6":{ha:795,x_min:30,x_max:749,o:"m 670 734 l 670 0 l 589 0 l 589 664 l 288 664 l 275 389 q 245 156 267 237 q 178 38 222 76 q 61 0 134 0 l 30 0 l 30 72 l 55 73 q 155 141 125 75 q 195 378 186 208 l 210 734 l 670 734 m 654 -215 l 606 -180 q 669 -8 667 -97 l 669 97 l 749 97 l 749 12 q 654 -215 749 -129 z "},\u04C7:{ha:979,x_min:126,x_max:851,o:"m 210 987 l 210 524 l 768 524 l 768 987 l 851 987 l 851 -58 q 797 -235 851 -174 q 644 -296 742 -296 q 567 -283 606 -296 l 576 -214 q 644 -225 606 -225 q 735 -182 703 -225 q 768 -58 768 -138 l 768 453 l 210 453 l 210 0 l 126 0 l 126 987 l 210 987 z "},\u04C8:{ha:773,x_min:107,x_max:665,o:"m 189 734 l 189 405 l 584 405 l 584 734 l 665 734 l 665 -60 q 611 -236 665 -176 q 459 -296 556 -296 q 383 -283 420 -296 l 393 -216 q 459 -227 418 -227 q 551 -184 519 -227 q 584 -60 584 -140 l 584 336 l 189 336 l 189 0 l 107 0 l 107 734 l 189 734 z "},"\u04C9":{ha:988,x_min:125,x_max:935,o:"m 857 0 l 772 0 l 772 473 l 208 473 l 208 0 l 125 0 l 125 987 l 208 987 l 208 544 l 772 544 l 772 987 l 857 987 l 857 0 m 840 -215 l 792 -180 q 856 -8 854 -97 l 856 97 l 935 97 l 935 12 q 840 -215 935 -129 z "},"\u04CA":{ha:793,x_min:111,x_max:747,o:"m 669 0 l 588 0 l 588 336 l 193 336 l 193 0 l 111 0 l 111 734 l 193 734 l 193 405 l 588 405 l 588 734 l 669 734 l 669 0 m 652 -215 l 604 -180 q 668 -8 666 -97 l 668 97 l 747 97 l 747 12 q 652 -215 747 -129 z "},"\u04CD":{ha:1204,x_min:125,x_max:1150,o:"m 235 987 l 600 116 l 965 987 l 1076 987 l 1076 0 l 993 0 l 993 430 l 1000 871 l 632 0 l 568 0 l 201 867 l 208 433 l 208 0 l 125 0 l 125 987 l 235 987 m 1055 -215 l 1007 -180 q 1071 -8 1069 -97 l 1071 97 l 1150 97 l 1150 12 q 1055 -215 1150 -129 z "},"\u04CE":{ha:1029,x_min:115,x_max:983,o:"m 512 110 l 804 734 l 904 734 l 904 0 l 823 0 l 823 602 l 541 0 l 483 0 l 195 616 l 195 0 l 115 0 l 115 734 l 221 734 l 512 110 m 888 -215 l 840 -180 q 904 -8 902 -97 l 904 97 l 983 97 l 983 12 q 888 -215 983 -129 z "},\u04D8:{ha:972,x_min:84,x_max:890,o:"m 464 1001 q 776 878 662 1001 q 890 539 890 755 l 890 455 q 838 214 890 321 q 694 46 786 106 q 492 -14 602 -14 q 193 101 302 -14 q 84 420 84 216 l 84 500 l 806 500 l 806 546 q 716 828 806 726 q 464 929 627 929 q 186 848 304 929 l 159 910 q 464 1001 276 1001 m 492 58 q 712 160 626 58 q 806 432 798 263 l 168 432 l 168 396 q 254 148 168 239 q 492 58 339 58 z "},\u04E0:{ha:800,x_min:77,x_max:703,o:"m 593 916 l 98 916 l 98 987 l 690 987 l 691 922 l 391 569 q 624 489 545 567 q 703 268 703 412 q 616 62 703 138 q 389 -14 530 -14 q 229 21 301 -14 q 117 121 157 56 q 77 274 77 186 l 161 274 q 225 117 161 178 q 389 56 290 56 q 558 113 496 56 q 620 265 620 170 q 562 444 620 385 q 382 503 503 502 l 298 503 l 298 571 l 593 916 z "},\u04E1:{ha:800,x_min:77,x_max:702,o:"m 588 664 l 98 664 l 98 734 l 688 734 l 689 671 l 391 312 q 621 229 541 307 q 702 14 702 152 q 663 -135 702 -71 q 552 -234 624 -199 q 389 -268 480 -268 q 230 -233 302 -268 q 117 -133 158 -198 q 77 20 77 -68 l 159 20 q 223 -137 159 -75 q 389 -199 287 -199 q 559 -142 497 -199 q 621 11 621 -85 q 381 248 621 241 l 297 248 l 297 317 l 588 664 z "},"\u04FA":{ha:790,x_min:17,x_max:744,o:"m 744 916 l 232 916 l 232 0 l 149 0 l 149 987 l 744 987 l 744 916 m 432 511 l 17 511 l 17 581 l 432 581 l 432 511 m 300 92 l 300 -66 q 245 -237 299 -178 q 96 -296 191 -296 q 20 -283 57 -296 l 28 -214 q 96 -224 56 -224 q 220 -53 220 -224 l 220 92 l 300 92 z "},"\u04FB":{ha:612,x_min:12,x_max:590,o:"m 590 664 l 219 664 l 219 0 l 138 0 l 138 734 l 590 734 l 590 664 m 435 382 l 20 382 l 20 451 l 435 451 l 435 382 m 292 92 l 292 -66 q 237 -237 291 -178 q 87 -296 183 -296 q 12 -283 49 -296 l 20 -214 q 87 -224 47 -224 q 212 -53 212 -224 l 212 92 l 292 92 z "},"\u04FC":{ha:870,x_min:37,x_max:836,o:"m 425 570 l 703 987 l 803 987 l 476 500 l 813 0 l 713 0 l 425 431 l 136 0 l 37 0 l 375 500 l 47 987 l 147 987 l 425 570 m 836 92 l 836 -66 q 781 -237 835 -178 q 631 -296 727 -296 q 555 -283 593 -296 l 564 -214 q 631 -224 591 -224 q 755 -53 755 -224 l 755 92 l 836 92 z "},"\u04FD":{ha:693,x_min:33,x_max:677,o:"m 336 436 l 534 734 l 631 734 l 382 374 l 642 0 l 546 0 l 337 311 l 128 0 l 33 0 l 292 374 l 43 734 l 138 734 l 336 436 m 677 92 l 677 -66 q 622 -237 675 -178 q 472 -296 568 -296 q 396 -283 433 -296 l 405 -214 q 472 -224 432 -224 q 596 -53 596 -224 l 596 92 l 677 92 z "},"\u0500":{ha:795,x_min:51,x_max:706,o:"m 622 572 l 622 987 l 706 987 l 706 0 l 378 0 q 139 78 227 0 q 51 288 51 155 q 138 495 51 418 q 376 572 224 572 l 622 572 m 622 71 l 622 502 l 378 502 q 200 445 265 502 q 134 289 134 387 q 198 131 134 191 q 372 71 261 72 l 622 71 z "},"\u0502":{ha:1084,x_min:52,x_max:1050,o:"m 378 0 q 140 78 228 0 q 52 288 52 155 q 139 495 52 419 q 376 572 227 572 l 623 572 l 623 987 l 707 987 l 707 69 l 789 70 q 917 123 871 71 q 965 274 962 176 q 924 509 968 389 l 1004 509 q 1036 393 1022 452 q 1048 274 1050 333 q 976 74 1046 149 q 785 0 905 0 l 378 0 m 623 71 l 623 502 l 378 502 q 201 445 267 502 q 136 289 136 387 q 198 132 136 191 q 370 71 261 73 l 623 71 z "},"\u0503":{ha:1193,x_min:75,x_max:1095,o:"m 75 361 q 151 644 75 541 q 357 747 227 747 q 578 631 501 747 l 578 1058 l 659 1058 l 659 234 q 695 101 659 147 q 794 54 730 54 q 951 134 894 56 q 1011 359 1008 212 q 968 631 1013 474 l 1047 632 l 1063 572 q 1093 359 1095 448 q 1009 85 1090 184 q 794 -14 929 -14 q 595 123 640 -17 q 355 -14 519 -14 q 158 74 233 -14 q 76 318 83 163 l 75 361 m 578 544 q 372 677 517 677 q 214 593 271 677 q 157 347 157 509 q 212 132 157 208 q 370 56 268 56 q 581 188 519 56 l 578 234 l 578 544 z "},"\u0504":{ha:1097,x_min:35,x_max:1004,o:"m 172 457 l 172 529 l 292 529 q 471 580 413 530 q 529 730 529 630 q 274 916 529 916 l 35 916 l 35 987 l 285 987 q 528 920 444 986 q 613 729 613 854 q 567 581 613 643 q 431 490 520 518 q 578 260 578 444 l 578 205 q 614 97 579 138 q 706 56 648 56 q 857 140 799 58 q 918 359 915 223 q 873 632 920 475 l 956 632 l 971 572 q 1002 359 1004 446 q 917 88 999 191 q 705 -14 834 -14 q 552 39 604 -17 q 495 206 499 95 l 495 257 q 445 405 495 353 q 303 457 394 457 l 172 457 z "},"\u0505":{ha:894,x_min:31,x_max:844,o:"m 483 144 q 506 73 483 94 q 578 52 528 52 q 712 115 666 54 q 761 284 759 176 q 713 500 764 392 l 797 500 q 829 392 815 446 q 842 284 844 338 q 768 65 840 146 q 578 -16 696 -16 q 448 20 490 -18 q 401 145 406 59 l 401 197 q 229 323 401 323 l 90 323 l 89 391 l 237 391 q 363 428 317 393 q 408 522 408 462 q 358 625 408 585 q 218 667 307 665 l 35 667 l 31 734 l 218 734 q 418 677 347 732 q 490 524 490 621 q 361 361 490 410 q 483 204 481 328 l 483 144 z "},"\u0506":{ha:741,x_min:66,x_max:668,o:"m 136 446 l 136 515 l 258 515 q 441 568 378 517 q 505 715 505 619 q 445 864 505 810 q 258 918 385 918 l 66 918 l 66 987 l 261 987 q 501 917 417 986 q 585 714 585 848 q 540 573 585 635 q 412 483 494 512 q 542 405 498 461 q 585 247 585 348 q 586 132 585 146 q 589 104 587 117 l 668 104 l 668 9 q 644 -107 668 -50 q 573 -208 619 -165 l 524 -173 q 588 0 585 -92 l 549 0 q 503 166 503 46 l 503 248 q 444 394 503 341 q 280 446 385 446 l 136 446 z "},"\u0507":{ha:696,x_min:76,x_max:629,o:"m 135 317 l 134 386 l 299 386 q 479 522 479 390 q 298 665 479 661 l 76 665 l 77 734 l 286 734 q 489 680 418 734 q 560 524 560 626 q 429 355 560 399 q 559 184 559 321 l 559 109 l 629 109 l 629 14 q 604 -105 629 -48 q 534 -203 578 -163 l 486 -168 q 549 0 546 -85 l 501 0 q 478 109 479 24 l 478 177 q 302 317 478 317 l 135 317 z "},"\u0508":{ha:1343,x_min:45,x_max:1269,o:"m 751 916 l 365 916 l 342 507 q 301 193 329 291 q 223 48 274 94 q 84 0 172 3 l 45 0 l 45 71 l 71 71 q 175 113 140 75 q 230 242 210 152 q 260 517 250 333 l 286 987 l 836 987 l 836 234 q 871 101 836 146 q 969 56 907 56 q 1125 135 1068 56 q 1184 359 1181 214 q 1140 631 1185 475 l 1222 632 q 1254 497 1240 566 q 1267 359 1269 429 q 1184 84 1265 183 q 969 -14 1103 -14 q 808 47 863 -14 q 751 228 753 109 l 751 916 z "},"\u0509":{ha:1118,x_min:35,x_max:1053,o:"m 570 664 l 293 664 l 279 361 q 220 83 267 164 q 71 0 174 2 l 35 0 l 35 72 l 60 73 q 159 138 128 75 q 199 366 190 201 l 215 734 l 651 734 l 651 234 q 685 99 651 145 q 779 54 720 54 q 917 122 866 56 q 970 314 967 189 q 926 572 972 427 l 1005 573 l 1021 516 q 1051 314 1053 395 q 976 73 1048 161 q 779 -14 903 -14 q 623 48 676 -14 q 570 233 570 111 l 570 664 z "},"\u050A":{ha:1353,x_min:128,x_max:1241,o:"m 807 987 l 807 230 q 843 101 807 145 q 941 56 880 56 q 1097 136 1040 58 q 1156 359 1153 215 q 1112 631 1158 471 l 1194 632 q 1226 497 1212 566 q 1240 359 1241 429 q 1156 84 1237 183 q 941 -14 1075 -14 q 723 234 733 -20 l 723 452 l 212 452 l 212 0 l 128 0 l 128 987 l 212 987 l 212 524 l 723 524 l 723 987 l 807 987 z "},"\u050B":{ha:1147,x_min:102,x_max:1059,o:"m 576 333 l 183 333 l 183 0 l 102 0 l 102 734 l 183 734 l 183 401 l 576 401 l 576 734 l 657 734 l 657 227 q 693 98 658 142 q 785 54 728 54 q 923 122 872 56 q 976 314 973 189 q 932 572 978 422 l 1011 573 l 1027 516 q 1057 314 1059 395 q 982 73 1055 161 q 785 -14 909 -14 q 633 45 686 -17 q 576 234 581 108 l 576 333 z "},"\u050C":{ha:858,x_min:92,x_max:793,o:"m 471 -14 q 275 40 361 -14 q 140 190 188 94 q 92 405 92 286 l 92 583 q 140 797 92 701 q 275 947 188 893 q 471 1002 361 1002 q 699 950 611 1002 l 671 884 q 471 930 581 930 q 258 833 340 930 q 176 577 176 736 l 176 405 q 258 154 176 251 q 471 56 340 56 q 644 118 582 58 q 709 288 707 178 q 675 533 711 393 l 758 533 q 787 384 780 432 q 793 288 793 335 q 701 67 790 148 q 471 -14 612 -14 z "},"\u050D":{ha:711,x_min:79,x_max:654,o:"m 400 54 q 572 204 569 56 q 556 364 572 287 l 635 364 q 653 204 654 262 q 584 43 650 100 q 400 -14 517 -14 q 169 89 258 -14 q 79 361 79 192 l 79 381 q 118 568 79 484 q 226 700 156 653 q 386 747 296 747 q 570 705 511 747 l 547 640 q 386 678 482 678 q 222 594 283 678 q 161 373 161 511 l 161 353 q 177 237 161 294 q 227 139 194 180 q 400 54 293 54 z "},"\u050E":{ha:982,x_min:22,x_max:888,o:"m 370 916 l 22 916 l 22 987 l 804 987 l 804 916 l 454 916 l 454 234 q 490 101 454 146 q 589 56 526 56 q 745 138 689 58 q 804 359 801 218 q 759 631 805 478 l 841 632 l 859 562 q 886 359 888 446 q 803 85 884 184 q 589 -14 723 -14 q 431 44 486 -17 q 370 234 376 106 l 370 916 z "},"\u050F":{ha:886,x_min:45,x_max:798,o:"m 308 665 l 45 665 l 45 734 l 661 734 l 661 665 l 390 665 l 390 234 q 426 100 389 146 q 525 54 463 54 q 663 117 612 56 q 716 296 713 179 q 672 536 718 399 l 751 537 q 790 385 783 433 q 798 296 798 338 q 721 68 795 151 q 525 -14 648 -14 q 369 44 424 -17 q 308 234 313 106 l 308 665 z "},"\u0510":{ha:917,x_min:98,x_max:849,o:"m 182 265 q 261 113 182 169 q 481 56 341 56 q 686 117 606 56 q 766 274 766 178 l 849 274 q 805 124 849 189 q 674 23 760 60 q 481 -14 587 -14 q 201 63 305 -14 q 98 268 98 140 q 150 420 98 359 q 304 506 201 480 q 164 594 216 534 q 113 728 113 653 q 210 929 113 857 q 481 1002 307 1002 q 661 967 579 1002 q 789 870 743 932 q 836 728 836 808 l 752 728 q 674 874 752 817 q 481 930 597 930 q 272 878 348 930 q 197 730 197 825 q 267 588 197 637 q 473 539 338 540 l 604 539 l 604 467 l 475 467 q 256 419 331 467 q 182 265 182 371 z "},"\u0512":{ha:981,x_min:27,x_max:928,o:"m 848 987 l 848 0 l 765 0 l 765 916 l 348 916 l 325 508 q 283 190 311 289 q 203 46 255 90 q 62 0 151 1 l 27 0 l 27 71 l 54 71 q 159 115 124 75 q 214 247 195 156 q 244 529 233 338 l 269 987 l 848 987 m 928 92 l 928 -66 q 873 -237 927 -178 q 724 -296 819 -296 q 648 -283 685 -296 l 656 -214 q 724 -224 684 -224 q 848 -53 848 -224 l 848 92 l 928 92 z "},"\u0513":{ha:796,x_min:30,x_max:751,o:"m 670 734 l 670 0 l 589 0 l 589 664 l 288 664 l 275 389 q 245 156 267 237 q 178 38 222 76 q 61 0 134 0 l 30 0 l 30 72 l 55 73 q 155 141 125 75 q 195 378 186 208 l 210 734 l 670 734 m 751 92 l 751 -66 q 695 -237 749 -178 q 546 -296 642 -296 q 470 -283 507 -296 l 479 -214 q 546 -224 506 -224 q 670 -53 670 -224 l 670 92 l 751 92 z "},"\u2000":{ha:708,x_min:0,x_max:0,o:""},"\u2001":{ha:1417,x_min:0,x_max:0,o:""},"\u2002":{ha:708,x_min:0,x_max:0,o:""},"\u2003":{ha:1417,x_min:0,x_max:0,o:""},"\u2004":{ha:473,x_min:0,x_max:0,o:""},"\u2005":{ha:354,x_min:0,x_max:0,o:""},"\u2006":{ha:236,x_min:0,x_max:0,o:""},"\u2007":{ha:781,x_min:0,x_max:0,o:""},"\u2008":{ha:380,x_min:0,x_max:0,o:""},"\u2009":{ha:283,x_min:0,x_max:0,o:""},"\u200A":{ha:142,x_min:0,x_max:0,o:""},"\u200B":{ha:0,x_min:0,x_max:0,o:""},"\u2010":{ha:392,x_min:33,x_max:358,o:"m 358 401 l 33 401 l 33 470 l 358 470 l 358 401 z "},"\u2011":{ha:392,x_min:33,x_max:358,o:"m 358 401 l 33 401 l 33 470 l 358 470 l 358 401 z "},"\u2013":{ha:905,x_min:108,x_max:787,o:"m 787 465 l 108 465 l 108 534 l 787 534 l 787 465 z "},"\u2014":{ha:1072,x_min:85,x_max:991,o:"m 991 465 l 85 465 l 85 534 l 991 534 l 991 465 z "},"\u2017":{ha:629,x_min:31,x_max:628,o:"m 628 -234 l 31 -234 l 31 -165 l 628 -165 l 628 -234 m 628 -68 l 31 -68 l 31 0 l 628 0 l 628 -68 z "},"\u2018":{ha:247,x_min:66,x_max:210,o:"m 161 1054 l 210 1019 q 147 847 149 939 l 147 760 l 66 760 l 66 836 q 92 956 66 899 q 161 1054 117 1014 z "},"\u2019":{ha:247,x_min:42,x_max:185,o:"m 90 745 l 42 781 q 105 953 103 863 l 105 1042 l 185 1042 l 185 973 q 90 745 185 831 z "},"\u201A":{ha:239,x_min:28,x_max:171,o:"m 76 -157 l 28 -121 q 90 35 84 -46 l 90 139 l 171 139 l 171 71 q 76 -157 171 -71 z "},"\u201B":{ha:247,x_min:60,x_max:204,o:"m 141 1042 l 141 953 q 204 781 143 863 l 155 745 q 60 973 60 833 l 60 1042 l 141 1042 z "},"\u201C":{ha:415,x_min:67,x_max:381,o:"m 162 1054 l 211 1019 q 148 847 150 939 l 148 760 l 67 760 l 67 836 q 93 956 67 899 q 162 1054 118 1014 m 332 1054 l 381 1019 q 318 847 320 939 l 318 760 l 237 760 l 237 836 q 263 956 237 899 q 332 1054 288 1014 z "},"\u201D":{ha:418,x_min:46,x_max:355,o:"m 94 745 l 46 781 q 109 953 107 863 l 109 1042 l 189 1042 l 189 973 q 94 745 189 831 m 260 745 l 212 781 q 275 953 273 863 l 275 1042 l 355 1042 l 355 973 q 260 745 355 831 z "},"\u201E":{ha:402,x_min:28,x_max:330,o:"m 76 -163 l 28 -127 q 90 50 88 -44 l 90 160 l 171 160 l 171 72 q 76 -163 171 -75 m 235 -163 l 186 -127 q 248 50 246 -45 l 248 160 l 330 160 l 330 72 q 235 -163 330 -75 z "},"\u2020":{ha:764,x_min:45,x_max:717,o:"m 717 663 l 424 663 l 424 0 l 342 0 l 342 663 l 45 663 l 45 734 l 342 734 l 342 987 l 424 987 l 424 734 l 717 734 l 717 663 z "},"\u2021":{ha:783,x_min:57,x_max:728,o:"m 728 0 l 427 0 l 427 -282 l 345 -282 l 345 0 l 57 0 l 57 68 l 345 68 l 345 664 l 57 664 l 57 734 l 345 734 l 345 987 l 427 987 l 427 734 l 728 734 l 728 664 l 427 664 l 427 68 l 728 68 l 728 0 z "},"\u2022":{ha:449,x_min:99,x_max:351,o:"m 99 510 q 134 597 99 564 q 224 631 168 631 q 315 598 280 631 q 351 513 349 566 l 351 486 q 316 399 351 431 q 225 366 281 366 q 134 399 168 366 q 99 488 99 433 l 99 510 z "},"\u2025":{ha:630,x_min:113,x_max:507,o:"m 113 49 q 128 89 113 73 q 170 106 143 106 q 213 89 197 106 q 229 49 229 73 q 213 10 229 25 q 170 -5 197 -5 q 128 10 143 -5 q 113 49 113 25 m 391 49 q 406 89 391 73 q 448 106 421 106 q 491 89 475 106 q 507 49 507 73 q 491 10 507 25 q 448 -5 475 -5 q 406 10 421 -5 q 391 49 391 25 z "},"\u2026":{ha:890,x_min:113,x_max:772,o:"m 113 49 q 128 89 113 73 q 170 106 143 106 q 213 89 197 106 q 229 49 229 73 q 213 10 229 25 q 170 -5 197 -5 q 128 10 143 -5 q 113 49 113 25 m 391 49 q 406 89 391 73 q 448 106 421 106 q 491 89 475 106 q 507 49 507 73 q 491 10 507 25 q 448 -5 475 -5 q 406 10 421 -5 q 391 49 391 25 m 656 49 q 672 89 656 73 q 714 106 687 106 q 757 89 741 106 q 772 49 772 73 q 757 10 772 25 q 714 -5 741 -5 q 672 10 687 -5 q 656 49 656 25 z "},"\u2027":{ha:235,x_min:62,x_max:173,o:"m 62 436 q 76 475 62 459 q 117 490 91 490 q 158 475 143 490 q 173 436 173 459 q 158 397 173 413 q 117 382 143 382 q 76 397 91 382 q 62 436 62 413 z "},"\u2030":{ha:1355,x_min:62,x_max:1284,o:"m 574 242 q 628 388 574 330 q 766 446 683 446 q 864 419 823 446 q 927 347 905 392 q 993 419 951 392 q 1091 446 1035 446 q 1230 388 1175 446 q 1284 237 1284 331 l 1284 189 q 1231 44 1284 102 q 1093 -14 1177 -14 q 993 13 1036 -14 q 927 83 951 39 q 865 13 905 39 q 768 -14 824 -14 q 629 43 684 -14 q 574 193 574 100 l 574 242 m 62 798 q 116 944 62 886 q 255 1002 171 1002 q 394 944 339 1002 q 448 793 448 886 l 448 745 q 394 601 448 659 q 256 543 340 543 q 117 600 173 543 q 62 750 62 656 l 62 798 m 640 189 q 674 85 640 126 q 768 44 708 44 q 860 85 826 44 q 895 193 895 126 l 895 242 q 860 347 895 307 q 766 387 825 387 q 674 346 709 387 q 640 239 640 306 l 640 189 m 960 189 q 995 85 960 126 q 1088 44 1029 44 q 1180 84 1146 44 q 1215 192 1215 125 l 1215 242 q 1180 347 1215 308 q 1087 387 1145 387 q 995 347 1030 387 q 960 240 960 307 l 960 189 m 127 745 q 162 642 127 682 q 256 601 197 601 q 348 642 314 601 q 382 748 382 683 l 382 798 q 347 902 382 861 q 255 943 312 943 q 163 901 199 943 q 127 793 127 860 l 127 745 m 287 82 l 237 115 l 719 886 l 769 854 l 287 82 z "},"\u2039":{ha:413,x_min:73,x_max:345,o:"m 157 376 l 345 113 l 273 113 l 73 370 l 73 383 l 273 640 l 345 640 l 157 376 z "},"\u203A":{ha:413,x_min:66,x_max:338,o:"m 138 640 l 338 380 l 338 367 l 138 110 l 66 110 l 253 373 l 66 640 l 138 640 z "},"\u2044":{ha:623,x_min:42,x_max:574,o:"m 92 82 l 42 115 l 524 886 l 574 854 l 92 82 z "},"\u2074":{ha:502,x_min:40,x_max:471,o:"m 385 637 l 471 637 l 471 578 l 385 578 l 385 451 l 313 451 l 313 578 l 43 578 l 40 623 l 309 986 l 385 986 l 385 637 m 117 637 l 313 637 l 313 898 l 292 864 l 117 637 z "},\u207F:{ha:585,x_min:83,x_max:508,o:"m 142 985 l 155 892 q 223 967 181 940 q 321 994 266 994 q 508 784 508 994 l 508 441 l 433 441 l 433 787 q 302 929 429 929 q 210 898 245 929 q 159 817 175 867 l 159 441 l 83 441 l 83 985 l 142 985 z "},"\u20A4":{ha:793,x_min:65,x_max:742,o:"m 513 323 l 277 323 l 280 250 q 237 71 281 132 l 742 71 l 742 0 l 66 0 l 66 71 l 132 71 q 184 143 167 79 q 197 249 198 193 l 194 323 l 65 323 l 65 384 l 192 384 l 189 498 l 65 498 l 65 559 l 186 559 l 182 705 q 257 921 182 840 q 457 1001 332 1001 q 652 929 581 1001 q 724 738 724 858 l 640 738 q 589 880 640 829 q 451 930 538 930 q 316 870 366 930 q 266 705 266 810 l 270 559 l 513 559 l 513 498 l 272 498 l 276 384 l 513 384 l 513 323 z "},"\u20A6":{ha:1068,x_min:24,x_max:1044,o:"m 901 620 l 1044 620 l 1044 551 l 901 551 l 901 416 l 1044 416 l 1044 347 l 901 347 l 901 0 l 817 0 l 583 347 l 249 347 l 249 0 l 165 0 l 165 347 l 24 347 l 24 416 l 165 416 l 165 551 l 24 551 l 24 620 l 165 620 l 165 987 l 249 987 l 496 620 l 817 620 l 817 987 l 901 987 l 901 620 m 249 416 l 536 416 l 446 551 l 249 551 l 249 416 m 633 416 l 817 416 l 817 551 l 543 551 l 633 416 m 249 620 l 400 620 l 249 845 l 249 620 m 817 142 l 817 347 l 679 347 l 817 142 z "},"\u20A7":{ha:1136,x_min:125,x_max:1032,o:"m 1019 667 l 867 667 l 867 178 q 889 87 867 117 q 963 58 911 58 q 1029 64 983 58 l 1032 -2 q 945 -14 1000 -14 q 824 35 862 -14 q 786 178 786 83 l 786 667 l 675 667 q 589 471 668 542 q 370 397 510 399 l 206 397 l 206 0 l 125 0 l 125 987 l 359 987 q 578 922 496 987 q 674 734 661 857 l 786 734 l 786 922 l 867 922 l 867 734 l 1019 734 l 1019 667 m 206 466 l 359 466 q 534 525 473 466 q 595 691 595 583 q 534 860 595 801 q 361 918 473 918 l 206 918 l 206 466 z "},"\u20A8":{ha:1453,x_min:123,x_max:1375,o:"m 494 411 l 207 411 l 207 0 l 123 0 l 123 987 l 444 987 q 690 911 602 987 q 779 696 779 834 q 724 529 779 602 q 574 429 668 456 l 821 9 l 821 0 l 732 0 l 494 411 m 207 482 l 463 482 q 631 542 568 482 q 695 696 695 602 q 629 859 695 801 q 442 916 562 916 l 207 916 l 207 482 m 1294 186 q 1245 283 1294 247 q 1099 341 1197 320 q 948 388 1002 361 q 868 454 894 415 q 842 547 842 492 q 914 691 842 634 q 1100 747 987 747 q 1297 687 1223 747 q 1371 528 1371 626 l 1290 528 q 1236 635 1290 593 q 1100 678 1182 678 q 971 643 1020 678 q 923 550 923 607 q 963 465 923 495 q 1111 410 1004 435 q 1271 356 1217 385 q 1350 288 1324 328 q 1375 191 1375 248 q 1300 42 1375 98 q 1105 -14 1225 -14 q 897 48 977 -14 q 817 205 817 111 l 899 205 q 959 95 903 134 q 1105 55 1014 55 q 1242 92 1190 55 q 1294 186 1294 130 z "},"\u20A9":{ha:1055,x_min:24,x_max:1031,o:"m 638 654 l 844 654 l 912 987 l 998 987 l 925 654 l 1031 654 l 1031 585 l 910 585 l 878 435 l 1031 435 l 1031 366 l 863 366 l 784 0 l 701 0 l 625 366 l 429 366 l 352 0 l 269 0 l 189 366 l 24 366 l 24 435 l 174 435 l 142 585 l 24 585 l 24 654 l 127 654 l 54 987 l 140 987 l 209 654 l 417 654 l 488 987 l 569 987 l 638 654 m 254 435 l 371 435 l 403 585 l 223 585 l 254 435 m 684 435 l 800 435 l 830 585 l 652 585 l 684 435 m 444 435 l 610 435 l 580 585 l 475 585 l 444 435 m 338 278 l 357 366 l 269 366 l 287 279 l 311 127 l 338 278 m 769 286 l 785 366 l 698 366 l 715 284 l 743 126 l 769 286 m 490 654 l 566 654 l 554 709 l 528 857 l 501 707 l 490 654 z "},"\u20AA":{ha:1059,x_min:105,x_max:954,o:"m 443 734 q 618 667 562 734 q 677 464 675 601 l 677 233 l 596 233 l 596 466 q 555 615 594 567 q 427 665 517 664 l 186 665 l 186 0 l 105 0 l 105 734 l 443 734 m 382 0 l 382 500 l 463 500 l 463 68 l 700 68 q 832 117 793 68 q 873 267 871 166 l 873 734 l 954 734 l 954 275 q 896 67 953 135 q 720 0 840 0 l 382 0 z "},"\u20AC":{ha:770,x_min:56,x_max:707,o:"m 554 382 l 270 382 l 270 370 q 343 138 270 220 q 551 56 417 56 q 700 79 631 56 l 707 7 q 551 -14 628 -14 q 285 86 382 -14 q 186 363 189 186 l 186 382 l 56 382 l 56 442 l 186 442 l 186 553 l 56 553 l 56 614 l 186 614 q 283 899 186 798 q 549 1001 380 1001 q 707 980 616 1001 l 700 906 q 550 930 624 930 q 343 849 416 930 q 270 614 270 769 l 554 614 l 554 553 l 270 553 l 270 442 l 554 442 l 554 382 z "},"\u20B1":{ha:953,x_min:24,x_max:932,o:"m 242 402 l 242 0 l 159 0 l 159 567 l 24 567 l 24 635 l 159 635 l 159 752 l 24 752 l 24 821 l 159 821 l 159 987 l 495 987 q 691 942 614 987 q 802 821 768 897 l 932 821 l 932 752 l 822 752 q 827 692 827 724 q 823 635 827 662 l 932 635 l 932 567 l 804 567 q 491 402 737 402 l 242 402 m 744 691 q 737 752 744 722 l 242 752 l 242 635 l 739 635 q 744 691 744 663 m 242 821 l 708 821 q 503 916 646 913 l 242 916 l 242 821 m 711 567 l 242 567 l 242 473 l 505 473 q 711 567 651 475 z "},"\u20B9":{ha:678,x_min:35,x_max:644,o:"m 621 916 l 418 916 q 513 730 500 849 l 644 730 l 621 659 l 513 659 q 423 473 504 540 q 204 406 342 406 l 538 9 l 538 0 l 441 0 l 90 417 l 90 477 l 200 477 q 356 526 295 477 q 429 659 417 574 l 35 659 l 57 730 l 429 730 q 357 863 417 813 q 191 916 296 913 l 45 916 l 68 987 l 644 987 l 621 916 z "},"\u20BA":{ha:713,x_min:30,x_max:642,o:"m 642 524 l 642 448 q 595 209 642 312 q 460 49 548 105 q 257 -7 372 -7 q 175 0 228 -7 l 175 462 l 30 399 l 30 479 l 175 542 l 175 652 l 30 589 l 30 669 l 175 731 l 175 987 l 258 987 l 258 767 l 422 838 l 422 758 l 258 688 l 258 578 l 422 648 l 422 569 l 258 498 l 258 66 q 478 166 398 66 q 558 446 557 267 l 558 524 l 642 524 z "},"\u20BC":{ha:912,x_min:72,x_max:840,o:"m 495 596 q 747 459 654 581 q 840 140 840 338 l 840 0 l 759 0 l 759 143 q 688 412 759 311 q 495 524 618 509 l 495 0 l 414 0 l 414 523 q 223 408 292 508 q 153 142 153 307 l 153 0 l 72 0 l 72 140 q 165 459 72 337 q 414 596 258 581 l 414 734 l 495 734 l 495 596 z "},"\u20BD":{ha:891,x_min:24,x_max:830,o:"m 494 230 l 245 230 l 245 0 l 162 0 l 162 230 l 24 230 l 24 301 l 162 301 l 162 402 l 24 402 l 24 473 l 162 473 l 162 987 l 498 987 q 742 908 654 987 q 830 694 830 829 q 745 479 830 555 q 500 402 659 403 l 245 402 l 245 301 l 494 301 l 494 230 m 245 473 l 498 473 q 682 530 616 473 q 747 692 747 587 q 683 854 747 794 q 509 916 620 913 l 245 916 l 245 473 z "},"\u2105":{ha:1021,x_min:80,x_max:958,o:"m 446 701 q 397 588 446 634 q 269 543 347 543 q 135 601 189 543 q 80 749 80 659 l 80 798 q 134 943 80 884 q 267 1002 188 1002 q 396 956 347 1002 q 446 842 446 909 l 380 842 q 350 914 380 886 q 267 943 319 943 q 180 901 215 943 q 146 793 146 859 l 146 745 q 181 643 146 684 q 269 601 216 601 q 349 630 318 601 q 380 701 380 659 l 446 701 m 571 242 q 626 388 571 330 q 764 446 680 446 q 902 388 847 446 q 958 237 958 331 l 958 189 q 903 43 958 101 q 765 -14 848 -14 q 626 43 682 -14 q 571 193 571 100 l 571 242 m 636 189 q 671 85 636 125 q 765 44 706 44 q 858 85 823 44 q 892 193 892 126 l 892 242 q 857 347 892 307 q 764 387 822 387 q 671 347 707 387 q 636 239 636 307 l 636 189 m 294 82 l 243 115 l 725 886 l 776 854 l 294 82 z "},\u2113:{ha:646,x_min:62,x_max:559,o:"m 477 -14 q 292 66 356 -14 q 228 295 228 146 l 228 321 q 62 293 148 293 l 62 370 q 228 403 150 370 l 228 796 q 275 981 229 915 q 400 1048 321 1048 q 513 991 469 1048 q 559 841 557 935 l 559 809 q 491 552 559 675 q 309 359 422 428 l 309 292 q 352 116 309 176 q 477 56 395 56 l 477 -14 m 309 451 q 432 608 386 511 q 477 812 477 706 l 477 833 q 456 942 477 907 q 400 977 435 977 q 309 788 309 977 l 309 451 z "},"\u2116":{ha:1416,x_min:120,x_max:1326,o:"m 1314 294 l 909 294 l 909 359 l 1314 359 l 1314 294 m 888 768 q 948 935 888 871 q 1107 998 1008 998 q 1266 935 1206 998 q 1326 764 1326 872 l 1326 694 q 1267 529 1326 592 q 1108 465 1208 465 q 947 528 1007 465 q 888 697 888 591 l 888 768 m 961 694 q 1000 573 961 617 q 1108 530 1038 530 q 1214 573 1175 530 q 1253 696 1253 616 l 1253 768 q 1215 888 1253 844 q 1107 932 1176 932 q 999 887 1038 932 q 961 764 961 842 l 961 694 m 758 0 l 670 0 l 201 845 l 201 0 l 120 0 l 120 987 l 208 987 l 677 142 l 677 987 l 758 987 l 758 0 z "},"\u2122":{ha:857,x_min:73,x_max:733,o:"m 684 905 l 581 623 l 546 623 l 443 910 l 443 623 l 393 623 l 393 987 l 455 987 l 564 696 l 672 987 l 733 987 l 733 623 l 684 623 l 684 905 m 338 941 l 230 941 l 230 623 l 180 623 l 180 941 l 73 941 l 73 987 l 338 987 l 338 941 z "},"\u212E":{ha:880,x_min:101,x_max:792,o:"m 707 64 q 456 -14 583 -14 q 275 40 358 -14 q 147 180 193 93 q 101 367 101 267 q 150 552 101 464 q 283 693 199 640 q 456 747 367 747 q 624 700 547 747 q 745 571 701 653 q 792 391 790 488 l 792 349 l 271 349 l 271 126 q 456 52 352 52 q 706 134 589 52 l 707 64 m 456 684 q 271 601 354 684 l 271 413 l 637 413 l 637 607 q 456 684 559 684 z "},"\u215B":{ha:1063,x_min:67,x_max:977,o:"m 296 438 l 224 438 l 224 888 l 67 840 l 67 901 l 287 974 l 296 974 l 296 438 m 253 82 l 203 115 l 685 886 l 735 854 l 253 82 m 962 395 q 937 322 962 353 q 871 275 913 291 q 948 223 919 257 q 977 144 977 190 q 923 33 977 74 q 781 -7 869 -7 q 637 33 690 -7 q 583 144 583 74 q 612 224 583 190 q 688 275 640 258 q 623 322 647 292 q 598 395 598 353 q 647 503 598 463 q 779 543 696 543 q 912 502 863 543 q 962 395 962 462 m 905 147 q 869 217 905 190 q 779 243 834 243 q 690 217 724 243 q 655 147 655 191 q 690 76 655 101 q 781 52 725 52 q 870 77 836 52 q 905 147 905 103 m 890 392 q 859 457 890 431 q 779 483 828 483 q 699 457 728 483 q 670 392 670 432 q 701 327 670 351 q 781 303 731 303 q 861 328 831 303 q 890 392 890 353 z "},"\u215C":{ha:1191,x_min:87,x_max:1090,o:"m 220 747 l 278 747 q 365 773 333 749 q 397 838 397 798 q 368 905 397 880 q 284 930 339 930 q 200 905 233 930 q 168 841 168 880 l 96 841 q 150 948 96 906 q 283 990 203 990 q 420 949 370 990 q 469 840 469 909 q 444 770 469 802 q 370 722 418 738 q 480 593 480 693 q 427 482 480 524 q 285 440 373 440 q 142 483 197 440 q 87 596 87 526 l 159 596 q 194 527 159 554 q 287 499 230 499 q 377 525 346 499 q 409 595 409 551 q 269 692 409 692 l 220 692 l 220 747 m 378 82 l 328 115 l 810 886 l 860 854 l 378 82 m 1076 395 q 1051 322 1076 353 q 985 275 1027 291 q 1062 223 1033 257 q 1090 144 1090 190 q 1037 33 1090 74 q 895 -7 983 -7 q 751 33 804 -7 q 697 144 697 74 q 726 224 697 190 q 802 275 754 258 q 736 322 761 292 q 712 395 712 353 q 761 503 712 463 q 893 543 810 543 q 1026 502 977 543 q 1076 395 1076 462 m 1019 147 q 983 217 1019 190 q 893 243 948 243 q 804 217 838 243 q 769 147 769 191 q 804 76 769 101 q 895 52 839 52 q 984 77 950 52 q 1019 147 1019 103 m 1004 392 q 973 457 1004 431 q 893 483 942 483 q 813 457 842 483 q 784 392 784 432 q 814 327 784 351 q 895 303 845 303 q 975 328 945 303 q 1004 392 1004 353 z "},"\u215D":{ha:1175,x_min:81,x_max:1074,o:"m 95 718 l 128 984 l 441 984 l 441 922 l 187 922 l 167 768 q 275 793 212 793 q 409 747 359 793 q 458 621 458 701 q 409 490 458 538 q 269 441 360 441 q 138 483 191 441 q 81 593 86 525 l 152 593 q 189 523 157 546 q 269 500 222 500 q 387 622 387 500 q 355 706 387 674 q 261 738 322 738 q 171 716 205 738 l 152 703 l 95 718 m 356 82 l 306 115 l 788 886 l 838 854 l 356 82 m 1059 395 q 1034 322 1059 353 q 968 275 1010 291 q 1045 223 1016 257 q 1074 144 1074 190 q 1020 33 1074 74 q 878 -7 966 -7 q 734 33 787 -7 q 680 144 680 74 q 709 224 680 190 q 785 275 737 258 q 720 322 744 292 q 695 395 695 353 q 744 503 695 463 q 876 543 793 543 q 1009 502 960 543 q 1059 395 1059 462 m 1002 147 q 966 217 1002 190 q 876 243 931 243 q 787 217 821 243 q 752 147 752 191 q 787 76 752 101 q 878 52 822 52 q 967 77 933 52 q 1002 147 1002 103 m 987 392 q 956 457 987 431 q 876 483 925 483 q 796 457 825 483 q 767 392 767 432 q 798 327 767 351 q 878 303 828 303 q 958 328 928 303 q 987 392 987 353 z "},"\u215E":{ha:1114,x_min:73,x_max:1021,o:"m 477 943 l 229 450 l 153 450 l 401 924 l 73 924 l 73 985 l 477 985 l 477 943 m 288 82 l 237 115 l 720 886 l 770 854 l 288 82 m 1006 395 q 982 322 1006 353 q 916 275 958 291 q 992 223 964 257 q 1021 144 1021 190 q 968 33 1021 74 q 825 -7 914 -7 q 682 33 735 -7 q 628 144 628 74 q 656 224 628 190 q 733 275 685 258 q 667 322 692 292 q 643 395 643 353 q 692 503 643 463 q 824 543 741 543 q 957 502 907 543 q 1006 395 1006 462 m 949 147 q 914 217 949 190 q 824 243 879 243 q 734 217 769 243 q 700 147 700 191 q 735 76 700 101 q 825 52 770 52 q 915 77 881 52 q 949 147 949 103 m 935 392 q 904 457 935 431 q 824 483 873 483 q 744 457 773 483 q 715 392 715 432 q 745 327 715 351 q 825 303 776 303 q 905 328 876 303 q 935 392 935 353 z "},"\u2202":{ha:793,x_min:72,x_max:728,o:"m 391 693 q 534 660 468 693 q 646 563 600 627 q 559 855 635 749 q 362 961 484 961 q 262 947 307 961 q 165 899 216 933 l 150 963 l 180 983 q 370 1033 262 1033 q 634 887 541 1033 q 728 474 728 741 l 728 427 q 686 198 728 300 q 568 41 644 97 q 395 -14 492 -14 q 161 83 250 -14 q 72 340 72 180 l 72 357 q 112 532 72 454 q 224 651 152 609 q 391 693 297 693 m 397 624 q 220 549 287 624 q 153 351 153 474 l 153 334 q 219 133 153 212 q 395 54 286 54 q 579 155 511 54 q 647 422 647 256 l 647 454 q 556 576 625 529 q 397 624 487 624 z "},"\u220F":{ha:913,x_min:118,x_max:794,o:"m 794 -165 l 713 -165 l 713 918 l 199 918 l 199 -165 l 118 -165 l 118 987 l 794 987 l 794 -165 z "},"\u2211":{ha:802,x_min:43,x_max:800,o:"m 539 392 l 142 -113 l 800 -113 l 800 -182 l 43 -182 l 43 -120 l 451 401 l 43 924 l 43 987 l 754 987 l 754 918 l 142 918 l 539 409 l 539 392 z "},"\u2212":{ha:792,x_min:112,x_max:678,o:"m 678 465 l 112 465 l 112 534 l 678 534 l 678 465 z "},"\u221A":{ha:758,x_min:43,x_max:717,o:"m 330 164 l 343 110 l 355 164 l 633 987 l 717 987 l 377 0 l 312 0 l 147 434 l 43 434 l 43 503 l 205 503 l 330 164 z "},"\u221E":{ha:1468,x_min:81,x_max:1377,o:"m 1377 353 q 1336 168 1377 253 q 1222 34 1295 82 q 1059 -14 1149 -14 q 868 58 953 -14 q 728 268 784 130 q 588 57 672 129 q 400 -14 505 -14 q 171 91 262 -14 q 81 362 81 197 l 81 379 q 122 566 81 480 q 236 699 163 651 q 399 747 309 747 q 588 675 505 747 q 728 465 672 604 q 869 675 785 604 q 1060 747 954 747 q 1222 699 1149 747 q 1335 568 1295 651 q 1377 385 1376 484 l 1377 353 m 161 353 q 191 202 161 271 q 275 94 220 133 q 400 54 329 54 q 567 133 493 54 q 684 353 641 211 l 684 381 l 680 394 q 563 603 637 528 q 399 678 489 678 q 227 592 293 678 q 161 372 161 507 l 161 353 m 1296 379 q 1266 531 1296 461 q 1182 640 1236 602 q 1060 678 1129 678 q 895 603 968 678 q 779 397 821 527 l 774 381 l 774 353 l 780 334 q 893 130 821 206 q 1059 54 966 54 q 1230 139 1164 54 q 1296 361 1296 224 l 1296 379 z "},"\u222B":{ha:352,x_min:-81,x_max:423,o:"m 201 -66 q 147 -238 201 -180 q -3 -296 93 -296 q -81 -283 -41 -296 l -71 -216 q -9 -227 -38 -227 q 121 -60 121 -227 l 121 824 q 176 995 121 934 q 331 1056 231 1056 q 423 1043 374 1056 l 412 978 q 341 987 378 987 q 238 944 275 987 q 201 825 201 902 l 201 -66 z "},"\u2248":{ha:783,x_min:68,x_max:704,o:"m 72 589 q 148 652 104 629 q 235 675 191 675 q 341 653 291 677 l 450 597 q 543 578 493 578 q 702 672 632 578 l 704 587 q 630 523 671 546 q 544 500 589 500 q 446 521 491 500 l 336 578 q 236 597 290 599 q 149 572 191 597 q 75 503 107 547 l 72 589 m 68 315 q 144 379 101 355 q 231 402 186 402 q 337 380 287 404 l 450 322 q 539 304 490 304 q 698 399 628 304 l 700 313 q 626 250 667 273 q 540 227 585 227 q 442 248 487 227 l 332 304 q 232 325 284 326 q 145 299 187 325 q 71 230 103 274 l 68 315 z "},"\u2260":{ha:768,x_min:101,x_max:667,o:"m 667 283 l 308 283 l 205 104 l 157 132 l 244 283 l 101 283 l 101 355 l 286 355 l 404 562 l 101 562 l 101 634 l 446 634 l 552 819 l 600 791 l 510 634 l 667 634 l 667 562 l 469 562 l 349 355 l 667 355 l 667 283 z "},"\u2264":{ha:710,x_min:47,x_max:613,o:"m 141 464 l 613 280 l 613 204 l 52 435 l 52 494 l 613 725 l 613 648 l 141 464 m 613 1 l 47 1 l 47 70 l 613 70 l 613 1 z "},"\u2265":{ha:720,x_min:81,x_max:657,o:"m 566 473 l 84 658 l 84 733 l 657 502 l 657 443 l 84 212 l 84 287 l 566 473 m 647 1 l 81 1 l 81 70 l 647 70 l 647 1 z "},"\u25CA":{ha:701,x_min:37,x_max:661,o:"m 316 987 l 381 987 l 661 493 l 382 0 l 317 0 l 37 493 l 316 987 m 348 898 l 125 493 l 350 87 l 573 493 l 348 898 z "},"\uEE01":{ha:352,x_min:113,x_max:231,o:"m 113 168 q 129 208 113 191 q 171 224 144 224 q 214 208 198 224 q 229 168 229 191 q 214 129 229 144 q 171 113 198 113 q 129 129 144 113 q 113 168 113 144 m 115 793 q 131 834 115 817 q 173 850 146 850 q 216 834 200 850 q 231 793 231 817 q 216 754 231 770 q 173 739 200 739 q 131 754 146 739 q 115 793 115 770 z "},"\uEE02":{ha:399,x_min:79,x_max:330,o:"m 146 454 l 79 454 l 79 734 l 146 734 l 146 454 m 330 454 l 264 454 l 264 734 l 330 734 l 330 454 z "},"\uF6C3":{ha:330,x_min:82,x_max:209,o:"m 130 -123 l 82 -88 q 131 54 129 -22 l 131 119 l 209 119 l 209 77 q 130 -123 209 -53 z "},\uFB01:{ha:746,x_min:33,x_max:629,o:"m 155 0 l 155 667 l 33 667 l 33 734 l 155 734 l 155 809 q 218 991 155 926 q 398 1056 282 1056 q 585 1016 489 1056 l 572 946 q 404 982 489 982 q 236 808 236 982 l 236 734 l 408 734 l 408 667 l 236 667 l 236 0 l 155 0 m 629 0 l 548 0 l 548 734 l 629 734 l 629 0 z "},\uFB02:{ha:756,x_min:43,x_max:639,o:"m 558 964 q 391 985 458 985 q 283 943 321 985 q 245 825 245 901 l 245 734 l 420 734 l 420 667 l 245 667 l 245 0 l 164 0 l 164 667 l 43 667 l 43 734 l 164 734 l 164 827 q 223 997 165 939 q 386 1056 281 1056 q 639 1015 470 1056 l 639 0 l 558 0 l 558 964 z "},\uFB03:{ha:1149,x_min:43,x_max:1033,o:"m 164 0 l 164 667 l 43 667 l 43 734 l 164 734 l 164 823 q 221 996 164 935 q 381 1056 279 1056 q 467 1044 427 1056 l 461 977 q 387 985 427 985 q 283 943 320 985 q 245 825 245 901 l 245 734 l 558 734 l 558 809 q 622 991 558 926 q 802 1056 686 1056 q 989 1016 892 1056 l 975 946 q 806 982 890 982 q 639 806 639 982 l 639 734 l 811 734 l 811 667 l 639 667 l 639 0 l 558 0 l 558 667 l 245 667 l 245 0 l 164 0 m 1033 0 l 951 0 l 951 734 l 1033 734 l 1033 0 z "},\uFB04:{ha:1149,x_min:43,x_max:1033,o:"m 164 0 l 164 667 l 43 667 l 43 734 l 164 734 l 164 823 q 221 996 164 935 q 381 1056 279 1056 q 467 1044 427 1056 l 461 977 q 387 985 427 985 q 283 943 320 985 q 245 825 245 901 l 245 734 l 558 734 l 558 827 q 617 997 559 938 q 779 1056 675 1056 q 1033 1015 864 1056 l 1033 0 l 951 0 l 951 964 q 785 985 851 985 q 677 943 715 985 q 639 825 639 901 l 639 734 l 814 734 l 814 667 l 639 667 l 639 0 l 558 0 l 558 667 l 245 667 l 245 0 l 164 0 z "},"\uFEFF":{ha:0,x_min:0,x_max:0,o:""},"\uFFFC":{ha:1420,x_min:60,x_max:1375,o:"m 557 317 q 514 210 557 251 q 402 169 470 169 q 290 210 333 169 q 245 314 246 250 l 245 393 q 288 500 245 458 q 401 542 330 542 q 513 501 469 542 q 557 397 556 460 l 557 317 m 603 171 l 603 543 l 730 543 q 836 518 797 543 q 874 441 874 494 q 817 363 874 385 q 869 330 851 354 q 886 276 886 307 q 745 171 886 171 l 603 171 m 495 393 q 470 467 495 440 q 401 493 445 493 q 332 467 357 493 q 307 393 307 440 l 307 317 q 332 244 307 271 q 402 218 357 218 q 470 244 446 218 q 495 317 495 271 l 495 393 m 1142 545 l 1204 545 l 1204 288 q 1169 204 1204 235 q 1078 172 1133 172 q 981 200 1018 172 q 944 283 944 227 l 1007 283 q 1078 222 1007 222 q 1124 240 1105 222 q 1142 288 1142 258 l 1142 545 m 60 -270 l 60 -56 l 136 -56 l 136 -193 l 269 -193 l 269 -270 l 60 -270 m 1164 -270 l 1164 -193 l 1299 -193 l 1299 -56 l 1375 -56 l 1375 -270 l 1164 -270 m 60 793 l 60 986 l 269 986 l 269 907 l 136 907 l 136 793 l 60 793 m 1164 907 l 1164 986 l 1375 986 l 1375 793 l 1299 793 l 1299 907 l 1164 907 m 667 336 l 667 222 l 753 222 q 823 278 823 222 q 756 336 823 334 l 667 336 m 894 907 l 894 986 l 1082 986 l 1082 907 l 894 907 m 623 907 l 623 986 l 811 986 l 811 907 l 623 907 m 353 907 l 353 986 l 540 986 l 540 907 l 353 907 m 894 -270 l 894 -193 l 1082 -193 l 1082 -270 l 894 -270 m 623 -270 l 623 -193 l 811 -193 l 811 -270 l 623 -270 m 353 -270 l 353 -193 l 540 -193 l 540 -270 l 353 -270 m 667 384 l 730 384 q 810 438 810 384 q 791 476 810 466 q 730 486 771 486 l 667 486 l 667 384 m 136 282 l 60 282 l 60 453 l 136 453 l 136 282 m 136 538 l 60 538 l 60 708 l 136 708 l 136 538 m 136 28 l 60 28 l 60 197 l 136 197 l 136 28 m 1375 282 l 1299 282 l 1299 453 l 1375 453 l 1375 282 m 1375 538 l 1299 538 l 1299 708 l 1375 708 l 1375 538 m 1375 28 l 1299 28 l 1299 197 l 1375 197 l 1375 28 z "},"\uFFFD":{ha:1425,x_min:62,x_max:1361,o:"m 711 1097 l 1361 436 l 711 -225 l 62 436 l 711 1097 m 767 273 q 777 332 767 312 q 812 368 787 351 q 893 440 862 394 q 924 536 924 486 q 868 674 924 623 q 710 725 811 725 q 558 678 612 725 q 503 545 504 631 l 640 545 q 661 597 642 579 q 710 614 681 614 q 768 593 749 614 q 787 536 787 571 q 724 431 787 471 q 646 355 662 387 q 630 273 630 324 l 767 273 m 767 211 l 630 211 l 630 96 l 767 96 l 767 211 m 716 -374 l 719 -374 l 719 -376 l 716 -376 l 716 -374 m 715 1467 l 718 1467 l 718 1464 l 715 1464 l 715 1467 z "},"\xA0":{ha:338,x_min:0,x_max:0,o:""},"\xAD":{ha:397,x_min:33,x_max:358,o:"m 358 401 l 33 401 l 33 470 l 358 470 l 358 401 z "},\u0110:{ha:930,x_min:22,x_max:843,o:"m 145 0 l 145 467 l 22 467 l 22 536 l 145 536 l 145 987 l 421 987 q 639 932 543 987 q 789 774 735 877 q 843 539 843 671 l 843 448 q 789 214 843 316 q 638 56 736 111 q 415 0 541 0 l 145 0 m 437 467 l 229 467 l 229 71 l 412 71 q 666 174 572 71 q 760 454 760 277 l 760 541 q 667 813 760 711 q 422 916 574 916 l 229 916 l 229 536 l 437 536 l 437 467 z "},\u00D0:{ha:930,x_min:22,x_max:843,o:"m 145 0 l 145 467 l 22 467 l 22 536 l 145 536 l 145 987 l 421 987 q 639 932 543 987 q 789 774 735 877 q 843 539 843 671 l 843 448 q 789 214 843 316 q 638 56 736 111 q 415 0 541 0 l 145 0 m 437 467 l 229 467 l 229 71 l 412 71 q 666 174 572 71 q 760 454 760 277 l 760 541 q 667 813 760 711 q 422 916 574 916 l 229 916 l 229 536 l 437 536 l 437 467 z "},\u0127:{ha:783,x_min:0,x_max:680,o:"m 415 852 l 207 852 l 207 610 q 309 711 247 675 q 446 747 372 747 q 621 681 564 747 q 680 481 679 614 l 680 0 l 599 0 l 599 482 q 557 629 598 581 q 426 677 516 677 q 293 630 351 677 q 207 503 235 583 l 207 0 l 126 0 l 126 852 l 0 852 l 0 922 l 126 922 l 126 1042 l 207 1042 l 207 922 l 415 922 l 415 852 z "},\u0166:{ha:829,x_min:35,x_max:795,o:"m 619 566 l 456 566 l 456 0 l 373 0 l 373 566 l 204 566 l 204 635 l 373 635 l 373 916 l 35 916 l 35 987 l 795 987 l 795 916 l 456 916 l 456 635 l 619 635 l 619 566 z "},\u0167:{ha:446,x_min:9,x_max:425,o:"m 232 922 l 232 734 l 384 734 l 384 667 l 232 667 l 232 488 l 425 488 l 425 418 l 232 418 l 232 178 q 254 87 232 117 q 328 58 276 58 q 393 64 348 58 l 397 -2 q 310 -14 365 -14 q 190 33 228 -14 q 151 171 152 80 l 151 418 l 9 418 l 9 488 l 151 488 l 151 667 l 16 667 l 16 734 l 151 734 l 151 922 l 232 922 z "},\u00C0:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 486 1065 l 412 1065 l 258 1255 l 356 1255 l 486 1065 z "},\u00C1:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 517 1255 l 615 1255 l 458 1065 l 387 1065 l 517 1255 z "},\u00C2:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 625 1074 l 625 1067 l 549 1067 l 435 1191 l 322 1067 l 248 1067 l 248 1076 l 410 1249 l 461 1249 l 625 1074 z "},\u00C3:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 667 1227 q 628 1122 667 1162 q 534 1082 590 1082 q 434 1120 483 1082 q 346 1157 385 1157 q 293 1136 314 1157 q 271 1077 271 1115 l 210 1079 q 247 1182 210 1141 q 342 1223 284 1223 q 398 1211 375 1223 q 441 1185 421 1200 q 483 1160 462 1171 q 531 1148 503 1148 q 584 1171 562 1148 q 606 1231 606 1193 l 667 1227 z "},\u00C4:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 233 1160 q 248 1199 233 1183 q 288 1215 262 1215 q 329 1199 314 1215 q 345 1160 345 1183 q 329 1122 345 1138 q 288 1107 314 1107 q 248 1122 262 1107 q 233 1160 233 1138 m 530 1160 q 545 1199 530 1183 q 585 1215 559 1215 q 626 1199 611 1215 q 642 1160 642 1183 q 626 1122 642 1137 q 585 1106 611 1106 q 545 1122 559 1106 q 530 1160 530 1137 z "},\u00C5:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 305 1163 q 343 1255 305 1217 q 436 1292 382 1292 q 528 1255 490 1292 q 567 1163 567 1217 q 530 1073 567 1109 q 436 1036 492 1036 q 342 1073 380 1036 q 305 1163 305 1109 m 357 1163 q 380 1107 357 1129 q 436 1084 402 1084 q 492 1106 469 1084 q 515 1163 515 1128 q 492 1221 515 1199 q 436 1244 468 1244 q 380 1221 403 1244 q 357 1163 357 1198 z "},\u01FA:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 521 1308 l 612 1308 l 475 1181 l 414 1181 l 521 1308 m 332 1042 q 362 1115 332 1084 q 437 1146 392 1146 q 510 1116 481 1146 q 540 1042 540 1085 q 510 969 540 999 q 437 940 480 940 q 362 970 393 940 q 332 1042 332 1000 m 378 1042 q 395 1001 378 1019 q 437 983 412 983 q 477 1000 460 983 q 494 1042 494 1017 q 477 1085 494 1068 q 437 1103 460 1103 q 395 1085 413 1103 q 378 1042 378 1067 z "},\u00C7:{ha:902,x_min:89,x_max:824,o:"m 824 308 q 712 69 807 152 q 460 -14 618 -14 q 266 41 351 -14 q 136 197 182 96 q 89 427 90 298 l 89 555 q 135 789 89 687 q 268 946 181 890 q 467 1001 354 1001 q 717 915 625 1001 q 824 678 809 829 l 740 678 q 467 930 709 930 q 253 829 332 930 q 173 552 173 729 l 173 431 q 251 159 173 260 q 460 57 328 57 q 658 120 591 57 q 740 308 724 182 l 824 308 m 494 -6 l 486 -50 q 597 -165 597 -64 q 544 -264 597 -228 q 398 -301 490 -301 l 393 -248 q 492 -226 454 -248 q 530 -167 530 -204 q 501 -113 530 -127 q 411 -92 471 -98 l 431 -6 l 494 -6 z "},\u00C8:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 470 1069 l 396 1069 l 243 1259 l 340 1259 l 470 1069 z "},\u00C9:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 501 1259 l 600 1259 l 443 1069 l 372 1069 l 501 1259 z "},\u00CA:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 609 1078 l 609 1071 l 534 1071 l 420 1195 l 307 1071 l 233 1071 l 233 1080 l 394 1253 l 446 1253 l 609 1078 z "},\u00CB:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 217 1164 q 232 1203 217 1187 q 273 1219 247 1219 q 314 1203 298 1219 q 329 1164 329 1187 q 314 1126 329 1142 q 273 1111 298 1111 q 232 1126 247 1111 q 217 1164 217 1142 m 514 1164 q 529 1203 514 1187 q 570 1219 544 1219 q 611 1203 595 1219 q 626 1164 626 1187 q 611 1126 626 1141 q 570 1110 595 1110 q 529 1126 544 1110 q 514 1164 514 1141 z "},\u00CC:{ha:370,x_min:9,x_max:236,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 236 1069 l 162 1069 l 9 1259 l 106 1259 l 236 1069 z "},\u00CD:{ha:370,x_min:137,x_max:365,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 267 1259 l 365 1259 l 208 1069 l 137 1069 l 267 1259 z "},\u00CE:{ha:370,x_min:-1,x_max:375,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 375 1078 l 375 1071 l 300 1071 l 186 1195 l 73 1071 l -1 1071 l -1 1080 l 160 1253 l 212 1253 l 375 1078 z "},\u00CF:{ha:370,x_min:-17,x_max:392,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m -17 1164 q -2 1203 -17 1187 q 39 1219 13 1219 q 80 1203 64 1219 q 95 1164 95 1187 q 80 1126 95 1142 q 39 1111 64 1111 q -2 1126 13 1111 q -17 1164 -17 1142 m 280 1164 q 295 1203 280 1187 q 336 1219 310 1219 q 377 1203 361 1219 q 392 1164 392 1187 q 377 1126 392 1141 q 336 1110 361 1110 q 295 1126 310 1110 q 280 1164 280 1141 z "},\u00D1:{ha:986,x_min:125,x_max:860,o:"m 860 0 l 777 0 l 209 845 l 209 0 l 125 0 l 125 987 l 209 987 l 777 142 l 777 987 l 860 987 l 860 0 m 724 1227 q 685 1122 724 1162 q 591 1082 647 1082 q 491 1120 540 1082 q 403 1157 441 1157 q 350 1136 371 1157 q 328 1077 328 1115 l 267 1079 q 304 1182 267 1141 q 399 1223 341 1223 q 455 1211 432 1223 q 498 1185 478 1200 q 539 1160 519 1171 q 588 1148 560 1148 q 641 1171 619 1148 q 663 1231 663 1193 l 724 1227 z "},\u00D2:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 519 1074 l 445 1074 l 292 1263 l 389 1263 l 519 1074 z "},\u00D3:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 550 1263 l 648 1263 l 492 1074 l 420 1074 l 550 1263 z "},\u00D4:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 658 1082 l 658 1075 l 583 1075 l 469 1199 l 355 1075 l 281 1075 l 281 1084 l 443 1257 l 494 1257 l 658 1082 z "},\u00D5:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 700 1235 q 662 1130 700 1170 q 568 1090 623 1090 q 467 1128 516 1090 q 379 1165 418 1165 q 326 1144 347 1165 q 304 1085 304 1123 l 243 1087 q 280 1190 243 1149 q 376 1231 317 1231 q 431 1219 408 1231 q 475 1194 454 1208 q 516 1168 495 1179 q 564 1156 536 1156 q 617 1179 595 1156 q 640 1239 640 1201 l 700 1235 z "},\u00D6:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 266 1168 q 281 1207 266 1192 q 321 1223 296 1223 q 362 1207 347 1223 q 378 1168 378 1192 q 362 1131 378 1146 q 321 1115 347 1115 q 281 1131 296 1115 q 266 1168 266 1146 m 563 1168 q 578 1207 563 1191 q 618 1223 593 1223 q 660 1207 644 1223 q 675 1168 675 1191 q 660 1130 675 1145 q 618 1114 644 1114 q 578 1130 593 1114 q 563 1168 563 1145 z "},\u00D9:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 513 1065 l 439 1065 l 286 1255 l 383 1255 l 513 1065 z "},\u00DA:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 544 1255 l 642 1255 l 486 1065 l 414 1065 l 544 1255 z "},\u00DB:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 652 1074 l 652 1067 l 576 1067 l 463 1191 l 349 1067 l 275 1067 l 275 1076 l 437 1249 l 488 1249 l 652 1074 z "},\u00DC:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 260 1160 q 275 1199 260 1183 q 315 1215 290 1215 q 356 1199 341 1215 q 372 1160 372 1183 q 356 1122 372 1138 q 315 1107 341 1107 q 275 1122 290 1107 q 260 1160 260 1138 m 557 1160 q 572 1199 557 1183 q 612 1215 587 1215 q 653 1199 638 1215 q 669 1160 669 1183 q 653 1122 669 1137 q 612 1106 638 1106 q 572 1122 587 1106 q 557 1160 557 1137 z "},\u00DD:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 m 496 1251 l 595 1251 l 438 1061 l 367 1061 l 496 1251 z "},\u00E0:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 443 852 l 369 852 l 216 1042 l 313 1042 l 443 852 z "},\u00E1:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 474 1042 l 572 1042 l 416 852 l 345 852 l 474 1042 z "},\u00E2:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 582 860 l 582 853 l 507 853 l 393 977 l 279 853 l 205 853 l 205 862 l 367 1035 l 418 1035 l 582 860 z "},\u00E3:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 624 1013 q 586 908 624 948 q 492 869 547 869 q 391 906 440 869 q 303 943 342 943 q 250 922 271 943 q 229 863 229 901 l 168 865 q 204 968 168 928 q 300 1009 241 1009 q 355 998 332 1009 q 399 972 378 986 q 440 946 419 958 q 488 935 460 935 q 542 957 519 935 q 564 1017 564 979 l 624 1013 z "},\u00E4:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 190 947 q 205 986 190 970 q 245 1002 220 1002 q 287 986 271 1002 q 302 947 302 970 q 287 909 302 924 q 245 893 271 893 q 205 909 220 893 q 190 947 190 924 m 487 946 q 502 985 487 969 q 543 1001 517 1001 q 584 985 568 1001 q 599 946 599 969 q 584 908 599 924 q 543 892 568 892 q 502 908 517 892 q 487 946 487 924 z "},\u00E5:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 262 949 q 301 1041 262 1004 q 393 1078 339 1078 q 486 1041 447 1078 q 524 949 524 1004 q 487 859 524 896 q 393 823 450 823 q 300 859 337 823 q 262 949 262 896 m 315 949 q 337 893 315 916 q 393 871 359 871 q 450 893 427 871 q 473 949 473 915 q 449 1008 473 985 q 393 1030 425 1030 q 337 1007 360 1030 q 315 949 315 984 z "},\u01FB:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 478 1095 l 570 1095 l 433 968 l 372 968 l 478 1095 m 289 829 q 319 902 289 871 q 394 933 349 933 q 468 903 438 933 q 497 829 497 872 q 467 756 497 786 q 394 727 437 727 q 319 757 350 727 q 289 829 289 787 m 335 829 q 352 788 335 806 q 394 770 369 770 q 435 787 418 770 q 452 829 452 804 q 435 872 452 855 q 394 890 418 890 q 353 872 370 890 q 335 829 335 854 z "},\u00E7:{ha:715,x_min:64,x_max:659,o:"m 377 55 q 519 103 462 55 q 581 227 576 151 l 659 227 q 617 104 656 159 q 514 18 578 49 q 377 -14 450 -14 q 148 87 233 -14 q 64 357 64 187 l 64 381 q 102 573 64 490 q 211 702 140 656 q 376 747 281 747 q 575 675 497 747 q 659 486 654 604 l 581 486 q 519 625 576 572 q 376 678 463 678 q 206 599 267 678 q 145 376 145 519 l 145 353 q 206 134 145 212 q 377 55 267 55 m 399 -6 l 391 -50 q 503 -165 503 -64 q 450 -264 503 -228 q 304 -301 396 -301 l 299 -248 q 398 -226 359 -248 q 436 -167 436 -204 q 407 -113 436 -127 q 317 -92 377 -98 l 336 -6 l 399 -6 z "},\u00E8:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 434 852 l 360 852 l 207 1042 l 304 1042 l 434 852 z "},\u00E9:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 465 1042 l 564 1042 l 407 852 l 336 852 l 465 1042 z "},\u00EA:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 573 860 l 573 853 l 498 853 l 384 977 l 271 853 l 197 853 l 197 862 l 358 1035 l 410 1035 l 573 860 z "},\u00EB:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 181 947 q 196 986 181 970 q 237 1002 211 1002 q 278 986 262 1002 q 293 947 293 970 q 278 909 293 924 q 237 893 262 893 q 196 909 211 893 q 181 947 181 924 m 478 946 q 493 985 478 969 q 534 1001 508 1001 q 575 985 559 1001 q 590 946 590 969 q 575 908 590 924 q 534 892 559 892 q 493 908 508 892 q 478 946 478 924 z "},\u00EC:{ha:309,x_min:-20,x_max:207,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m 207 844 l 133 844 l -20 1034 l 77 1034 l 207 844 z "},\u00ED:{ha:309,x_min:108,x_max:336,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m 237 1034 l 336 1034 l 179 844 l 108 844 l 237 1034 z "},\u00EE:{ha:309,x_min:-31,x_max:346,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m 346 852 l 346 845 l 271 845 l 157 969 l 43 845 l -31 845 l -31 854 l 131 1027 l 182 1027 l 346 852 z "},\u00EF:{ha:309,x_min:-46,x_max:363,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m -46 939 q -31 978 -46 962 q 9 994 -16 994 q 51 978 35 994 q 66 939 66 962 q 51 901 66 916 q 9 885 35 885 q -31 901 -16 885 q -46 939 -46 916 m 251 938 q 266 977 251 961 q 307 993 281 993 q 348 977 332 993 q 363 938 363 961 q 348 900 363 916 q 307 884 332 884 q 266 900 281 884 q 251 938 251 916 z "},\u00F1:{ha:763,x_min:106,x_max:659,o:"m 183 734 l 186 608 q 289 712 227 676 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 734 l 183 734 m 621 1013 q 583 908 621 947 q 489 868 545 868 q 388 905 437 868 q 300 943 339 943 q 247 922 269 943 q 226 863 226 901 l 165 865 q 202 968 165 927 q 297 1008 239 1008 q 353 997 330 1008 q 396 971 376 985 q 437 945 416 957 q 486 934 458 934 q 539 956 517 934 q 561 1017 561 979 l 621 1013 z "},\u00F2:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 437 852 l 363 852 l 210 1042 l 308 1042 l 437 852 z "},\u00F3:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 469 1042 l 567 1042 l 410 852 l 339 852 l 469 1042 z "},\u00F4:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 576 860 l 576 853 l 501 853 l 387 977 l 274 853 l 200 853 l 200 862 l 361 1035 l 413 1035 l 576 860 z "},\u00F5:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 618 1013 q 580 908 618 947 q 486 868 542 868 q 386 905 435 868 q 298 943 336 943 q 244 922 266 943 q 223 863 223 901 l 162 865 q 199 968 162 927 q 294 1008 236 1008 q 350 997 327 1008 q 393 971 373 985 q 434 945 414 957 q 483 934 455 934 q 536 956 514 934 q 558 1017 558 979 l 618 1013 z "},\u00F6:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 184 947 q 199 986 184 970 q 240 1002 214 1002 q 281 986 266 1002 q 296 947 296 970 q 281 909 296 924 q 240 893 266 893 q 199 909 214 893 q 184 947 184 924 m 481 946 q 496 985 481 969 q 537 1001 511 1001 q 578 985 563 1001 q 593 946 593 969 q 578 908 593 924 q 537 892 563 892 q 496 908 511 892 q 481 946 481 924 z "},\u00F9:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 439 852 l 365 852 l 212 1042 l 309 1042 l 439 852 z "},\u00FA:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 470 1042 l 568 1042 l 412 852 l 340 852 l 470 1042 z "},\u00FB:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 578 860 l 578 853 l 503 853 l 389 977 l 275 853 l 201 853 l 201 862 l 363 1035 l 414 1035 l 578 860 z "},\u00FC:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 186 947 q 201 986 186 970 q 241 1002 216 1002 q 282 986 267 1002 q 298 947 298 970 q 282 909 298 924 q 241 893 267 893 q 201 909 216 893 q 186 947 186 924 m 483 946 q 498 985 483 969 q 538 1001 513 1001 q 579 985 564 1001 q 595 946 595 969 q 579 908 595 924 q 538 892 564 892 q 498 908 513 892 q 483 946 483 924 z "},\u00FD:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 429 1042 l 528 1042 l 371 852 l 300 852 l 429 1042 z "},\u00FF:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 145 947 q 160 986 145 970 q 201 1002 175 1002 q 242 986 227 1002 q 257 947 257 970 q 242 909 257 924 q 201 893 227 893 q 160 909 175 893 q 145 947 145 924 m 442 946 q 457 985 442 969 q 498 1001 472 1001 q 539 985 524 1001 q 554 946 554 969 q 539 908 554 924 q 498 892 524 892 q 457 908 472 892 q 442 946 442 924 z "},\u0100:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 648 1131 l 228 1131 l 228 1196 l 648 1196 l 648 1131 z "},\u0101:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 605 917 l 185 917 l 185 983 l 605 983 l 605 917 z "},\u0102:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 631 1226 q 578 1100 631 1148 q 435 1052 525 1052 q 293 1100 347 1052 q 239 1226 239 1147 l 309 1226 q 342 1140 309 1170 q 435 1110 376 1110 q 529 1141 495 1110 q 562 1226 562 1173 l 631 1226 z "},\u0103:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 589 1013 q 535 886 589 935 q 393 838 482 838 q 251 886 304 838 q 197 1013 197 934 l 266 1013 q 299 926 266 956 q 393 897 333 897 q 486 928 452 897 q 519 1013 519 959 l 589 1013 z "},\u0104:{ha:867,x_min:20,x_max:852,o:"m 473 987 l 847 0 l 834 0 q 738 -90 763 -54 q 713 -159 713 -125 q 770 -216 713 -216 q 842 -193 807 -216 l 852 -250 q 755 -280 808 -280 q 670 -250 701 -280 q 640 -165 640 -220 q 671 -77 640 -121 q 759 3 703 -33 l 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 m 235 348 l 631 348 l 433 886 l 235 348 z "},\u0105:{ha:744,x_min:68,x_max:663,o:"m 568 3 q 553 102 557 37 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 645 0 q 549 -90 574 -54 q 524 -159 524 -125 q 581 -216 524 -216 q 652 -193 618 -216 l 663 -250 q 566 -280 618 -280 q 481 -250 511 -280 q 450 -165 450 -220 q 481 -78 450 -121 q 568 3 513 -34 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 z "},\u0106:{ha:902,x_min:89,x_max:824,o:"m 824 308 q 712 69 807 152 q 460 -14 618 -14 q 266 41 351 -14 q 136 197 182 96 q 89 427 90 298 l 89 555 q 135 789 89 687 q 268 946 181 890 q 467 1001 354 1001 q 717 915 625 1001 q 824 678 809 829 l 740 678 q 467 930 709 930 q 253 829 332 930 q 173 552 173 729 l 173 431 q 251 159 173 260 q 460 57 328 57 q 658 120 591 57 q 740 308 724 182 l 824 308 m 541 1274 l 640 1274 l 483 1084 l 412 1084 l 541 1274 z "},\u0107:{ha:715,x_min:64,x_max:659,o:"m 377 55 q 519 103 462 55 q 581 227 576 151 l 659 227 q 617 104 656 159 q 514 18 578 49 q 377 -14 450 -14 q 148 87 233 -14 q 64 357 64 187 l 64 381 q 102 573 64 490 q 211 702 140 656 q 376 747 281 747 q 575 675 497 747 q 659 486 654 604 l 581 486 q 519 625 576 572 q 376 678 463 678 q 206 599 267 678 q 145 376 145 519 l 145 353 q 206 134 145 212 q 377 55 267 55 m 447 1042 l 545 1042 l 389 852 l 317 852 l 447 1042 z "},\u0108:{ha:902,x_min:89,x_max:824,o:"m 824 308 q 712 69 807 152 q 460 -14 618 -14 q 266 41 351 -14 q 136 197 182 96 q 89 427 90 298 l 89 555 q 135 789 89 687 q 268 946 181 890 q 467 1001 354 1001 q 717 915 625 1001 q 824 678 809 829 l 740 678 q 467 930 709 930 q 253 829 332 930 q 173 552 173 729 l 173 431 q 251 159 173 260 q 460 57 328 57 q 658 120 591 57 q 740 308 724 182 l 824 308 m 649 1092 l 649 1085 l 574 1085 l 460 1209 l 347 1085 l 273 1085 l 273 1094 l 434 1267 l 486 1267 l 649 1092 z "},\u0109:{ha:715,x_min:64,x_max:659,o:"m 377 55 q 519 103 462 55 q 581 227 576 151 l 659 227 q 617 104 656 159 q 514 18 578 49 q 377 -14 450 -14 q 148 87 233 -14 q 64 357 64 187 l 64 381 q 102 573 64 490 q 211 702 140 656 q 376 747 281 747 q 575 675 497 747 q 659 486 654 604 l 581 486 q 519 625 576 572 q 376 678 463 678 q 206 599 267 678 q 145 376 145 519 l 145 353 q 206 134 145 212 q 377 55 267 55 m 555 860 l 555 853 l 479 853 l 366 977 l 252 853 l 178 853 l 178 862 l 340 1035 l 391 1035 l 555 860 z "},\u010A:{ha:902,x_min:89,x_max:824,o:"m 824 308 q 712 69 807 152 q 460 -14 618 -14 q 266 41 351 -14 q 136 197 182 96 q 89 427 90 298 l 89 555 q 135 789 89 687 q 268 946 181 890 q 467 1001 354 1001 q 717 915 625 1001 q 824 678 809 829 l 740 678 q 467 930 709 930 q 253 829 332 930 q 173 552 173 729 l 173 431 q 251 159 173 260 q 460 57 328 57 q 658 120 591 57 q 740 308 724 182 l 824 308 m 404 1169 q 419 1208 404 1192 q 460 1224 434 1224 q 501 1208 486 1224 q 516 1169 516 1192 q 501 1131 516 1147 q 460 1116 486 1116 q 419 1131 434 1116 q 404 1169 404 1147 z "},\u010B:{ha:715,x_min:64,x_max:659,o:"m 377 55 q 519 103 462 55 q 581 227 576 151 l 659 227 q 617 104 656 159 q 514 18 578 49 q 377 -14 450 -14 q 148 87 233 -14 q 64 357 64 187 l 64 381 q 102 573 64 490 q 211 702 140 656 q 376 747 281 747 q 575 675 497 747 q 659 486 654 604 l 581 486 q 519 625 576 572 q 376 678 463 678 q 206 599 267 678 q 145 376 145 519 l 145 353 q 206 134 145 212 q 377 55 267 55 m 310 937 q 325 976 310 960 q 366 992 340 992 q 407 976 392 992 q 422 937 422 960 q 407 899 422 915 q 366 884 392 884 q 325 899 340 884 q 310 937 310 915 z "},\u010C:{ha:902,x_min:89,x_max:824,o:"m 824 308 q 712 69 807 152 q 460 -14 618 -14 q 266 41 351 -14 q 136 197 182 96 q 89 427 90 298 l 89 555 q 135 789 89 687 q 268 946 181 890 q 467 1001 354 1001 q 717 915 625 1001 q 824 678 809 829 l 740 678 q 467 930 709 930 q 253 829 332 930 q 173 552 173 729 l 173 431 q 251 159 173 260 q 460 57 328 57 q 658 120 591 57 q 740 308 724 182 l 824 308 m 459 1133 l 576 1265 l 648 1265 l 648 1257 l 488 1080 l 430 1080 l 270 1257 l 270 1265 l 342 1265 l 459 1133 z "},\u010D:{ha:715,x_min:64,x_max:659,o:"m 377 55 q 519 103 462 55 q 581 227 576 151 l 659 227 q 617 104 656 159 q 514 18 578 49 q 377 -14 450 -14 q 148 87 233 -14 q 64 357 64 187 l 64 381 q 102 573 64 490 q 211 702 140 656 q 376 747 281 747 q 575 675 497 747 q 659 486 654 604 l 581 486 q 519 625 576 572 q 376 678 463 678 q 206 599 267 678 q 145 376 145 519 l 145 353 q 206 134 145 212 q 377 55 267 55 m 365 901 l 481 1032 l 554 1032 l 554 1024 l 394 847 l 336 847 l 176 1025 l 176 1032 l 248 1032 l 365 901 z "},\u010E:{ha:909,x_min:125,x_max:823,o:"m 125 0 l 125 987 l 401 987 q 618 932 522 987 q 769 774 715 877 q 823 539 823 671 l 823 448 q 769 214 823 316 q 618 56 715 111 q 395 0 521 0 l 125 0 m 208 916 l 208 71 l 395 71 q 646 174 551 71 q 740 454 740 277 l 740 541 q 647 813 740 711 q 402 916 554 916 l 208 916 m 406 1119 l 522 1251 l 595 1251 l 595 1242 l 435 1065 l 376 1065 l 216 1243 l 216 1251 l 289 1251 l 406 1119 z "},\u010F:{ha:873,x_min:73,x_max:854,o:"m 73 374 q 150 646 73 545 q 357 747 226 747 q 583 630 505 747 l 583 1042 l 664 1042 l 664 0 l 588 0 l 585 98 q 355 -14 507 -14 q 151 89 229 -14 q 73 364 73 191 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 189 520 57 l 583 534 q 372 677 520 677 q 212 596 269 677 q 155 359 155 516 m 776 800 l 728 835 q 777 977 774 901 l 777 1042 l 854 1042 l 854 1000 q 776 800 854 870 z "},\u0112:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 632 1135 l 212 1135 l 212 1200 l 632 1200 l 632 1135 z "},\u0113:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 596 916 l 176 916 l 176 982 l 596 982 l 596 916 z "},\u0114:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 616 1230 q 563 1104 616 1152 q 420 1056 509 1056 q 278 1104 332 1056 q 224 1230 224 1152 l 293 1230 q 327 1144 293 1174 q 420 1114 360 1114 q 513 1145 479 1114 q 547 1230 547 1177 l 616 1230 z "},\u0115:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 580 1012 q 527 886 580 934 q 384 838 473 838 q 242 885 296 838 q 188 1012 188 933 l 257 1012 q 291 926 257 956 q 384 896 324 896 q 477 927 444 896 q 511 1012 511 958 l 580 1012 z "},\u0116:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 364 1155 q 379 1194 364 1178 q 420 1210 394 1210 q 461 1194 446 1210 q 476 1155 476 1178 q 461 1117 476 1133 q 420 1101 446 1101 q 379 1117 394 1101 q 364 1155 364 1133 z "},\u0117:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 328 937 q 343 976 328 960 q 384 992 358 992 q 425 976 410 992 q 440 937 440 960 q 425 899 440 915 q 384 884 410 884 q 343 899 358 884 q 328 937 328 915 z "},\u0118:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 694 0 q 598 -90 623 -54 q 573 -159 573 -125 q 631 -216 573 -216 q 702 -193 667 -216 l 712 -250 q 615 -280 668 -280 q 530 -250 561 -280 q 500 -165 500 -220 q 530 -79 500 -122 q 614 0 561 -37 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 z "},\u0119:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 555 27 611 59 l 513 -7 q 436 -130 436 -71 q 494 -187 436 -187 q 565 -165 530 -187 l 575 -222 q 478 -252 531 -252 q 393 -221 424 -252 q 363 -137 363 -191 q 427 -12 363 -74 l 390 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 z "},\u011A:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 419 1119 l 536 1251 l 608 1251 l 608 1242 l 448 1065 l 390 1065 l 230 1243 l 230 1251 l 302 1251 l 419 1119 z "},\u011B:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 383 901 l 500 1032 l 572 1032 l 572 1024 l 412 847 l 354 847 l 194 1025 l 194 1032 l 267 1032 l 383 901 z "},\u011C:{ha:949,x_min:98,x_max:838,o:"m 838 117 q 702 21 794 56 q 494 -14 609 -14 q 288 42 378 -14 q 149 199 198 98 q 98 433 99 301 l 98 557 q 202 882 98 763 q 481 1001 306 1001 q 726 923 633 1001 q 837 709 819 846 l 753 709 q 665 874 735 818 q 481 930 595 930 q 262 831 343 930 q 182 554 182 733 l 182 437 q 220 238 182 325 q 330 104 258 152 q 494 57 401 57 q 680 91 602 57 q 754 143 730 113 l 754 398 l 489 398 l 489 469 l 838 469 l 838 117 m 655 1092 l 655 1085 l 580 1085 l 466 1209 l 353 1085 l 279 1085 l 279 1094 l 440 1267 l 492 1267 l 655 1092 z "},\u011D:{ha:770,x_min:73,x_max:665,o:"m 73 374 q 150 647 73 546 q 357 747 226 747 q 585 628 507 747 l 589 734 l 665 734 l 665 15 q 585 -210 665 -127 q 370 -292 506 -292 q 224 -258 294 -292 q 115 -167 155 -224 l 160 -118 q 365 -224 246 -224 q 524 -164 467 -224 q 583 3 581 -104 l 583 95 q 355 -14 505 -14 q 151 88 228 -14 q 73 363 73 190 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 191 520 57 l 583 532 q 500 640 554 603 q 372 677 447 677 q 212 596 269 677 q 155 359 155 516 m 570 860 l 570 853 l 494 853 l 380 977 l 267 853 l 193 853 l 193 862 l 355 1035 l 406 1035 l 570 860 z "},\u011E:{ha:949,x_min:98,x_max:838,o:"m 838 117 q 702 21 794 56 q 494 -14 609 -14 q 288 42 378 -14 q 149 199 198 98 q 98 433 99 301 l 98 557 q 202 882 98 763 q 481 1001 306 1001 q 726 923 633 1001 q 837 709 819 846 l 753 709 q 665 874 735 818 q 481 930 595 930 q 262 831 343 930 q 182 554 182 733 l 182 437 q 220 238 182 325 q 330 104 258 152 q 494 57 401 57 q 680 91 602 57 q 754 143 730 113 l 754 398 l 489 398 l 489 469 l 838 469 l 838 117 m 662 1244 q 609 1118 662 1166 q 466 1070 555 1070 q 324 1118 378 1070 q 270 1244 270 1166 l 339 1244 q 373 1158 339 1188 q 466 1128 406 1128 q 559 1160 526 1128 q 593 1244 593 1191 l 662 1244 z "},\u011F:{ha:770,x_min:73,x_max:665,o:"m 73 374 q 150 647 73 546 q 357 747 226 747 q 585 628 507 747 l 589 734 l 665 734 l 665 15 q 585 -210 665 -127 q 370 -292 506 -292 q 224 -258 294 -292 q 115 -167 155 -224 l 160 -118 q 365 -224 246 -224 q 524 -164 467 -224 q 583 3 581 -104 l 583 95 q 355 -14 505 -14 q 151 88 228 -14 q 73 363 73 190 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 191 520 57 l 583 532 q 500 640 554 603 q 372 677 447 677 q 212 596 269 677 q 155 359 155 516 m 576 1012 q 523 886 576 934 q 380 838 470 838 q 238 885 292 838 q 184 1012 184 933 l 254 1012 q 287 926 254 956 q 380 896 321 896 q 474 927 440 896 q 507 1012 507 958 l 576 1012 z "},\u0120:{ha:949,x_min:98,x_max:838,o:"m 838 117 q 702 21 794 56 q 494 -14 609 -14 q 288 42 378 -14 q 149 199 198 98 q 98 433 99 301 l 98 557 q 202 882 98 763 q 481 1001 306 1001 q 726 923 633 1001 q 837 709 819 846 l 753 709 q 665 874 735 818 q 481 930 595 930 q 262 831 343 930 q 182 554 182 733 l 182 437 q 220 238 182 325 q 330 104 258 152 q 494 57 401 57 q 680 91 602 57 q 754 143 730 113 l 754 398 l 489 398 l 489 469 l 838 469 l 838 117 m 410 1169 q 425 1208 410 1192 q 466 1224 440 1224 q 507 1208 492 1224 q 522 1169 522 1192 q 507 1131 522 1147 q 466 1116 492 1116 q 425 1131 440 1116 q 410 1169 410 1147 z "},\u0121:{ha:770,x_min:73,x_max:665,o:"m 73 374 q 150 647 73 546 q 357 747 226 747 q 585 628 507 747 l 589 734 l 665 734 l 665 15 q 585 -210 665 -127 q 370 -292 506 -292 q 224 -258 294 -292 q 115 -167 155 -224 l 160 -118 q 365 -224 246 -224 q 524 -164 467 -224 q 583 3 581 -104 l 583 95 q 355 -14 505 -14 q 151 88 228 -14 q 73 363 73 190 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 191 520 57 l 583 532 q 500 640 554 603 q 372 677 447 677 q 212 596 269 677 q 155 359 155 516 m 325 937 q 340 976 325 960 q 380 992 355 992 q 422 976 407 992 q 437 937 437 960 q 422 899 437 915 q 380 884 407 884 q 340 899 355 884 q 325 937 325 915 z "},\u0122:{ha:949,x_min:98,x_max:838,o:"m 838 117 q 702 21 794 56 q 494 -14 609 -14 q 288 42 378 -14 q 149 199 198 98 q 98 433 99 301 l 98 557 q 202 882 98 763 q 481 1001 306 1001 q 726 923 633 1001 q 837 709 819 846 l 753 709 q 665 874 735 818 q 481 930 595 930 q 262 831 343 930 q 182 554 182 733 l 182 437 q 220 238 182 325 q 330 104 258 152 q 494 57 401 57 q 680 91 602 57 q 754 143 730 113 l 754 398 l 489 398 l 489 469 l 838 469 l 838 117 m 455 -317 l 407 -281 q 456 -139 454 -215 l 456 -74 l 534 -74 l 534 -117 q 455 -317 534 -246 z "},\u0123:{ha:770,x_min:73,x_max:665,o:"m 73 374 q 150 647 73 546 q 357 747 226 747 q 585 628 507 747 l 589 734 l 665 734 l 665 15 q 585 -210 665 -127 q 370 -292 506 -292 q 224 -258 294 -292 q 115 -167 155 -224 l 160 -118 q 365 -224 246 -224 q 524 -164 467 -224 q 583 3 581 -104 l 583 95 q 355 -14 505 -14 q 151 88 228 -14 q 73 363 73 190 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 191 520 57 l 583 532 q 500 640 554 603 q 372 677 447 677 q 212 596 269 677 q 155 359 155 516 m 405 1109 l 456 1076 q 418 950 420 1009 l 418 857 l 338 857 l 338 945 q 356 1030 338 985 q 405 1109 375 1076 z "},\u0124:{ha:983,x_min:125,x_max:857,o:"m 857 0 l 772 0 l 772 473 l 208 473 l 208 0 l 125 0 l 125 987 l 208 987 l 208 544 l 772 544 l 772 987 l 857 987 l 857 0 m 673 1078 l 673 1071 l 598 1071 l 484 1195 l 371 1071 l 297 1071 l 297 1080 l 458 1253 l 510 1253 l 673 1078 z "},\u0125:{ha:762,x_min:106,x_max:659,o:"m 186 610 q 289 711 227 675 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 1042 l 186 1042 l 186 610 m 519 1077 l 519 1070 l 444 1070 l 330 1194 l 216 1070 l 142 1070 l 142 1079 l 304 1252 l 355 1252 l 519 1077 z "},\u0128:{ha:370,x_min:-39,x_max:417,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 417 1231 q 379 1126 417 1166 q 285 1086 340 1086 q 184 1124 233 1086 q 96 1161 135 1161 q 43 1140 64 1161 q 22 1081 22 1119 l -39 1083 q -2 1186 -39 1145 q 93 1227 35 1227 q 149 1215 125 1227 q 192 1190 172 1204 q 233 1164 212 1175 q 281 1152 254 1152 q 335 1175 313 1152 q 357 1235 357 1197 l 417 1231 z "},\u0129:{ha:309,x_min:-68,x_max:388,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m 388 1005 q 350 900 388 940 q 256 861 311 861 q 155 898 204 861 q 67 935 106 935 q 14 914 35 935 q -7 855 -7 893 l -68 857 q -32 960 -68 920 q 64 1001 5 1001 q 119 989 96 1001 q 163 964 142 978 q 204 938 183 949 q 252 926 224 926 q 306 949 283 926 q 328 1009 328 971 l 388 1005 z "},\u012A:{ha:370,x_min:-22,x_max:398,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 398 1135 l -22 1135 l -22 1200 l 398 1200 l 398 1135 z "},\u012B:{ha:309,x_min:-51,x_max:369,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m 369 909 l -51 909 l -51 975 l 369 975 l 369 909 z "},\u012C:{ha:370,x_min:-10,x_max:382,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 382 1230 q 329 1104 382 1152 q 186 1056 275 1056 q 44 1104 98 1056 q -10 1230 -10 1152 l 59 1230 q 93 1144 59 1174 q 186 1114 126 1114 q 279 1145 245 1114 q 313 1230 313 1177 l 382 1230 z "},\u012D:{ha:309,x_min:-39,x_max:353,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m 353 1004 q 299 878 353 926 q 157 830 246 830 q 15 878 68 830 q -39 1004 -39 926 l 30 1004 q 63 918 30 948 q 157 888 97 888 q 250 920 216 888 q 283 1004 283 951 l 353 1004 z "},\u012E:{ha:370,x_min:26,x_max:239,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 221 3 q 125 -87 150 -52 q 100 -156 100 -123 q 157 -213 100 -213 q 229 -191 194 -213 l 239 -248 q 142 -277 195 -277 q 57 -247 87 -277 q 26 -163 26 -217 q 68 -62 26 -113 q 181 28 111 -12 l 221 3 z "},\u012F:{ha:311,x_min:-3,x_max:213,o:"m 197 0 l 115 0 l 115 734 l 197 734 l 197 0 m 101 946 q 116 985 101 969 q 157 1001 131 1001 q 198 985 182 1001 q 213 946 213 969 q 198 907 213 923 q 157 892 182 892 q 116 907 131 892 q 101 946 101 923 m 192 0 q 96 -90 121 -54 q 71 -159 71 -125 q 128 -216 71 -216 q 199 -193 165 -216 l 210 -250 q 113 -280 165 -280 q 28 -250 58 -280 q -3 -165 -3 -220 q 39 -65 -3 -115 q 152 25 81 -14 l 192 0 z "},\u0130:{ha:370,x_min:130,x_max:241,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 130 1155 q 144 1194 130 1178 q 185 1210 159 1210 q 227 1194 212 1210 q 241 1155 241 1178 q 227 1117 241 1133 q 185 1101 212 1101 q 144 1117 159 1101 q 130 1155 130 1133 z "},\u0132:{ha:1134,x_min:143,x_max:1015,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 930 987 l 1015 987 l 1015 294 q 933 70 1015 153 q 716 -14 852 -14 q 495 62 572 -14 q 418 272 418 137 l 501 272 q 557 111 501 165 q 716 57 614 57 q 870 119 810 57 q 930 289 929 182 l 930 987 z "},\u0133:{ha:628,x_min:101,x_max:521,o:"m 197 0 l 115 0 l 115 734 l 197 734 l 197 0 m 101 946 q 116 985 101 969 q 157 1001 131 1001 q 198 985 182 1001 q 213 946 213 969 q 198 907 213 923 q 157 892 182 892 q 116 907 131 892 q 101 946 101 923 m 505 734 l 505 -87 q 456 -243 505 -189 q 312 -296 407 -296 q 241 -283 275 -296 l 242 -216 q 303 -225 272 -225 q 424 -86 424 -225 l 424 734 l 505 734 m 465 1001 q 506 985 491 1001 q 521 946 521 969 q 506 907 521 923 q 465 892 491 892 q 424 907 439 892 q 410 946 410 923 q 424 985 410 969 q 465 1001 439 1001 z "},\u0134:{ha:764,x_min:48,x_max:783,o:"m 561 987 l 645 987 l 645 294 q 564 70 645 153 q 347 -14 483 -14 q 125 62 203 -14 q 48 272 48 137 l 132 272 q 188 111 132 165 q 347 57 244 57 q 500 119 441 57 q 561 289 559 182 l 561 987 m 783 1063 l 783 1056 l 708 1056 l 594 1180 l 481 1056 l 407 1056 l 407 1065 l 568 1238 l 620 1238 l 783 1063 z "},\u0135:{ha:317,x_min:-79,x_max:351,o:"m 202 734 l 202 -60 q 148 -236 202 -175 q -3 -296 94 -296 q -79 -283 -41 -296 l -70 -216 q -3 -227 -41 -227 q 89 -184 57 -227 q 121 -60 121 -140 l 121 734 l 202 734 m 351 832 l 351 825 l 275 825 l 161 949 l 48 825 l -26 825 l -26 834 l 136 1007 l 187 1007 l 351 832 z "},\u0136:{ha:876,x_min:125,x_max:851,o:"m 347 490 l 208 353 l 208 0 l 125 0 l 125 987 l 208 987 l 208 455 l 714 987 l 819 987 l 406 548 l 851 0 l 749 0 l 347 490 m 395 -246 l 347 -211 q 396 -68 394 -144 l 396 -3 l 474 -3 l 474 -46 q 395 -246 474 -176 z "},\u0137:{ha:680,x_min:106,x_max:674,o:"m 280 370 l 187 280 l 187 0 l 106 0 l 106 1042 l 187 1042 l 187 375 l 264 458 l 545 734 l 647 734 l 336 425 l 674 0 l 577 0 l 280 370 m 315 -252 l 267 -216 q 316 -74 314 -150 l 316 -9 l 394 -9 l 394 -52 q 315 -252 394 -181 z "},\u0139:{ha:732,x_min:119,x_max:696,o:"m 209 71 l 696 71 l 696 0 l 125 0 l 125 987 l 209 987 l 209 71 m 249 1232 l 347 1232 l 191 1042 l 119 1042 l 249 1232 z "},\u013A:{ha:311,x_min:109,x_max:336,o:"m 197 0 l 115 0 l 115 1042 l 197 1042 l 197 0 m 238 1308 l 336 1308 l 180 1118 l 109 1118 l 238 1308 z "},\u013B:{ha:732,x_min:125,x_max:696,o:"m 209 71 l 696 71 l 696 0 l 125 0 l 125 987 l 209 987 l 209 71 m 382 -307 l 334 -272 q 383 -130 381 -205 l 383 -64 l 461 -64 l 461 -107 q 382 -307 461 -237 z "},\u013C:{ha:311,x_min:70,x_max:197,o:"m 197 0 l 115 0 l 115 1042 l 197 1042 l 197 0 m 118 -307 l 70 -272 q 119 -130 117 -205 l 119 -64 l 197 -64 l 197 -107 q 118 -307 197 -237 z "},\u013D:{ha:732,x_min:125,x_max:696,o:"m 209 71 l 696 71 l 696 0 l 125 0 l 125 987 l 209 987 l 209 71 m 421 745 l 373 780 q 422 922 420 846 l 422 987 l 500 987 l 500 945 q 421 745 500 815 z "},\u013E:{ha:413,x_min:115,x_max:406,o:"m 197 0 l 115 0 l 115 1042 l 197 1042 l 197 0 m 327 800 l 279 835 q 328 977 326 901 l 328 1042 l 406 1042 l 406 1000 q 327 800 406 870 z "},\u013F:{ha:732,x_min:125,x_max:696,o:"m 209 71 l 696 71 l 696 0 l 125 0 l 125 987 l 209 987 l 209 71 m 404 526 q 418 565 404 549 q 459 581 433 581 q 500 565 486 581 q 515 526 515 549 q 500 488 515 504 q 459 473 486 473 q 418 488 433 473 q 404 526 404 504 z "},\u0140:{ha:460,x_min:115,x_max:401,o:"m 197 0 l 115 0 l 115 1042 l 197 1042 l 197 0 m 290 535 q 304 574 290 558 q 345 590 319 590 q 387 574 372 590 q 401 535 401 558 q 387 497 401 513 q 345 481 372 481 q 304 497 319 481 q 290 535 290 513 z "},\u0143:{ha:986,x_min:125,x_max:860,o:"m 860 0 l 777 0 l 209 845 l 209 0 l 125 0 l 125 987 l 209 987 l 777 142 l 777 987 l 860 987 l 860 0 m 574 1255 l 672 1255 l 515 1065 l 444 1065 l 574 1255 z "},\u0144:{ha:763,x_min:106,x_max:659,o:"m 183 734 l 186 608 q 289 712 227 676 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 734 l 183 734 m 471 1042 l 570 1042 l 413 852 l 342 852 l 471 1042 z "},\u0145:{ha:986,x_min:125,x_max:860,o:"m 860 0 l 777 0 l 209 845 l 209 0 l 125 0 l 125 987 l 209 987 l 777 142 l 777 987 l 860 987 l 860 0 m 450 -307 l 402 -272 q 451 -130 449 -205 l 451 -64 l 529 -64 l 529 -107 q 450 -307 529 -237 z "},\u0146:{ha:763,x_min:106,x_max:659,o:"m 183 734 l 186 608 q 289 712 227 676 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 734 l 183 734 m 347 -307 l 299 -272 q 348 -130 346 -205 l 348 -64 l 426 -64 l 426 -107 q 347 -307 426 -237 z "},\u0147:{ha:986,x_min:125,x_max:860,o:"m 860 0 l 777 0 l 209 845 l 209 0 l 125 0 l 125 987 l 209 987 l 777 142 l 777 987 l 860 987 l 860 0 m 492 1115 l 608 1246 l 681 1246 l 681 1238 l 521 1061 l 463 1061 l 302 1239 l 302 1246 l 375 1246 l 492 1115 z "},\u0148:{ha:763,x_min:106,x_max:659,o:"m 183 734 l 186 608 q 289 712 227 676 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 734 l 183 734 m 389 901 l 506 1032 l 578 1032 l 578 1024 l 418 847 l 360 847 l 200 1025 l 200 1032 l 273 1032 l 389 901 z "},\u0149:{ha:763,x_min:-32,x_max:659,o:"m 183 734 l 186 608 q 289 712 227 676 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 734 l 183 734 m 16 800 l -32 836 q 17 978 15 902 l 17 1043 l 95 1043 l 95 1000 q 16 800 95 871 z "},\u014C:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 681 1139 l 261 1139 l 261 1204 l 681 1204 l 681 1139 z "},\u014D:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 600 916 l 180 916 l 180 982 l 600 982 l 600 916 z "},\u014E:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 665 1234 q 611 1108 665 1156 q 469 1060 558 1060 q 327 1108 380 1060 q 273 1234 273 1156 l 342 1234 q 375 1148 342 1178 q 469 1118 409 1118 q 562 1149 528 1118 q 595 1234 595 1181 l 665 1234 z "},\u014F:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 583 1012 q 530 886 583 934 q 387 838 477 838 q 245 885 299 838 q 191 1012 191 933 l 260 1012 q 294 926 260 956 q 387 896 328 896 q 480 927 447 896 q 514 1012 514 958 l 583 1012 z "},\u0150:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 670 1263 l 768 1263 l 578 1057 l 496 1057 l 670 1263 m 460 1263 l 553 1263 l 396 1057 l 322 1057 l 460 1263 z "},\u0151:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 589 1041 l 686 1041 l 497 836 l 415 836 l 589 1041 m 378 1041 l 471 1041 l 315 836 l 241 836 l 378 1041 z "},\u0154:{ha:882,x_min:123,x_max:821,o:"m 494 411 l 207 411 l 207 0 l 123 0 l 123 987 l 444 987 q 690 911 602 987 q 779 696 779 834 q 724 529 779 602 q 574 429 668 456 l 821 9 l 821 0 l 732 0 l 494 411 m 207 482 l 463 482 q 631 542 568 482 q 695 696 695 602 q 629 859 695 801 q 442 916 562 916 l 207 916 l 207 482 m 493 1255 l 591 1255 l 435 1065 l 363 1065 l 493 1255 z "},\u0155:{ha:467,x_min:106,x_max:458,o:"m 445 665 q 390 669 419 669 q 261 627 314 669 q 186 504 209 585 l 186 0 l 106 0 l 106 734 l 185 734 l 186 617 q 393 747 251 747 q 447 739 427 747 l 445 665 m 359 1042 l 458 1042 l 301 852 l 230 852 l 359 1042 z "},\u0156:{ha:882,x_min:123,x_max:821,o:"m 494 411 l 207 411 l 207 0 l 123 0 l 123 987 l 444 987 q 690 911 602 987 q 779 696 779 834 q 724 529 779 602 q 574 429 668 456 l 821 9 l 821 0 l 732 0 l 494 411 m 207 482 l 463 482 q 631 542 568 482 q 695 696 695 602 q 629 859 695 801 q 442 916 562 916 l 207 916 l 207 482 m 373 -307 l 325 -272 q 374 -130 372 -205 l 374 -64 l 452 -64 l 452 -107 q 373 -307 452 -237 z "},\u0157:{ha:467,x_min:64,x_max:447,o:"m 445 665 q 390 669 419 669 q 261 627 314 669 q 186 504 209 585 l 186 0 l 106 0 l 106 734 l 185 734 l 186 617 q 393 747 251 747 q 447 739 427 747 l 445 665 m 112 -304 l 64 -269 q 113 -127 111 -203 l 113 -62 l 191 -62 l 191 -104 q 112 -304 191 -234 z "},\u0158:{ha:882,x_min:123,x_max:821,o:"m 494 411 l 207 411 l 207 0 l 123 0 l 123 987 l 444 987 q 690 911 602 987 q 779 696 779 834 q 724 529 779 602 q 574 429 668 456 l 821 9 l 821 0 l 732 0 l 494 411 m 207 482 l 463 482 q 631 542 568 482 q 695 696 695 602 q 629 859 695 801 q 442 916 562 916 l 207 916 l 207 482 m 411 1115 l 528 1246 l 600 1246 l 600 1238 l 440 1061 l 382 1061 l 222 1239 l 222 1246 l 294 1246 l 411 1115 z "},\u0159:{ha:467,x_min:89,x_max:467,o:"m 445 665 q 390 669 419 669 q 261 627 314 669 q 186 504 209 585 l 186 0 l 106 0 l 106 734 l 185 734 l 186 617 q 393 747 251 747 q 447 739 427 747 l 445 665 m 278 901 l 395 1032 l 467 1032 l 467 1024 l 307 847 l 249 847 l 89 1025 l 89 1032 l 161 1032 l 278 901 z "},\u015A:{ha:823,x_min:60,x_max:768,o:"m 684 243 q 626 373 684 325 q 415 464 568 420 q 191 557 262 507 q 91 746 91 629 q 184 930 91 859 q 422 1001 277 1001 q 598 963 521 1001 q 719 857 676 925 q 762 706 762 789 l 677 706 q 608 868 677 807 q 422 930 539 930 q 242 879 309 930 q 175 747 175 829 q 235 625 175 672 q 429 541 296 577 q 630 466 562 505 q 733 372 699 427 q 768 244 768 318 q 674 57 768 127 q 429 -14 581 -14 q 237 24 324 -14 q 105 128 150 61 q 60 282 60 195 l 143 282 q 221 117 143 178 q 429 57 299 57 q 614 108 544 57 q 684 243 684 159 m 507 1263 l 605 1263 l 448 1074 l 377 1074 l 507 1263 z "},\u015B:{ha:703,x_min:68,x_max:627,o:"m 545 186 q 497 283 545 247 q 351 341 448 320 q 199 388 253 361 q 119 454 145 415 q 93 547 93 492 q 165 691 93 634 q 351 747 238 747 q 548 687 474 747 q 623 528 623 626 l 541 528 q 487 635 541 593 q 351 678 433 678 q 223 643 271 678 q 174 550 174 607 q 215 465 174 495 q 362 410 255 435 q 522 356 469 385 q 601 288 575 328 q 627 191 627 248 q 552 42 627 98 q 356 -14 477 -14 q 148 48 228 -14 q 68 205 68 111 l 150 205 q 210 95 155 134 q 356 55 265 55 q 493 92 441 55 q 545 186 545 130 m 446 1042 l 544 1042 l 387 852 l 316 852 l 446 1042 z "},\u015C:{ha:823,x_min:60,x_max:768,o:"m 684 243 q 626 373 684 325 q 415 464 568 420 q 191 557 262 507 q 91 746 91 629 q 184 930 91 859 q 422 1001 277 1001 q 598 963 521 1001 q 719 857 676 925 q 762 706 762 789 l 677 706 q 608 868 677 807 q 422 930 539 930 q 242 879 309 930 q 175 747 175 829 q 235 625 175 672 q 429 541 296 577 q 630 466 562 505 q 733 372 699 427 q 768 244 768 318 q 674 57 768 127 q 429 -14 581 -14 q 237 24 324 -14 q 105 128 150 61 q 60 282 60 195 l 143 282 q 221 117 143 178 q 429 57 299 57 q 614 108 544 57 q 684 243 684 159 m 614 1082 l 614 1075 l 539 1075 l 425 1199 l 312 1075 l 238 1075 l 238 1084 l 399 1257 l 451 1257 l 614 1082 z "},\u015D:{ha:703,x_min:68,x_max:627,o:"m 545 186 q 497 283 545 247 q 351 341 448 320 q 199 388 253 361 q 119 454 145 415 q 93 547 93 492 q 165 691 93 634 q 351 747 238 747 q 548 687 474 747 q 623 528 623 626 l 541 528 q 487 635 541 593 q 351 678 433 678 q 223 643 271 678 q 174 550 174 607 q 215 465 174 495 q 362 410 255 435 q 522 356 469 385 q 601 288 575 328 q 627 191 627 248 q 552 42 627 98 q 356 -14 477 -14 q 148 48 228 -14 q 68 205 68 111 l 150 205 q 210 95 155 134 q 356 55 265 55 q 493 92 441 55 q 545 186 545 130 m 553 860 l 553 853 l 478 853 l 364 977 l 251 853 l 177 853 l 177 862 l 338 1035 l 390 1035 l 553 860 z "},\u015E:{ha:823,x_min:60,x_max:768,o:"m 684 243 q 626 373 684 325 q 415 464 568 420 q 191 557 262 507 q 91 746 91 629 q 184 930 91 859 q 422 1001 277 1001 q 598 963 521 1001 q 719 857 676 925 q 762 706 762 789 l 677 706 q 608 868 677 807 q 422 930 539 930 q 242 879 309 930 q 175 747 175 829 q 235 625 175 672 q 429 541 296 577 q 630 466 562 505 q 733 372 699 427 q 768 244 768 318 q 674 57 768 127 q 429 -14 581 -14 q 237 24 324 -14 q 105 128 150 61 q 60 282 60 195 l 143 282 q 221 117 143 178 q 429 57 299 57 q 614 108 544 57 q 684 243 684 159 m 461 -3 l 453 -46 q 565 -162 565 -60 q 511 -261 565 -224 q 366 -298 458 -298 l 361 -245 q 459 -223 421 -245 q 498 -163 498 -201 q 468 -109 498 -124 q 378 -89 439 -94 l 398 -3 l 461 -3 z "},\u015F:{ha:703,x_min:68,x_max:627,o:"m 545 186 q 497 283 545 247 q 351 341 448 320 q 199 388 253 361 q 119 454 145 415 q 93 547 93 492 q 165 691 93 634 q 351 747 238 747 q 548 687 474 747 q 623 528 623 626 l 541 528 q 487 635 541 593 q 351 678 433 678 q 223 643 271 678 q 174 550 174 607 q 215 465 174 495 q 362 410 255 435 q 522 356 469 385 q 601 288 575 328 q 627 191 627 248 q 552 42 627 98 q 356 -14 477 -14 q 148 48 228 -14 q 68 205 68 111 l 150 205 q 210 95 155 134 q 356 55 265 55 q 493 92 441 55 q 545 186 545 130 m 398 -4 l 390 -47 q 502 -163 502 -62 q 448 -262 502 -226 q 302 -299 395 -299 l 298 -246 q 396 -224 358 -246 q 435 -165 435 -202 q 405 -111 435 -125 q 315 -90 376 -96 l 335 -4 l 398 -4 z "},\u0218:{ha:823,x_min:60,x_max:768,o:"m 684 243 q 626 373 684 325 q 415 464 568 420 q 191 557 262 507 q 91 746 91 629 q 184 930 91 859 q 422 1001 277 1001 q 598 963 521 1001 q 719 857 676 925 q 762 706 762 789 l 677 706 q 608 868 677 807 q 422 930 539 930 q 242 879 309 930 q 175 747 175 829 q 235 625 175 672 q 429 541 296 577 q 630 466 562 505 q 733 372 699 427 q 768 244 768 318 q 674 57 768 127 q 429 -14 581 -14 q 237 24 324 -14 q 105 128 150 61 q 60 282 60 195 l 143 282 q 221 117 143 178 q 429 57 299 57 q 614 108 544 57 q 684 243 684 159 m 388 -317 l 340 -282 q 389 -140 387 -216 l 389 -75 l 467 -75 l 467 -117 q 388 -317 467 -247 z "},\u0219:{ha:703,x_min:68,x_max:627,o:"m 545 186 q 497 283 545 247 q 351 341 448 320 q 199 388 253 361 q 119 454 145 415 q 93 547 93 492 q 165 691 93 634 q 351 747 238 747 q 548 687 474 747 q 623 528 623 626 l 541 528 q 487 635 541 593 q 351 678 433 678 q 223 643 271 678 q 174 550 174 607 q 215 465 174 495 q 362 410 255 435 q 522 356 469 385 q 601 288 575 328 q 627 191 627 248 q 552 42 627 98 q 356 -14 477 -14 q 148 48 228 -14 q 68 205 68 111 l 150 205 q 210 95 155 134 q 356 55 265 55 q 493 92 441 55 q 545 186 545 130 m 325 -319 l 277 -283 q 326 -141 323 -217 l 326 -76 l 404 -76 l 404 -119 q 325 -319 404 -248 z "},\u0160:{ha:823,x_min:60,x_max:768,o:"m 684 243 q 626 373 684 325 q 415 464 568 420 q 191 557 262 507 q 91 746 91 629 q 184 930 91 859 q 422 1001 277 1001 q 598 963 521 1001 q 719 857 676 925 q 762 706 762 789 l 677 706 q 608 868 677 807 q 422 930 539 930 q 242 879 309 930 q 175 747 175 829 q 235 625 175 672 q 429 541 296 577 q 630 466 562 505 q 733 372 699 427 q 768 244 768 318 q 674 57 768 127 q 429 -14 581 -14 q 237 24 324 -14 q 105 128 150 61 q 60 282 60 195 l 143 282 q 221 117 143 178 q 429 57 299 57 q 614 108 544 57 q 684 243 684 159 m 425 1123 l 541 1255 l 614 1255 l 614 1246 l 454 1069 l 395 1069 l 235 1247 l 235 1255 l 308 1255 l 425 1123 z "},\u0161:{ha:703,x_min:68,x_max:627,o:"m 545 186 q 497 283 545 247 q 351 341 448 320 q 199 388 253 361 q 119 454 145 415 q 93 547 93 492 q 165 691 93 634 q 351 747 238 747 q 548 687 474 747 q 623 528 623 626 l 541 528 q 487 635 541 593 q 351 678 433 678 q 223 643 271 678 q 174 550 174 607 q 215 465 174 495 q 362 410 255 435 q 522 356 469 385 q 601 288 575 328 q 627 191 627 248 q 552 42 627 98 q 356 -14 477 -14 q 148 48 228 -14 q 68 205 68 111 l 150 205 q 210 95 155 134 q 356 55 265 55 q 493 92 441 55 q 545 186 545 130 m 363 901 l 480 1032 l 553 1032 l 553 1024 l 393 847 l 334 847 l 174 1025 l 174 1032 l 247 1032 l 363 901 z "},\u021A:{ha:829,x_min:35,x_max:795,o:"m 795 916 l 456 916 l 456 0 l 373 0 l 373 916 l 35 916 l 35 987 l 795 987 l 795 916 m 376 -314 l 328 -279 q 376 -136 374 -212 l 376 -71 l 454 -71 l 454 -114 q 376 -314 454 -243 z "},\u021B:{ha:446,x_min:16,x_max:397,o:"m 232 922 l 232 734 l 384 734 l 384 667 l 232 667 l 232 178 q 254 87 232 117 q 328 58 276 58 q 393 64 348 58 l 397 -2 q 310 -14 365 -14 q 189 35 227 -14 q 151 178 151 83 l 151 667 l 16 667 l 16 734 l 151 734 l 151 922 l 232 922 m 254 -314 l 205 -279 q 254 -136 252 -212 l 254 -71 l 332 -71 l 332 -114 q 254 -314 332 -243 z "},\u0162:{ha:829,x_min:35,x_max:795,o:"m 795 916 l 456 916 l 456 0 l 373 0 l 373 916 l 35 916 l 35 987 l 795 987 l 795 916 m 449 0 l 441 -43 q 553 -159 553 -58 q 499 -258 553 -222 q 353 -295 446 -295 l 349 -242 q 447 -220 409 -242 q 486 -161 486 -198 q 456 -106 486 -121 q 366 -86 427 -92 l 386 0 l 449 0 z "},\u0163:{ha:446,x_min:16,x_max:431,o:"m 232 922 l 232 734 l 384 734 l 384 667 l 232 667 l 232 178 q 254 87 232 117 q 328 58 276 58 q 393 64 348 58 l 397 -2 q 310 -14 365 -14 q 189 35 227 -14 q 151 178 151 83 l 151 667 l 16 667 l 16 734 l 151 734 l 151 922 l 232 922 m 327 0 l 319 -43 q 431 -159 431 -58 q 377 -258 431 -222 q 231 -295 323 -295 l 227 -242 q 325 -220 287 -242 q 363 -161 363 -198 q 334 -106 363 -121 q 244 -86 304 -92 l 264 0 l 327 0 z "},\u0164:{ha:829,x_min:35,x_max:795,o:"m 795 916 l 456 916 l 456 0 l 373 0 l 373 916 l 35 916 l 35 987 l 795 987 l 795 916 m 413 1112 l 530 1244 l 602 1244 l 602 1236 l 442 1059 l 384 1059 l 224 1236 l 224 1244 l 296 1244 l 413 1112 z "},\u0165:{ha:473,x_min:16,x_max:448,o:"m 232 922 l 232 734 l 384 734 l 384 667 l 232 667 l 232 178 q 254 87 232 117 q 328 58 276 58 q 393 64 348 58 l 397 -2 q 310 -14 365 -14 q 189 35 227 -14 q 151 178 151 83 l 151 667 l 16 667 l 16 734 l 151 734 l 151 922 l 232 922 m 370 847 l 321 882 q 370 1025 368 949 l 370 1090 l 448 1090 l 448 1047 q 370 847 448 918 z "},\u0168:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 694 1227 q 655 1122 694 1162 q 562 1082 617 1082 q 461 1120 510 1082 q 373 1157 412 1157 q 320 1136 341 1157 q 298 1077 298 1115 l 237 1079 q 274 1182 237 1141 q 370 1223 311 1223 q 425 1211 402 1223 q 469 1185 448 1200 q 510 1160 489 1171 q 558 1148 530 1148 q 611 1171 589 1148 q 633 1231 633 1193 l 694 1227 z "},\u0169:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 620 1013 q 582 908 620 948 q 488 869 543 869 q 387 906 436 869 q 299 943 338 943 q 246 922 267 943 q 224 863 224 901 l 163 865 q 200 968 163 928 q 296 1009 237 1009 q 351 998 328 1009 q 395 972 374 986 q 436 946 415 958 q 484 935 456 935 q 537 957 515 935 q 559 1017 559 979 l 620 1013 z "},\u016A:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 675 1131 l 255 1131 l 255 1196 l 675 1196 l 675 1131 z "},\u016B:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 601 917 l 181 917 l 181 983 l 601 983 l 601 917 z "},\u016C:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 659 1226 q 605 1100 659 1148 q 463 1052 552 1052 q 320 1100 374 1052 q 267 1226 267 1147 l 336 1226 q 369 1140 336 1170 q 463 1110 403 1110 q 556 1141 522 1110 q 589 1226 589 1173 l 659 1226 z "},\u016D:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 585 1013 q 531 886 585 935 q 389 838 478 838 q 247 886 300 838 q 193 1013 193 934 l 262 1013 q 295 926 262 956 q 389 897 329 897 q 482 928 448 897 q 515 1013 515 959 l 585 1013 z "},\u016E:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 332 1163 q 371 1255 332 1217 q 463 1292 409 1292 q 555 1255 517 1292 q 594 1163 594 1217 q 557 1073 594 1109 q 463 1036 519 1036 q 370 1073 407 1036 q 332 1163 332 1109 m 385 1163 q 407 1107 385 1129 q 463 1084 429 1084 q 519 1106 496 1084 q 543 1163 543 1128 q 519 1221 543 1199 q 463 1244 495 1244 q 407 1221 430 1244 q 385 1163 385 1198 z "},\u016F:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 258 949 q 297 1041 258 1004 q 389 1078 335 1078 q 481 1041 443 1078 q 520 949 520 1004 q 483 859 520 896 q 389 823 446 823 q 296 859 333 823 q 258 949 258 896 m 311 949 q 333 893 311 916 q 389 871 355 871 q 446 893 422 871 q 469 949 469 915 q 445 1008 469 985 q 389 1030 421 1030 q 333 1007 356 1030 q 311 949 311 984 z "},\u0170:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 664 1255 l 762 1255 l 572 1049 l 490 1049 l 664 1255 m 454 1255 l 547 1255 l 390 1049 l 316 1049 l 454 1255 z "},\u0171:{ha:763,x_min:103,x_max:688,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 590 1041 l 688 1041 l 498 836 l 416 836 l 590 1041 m 380 1041 l 473 1041 l 316 836 l 242 836 l 380 1041 z "},\u0172:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 318 q 761 139 805 216 q 633 23 717 63 q 539 -64 564 -29 q 515 -133 515 -100 q 572 -190 515 -190 q 644 -168 609 -190 l 654 -224 q 557 -254 610 -254 q 472 -224 503 -254 q 441 -140 441 -194 q 510 -10 441 -75 l 457 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 z "},\u0173:{ha:763,x_min:103,x_max:671,o:"m 654 0 q 557 -90 583 -54 q 532 -159 532 -125 q 590 -216 532 -216 q 661 -193 627 -216 l 671 -250 q 574 -280 627 -280 q 490 -250 520 -280 q 459 -165 459 -220 q 491 -77 459 -121 q 579 4 523 -33 l 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 654 0 z "},\u0174:{ha:1245,x_min:41,x_max:1209,o:"m 307 267 l 338 113 l 375 260 l 589 987 l 665 987 l 876 260 l 913 112 l 945 267 l 1124 987 l 1209 987 l 956 0 l 876 0 l 652 772 l 627 870 l 603 772 l 374 0 l 294 0 l 41 987 l 127 987 l 307 267 m 817 1074 l 817 1067 l 741 1067 l 627 1191 l 514 1067 l 440 1067 l 440 1076 l 602 1249 l 653 1249 l 817 1074 z "},\u0175:{ha:1047,x_min:43,x_max:999,o:"m 281 169 l 294 106 l 310 172 l 486 734 l 555 734 l 730 177 l 749 100 l 764 171 l 915 734 l 999 734 l 785 0 l 716 0 l 528 582 l 519 622 l 510 581 l 325 0 l 256 0 l 43 734 l 126 734 l 281 169 m 708 860 l 708 853 l 633 853 l 519 977 l 406 853 l 332 853 l 332 862 l 493 1035 l 545 1035 l 708 860 z "},\u0176:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 m 604 1069 l 604 1063 l 529 1063 l 415 1187 l 302 1063 l 228 1063 l 228 1072 l 389 1244 l 441 1244 l 604 1069 z "},\u0177:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 537 860 l 537 853 l 462 853 l 348 977 l 235 853 l 161 853 l 161 862 l 322 1035 l 374 1035 l 537 860 z "},\u0178:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 m 212 1156 q 227 1195 212 1179 q 268 1211 242 1211 q 309 1195 294 1211 q 324 1156 324 1179 q 309 1118 324 1134 q 268 1103 294 1103 q 227 1118 242 1103 q 212 1156 212 1134 m 509 1156 q 524 1195 509 1179 q 565 1211 539 1211 q 606 1195 591 1211 q 621 1156 621 1179 q 606 1118 621 1133 q 565 1102 591 1102 q 524 1118 539 1102 q 509 1156 509 1133 z "},\u0179:{ha:831,x_min:61,x_max:772,o:"m 162 71 l 772 71 l 772 0 l 61 0 l 61 63 l 647 916 l 79 916 l 79 987 l 750 987 l 750 928 l 162 71 m 496 1255 l 595 1255 l 438 1065 l 367 1065 l 496 1255 z "},\u017A:{ha:675,x_min:59,x_max:636,o:"m 159 68 l 636 68 l 636 0 l 59 0 l 59 60 l 504 664 l 73 664 l 73 734 l 606 734 l 606 673 l 159 68 m 429 1042 l 527 1042 l 370 852 l 299 852 l 429 1042 z "},\u017B:{ha:831,x_min:61,x_max:772,o:"m 162 71 l 772 71 l 772 0 l 61 0 l 61 63 l 647 916 l 79 916 l 79 987 l 750 987 l 750 928 l 162 71 m 359 1151 q 374 1190 359 1174 q 415 1206 389 1206 q 456 1190 441 1206 q 471 1151 471 1174 q 456 1113 471 1128 q 415 1097 441 1097 q 374 1113 389 1097 q 359 1151 359 1128 z "},\u017C:{ha:675,x_min:59,x_max:636,o:"m 159 68 l 636 68 l 636 0 l 59 0 l 59 60 l 504 664 l 73 664 l 73 734 l 606 734 l 606 673 l 159 68 m 292 937 q 307 976 292 960 q 347 992 321 992 q 389 976 374 992 q 404 937 404 960 q 389 899 404 915 q 347 884 374 884 q 307 899 321 884 q 292 937 292 915 z "},\u017D:{ha:831,x_min:61,x_max:772,o:"m 162 71 l 772 71 l 772 0 l 61 0 l 61 63 l 647 916 l 79 916 l 79 987 l 750 987 l 750 928 l 162 71 m 414 1115 l 531 1246 l 604 1246 l 604 1238 l 444 1061 l 385 1061 l 225 1239 l 225 1246 l 298 1246 l 414 1115 z "},\u017E:{ha:675,x_min:59,x_max:636,o:"m 159 68 l 636 68 l 636 0 l 59 0 l 59 60 l 504 664 l 73 664 l 73 734 l 606 734 l 606 673 l 159 68 m 347 901 l 463 1033 l 536 1033 l 536 1025 l 376 848 l 317 848 l 157 1025 l 157 1033 l 230 1033 l 347 901 z "},\u01FC:{ha:1265,x_min:12,x_max:1236,o:"m 1236 0 l 682 0 l 671 264 l 267 264 l 111 0 l 12 0 l 609 987 l 1195 987 l 1195 918 l 724 918 l 740 549 l 1139 549 l 1139 479 l 743 479 l 760 68 l 1236 68 l 1236 0 m 312 340 l 668 340 l 644 903 l 312 340 m 728 1259 l 827 1259 l 670 1069 l 599 1069 l 728 1259 z "},\u01FD:{ha:1175,x_min:58,x_max:1124,o:"m 858 -14 q 696 23 764 -14 q 588 126 629 60 q 470 23 547 60 q 298 -14 393 -14 q 121 44 184 -14 q 58 199 58 101 q 133 366 58 305 q 347 429 208 427 l 530 429 l 530 488 q 487 628 530 578 q 358 678 444 678 q 214 634 270 678 q 157 519 157 590 l 77 528 q 156 686 77 625 q 358 747 235 747 q 503 711 443 747 q 590 603 563 675 q 695 709 631 671 q 838 747 759 747 q 1047 666 970 747 q 1124 437 1123 584 l 1124 365 l 611 365 l 611 345 q 676 132 611 209 q 858 55 741 55 q 1078 135 983 55 l 1109 76 q 858 -14 1011 -14 m 311 54 q 436 85 372 54 q 530 160 499 117 l 530 363 l 356 363 q 205 322 263 363 q 140 210 146 281 l 140 196 q 184 92 140 130 q 311 54 229 54 m 838 678 q 687 612 748 678 q 613 431 626 545 l 1044 431 l 1044 452 q 989 617 1044 557 q 838 678 935 678 m 664 1042 l 762 1042 l 606 852 l 534 852 l 664 1042 z "},\u01FE:{ha:940,x_min:85,x_max:864,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 254 52 345 -14 l 186 -56 l 115 -56 l 208 91 q 85 446 85 216 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 722 906 621 1001 l 794 1021 l 864 1021 l 763 860 q 854 547 854 738 l 854 440 m 168 440 q 251 159 168 263 l 680 839 q 469 928 599 928 q 250 826 332 928 q 168 543 168 725 l 168 440 m 771 547 q 717 787 771 690 l 294 116 q 471 59 367 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 565 1301 l 663 1301 l 507 1112 l 435 1112 l 565 1301 z "},\u01FF:{ha:773,x_min:60,x_max:715,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 532 715 465 747 l 585 823 l 649 823 l 581 685 q 680 557 645 636 q 715 378 715 477 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 253 14 315 -14 l 199 -95 l 136 -95 l 203 43 q 98 172 135 91 q 60 355 60 252 l 60 378 m 141 355 q 165 216 141 281 q 236 111 189 152 l 500 649 q 387 678 449 678 q 210 593 278 678 q 141 370 141 508 l 141 355 m 634 378 q 612 509 634 448 q 547 614 589 571 l 284 78 q 389 55 330 55 q 566 139 498 55 q 634 362 634 224 l 634 378 m 436 1041 l 534 1041 l 378 851 l 307 851 l 436 1041 z "},\u0386:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 174 1077 l 254 1077 l 180 871 l 124 871 l 174 1077 z "},\u0388:{ha:790,x_min:-132,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m -81 1078 l -1 1078 l -75 871 l -132 871 l -81 1078 z "},\u0389:{ha:983,x_min:-123,x_max:857,o:"m 857 0 l 772 0 l 772 473 l 208 473 l 208 0 l 125 0 l 125 987 l 208 987 l 208 544 l 772 544 l 772 987 l 857 987 l 857 0 m -73 1078 l 7 1078 l -66 872 l -123 872 l -73 1078 z "},\u038A:{ha:370,x_min:-112,x_max:227,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m -62 1076 l 18 1076 l -56 870 l -112 870 l -62 1076 z "},\u038C:{ha:954,x_min:0,x_max:868,o:"m 868 440 q 821 201 868 304 q 686 42 774 98 q 484 -14 599 -14 q 205 110 311 -14 q 98 444 98 234 l 98 546 q 146 785 98 681 q 281 945 194 889 q 483 1001 369 1001 q 684 946 597 1001 q 819 791 771 891 q 868 558 866 690 l 868 440 m 785 547 q 704 827 785 726 q 483 928 623 928 q 263 826 345 928 q 182 543 182 725 l 182 440 q 263 162 182 264 q 484 59 345 59 q 705 160 626 59 q 785 443 785 262 l 785 547 m 50 1077 l 130 1077 l 56 871 l 0 871 l 50 1077 z "},\u038E:{ha:899,x_min:-139,x_max:880,o:"m 482 449 l 784 987 l 880 987 l 524 372 l 524 0 l 440 0 l 440 372 l 84 987 l 183 987 l 482 449 m -89 1077 l -9 1077 l -83 871 l -139 871 l -89 1077 z "},\u038F:{ha:923,x_min:8,x_max:833,o:"m 522 81 q 684 222 625 117 q 743 486 742 327 l 743 574 q 667 833 743 736 q 463 930 590 930 q 259 832 334 930 q 183 570 183 734 l 183 494 q 242 226 183 334 q 409 81 300 117 l 409 0 l 95 0 l 95 71 l 290 71 q 150 248 201 136 q 98 494 98 359 l 98 572 q 144 797 98 699 q 273 948 190 895 q 463 1001 356 1001 q 653 947 570 1001 q 782 795 736 893 q 827 573 827 698 l 827 494 q 775 246 827 358 q 637 71 724 134 l 833 71 l 833 0 l 522 0 l 522 81 m 58 1077 l 138 1077 l 64 871 l 8 871 l 58 1077 z "},\u0390:{ha:416,x_min:-63,x_max:392,o:"m 205 734 l 205 183 q 227 94 205 123 q 300 64 249 64 q 366 71 332 64 l 370 3 q 283 -7 332 -7 q 161 42 199 -7 q 123 184 123 90 l 123 734 l 205 734 m 154 1114 l 245 1114 l 196 943 l 130 943 l 154 1114 m -63 932 q -48 971 -63 956 q -7 987 -33 987 q 34 971 19 987 q 49 932 49 956 q 34 895 49 910 q -7 879 19 879 q -48 895 -33 879 q -63 932 -63 910 m 280 932 q 295 971 280 955 q 336 987 310 987 q 377 971 361 987 q 392 932 392 955 q 377 894 392 909 q 336 878 361 878 q 295 894 310 878 q 280 932 280 909 z "},\u0391:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 z "},\u0392:{ha:851,x_min:125,x_max:774,o:"m 125 0 l 125 987 l 416 987 q 657 922 575 987 q 739 729 739 857 q 697 596 739 652 q 583 515 656 539 q 722 430 669 496 q 774 278 774 364 q 690 74 774 147 q 455 0 606 0 l 125 0 m 208 475 l 208 71 l 458 71 q 628 125 566 71 q 691 277 691 180 q 631 421 691 368 q 465 475 571 475 l 208 475 m 208 545 l 436 545 q 598 594 541 547 q 655 731 655 641 q 596 871 655 826 q 416 916 536 916 l 208 916 l 208 545 z "},\u0395:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 z "},\u0396:{ha:831,x_min:61,x_max:772,o:"m 162 71 l 772 71 l 772 0 l 61 0 l 61 63 l 647 916 l 79 916 l 79 987 l 750 987 l 750 928 l 162 71 z "},\u0397:{ha:983,x_min:125,x_max:857,o:"m 857 0 l 772 0 l 772 473 l 208 473 l 208 0 l 125 0 l 125 987 l 208 987 l 208 544 l 772 544 l 772 987 l 857 987 l 857 0 z "},\u0399:{ha:370,x_min:143,x_max:227,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 z "},\u039A:{ha:876,x_min:125,x_max:851,o:"m 347 490 l 208 353 l 208 0 l 125 0 l 125 987 l 208 987 l 208 455 l 714 987 l 819 987 l 406 548 l 851 0 l 749 0 l 347 490 z "},\u039C:{ha:1202,x_min:125,x_max:1076,o:"m 235 987 l 600 116 l 965 987 l 1076 987 l 1076 0 l 993 0 l 993 430 l 1000 871 l 632 0 l 568 0 l 201 867 l 208 433 l 208 0 l 125 0 l 125 987 l 235 987 z "},\u039D:{ha:986,x_min:125,x_max:860,o:"m 860 0 l 777 0 l 209 845 l 209 0 l 125 0 l 125 987 l 209 987 l 777 142 l 777 987 l 860 987 l 860 0 z "},\u039F:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 z "},\u03A1:{ha:855,x_min:125,x_max:793,o:"m 208 402 l 208 0 l 125 0 l 125 987 l 461 987 q 704 909 615 987 q 793 692 793 830 q 708 478 793 553 q 459 402 622 402 l 208 402 m 208 473 l 461 473 q 646 530 583 473 q 710 691 710 588 q 647 854 710 793 q 467 916 583 915 l 208 916 l 208 473 z "},\u03A4:{ha:829,x_min:35,x_max:795,o:"m 795 916 l 456 916 l 456 0 l 373 0 l 373 916 l 35 916 l 35 987 l 795 987 l 795 916 z "},\u03A5:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 z "},\u03A7:{ha:850,x_min:37,x_max:813,o:"m 425 570 l 703 987 l 803 987 l 476 500 l 813 0 l 713 0 l 425 431 l 136 0 l 37 0 l 375 500 l 47 987 l 147 987 l 425 570 z "},\u03AA:{ha:370,x_min:-17,x_max:392,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m -17 1164 q -2 1203 -17 1187 q 39 1219 13 1219 q 80 1203 64 1219 q 95 1164 95 1187 q 80 1126 95 1142 q 39 1111 64 1111 q -2 1126 13 1111 q -17 1164 -17 1142 m 280 1164 q 295 1203 280 1187 q 336 1219 310 1219 q 377 1203 361 1219 q 392 1164 392 1187 q 377 1126 392 1141 q 336 1110 361 1110 q 295 1126 310 1110 q 280 1164 280 1141 z "},\u03AB:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 m 212 1156 q 227 1195 212 1179 q 268 1211 242 1211 q 309 1195 294 1211 q 324 1156 324 1179 q 309 1118 324 1134 q 268 1103 294 1103 q 227 1118 242 1103 q 212 1156 212 1134 m 509 1156 q 524 1195 509 1179 q 565 1211 539 1211 q 606 1195 591 1211 q 621 1156 621 1179 q 606 1118 621 1133 q 565 1102 591 1102 q 524 1118 539 1102 q 509 1156 509 1133 z "},\u03AC:{ha:782,x_min:75,x_max:777,o:"m 663 734 l 663 182 q 732 59 664 59 q 766 64 746 59 l 777 1 q 711 -14 749 -14 q 626 17 658 -14 q 585 119 595 47 q 355 -14 511 -14 q 158 74 233 -14 q 76 318 83 163 l 75 361 q 151 644 75 541 q 357 747 227 747 q 584 608 511 747 l 593 734 l 663 734 m 157 347 q 212 131 157 208 q 370 54 268 54 q 582 218 519 54 l 582 500 q 498 632 552 585 q 372 678 444 678 q 214 594 271 678 q 157 347 157 510 m 437 1047 l 517 1047 l 444 841 l 387 841 l 437 1047 z "},\u03AD:{ha:755,x_min:73,x_max:678,o:"m 73 201 q 225 376 73 337 q 122 443 158 400 q 85 538 85 486 q 162 692 85 637 q 373 747 239 747 q 582 687 498 747 q 666 536 666 627 l 585 536 q 524 638 585 597 q 373 678 463 678 q 223 642 278 678 q 168 540 168 605 q 376 408 168 408 l 496 408 l 496 340 l 366 340 q 209 307 262 340 q 155 200 155 273 q 214 95 155 134 q 373 55 273 55 q 533 99 470 55 q 597 210 597 143 l 678 210 q 592 47 678 109 q 373 -14 507 -14 q 155 45 238 -14 q 73 201 73 104 m 387 1046 l 467 1046 l 393 840 l 337 840 l 387 1046 z "},\u03AE:{ha:773,x_min:107,x_max:665,o:"m 182 734 l 186 617 q 421 747 264 747 q 605 680 546 747 q 665 469 665 612 l 665 -281 l 584 -281 l 584 465 q 541 626 584 573 q 403 678 498 678 q 189 507 237 678 l 189 0 l 107 0 l 107 734 l 182 734 m 406 1047 l 486 1047 l 412 841 l 355 841 l 406 1047 z "},\u03AF:{ha:416,x_min:123,x_max:370,o:"m 205 734 l 205 183 q 227 94 205 123 q 300 64 249 64 q 366 71 332 64 l 370 3 q 283 -7 332 -7 q 161 42 199 -7 q 123 184 123 90 l 123 734 l 205 734 m 180 1033 l 260 1033 l 186 827 l 130 827 l 180 1033 z "},\u03B0:{ha:743,x_min:105,x_max:659,o:"m 186 734 l 186 271 q 229 110 187 165 q 350 55 271 55 q 515 142 452 55 q 578 366 578 229 q 498 734 576 544 l 587 734 q 642 551 626 637 q 659 368 659 464 q 576 90 659 193 q 353 -14 494 -14 q 169 60 232 -14 q 105 275 105 133 l 105 734 l 186 734 m 346 1114 l 437 1114 l 388 943 l 322 943 l 346 1114 m 129 932 q 144 971 129 956 q 184 987 159 987 q 226 971 211 987 q 241 932 241 956 q 226 895 241 910 q 184 879 211 879 q 144 895 159 879 q 129 932 129 910 m 472 932 q 487 971 472 955 q 528 987 502 987 q 569 971 553 987 q 584 932 584 955 q 569 894 584 909 q 528 878 553 878 q 487 894 502 878 q 472 932 472 909 z "},\u03BA:{ha:753,x_min:110,x_max:716,o:"m 285 336 l 192 336 l 192 0 l 110 0 l 110 734 l 192 734 l 192 408 l 283 408 l 583 734 l 682 734 l 357 376 l 716 0 l 613 0 l 285 336 z "},\u03BF:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 z "},\u03BC:{ha:773,x_min:110,x_max:664,o:"m 191 734 l 191 302 q 233 118 191 180 q 369 55 276 55 q 511 94 458 55 q 583 212 563 133 l 583 734 l 664 734 l 664 0 l 590 0 l 585 104 q 374 -14 519 -14 q 191 71 250 -14 l 191 -282 l 110 -282 l 110 734 l 191 734 z "},\u03BD:{ha:668,x_min:26,x_max:641,o:"m 334 112 l 557 734 l 641 734 l 367 0 l 301 0 l 26 734 l 109 734 l 334 112 z "},\u03C7:{ha:675,x_min:43,x_max:743,o:"m 104 741 q 262 625 205 741 l 289 569 l 393 333 l 602 734 l 687 734 l 433 245 l 580 -86 l 604 -135 q 688 -216 642 -216 q 743 -212 728 -216 l 730 -281 q 683 -290 712 -290 q 592 -254 629 -290 q 507 -111 555 -219 l 388 159 l 159 -281 l 73 -281 l 349 248 l 216 547 l 194 593 q 93 670 156 670 l 47 666 l 43 733 q 104 741 72 741 z "},\u03CA:{ha:416,x_min:-36,x_max:373,o:"m 205 734 l 205 183 q 227 94 205 123 q 300 64 249 64 q 366 71 332 64 l 370 3 q 283 -7 332 -7 q 161 42 199 -7 q 123 184 123 90 l 123 734 l 205 734 m -36 932 q -21 971 -36 956 q 20 987 -6 987 q 61 971 45 987 q 76 932 76 956 q 61 895 76 910 q 20 879 45 879 q -21 895 -6 879 q -36 932 -36 910 m 261 932 q 276 971 261 955 q 317 987 291 987 q 358 971 342 987 q 373 932 373 955 q 358 894 373 909 q 317 878 342 878 q 276 894 291 878 q 261 932 261 909 z "},\u03CB:{ha:743,x_min:105,x_max:659,o:"m 186 734 l 186 271 q 229 110 187 165 q 350 55 271 55 q 515 142 452 55 q 578 366 578 229 q 498 734 576 544 l 587 734 q 642 551 626 637 q 659 368 659 464 q 576 90 659 193 q 353 -14 494 -14 q 169 60 232 -14 q 105 275 105 133 l 105 734 l 186 734 m 156 932 q 171 971 156 956 q 212 987 186 987 q 253 971 237 987 q 268 932 268 956 q 253 895 268 910 q 212 879 237 879 q 171 895 186 879 q 156 932 156 910 m 453 932 q 468 971 453 955 q 509 987 483 987 q 550 971 534 987 q 565 932 565 955 q 550 894 565 909 q 509 878 534 878 q 468 894 483 878 q 453 932 453 909 z "},\u03CC:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 401 1047 l 481 1047 l 407 841 l 351 841 l 401 1047 z "},\u03CD:{ha:743,x_min:105,x_max:659,o:"m 186 734 l 186 271 q 229 110 187 165 q 350 55 271 55 q 515 142 452 55 q 578 366 578 229 q 498 734 576 544 l 587 734 q 642 551 626 637 q 659 368 659 464 q 576 90 659 193 q 353 -14 494 -14 q 169 60 232 -14 q 105 275 105 133 l 105 734 l 186 734 m 372 1033 l 452 1033 l 378 827 l 322 827 l 372 1033 z "},\u03CE:{ha:1145,x_min:93,x_max:1052,o:"m 274 734 q 174 359 176 541 q 221 137 174 219 q 355 55 269 55 q 484 121 438 55 q 531 316 530 188 l 531 522 l 613 522 l 613 317 q 660 122 614 189 q 790 55 705 55 q 923 136 874 55 q 971 359 971 218 q 870 734 969 538 l 959 734 q 1031 543 1011 629 q 1052 360 1052 456 q 983 86 1052 186 q 793 -14 915 -14 q 656 28 713 -14 q 572 158 599 71 q 351 -14 519 -14 q 161 87 229 -14 q 93 360 93 187 q 114 549 93 460 q 186 734 136 637 l 274 734 m 595 1031 l 675 1031 l 602 825 l 545 825 l 595 1031 z "},\u0401:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 217 1164 q 232 1203 217 1187 q 273 1219 247 1219 q 314 1203 298 1219 q 329 1164 329 1187 q 314 1126 329 1142 q 273 1111 298 1111 q 232 1126 247 1111 q 217 1164 217 1142 m 514 1164 q 529 1203 514 1187 q 570 1219 544 1219 q 611 1203 595 1219 q 626 1164 626 1187 q 611 1126 626 1141 q 570 1110 595 1110 q 529 1126 544 1110 q 514 1164 514 1141 z "},\u0403:{ha:766,x_min:125,x_max:721,o:"m 721 916 l 209 916 l 209 0 l 125 0 l 125 987 l 721 987 l 721 916 m 500 1259 l 598 1259 l 441 1069 l 370 1069 l 500 1259 z "},\u0405:{ha:823,x_min:60,x_max:768,o:"m 684 243 q 626 373 684 325 q 415 464 568 420 q 191 557 262 507 q 91 746 91 629 q 184 930 91 859 q 422 1001 277 1001 q 598 963 521 1001 q 719 857 676 925 q 762 706 762 789 l 677 706 q 608 868 677 807 q 422 930 539 930 q 242 879 309 930 q 175 747 175 829 q 235 625 175 672 q 429 541 296 577 q 630 466 562 505 q 733 372 699 427 q 768 244 768 318 q 674 57 768 127 q 429 -14 581 -14 q 237 24 324 -14 q 105 128 150 61 q 60 282 60 195 l 143 282 q 221 117 143 178 q 429 57 299 57 q 614 108 544 57 q 684 243 684 159 z "},\u0406:{ha:370,x_min:143,x_max:227,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 z "},\u0407:{ha:370,x_min:-17,x_max:392,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m -17 1164 q -2 1203 -17 1187 q 39 1219 13 1219 q 80 1203 64 1219 q 95 1164 95 1187 q 80 1126 95 1142 q 39 1111 64 1111 q -2 1126 13 1111 q -17 1164 -17 1142 m 280 1164 q 295 1203 280 1187 q 336 1219 310 1219 q 377 1203 361 1219 q 392 1164 392 1187 q 377 1126 392 1141 q 336 1110 361 1110 q 295 1126 310 1110 q 280 1164 280 1141 z "},\u0408:{ha:764,x_min:48,x_max:645,o:"m 561 987 l 645 987 l 645 294 q 564 70 645 153 q 347 -14 483 -14 q 125 62 203 -14 q 48 272 48 137 l 132 272 q 188 111 132 165 q 347 57 244 57 q 500 119 441 57 q 561 289 559 182 l 561 987 z "},\u041A:{ha:887,x_min:128,x_max:860,o:"m 347 463 l 212 463 l 212 0 l 128 0 l 128 987 l 212 987 l 212 534 l 343 534 l 725 987 l 830 987 l 425 502 l 860 0 l 756 0 l 347 463 z "},\u040C:{ha:876,x_min:125,x_max:851,o:"m 347 490 l 208 353 l 208 0 l 125 0 l 125 987 l 208 987 l 208 455 l 714 987 l 819 987 l 406 548 l 851 0 l 749 0 l 347 490 m 490 1223 l 589 1223 l 432 1033 l 361 1033 l 490 1223 z "},\u040E:{ha:871,x_min:37,x_max:833,o:"m 454 355 l 735 987 l 833 987 l 452 161 l 427 114 q 216 -14 355 -14 q 152 -7 174 -14 l 159 61 q 216 56 174 56 q 351 142 300 56 l 368 173 l 411 261 l 37 987 l 133 987 l 454 355 m 634 1230 q 581 1104 634 1152 q 438 1056 528 1056 q 296 1104 350 1056 q 242 1230 242 1152 l 311 1230 q 345 1144 311 1174 q 438 1114 378 1114 q 531 1145 498 1114 q 565 1230 565 1177 l 634 1230 z "},\u0410:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 z "},\u0412:{ha:851,x_min:125,x_max:774,o:"m 125 0 l 125 987 l 416 987 q 657 922 575 987 q 739 729 739 857 q 697 596 739 652 q 583 515 656 539 q 722 430 669 496 q 774 278 774 364 q 690 74 774 147 q 455 0 606 0 l 125 0 m 208 475 l 208 71 l 458 71 q 628 125 566 71 q 691 277 691 180 q 631 421 691 368 q 465 475 571 475 l 208 475 m 208 545 l 436 545 q 598 594 541 547 q 655 731 655 641 q 596 871 655 826 q 416 916 536 916 l 208 916 l 208 545 z "},\u0413:{ha:766,x_min:125,x_max:721,o:"m 721 916 l 209 916 l 209 0 l 125 0 l 125 987 l 721 987 l 721 916 z "},\u0415:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 z "},\u0419:{ha:986,x_min:127,x_max:857,o:"m 774 987 l 857 987 l 857 0 l 774 0 l 774 845 l 212 0 l 127 0 l 127 987 l 212 987 l 212 143 l 774 987 m 694 1230 q 641 1104 694 1152 q 498 1056 587 1056 q 356 1104 410 1056 q 302 1230 302 1152 l 371 1230 q 405 1144 371 1174 q 498 1114 438 1114 q 591 1145 557 1114 q 625 1230 625 1177 l 694 1230 z "},\u041C:{ha:1202,x_min:125,x_max:1076,o:"m 235 987 l 600 116 l 965 987 l 1076 987 l 1076 0 l 993 0 l 993 430 l 1000 871 l 632 0 l 568 0 l 201 867 l 208 433 l 208 0 l 125 0 l 125 987 l 235 987 z "},\u041D:{ha:983,x_min:125,x_max:857,o:"m 857 0 l 772 0 l 772 473 l 208 473 l 208 0 l 125 0 l 125 987 l 208 987 l 208 544 l 772 544 l 772 987 l 857 987 l 857 0 z "},\u041E:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 z "},\u041F:{ha:983,x_min:128,x_max:854,o:"m 854 0 l 770 0 l 770 916 l 212 916 l 212 0 l 128 0 l 128 987 l 854 987 l 854 0 z "},\u0420:{ha:855,x_min:125,x_max:793,o:"m 208 402 l 208 0 l 125 0 l 125 987 l 461 987 q 704 909 615 987 q 793 692 793 830 q 708 478 793 553 q 459 402 622 402 l 208 402 m 208 473 l 461 473 q 646 530 583 473 q 710 691 710 588 q 647 854 710 793 q 467 916 583 915 l 208 916 l 208 473 z "},\u0421:{ha:902,x_min:89,x_max:824,o:"m 824 308 q 712 69 807 152 q 460 -14 618 -14 q 266 41 351 -14 q 136 197 182 96 q 89 427 90 298 l 89 555 q 135 789 89 687 q 268 946 181 890 q 467 1001 354 1001 q 717 915 625 1001 q 824 678 809 829 l 740 678 q 467 930 709 930 q 253 829 332 930 q 173 552 173 729 l 173 431 q 251 159 173 260 q 460 57 328 57 q 658 120 591 57 q 740 308 724 182 l 824 308 z "},\u0422:{ha:829,x_min:35,x_max:795,o:"m 795 916 l 456 916 l 456 0 l 373 0 l 373 916 l 35 916 l 35 987 l 795 987 l 795 916 z "},\u0425:{ha:850,x_min:37,x_max:813,o:"m 425 570 l 703 987 l 803 987 l 476 500 l 813 0 l 713 0 l 425 431 l 136 0 l 37 0 l 375 500 l 47 987 l 147 987 l 425 570 z "},\u0430:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 z "},\u0435:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 z "},\u0439:{ha:781,x_min:111,x_max:669,o:"m 588 734 l 669 734 l 669 0 l 588 0 l 588 603 l 192 0 l 111 0 l 111 734 l 192 734 l 192 130 l 588 734 m 584 998 q 531 872 584 920 q 388 824 477 824 q 246 872 300 824 q 192 998 192 920 l 261 998 q 295 912 261 942 q 388 882 328 882 q 481 913 448 882 q 515 998 515 945 l 584 998 z "},\u043E:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 z "},\u0440:{ha:770,x_min:105,x_max:696,o:"m 696 359 q 620 87 696 188 q 416 -14 544 -14 q 186 92 266 -14 l 186 -282 l 105 -282 l 105 734 l 180 734 l 184 630 q 414 747 264 747 q 621 648 546 747 q 696 371 696 548 l 696 359 m 614 374 q 557 595 614 514 q 396 677 499 677 q 268 641 321 677 q 186 536 214 605 l 186 184 q 269 88 215 121 q 397 55 323 55 q 557 137 500 55 q 614 374 614 218 z "},\u0441:{ha:715,x_min:64,x_max:659,o:"m 377 55 q 519 103 462 55 q 581 227 576 151 l 659 227 q 617 104 656 159 q 514 18 578 49 q 377 -14 450 -14 q 148 87 233 -14 q 64 357 64 187 l 64 381 q 102 573 64 490 q 211 702 140 656 q 376 747 281 747 q 575 675 497 747 q 659 486 654 604 l 581 486 q 519 625 576 572 q 376 678 463 678 q 206 599 267 678 q 145 376 145 519 l 145 353 q 206 134 145 212 q 377 55 267 55 z "},\u0443:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 z "},\u0445:{ha:675,x_min:33,x_max:642,o:"m 336 436 l 534 734 l 631 734 l 382 374 l 642 0 l 546 0 l 337 311 l 128 0 l 33 0 l 292 374 l 43 734 l 138 734 l 336 436 z "},\u0451:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 181 947 q 196 986 181 970 q 237 1002 211 1002 q 278 986 262 1002 q 293 947 293 970 q 278 909 293 924 q 237 893 262 893 q 196 909 211 893 q 181 947 181 924 m 478 946 q 493 985 478 969 q 534 1001 508 1001 q 575 985 559 1001 q 590 946 590 969 q 575 908 590 924 q 534 892 559 892 q 493 908 508 892 q 478 946 478 924 z "},\u0453:{ha:585,x_min:111,x_max:563,o:"m 563 664 l 192 664 l 192 0 l 111 0 l 111 734 l 563 734 l 563 664 m 370 1027 l 469 1027 l 312 838 l 241 838 l 370 1027 z "},\u0455:{ha:703,x_min:68,x_max:627,o:"m 545 186 q 497 283 545 247 q 351 341 448 320 q 199 388 253 361 q 119 454 145 415 q 93 547 93 492 q 165 691 93 634 q 351 747 238 747 q 548 687 474 747 q 623 528 623 626 l 541 528 q 487 635 541 593 q 351 678 433 678 q 223 643 271 678 q 174 550 174 607 q 215 465 174 495 q 362 410 255 435 q 522 356 469 385 q 601 288 575 328 q 627 191 627 248 q 552 42 627 98 q 356 -14 477 -14 q 148 48 228 -14 q 68 205 68 111 l 150 205 q 210 95 155 134 q 356 55 265 55 q 493 92 441 55 q 545 186 545 130 z "},\u0456:{ha:311,x_min:101,x_max:213,o:"m 197 0 l 115 0 l 115 734 l 197 734 l 197 0 m 101 946 q 116 985 101 969 q 157 1001 131 1001 q 198 985 182 1001 q 213 946 213 969 q 198 907 213 923 q 157 892 182 892 q 116 907 131 892 q 101 946 101 923 z "},\u0457:{ha:309,x_min:-46,x_max:363,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m -46 939 q -31 978 -46 962 q 9 994 -16 994 q 51 978 35 994 q 66 939 66 962 q 51 901 66 916 q 9 885 35 885 q -31 901 -16 885 q -46 939 -46 916 m 251 938 q 266 977 251 961 q 307 993 281 993 q 348 977 332 993 q 363 938 363 961 q 348 900 363 916 q 307 884 332 884 q 266 900 281 884 q 251 938 251 916 z "},\u0458:{ha:317,x_min:-71,x_max:210,o:"m 193 734 l 193 -87 q 144 -243 193 -189 q 1 -296 96 -296 q -71 -283 -36 -296 l -69 -216 q -8 -225 -39 -225 q 113 -86 113 -225 l 113 734 l 193 734 m 153 1001 q 195 985 180 1001 q 210 946 210 969 q 195 907 210 923 q 153 892 180 892 q 113 907 127 892 q 98 946 98 923 q 113 985 98 969 q 153 1001 127 1001 z "},\u045C:{ha:720,x_min:111,x_max:709,o:"m 305 336 l 193 336 l 193 0 l 111 0 l 111 734 l 193 734 l 193 408 l 304 408 l 573 734 l 675 734 l 374 378 l 709 0 l 602 0 l 305 336 m 447 1027 l 545 1027 l 389 837 l 317 837 l 447 1027 z "},\u045E:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 544 1013 q 491 886 544 935 q 348 838 437 838 q 206 886 260 838 q 152 1013 152 934 l 221 1013 q 255 926 221 956 q 348 897 288 897 q 441 928 408 897 q 475 1013 475 959 l 544 1013 z "},\u1E80:{ha:1245,x_min:41,x_max:1209,o:"m 307 267 l 338 113 l 375 260 l 589 987 l 665 987 l 876 260 l 913 112 l 945 267 l 1124 987 l 1209 987 l 956 0 l 876 0 l 652 772 l 627 870 l 603 772 l 374 0 l 294 0 l 41 987 l 127 987 l 307 267 m 677 1065 l 604 1065 l 450 1255 l 548 1255 l 677 1065 z "},\u1E81:{ha:1047,x_min:43,x_max:999,o:"m 281 169 l 294 106 l 310 172 l 486 734 l 555 734 l 730 177 l 749 100 l 764 171 l 915 734 l 999 734 l 785 0 l 716 0 l 528 582 l 519 622 l 510 581 l 325 0 l 256 0 l 43 734 l 126 734 l 281 169 m 569 852 l 495 852 l 342 1042 l 439 1042 l 569 852 z "},\u1E82:{ha:1245,x_min:41,x_max:1209,o:"m 307 267 l 338 113 l 375 260 l 589 987 l 665 987 l 876 260 l 913 112 l 945 267 l 1124 987 l 1209 987 l 956 0 l 876 0 l 652 772 l 627 870 l 603 772 l 374 0 l 294 0 l 41 987 l 127 987 l 307 267 m 709 1255 l 807 1255 l 650 1065 l 579 1065 l 709 1255 z "},\u1E83:{ha:1047,x_min:43,x_max:999,o:"m 281 169 l 294 106 l 310 172 l 486 734 l 555 734 l 730 177 l 749 100 l 764 171 l 915 734 l 999 734 l 785 0 l 716 0 l 528 582 l 519 622 l 510 581 l 325 0 l 256 0 l 43 734 l 126 734 l 281 169 m 600 1042 l 699 1042 l 542 852 l 471 852 l 600 1042 z "},\u1E84:{ha:1245,x_min:41,x_max:1209,o:"m 307 267 l 338 113 l 375 260 l 589 987 l 665 987 l 876 260 l 913 112 l 945 267 l 1124 987 l 1209 987 l 956 0 l 876 0 l 652 772 l 627 870 l 603 772 l 374 0 l 294 0 l 41 987 l 127 987 l 307 267 m 425 1160 q 439 1199 425 1183 q 480 1215 454 1215 q 521 1199 506 1215 q 536 1160 536 1183 q 521 1122 536 1138 q 480 1107 506 1107 q 439 1122 454 1107 q 425 1160 425 1138 m 722 1160 q 736 1199 722 1183 q 777 1215 751 1215 q 818 1199 803 1215 q 833 1160 833 1183 q 818 1122 833 1137 q 777 1106 803 1106 q 736 1122 751 1106 q 722 1160 722 1137 z "},\u1E85:{ha:1047,x_min:43,x_max:999,o:"m 281 169 l 294 106 l 310 172 l 486 734 l 555 734 l 730 177 l 749 100 l 764 171 l 915 734 l 999 734 l 785 0 l 716 0 l 528 582 l 519 622 l 510 581 l 325 0 l 256 0 l 43 734 l 126 734 l 281 169 m 316 947 q 331 986 316 970 q 372 1002 346 1002 q 413 986 397 1002 q 428 947 428 970 q 413 909 428 924 q 372 893 397 893 q 331 909 346 893 q 316 947 316 924 m 613 946 q 628 985 613 969 q 669 1001 643 1001 q 710 985 694 1001 q 725 946 725 969 q 710 908 725 924 q 669 892 694 892 q 628 908 643 892 q 613 946 613 924 z "},\u1EF2:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 m 465 1061 l 391 1061 l 238 1251 l 336 1251 l 465 1061 z "},\u1EF3:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 398 852 l 324 852 l 171 1042 l 269 1042 l 398 852 z "},"\u2032":{ha:236,x_min:81,x_max:153,o:"m 153 946 l 142 739 l 81 739 q 84 1042 84 940 l 153 1042 l 153 946 z "},"\u2033":{ha:399,x_min:97,x_max:325,o:"m 165 947 l 151 734 l 97 734 l 99 1042 l 165 1042 l 165 947 m 325 947 l 311 734 l 256 734 l 259 1042 l 325 1042 l 325 947 z "},"\u203C":{ha:627,x_min:104,x_max:529,o:"m 193 275 l 117 275 l 113 987 l 197 987 l 193 275 m 104 47 q 119 86 104 71 q 159 102 134 102 q 200 86 185 102 q 216 47 216 71 q 200 10 216 25 q 159 -5 185 -5 q 119 10 134 -5 q 104 47 104 25 m 506 275 l 431 275 l 427 987 l 511 987 l 506 275 m 417 47 q 432 86 417 71 q 473 102 447 102 q 514 86 498 102 q 529 47 529 71 q 514 10 529 25 q 473 -5 498 -5 q 432 10 447 -5 q 417 47 417 25 z "},\u01F0:{ha:317,x_min:-79,x_max:350,o:"m 202 734 l 202 -60 q 148 -236 202 -175 q -3 -296 94 -296 q -79 -283 -41 -296 l -70 -216 q -3 -227 -41 -227 q 89 -184 57 -227 q 121 -60 121 -140 l 121 734 l 202 734 m 161 873 l 277 1005 l 350 1005 l 350 997 l 190 820 l 132 820 l -28 998 l -28 1005 l 44 1005 l 161 873 z "},\u02BC:{ha:247,x_min:42,x_max:185,o:"m 90 745 l 42 781 q 105 953 103 863 l 105 1042 l 185 1042 l 185 973 q 90 745 185 831 z "},\u1E3E:{ha:1202,x_min:125,x_max:1076,o:"m 235 987 l 600 116 l 965 987 l 1076 987 l 1076 0 l 993 0 l 993 430 l 1000 871 l 632 0 l 568 0 l 201 867 l 208 433 l 208 0 l 125 0 l 125 987 l 235 987 m 685 1255 l 783 1255 l 627 1065 l 555 1065 l 685 1255 z "},\u1E3F:{ha:1231,x_min:102,x_max:1131,o:"m 180 734 l 182 614 q 284 714 223 681 q 420 747 345 747 q 640 605 593 747 q 745 710 680 673 q 890 747 811 747 q 1131 490 1126 747 l 1131 0 l 1050 0 l 1050 484 q 1007 629 1049 582 q 871 677 966 677 q 724 620 784 675 q 656 486 663 565 l 656 0 l 575 0 l 575 490 q 531 630 574 584 q 396 677 487 677 q 264 633 319 677 q 183 503 210 589 l 183 0 l 102 0 l 102 734 l 180 734 m 701 1042 l 799 1042 l 642 852 l 571 852 l 701 1042 z "},\u1E00:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 342 -154 q 373 -85 342 -113 q 447 -57 404 -57 q 519 -85 490 -57 q 549 -154 549 -113 q 519 -221 549 -194 q 447 -248 490 -248 q 373 -221 404 -248 q 342 -154 342 -195 m 392 -154 q 408 -189 392 -175 q 447 -202 424 -202 q 486 -189 470 -202 q 501 -154 501 -175 q 486 -118 501 -132 q 447 -104 470 -104 q 408 -118 424 -104 q 392 -154 392 -132 z "},\u1E01:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 236 -154 q 267 -85 236 -113 q 340 -57 297 -57 q 413 -85 383 -57 q 443 -154 443 -113 q 413 -221 443 -194 q 340 -248 383 -248 q 267 -221 298 -248 q 236 -154 236 -195 m 286 -154 q 301 -189 286 -175 q 340 -202 317 -202 q 379 -189 363 -202 q 395 -154 395 -175 q 379 -118 395 -132 q 340 -104 363 -104 q 301 -118 317 -104 q 286 -154 286 -132 z "},\u0400:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 470 1069 l 396 1069 l 243 1259 l 340 1259 l 470 1069 z "},\u040D:{ha:986,x_min:127,x_max:857,o:"m 774 987 l 857 987 l 857 0 l 774 0 l 774 845 l 212 0 l 127 0 l 127 987 l 212 987 l 212 143 l 774 987 m 548 1069 l 474 1069 l 321 1259 l 418 1259 l 548 1069 z "},\u0450:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 434 852 l 360 852 l 207 1042 l 304 1042 l 434 852 z "},\u045D:{ha:781,x_min:111,x_max:669,o:"m 588 734 l 669 734 l 669 0 l 588 0 l 588 603 l 192 0 l 111 0 l 111 734 l 192 734 l 192 130 l 588 734 m 438 838 l 364 838 l 211 1027 l 309 1027 l 438 838 z "},\u0470:{ha:964,x_min:83,x_max:877,o:"m 519 336 q 719 426 646 346 q 793 635 793 507 l 793 987 l 877 987 l 877 638 q 782 374 877 474 q 519 264 686 274 l 519 0 l 435 0 l 435 264 q 180 373 274 275 q 83 629 85 471 l 83 987 l 167 987 l 167 635 q 200 485 167 551 q 294 381 234 419 q 435 336 355 343 l 435 987 l 519 987 l 519 336 z "},\u0471:{ha:949,x_min:82,x_max:875,o:"m 509 734 l 509 56 q 719 154 644 66 q 794 392 794 241 q 699 734 792 557 l 788 734 q 856 561 837 640 q 875 393 875 481 q 780 100 875 204 q 509 -12 684 -4 l 509 -300 l 429 -300 l 429 -12 q 174 101 263 0 q 82 388 85 202 l 82 734 l 163 734 l 163 393 q 232 156 165 243 q 429 57 298 69 l 429 734 l 509 734 z "},\u0476:{ha:855,x_min:19,x_max:836,o:"m 370 173 l 391 99 l 412 173 l 619 819 q 695 957 649 915 q 814 1000 741 1000 l 836 1000 l 835 927 q 782 920 801 927 q 696 806 728 901 l 430 0 l 351 0 l 19 987 l 110 987 l 370 173 m 360 1019 l 278 1019 l 73 1200 l 177 1200 l 360 1019 m 525 1019 l 451 1019 l 281 1200 l 377 1200 l 525 1019 z "},\u0477:{ha:684,x_min:6,x_max:695,o:"m 294 184 l 320 91 l 348 184 l 481 608 q 542 714 506 681 q 631 747 578 747 q 695 732 672 747 l 684 667 q 644 675 667 675 q 560 599 588 675 l 353 0 l 288 0 l 30 734 l 114 734 l 294 184 m 293 819 l 211 819 l 6 1000 l 110 1000 l 293 819 m 458 819 l 384 819 l 214 1000 l 310 1000 l 458 819 z "},\u0479:{ha:1438,x_min:61,x_max:1418,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 1116 117 l 1331 734 l 1418 734 l 1105 -125 l 1088 -163 q 902 -296 1028 -296 q 840 -287 873 -296 l 839 -220 l 881 -224 q 978 -194 941 -224 q 1040 -93 1015 -165 l 1076 6 l 800 734 l 888 734 l 1116 117 z "},\u0478:{ha:1600,x_min:85,x_max:1580,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 1278 117 l 1493 734 l 1580 734 l 1267 -125 l 1251 -163 q 1064 -296 1190 -296 q 1002 -287 1035 -296 l 1001 -220 l 1043 -224 q 1140 -194 1103 -224 q 1202 -93 1177 -165 l 1238 6 l 962 734 l 1050 734 l 1278 117 z "},\u0498:{ha:826,x_min:61,x_max:762,o:"m 664 730 q 597 876 664 823 q 406 930 530 930 q 229 873 298 930 q 159 728 159 816 l 75 728 q 118 869 75 807 q 238 966 161 931 q 406 1001 315 1001 q 656 930 566 1001 q 747 728 747 859 q 699 593 747 652 q 570 506 651 534 q 762 268 762 454 q 666 63 762 140 q 406 -14 569 -14 q 225 24 307 -14 q 102 126 144 62 q 61 274 61 190 l 144 274 q 218 118 144 179 q 406 56 292 56 q 606 113 534 56 q 679 265 679 170 q 614 416 679 366 q 416 467 550 466 l 290 467 l 290 539 l 412 539 q 600 588 535 540 q 664 730 664 635 m 459 -292 l 378 -292 l 378 33 l 459 33 l 459 -292 z "},\u0499:{ha:703,x_min:66,x_max:631,o:"m 536 540 q 486 642 536 606 q 350 678 437 678 q 215 638 271 678 q 159 536 159 597 l 79 536 q 157 687 79 627 q 350 747 235 747 q 547 692 476 747 q 617 538 617 638 q 585 443 617 486 q 490 376 552 400 q 631 201 631 338 q 554 45 631 102 q 351 -13 477 -13 q 147 49 228 -13 q 66 210 66 111 l 148 210 q 207 99 148 144 q 351 55 265 55 q 496 94 444 55 q 549 200 549 133 q 500 307 549 274 q 353 339 452 339 l 241 339 l 241 410 l 367 410 q 536 540 536 414 m 387 -291 l 306 -291 l 306 33 l 387 33 l 387 -291 z "},\u04AA:{ha:902,x_min:89,x_max:824,o:"m 824 308 q 712 69 807 152 q 460 -14 618 -14 q 266 41 351 -14 q 136 197 182 96 q 89 427 90 298 l 89 555 q 135 789 89 687 q 268 946 181 890 q 467 1001 354 1001 q 717 915 625 1001 q 824 678 809 829 l 740 678 q 467 930 709 930 q 253 829 332 930 q 173 552 173 729 l 173 431 q 251 159 173 260 q 460 57 328 57 q 658 120 591 57 q 740 308 724 182 l 824 308 m 501 -292 l 420 -292 l 420 33 l 501 33 l 501 -292 z "},\u04AB:{ha:715,x_min:64,x_max:659,o:"m 377 55 q 519 103 462 55 q 581 227 576 151 l 659 227 q 617 104 656 159 q 514 18 578 49 q 377 -14 450 -14 q 148 87 233 -14 q 64 357 64 187 l 64 381 q 102 573 64 490 q 211 702 140 656 q 376 747 281 747 q 575 675 497 747 q 659 486 654 604 l 581 486 q 519 625 576 572 q 376 678 463 678 q 206 599 267 678 q 145 376 145 519 l 145 353 q 206 134 145 212 q 377 55 267 55 m 407 -292 l 326 -292 l 326 33 l 407 33 l 407 -292 z "},\u04AE:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 z "},\u04AF:{ha:680,x_min:30,x_max:653,o:"m 569 734 l 653 734 l 382 21 l 382 -281 l 301 -281 l 301 21 l 30 734 l 114 734 l 328 162 l 342 102 l 359 162 l 569 734 z "},\u04C0:{ha:370,x_min:143,x_max:227,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 z "},\u04C1:{ha:1222,x_min:16,x_max:1207,o:"m 766 470 l 654 470 l 654 0 l 571 0 l 571 470 l 456 470 l 121 0 l 16 0 l 381 510 l 40 987 l 141 987 l 452 541 l 571 541 l 571 987 l 654 987 l 654 541 l 771 541 l 1082 987 l 1182 987 l 841 511 l 1207 0 l 1102 0 l 766 470 m 806 1230 q 752 1104 806 1152 q 610 1056 699 1056 q 468 1104 522 1056 q 414 1230 414 1152 l 483 1230 q 516 1144 483 1174 q 610 1114 550 1114 q 703 1145 669 1114 q 736 1230 736 1177 l 806 1230 z "},\u04C2:{ha:1065,x_min:16,x_max:1042,o:"m 667 339 l 569 339 l 569 0 l 488 0 l 488 339 l 391 339 l 119 0 l 16 0 l 320 376 l 50 734 l 149 734 l 389 412 l 488 412 l 488 734 l 569 734 l 569 412 l 668 412 l 909 734 l 1008 734 l 737 376 l 1042 0 l 938 0 l 667 339 m 723 998 q 670 872 723 920 q 527 824 616 824 q 385 872 439 824 q 331 998 331 920 l 400 998 q 434 912 400 942 q 527 882 467 882 q 620 913 587 882 q 654 998 654 945 l 723 998 z "},"\u04CF":{ha:370,x_min:143,x_max:227,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 z "},\u04D0:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 631 1226 q 578 1100 631 1148 q 435 1052 525 1052 q 293 1100 347 1052 q 239 1226 239 1147 l 309 1226 q 342 1140 309 1170 q 435 1110 376 1110 q 529 1141 495 1110 q 562 1226 562 1173 l 631 1226 z "},\u04D1:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 589 1013 q 535 886 589 935 q 393 838 482 838 q 251 886 304 838 q 197 1013 197 934 l 266 1013 q 299 926 266 956 q 393 897 333 897 q 486 928 452 897 q 519 1013 519 959 l 589 1013 z "},\u04D2:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 233 1160 q 248 1199 233 1183 q 288 1215 262 1215 q 329 1199 314 1215 q 345 1160 345 1183 q 329 1122 345 1138 q 288 1107 314 1107 q 248 1122 262 1107 q 233 1160 233 1138 m 530 1160 q 545 1199 530 1183 q 585 1215 559 1215 q 626 1199 611 1215 q 642 1160 642 1183 q 626 1122 642 1137 q 585 1106 611 1106 q 545 1122 559 1106 q 530 1160 530 1137 z "},\u04D3:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 190 947 q 205 986 190 970 q 245 1002 220 1002 q 287 986 271 1002 q 302 947 302 970 q 287 909 302 924 q 245 893 271 893 q 205 909 220 893 q 190 947 190 924 m 487 946 q 502 985 487 969 q 543 1001 517 1001 q 584 985 568 1001 q 599 946 599 969 q 584 908 599 924 q 543 892 568 892 q 502 908 517 892 q 487 946 487 924 z "},\u04D4:{ha:1265,x_min:12,x_max:1236,o:"m 1236 0 l 682 0 l 671 264 l 267 264 l 111 0 l 12 0 l 609 987 l 1195 987 l 1195 918 l 724 918 l 740 549 l 1139 549 l 1139 479 l 743 479 l 760 68 l 1236 68 l 1236 0 m 312 340 l 668 340 l 644 903 l 312 340 z "},\u04D5:{ha:1175,x_min:58,x_max:1124,o:"m 858 -14 q 696 23 764 -14 q 588 126 629 60 q 470 23 547 60 q 298 -14 393 -14 q 121 44 184 -14 q 58 199 58 101 q 133 366 58 305 q 347 429 208 427 l 530 429 l 530 488 q 487 628 530 578 q 358 678 444 678 q 214 634 270 678 q 157 519 157 590 l 77 528 q 156 686 77 625 q 358 747 235 747 q 503 711 443 747 q 590 603 563 675 q 695 709 631 671 q 838 747 759 747 q 1047 666 970 747 q 1124 437 1123 584 l 1124 365 l 611 365 l 611 345 q 676 132 611 209 q 858 55 741 55 q 1078 135 983 55 l 1109 76 q 858 -14 1011 -14 m 311 54 q 436 85 372 54 q 530 160 499 117 l 530 363 l 356 363 q 205 322 263 363 q 140 210 146 281 l 140 196 q 184 92 140 130 q 311 54 229 54 m 838 678 q 687 612 748 678 q 613 431 626 545 l 1044 431 l 1044 452 q 989 617 1044 557 q 838 678 935 678 z "},\u04D6:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 616 1230 q 563 1104 616 1152 q 420 1056 509 1056 q 278 1104 332 1056 q 224 1230 224 1152 l 293 1230 q 327 1144 293 1174 q 420 1114 360 1114 q 513 1145 479 1114 q 547 1230 547 1177 l 616 1230 z "},\u04D7:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 580 1012 q 527 886 580 934 q 384 838 473 838 q 242 885 296 838 q 188 1012 188 933 l 257 1012 q 291 926 257 956 q 384 896 324 896 q 477 927 444 896 q 511 1012 511 958 l 580 1012 z "},\u04DA:{ha:972,x_min:84,x_max:890,o:"m 464 1001 q 776 878 662 1001 q 890 539 890 755 l 890 455 q 838 214 890 321 q 694 46 786 106 q 492 -14 602 -14 q 193 101 302 -14 q 84 420 84 216 l 84 500 l 806 500 l 806 546 q 716 828 806 726 q 464 929 627 929 q 186 848 304 929 l 159 910 q 464 1001 276 1001 m 492 58 q 712 160 626 58 q 806 432 798 263 l 168 432 l 168 396 q 254 148 168 239 q 492 58 339 58 m 247 1133 q 262 1172 247 1156 q 302 1188 277 1188 q 343 1172 328 1188 q 359 1133 359 1156 q 343 1095 359 1111 q 302 1080 328 1080 q 262 1095 277 1080 q 247 1133 247 1111 m 544 1133 q 559 1172 544 1156 q 600 1187 574 1187 q 641 1172 625 1187 q 656 1133 656 1156 q 641 1095 656 1110 q 600 1079 625 1079 q 559 1095 574 1079 q 544 1133 544 1110 z "},\u04D9:{ha:715,x_min:62,x_max:662,o:"m 342 747 q 505 701 431 747 q 620 572 578 655 q 662 389 662 489 l 662 351 q 621 165 662 249 q 509 34 580 81 q 353 -14 437 -14 q 140 71 218 -14 q 62 302 62 155 l 62 368 l 581 368 l 581 388 q 514 596 581 513 q 342 679 448 679 q 210 656 262 679 q 121 597 157 634 l 87 653 q 342 747 178 747 m 353 55 q 502 123 439 55 q 578 299 565 191 l 144 299 l 144 279 q 201 118 144 180 q 353 55 258 55 z "},\u04DB:{ha:715,x_min:62,x_max:662,o:"m 342 747 q 505 701 431 747 q 620 572 578 655 q 662 389 662 489 l 662 351 q 621 165 662 249 q 509 34 580 81 q 353 -14 437 -14 q 140 71 218 -14 q 62 302 62 155 l 62 368 l 581 368 l 581 388 q 514 596 581 513 q 342 679 448 679 q 210 656 262 679 q 121 597 157 634 l 87 653 q 342 747 178 747 m 353 55 q 502 123 439 55 q 578 299 565 191 l 144 299 l 144 279 q 201 118 144 180 q 353 55 258 55 m 178 947 q 193 986 178 970 q 234 1002 208 1002 q 275 986 260 1002 q 290 947 290 970 q 275 909 290 924 q 234 893 260 893 q 193 909 208 893 q 178 947 178 924 m 475 946 q 490 985 475 969 q 531 1001 505 1001 q 572 985 557 1001 q 587 946 587 969 q 572 908 587 924 q 531 892 557 892 q 490 908 505 892 q 475 946 475 924 z "},\u04DC:{ha:1222,x_min:16,x_max:1207,o:"m 766 470 l 654 470 l 654 0 l 571 0 l 571 470 l 456 470 l 121 0 l 16 0 l 381 510 l 40 987 l 141 987 l 452 541 l 571 541 l 571 987 l 654 987 l 654 541 l 771 541 l 1082 987 l 1182 987 l 841 511 l 1207 0 l 1102 0 l 766 470 m 407 1164 q 422 1203 407 1187 q 463 1219 437 1219 q 504 1203 488 1219 q 519 1164 519 1187 q 504 1126 519 1142 q 463 1111 488 1111 q 422 1126 437 1111 q 407 1164 407 1142 m 704 1164 q 719 1203 704 1187 q 760 1219 734 1219 q 801 1203 785 1219 q 816 1164 816 1187 q 801 1126 816 1141 q 760 1110 785 1110 q 719 1126 734 1110 q 704 1164 704 1141 z "},\u04DD:{ha:1065,x_min:16,x_max:1042,o:"m 667 339 l 569 339 l 569 0 l 488 0 l 488 339 l 391 339 l 119 0 l 16 0 l 320 376 l 50 734 l 149 734 l 389 412 l 488 412 l 488 734 l 569 734 l 569 412 l 668 412 l 909 734 l 1008 734 l 737 376 l 1042 0 l 938 0 l 667 339 m 324 932 q 339 971 324 956 q 380 987 354 987 q 421 971 406 987 q 436 932 436 956 q 421 895 436 910 q 380 879 406 879 q 339 895 354 879 q 324 932 324 910 m 621 932 q 636 971 621 955 q 677 987 651 987 q 718 971 703 987 q 733 932 733 955 q 718 894 733 909 q 677 878 703 878 q 636 894 651 878 q 621 932 621 909 z "},\u04DE:{ha:826,x_min:61,x_max:762,o:"m 664 730 q 597 876 664 823 q 406 930 530 930 q 229 873 298 930 q 159 728 159 816 l 75 728 q 118 869 75 807 q 238 966 161 931 q 406 1001 315 1001 q 656 930 566 1001 q 747 728 747 859 q 699 593 747 652 q 570 506 651 534 q 762 268 762 454 q 666 63 762 140 q 406 -14 569 -14 q 225 24 307 -14 q 102 126 144 62 q 61 274 61 190 l 144 274 q 218 118 144 179 q 406 56 292 56 q 606 113 534 56 q 679 265 679 170 q 614 416 679 366 q 416 467 550 466 l 290 467 l 290 539 l 412 539 q 600 588 535 540 q 664 730 664 635 m 215 1179 q 230 1218 215 1202 q 271 1234 245 1234 q 312 1218 296 1234 q 327 1179 327 1202 q 312 1141 327 1156 q 271 1125 296 1125 q 230 1141 245 1125 q 215 1179 215 1156 m 512 1178 q 527 1217 512 1201 q 568 1233 542 1233 q 609 1217 593 1233 q 624 1178 624 1201 q 609 1140 624 1156 q 568 1124 593 1124 q 527 1140 542 1124 q 512 1178 512 1156 z "},\u04DF:{ha:703,x_min:66,x_max:631,o:"m 536 540 q 486 642 536 606 q 350 678 437 678 q 215 638 271 678 q 159 536 159 597 l 79 536 q 157 687 79 627 q 350 747 235 747 q 547 692 476 747 q 617 538 617 638 q 585 443 617 486 q 490 376 552 400 q 631 201 631 338 q 554 45 631 102 q 351 -13 477 -13 q 147 49 228 -13 q 66 210 66 111 l 148 210 q 207 99 148 144 q 351 55 265 55 q 496 94 444 55 q 549 200 549 133 q 500 307 549 274 q 353 339 452 339 l 241 339 l 241 410 l 367 410 q 536 540 536 414 m 143 946 q 158 985 143 969 q 199 1001 173 1001 q 240 985 224 1001 q 255 946 255 969 q 240 908 255 924 q 199 892 224 892 q 158 908 173 892 q 143 946 143 924 m 440 945 q 455 984 440 968 q 496 1000 470 1000 q 537 984 522 1000 q 552 945 552 968 q 537 907 552 923 q 496 892 522 892 q 455 907 470 892 q 440 945 440 923 z "},\u04E2:{ha:986,x_min:127,x_max:857,o:"m 774 987 l 857 987 l 857 0 l 774 0 l 774 845 l 212 0 l 127 0 l 127 987 l 212 987 l 212 143 l 774 987 m 710 1135 l 290 1135 l 290 1200 l 710 1200 l 710 1135 z "},\u04E3:{ha:781,x_min:111,x_max:669,o:"m 588 734 l 669 734 l 669 0 l 588 0 l 588 603 l 192 0 l 111 0 l 111 734 l 192 734 l 192 130 l 588 734 m 600 903 l 180 903 l 180 968 l 600 968 l 600 903 z "},\u04E4:{ha:986,x_min:127,x_max:857,o:"m 774 987 l 857 987 l 857 0 l 774 0 l 774 845 l 212 0 l 127 0 l 127 987 l 212 987 l 212 143 l 774 987 m 295 1164 q 310 1203 295 1187 q 351 1219 325 1219 q 392 1203 376 1219 q 407 1164 407 1187 q 392 1126 407 1142 q 351 1111 376 1111 q 310 1126 325 1111 q 295 1164 295 1142 m 592 1164 q 607 1203 592 1187 q 648 1219 622 1219 q 689 1203 673 1219 q 704 1164 704 1187 q 689 1126 704 1141 q 648 1110 673 1110 q 607 1126 622 1110 q 592 1164 592 1141 z "},\u04E5:{ha:781,x_min:111,x_max:669,o:"m 588 734 l 669 734 l 669 0 l 588 0 l 588 603 l 192 0 l 111 0 l 111 734 l 192 734 l 192 130 l 588 734 m 185 932 q 200 971 185 956 q 241 987 215 987 q 282 971 267 987 q 297 932 297 956 q 282 895 297 910 q 241 879 267 879 q 200 895 215 879 q 185 932 185 910 m 482 932 q 497 971 482 955 q 538 987 512 987 q 579 971 564 987 q 594 932 594 955 q 579 894 594 909 q 538 878 564 878 q 497 894 512 878 q 482 932 482 909 z "},\u04E6:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 266 1168 q 281 1207 266 1192 q 321 1223 296 1223 q 362 1207 347 1223 q 378 1168 378 1192 q 362 1131 378 1146 q 321 1115 347 1115 q 281 1131 296 1115 q 266 1168 266 1146 m 563 1168 q 578 1207 563 1191 q 618 1223 593 1223 q 660 1207 644 1223 q 675 1168 675 1191 q 660 1130 675 1145 q 618 1114 644 1114 q 578 1130 593 1114 q 563 1168 563 1145 z "},\u04E7:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 184 947 q 199 986 184 970 q 240 1002 214 1002 q 281 986 266 1002 q 296 947 296 970 q 281 909 296 924 q 240 893 266 893 q 199 909 214 893 q 184 947 184 924 m 481 946 q 496 985 481 969 q 537 1001 511 1001 q 578 985 563 1001 q 593 946 593 969 q 578 908 593 924 q 537 892 563 892 q 496 908 511 892 q 481 946 481 924 z "},\u04E8:{ha:935,x_min:80,x_max:849,o:"m 849 440 q 802 201 849 304 q 667 42 755 98 q 465 -14 580 -14 q 265 42 353 -14 q 129 200 177 98 q 80 435 81 302 l 80 546 q 128 785 80 681 q 263 945 176 889 q 464 1001 351 1001 q 665 946 578 1001 q 800 791 752 891 q 849 558 847 690 l 849 440 m 163 525 l 766 525 l 766 547 q 686 827 766 726 q 464 928 605 928 q 245 826 327 928 q 163 543 163 725 l 163 525 m 766 456 l 163 456 l 163 440 q 244 162 163 264 q 465 59 326 59 q 686 160 606 59 q 766 442 766 261 l 766 456 z "},\u04E9:{ha:785,x_min:60,x_max:715,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 624 644 533 747 q 715 372 715 541 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 633 334 l 142 334 q 215 132 148 210 q 389 55 281 55 q 562 134 496 55 q 633 334 627 212 m 387 678 q 215 601 283 678 q 142 402 148 523 l 633 402 q 558 601 626 524 q 387 678 491 678 z "},\u04EA:{ha:935,x_min:80,x_max:849,o:"m 849 440 q 802 201 849 304 q 667 42 755 98 q 465 -14 580 -14 q 265 42 353 -14 q 129 200 177 98 q 80 435 81 302 l 80 546 q 128 785 80 681 q 263 945 176 889 q 464 1001 351 1001 q 665 946 578 1001 q 800 791 752 891 q 849 558 847 690 l 849 440 m 163 525 l 766 525 l 766 547 q 686 827 766 726 q 464 928 605 928 q 245 826 327 928 q 163 543 163 725 l 163 525 m 766 456 l 163 456 l 163 440 q 244 162 163 264 q 465 59 326 59 q 686 160 606 59 q 766 442 766 261 l 766 456 m 281 1161 q 296 1200 281 1184 q 337 1216 311 1216 q 378 1200 363 1216 q 393 1161 393 1184 q 378 1123 393 1139 q 337 1107 363 1107 q 296 1123 311 1107 q 281 1161 281 1139 m 578 1160 q 593 1199 578 1183 q 634 1215 608 1215 q 675 1199 660 1215 q 690 1160 690 1183 q 675 1122 690 1138 q 634 1107 660 1107 q 593 1122 608 1107 q 578 1160 578 1138 z "},\u04EB:{ha:785,x_min:60,x_max:715,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 624 644 533 747 q 715 372 715 541 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 633 334 l 142 334 q 215 132 148 210 q 389 55 281 55 q 562 134 496 55 q 633 334 627 212 m 387 678 q 215 601 283 678 q 142 402 148 523 l 633 402 q 558 601 626 524 q 387 678 491 678 m 176 956 q 191 995 176 979 q 232 1011 206 1011 q 273 995 258 1011 q 288 956 288 979 q 273 918 288 934 q 232 903 258 903 q 191 918 206 903 q 176 956 176 934 m 473 956 q 488 995 473 979 q 529 1010 503 1010 q 570 995 555 1010 q 585 956 585 979 q 570 918 585 933 q 529 902 555 902 q 488 918 503 902 q 473 956 473 933 z "},\u04EC:{ha:917,x_min:96,x_max:830,o:"m 179 308 q 263 118 196 178 q 458 57 330 57 q 669 160 592 57 q 747 436 747 263 l 747 460 l 334 460 l 334 532 l 747 532 l 747 556 q 667 829 747 728 q 453 930 588 930 q 179 678 210 930 l 96 678 q 203 916 111 831 q 453 1001 296 1001 q 727 879 623 1001 q 830 549 830 758 l 830 431 q 784 198 830 300 q 653 41 737 96 q 458 -14 568 -14 q 205 70 300 -14 q 96 308 111 153 l 179 308 m 267 1179 q 281 1218 267 1202 q 322 1234 296 1234 q 363 1218 348 1234 q 378 1179 378 1202 q 363 1141 378 1157 q 322 1126 348 1126 q 281 1141 296 1126 q 267 1179 267 1157 m 564 1179 q 578 1218 564 1202 q 619 1234 593 1234 q 660 1218 645 1234 q 675 1179 675 1202 q 660 1141 675 1156 q 619 1125 645 1125 q 578 1141 593 1125 q 564 1179 564 1156 z "},\u04ED:{ha:743,x_min:75,x_max:664,o:"m 351 678 q 210 630 267 678 q 154 505 154 581 l 75 505 q 112 627 75 571 q 214 715 149 682 q 351 747 278 747 q 571 653 486 747 q 663 405 656 558 l 664 353 q 625 162 664 247 q 515 32 585 78 q 351 -14 444 -14 q 153 59 231 -14 q 75 248 75 132 l 154 248 q 210 108 154 161 q 351 55 266 55 q 515 131 453 55 q 582 336 577 207 l 250 336 l 250 405 l 582 405 q 514 604 576 529 q 351 678 453 678 m 168 947 q 183 986 168 970 q 224 1002 198 1002 q 265 986 250 1002 q 280 947 280 970 q 265 909 280 924 q 224 893 250 893 q 183 909 198 893 q 168 947 168 924 m 465 946 q 480 985 465 969 q 521 1001 495 1001 q 562 985 547 1001 q 577 946 577 969 q 562 908 577 924 q 521 892 547 892 q 480 908 495 892 q 465 946 465 924 z "},\u04EE:{ha:871,x_min:37,x_max:833,o:"m 454 355 l 735 987 l 833 987 l 452 161 l 427 114 q 216 -14 355 -14 q 152 -7 174 -14 l 159 61 q 216 56 174 56 q 351 142 300 56 l 368 173 l 411 261 l 37 987 l 133 987 l 454 355 m 650 1135 l 231 1135 l 231 1200 l 650 1200 l 650 1135 z "},\u04EF:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 560 917 l 140 917 l 140 983 l 560 983 l 560 917 z "},\u04F0:{ha:871,x_min:37,x_max:833,o:"m 454 355 l 735 987 l 833 987 l 452 161 l 427 114 q 216 -14 355 -14 q 152 -7 174 -14 l 159 61 q 216 56 174 56 q 351 142 300 56 l 368 173 l 411 261 l 37 987 l 133 987 l 454 355 m 235 1164 q 250 1203 235 1187 q 291 1219 265 1219 q 332 1203 317 1219 q 347 1164 347 1187 q 332 1126 347 1142 q 291 1111 317 1111 q 250 1126 265 1111 q 235 1164 235 1142 m 532 1164 q 547 1203 532 1187 q 588 1219 562 1219 q 629 1203 614 1219 q 644 1164 644 1187 q 629 1126 644 1141 q 588 1110 614 1110 q 547 1126 562 1110 q 532 1164 532 1141 z "},\u04F1:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 145 947 q 160 986 145 970 q 201 1002 175 1002 q 242 986 227 1002 q 257 947 257 970 q 242 909 257 924 q 201 893 227 893 q 160 909 175 893 q 145 947 145 924 m 442 946 q 457 985 442 969 q 498 1001 472 1001 q 539 985 524 1001 q 554 946 554 969 q 539 908 554 924 q 498 892 524 892 q 457 908 472 892 q 442 946 442 924 z "},\u04F2:{ha:871,x_min:37,x_max:833,o:"m 454 355 l 735 987 l 833 987 l 452 161 l 427 114 q 216 -14 355 -14 q 152 -7 174 -14 l 159 61 q 216 56 174 56 q 351 142 300 56 l 368 173 l 411 261 l 37 987 l 133 987 l 454 355 m 640 1259 l 737 1259 l 548 1053 l 466 1053 l 640 1259 m 429 1259 l 522 1259 l 366 1053 l 292 1053 l 429 1259 z "},\u04F3:{ha:660,x_min:22,x_max:647,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 549 1041 l 647 1041 l 458 836 l 376 836 l 549 1041 m 339 1041 l 432 1041 l 275 836 l 201 836 l 339 1041 z "},\u04F4:{ha:924,x_min:117,x_max:798,o:"m 798 987 l 798 0 l 714 0 l 714 449 q 447 410 575 410 q 199 483 279 410 q 117 706 119 555 l 117 987 l 201 987 l 201 711 q 260 536 201 591 q 447 481 319 481 q 714 520 576 481 l 714 987 l 798 987 m 264 1164 q 279 1203 264 1187 q 319 1219 294 1219 q 360 1203 345 1219 q 376 1164 376 1187 q 360 1126 376 1142 q 319 1111 345 1111 q 279 1126 294 1111 q 264 1164 264 1142 m 561 1164 q 576 1203 561 1187 q 616 1219 591 1219 q 657 1203 642 1219 q 673 1164 673 1187 q 657 1126 673 1141 q 616 1110 642 1110 q 576 1126 591 1110 q 561 1164 561 1141 z "},\u04F5:{ha:739,x_min:75,x_max:628,o:"m 628 0 l 547 0 l 547 309 q 355 272 446 272 q 143 336 209 272 q 75 536 77 400 l 75 734 l 155 734 l 155 540 q 202 388 157 435 q 355 342 247 342 q 547 377 453 345 l 547 734 l 628 734 l 628 0 m 143 932 q 158 971 143 956 q 199 987 173 987 q 240 971 224 987 q 255 932 255 956 q 240 895 255 910 q 199 879 224 879 q 158 895 173 879 q 143 932 143 910 m 440 932 q 455 971 440 955 q 496 987 470 987 q 537 971 522 987 q 552 932 552 955 q 537 894 552 909 q 496 878 522 878 q 455 894 470 878 q 440 932 440 909 z "},\u04F8:{ha:1160,x_min:126,x_max:1027,o:"m 210 559 l 454 559 q 629 525 555 559 q 742 429 703 492 q 781 281 781 366 q 694 75 781 150 q 452 0 606 0 l 126 0 l 126 987 l 210 987 l 210 559 m 210 488 l 210 71 l 454 71 q 633 127 568 71 q 697 282 697 184 q 635 431 697 376 q 460 488 572 486 l 210 488 m 1027 0 l 944 0 l 944 987 l 1027 987 l 1027 0 m 396 1164 q 411 1203 396 1187 q 452 1219 426 1219 q 493 1203 477 1219 q 508 1164 508 1187 q 493 1126 508 1142 q 452 1111 477 1111 q 411 1126 426 1111 q 396 1164 396 1142 m 693 1164 q 708 1203 693 1187 q 749 1219 723 1219 q 790 1203 774 1219 q 805 1164 805 1187 q 790 1126 805 1141 q 749 1110 774 1110 q 708 1126 723 1110 q 693 1164 693 1141 z "},\u04F9:{ha:1043,x_min:115,x_max:923,o:"m 195 467 l 407 467 q 550 438 488 467 q 643 356 611 408 q 674 235 674 304 q 601 64 674 128 q 404 0 528 0 l 115 0 l 115 734 l 195 734 l 195 467 m 195 398 l 195 68 l 406 68 q 543 113 493 68 q 593 233 593 157 q 544 352 593 307 q 412 398 496 397 l 195 398 m 923 0 l 842 0 l 842 734 l 923 734 l 923 0 m 337 932 q 352 971 337 956 q 393 987 367 987 q 434 971 418 987 q 449 932 449 956 q 434 895 449 910 q 393 879 418 879 q 352 895 367 879 q 337 932 337 910 m 634 932 q 649 971 634 955 q 690 987 664 987 q 731 971 715 987 q 746 932 746 955 q 731 894 746 909 q 690 878 715 878 q 649 894 664 878 q 634 932 634 909 z "},"\u0501":{ha:772,x_min:73,x_max:664,o:"m 73 374 q 150 646 73 545 q 357 747 226 747 q 583 630 505 747 l 583 1042 l 664 1042 l 664 0 l 588 0 l 585 98 q 355 -14 507 -14 q 151 89 229 -14 q 73 364 73 191 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 189 520 57 l 583 534 q 372 677 520 677 q 212 596 269 677 q 155 359 155 516 z "},\u1EA0:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 389 -157 q 404 -118 389 -134 q 444 -102 418 -102 q 486 -118 471 -102 q 500 -157 500 -134 q 486 -195 500 -179 q 444 -210 471 -210 q 404 -195 418 -210 q 389 -157 389 -179 z "},\u1EA1:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 282 -157 q 297 -118 282 -134 q 338 -102 312 -102 q 379 -118 364 -102 q 394 -157 394 -134 q 379 -195 394 -179 q 338 -210 364 -210 q 297 -195 312 -210 q 282 -157 282 -179 z "},\u1EA2:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 406 1070 l 406 1155 q 492 1173 465 1160 q 519 1219 519 1186 q 483 1266 519 1249 q 383 1283 446 1283 l 388 1335 q 534 1303 481 1335 q 587 1218 587 1272 q 556 1145 587 1173 q 468 1112 526 1117 l 467 1070 l 406 1070 z "},\u1EA3:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 363 857 l 363 941 q 450 959 422 946 q 477 1005 477 972 q 440 1053 477 1036 q 340 1069 403 1069 l 345 1122 q 491 1090 438 1122 q 545 1004 545 1058 q 514 931 545 960 q 425 899 483 903 l 425 857 l 363 857 z "},\u1EA4:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 395 1213 l 473 1213 l 656 1049 l 561 1049 l 434 1166 l 307 1049 l 212 1049 l 395 1213 m 713 1319 l 806 1319 l 683 1162 l 614 1162 l 713 1319 z "},\u1EA5:{ha:744,x_min:68,x_max:764,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 352 1000 l 431 1000 l 613 836 l 518 836 l 391 954 l 264 836 l 169 836 l 352 1000 m 671 1106 l 764 1106 l 640 949 l 571 949 l 671 1106 z "},\u1EA6:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 655 1048 l 559 1048 l 433 1165 l 306 1048 l 211 1048 l 393 1212 l 472 1212 l 655 1048 m 253 1161 l 184 1161 l 62 1318 l 153 1318 l 253 1161 z "},\u1EA7:{ha:744,x_min:19,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 612 834 l 517 834 l 390 951 l 263 834 l 168 834 l 351 998 l 429 998 l 612 834 m 210 947 l 142 947 l 19 1104 l 111 1104 l 210 947 z "},\u1EA8:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 658 1061 l 572 1061 l 435 1187 l 300 1061 l 214 1061 l 390 1225 l 481 1225 l 658 1061 m 628 1146 l 627 1222 q 699 1235 678 1225 q 720 1271 720 1245 q 609 1323 720 1323 l 612 1373 q 737 1346 691 1373 q 783 1273 783 1318 q 682 1181 783 1192 l 682 1146 l 628 1146 z "},\u1EA9:{ha:744,x_min:68,x_max:741,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 615 848 l 529 848 l 393 974 l 257 848 l 171 848 l 347 1012 l 438 1012 l 615 848 m 585 933 l 585 1009 q 656 1022 635 1013 q 677 1058 677 1032 q 566 1110 677 1110 l 570 1160 q 694 1133 648 1160 q 741 1060 741 1105 q 640 968 741 979 l 640 933 l 585 933 z "},\u1EAA:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 656 1044 l 570 1044 l 433 1160 l 298 1044 l 212 1044 l 401 1202 l 466 1202 l 656 1044 m 610 1343 q 581 1273 610 1303 q 511 1243 553 1243 q 474 1250 490 1243 q 433 1275 458 1256 q 396 1298 408 1294 q 370 1303 385 1303 q 331 1284 347 1303 q 315 1239 315 1265 l 272 1248 q 301 1324 272 1292 q 370 1356 331 1356 q 444 1326 403 1356 q 511 1296 484 1296 q 550 1312 534 1296 q 566 1354 566 1328 l 610 1343 z "},\u1EAB:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 613 831 l 527 831 l 391 947 l 255 831 l 169 831 l 359 989 l 423 989 l 613 831 m 567 1131 q 538 1060 567 1090 q 469 1030 510 1030 q 431 1037 447 1030 q 390 1062 415 1043 q 353 1085 365 1081 q 327 1090 342 1090 q 289 1071 304 1090 q 273 1026 273 1053 l 229 1035 q 259 1111 229 1079 q 327 1143 288 1143 q 401 1113 360 1143 q 469 1083 441 1083 q 508 1099 492 1083 q 524 1141 524 1115 l 567 1131 z "},\u1EAC:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 625 1074 l 625 1067 l 549 1067 l 435 1191 l 322 1067 l 248 1067 l 248 1076 l 410 1249 l 461 1249 l 625 1074 m 389 -157 q 404 -118 389 -134 q 444 -102 418 -102 q 486 -118 471 -102 q 500 -157 500 -134 q 486 -195 500 -179 q 444 -210 471 -210 q 404 -195 418 -210 q 389 -157 389 -179 z "},\u1EAD:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 582 860 l 582 853 l 507 853 l 393 977 l 279 853 l 205 853 l 205 862 l 367 1035 l 418 1035 l 582 860 m 282 -157 q 297 -118 282 -134 q 338 -102 312 -102 q 379 -118 364 -102 q 394 -157 394 -134 q 379 -195 394 -179 q 338 -210 364 -210 q 297 -195 312 -210 q 282 -157 282 -179 z "},\u1EAE:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 629 1205 q 574 1102 629 1141 q 431 1063 519 1063 q 287 1102 341 1063 q 232 1205 232 1141 l 302 1205 q 336 1135 302 1159 q 431 1110 370 1110 q 525 1136 491 1110 q 558 1205 558 1162 l 629 1205 m 484 1340 l 557 1340 l 442 1200 l 389 1200 l 484 1340 z "},\u1EAF:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 586 991 q 531 888 586 927 q 388 850 477 850 q 244 888 298 850 q 189 991 189 927 l 259 991 q 293 921 259 945 q 388 897 328 897 q 482 922 448 897 q 515 991 515 948 l 586 991 m 441 1126 l 515 1126 l 399 987 l 346 987 l 441 1126 z "},\u1EB0:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 629 1205 q 574 1102 629 1141 q 431 1063 519 1063 q 287 1102 341 1063 q 232 1205 232 1141 l 302 1205 q 336 1135 302 1159 q 431 1110 370 1110 q 525 1136 491 1110 q 558 1205 558 1162 l 629 1205 m 305 1340 l 379 1340 l 473 1200 l 420 1200 l 305 1340 z "},\u1EB1:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 586 991 q 531 888 586 927 q 388 850 477 850 q 244 888 298 850 q 189 991 189 927 l 259 991 q 293 921 259 945 q 388 897 328 897 q 482 922 448 897 q 515 991 515 948 l 586 991 m 262 1126 l 336 1126 l 431 987 l 378 987 l 262 1126 z "},\u1EB2:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 618 1206 q 567 1105 618 1144 q 427 1067 515 1067 q 287 1105 338 1067 q 235 1206 235 1144 l 302 1206 q 335 1138 302 1162 q 427 1114 368 1114 q 518 1138 486 1114 q 550 1206 550 1163 l 618 1206 m 401 1206 l 400 1278 q 484 1293 458 1282 q 509 1332 509 1304 q 474 1371 509 1357 q 378 1385 439 1385 l 383 1426 q 524 1400 473 1426 q 575 1331 575 1375 q 546 1271 575 1294 q 460 1243 516 1248 l 460 1206 l 401 1206 z "},\u1EB3:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 576 993 q 524 892 576 930 q 384 853 472 853 q 244 892 296 853 q 192 993 192 930 l 259 993 q 292 924 259 948 q 384 900 325 900 q 475 925 443 900 q 507 993 507 949 l 576 993 m 358 992 l 357 1065 q 441 1079 415 1068 q 467 1118 467 1090 q 432 1157 467 1143 q 336 1171 397 1171 l 340 1213 q 481 1187 431 1213 q 532 1117 532 1161 q 503 1057 532 1080 q 417 1029 473 1034 l 417 992 l 358 992 z "},\u1EB4:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 620 1204 q 569 1100 620 1141 q 431 1060 517 1060 q 293 1100 345 1060 q 242 1204 242 1141 l 311 1204 q 342 1134 311 1159 q 431 1108 374 1108 q 519 1134 488 1108 q 550 1204 550 1159 l 620 1204 m 617 1372 q 585 1293 617 1324 q 508 1263 553 1263 q 470 1269 486 1263 q 427 1293 454 1274 q 387 1315 399 1311 q 361 1318 376 1318 q 316 1301 335 1318 q 298 1255 298 1284 l 253 1265 q 284 1343 253 1312 q 361 1374 315 1374 q 433 1349 394 1374 q 483 1320 471 1324 q 508 1317 494 1317 q 553 1336 534 1317 q 572 1383 572 1354 l 617 1372 z "},\u1EB5:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 577 991 q 526 887 577 927 q 389 846 475 846 q 251 887 302 846 q 199 991 199 927 l 269 991 q 300 920 269 945 q 389 895 331 895 q 476 920 445 895 q 507 991 507 945 l 577 991 m 574 1158 q 542 1080 574 1110 q 465 1049 510 1049 q 428 1055 444 1049 q 384 1079 412 1061 q 345 1101 356 1097 q 319 1105 333 1105 q 274 1087 292 1105 q 255 1042 255 1070 l 210 1052 q 241 1129 210 1098 q 319 1160 273 1160 q 390 1135 351 1160 q 440 1107 429 1110 q 465 1103 452 1103 q 511 1122 492 1103 q 530 1170 530 1141 l 574 1158 z "},\u1EB6:{ha:867,x_min:20,x_max:847,o:"m 658 277 l 210 277 l 108 0 l 20 0 l 394 987 l 473 987 l 847 0 l 760 0 l 658 277 m 235 348 l 631 348 l 433 886 l 235 348 m 631 1226 q 578 1100 631 1148 q 435 1052 525 1052 q 293 1100 347 1052 q 239 1226 239 1147 l 309 1226 q 342 1140 309 1170 q 435 1110 376 1110 q 529 1141 495 1110 q 562 1226 562 1173 l 631 1226 m 389 -157 q 404 -118 389 -134 q 444 -102 418 -102 q 486 -118 471 -102 q 500 -157 500 -134 q 486 -195 500 -179 q 444 -210 471 -210 q 404 -195 418 -210 q 389 -157 389 -179 z "},\u1EB7:{ha:744,x_min:68,x_max:656,o:"m 569 0 q 553 102 557 35 q 445 17 511 47 q 304 -14 378 -14 q 133 45 199 -14 q 68 195 68 104 q 157 364 68 302 q 406 427 246 427 l 553 427 l 553 510 q 504 634 553 589 q 363 679 456 679 q 222 635 278 679 q 167 531 167 592 l 85 532 q 167 683 85 619 q 367 747 248 747 q 561 686 490 747 q 633 515 631 625 l 633 168 q 656 8 633 61 l 656 0 l 569 0 m 314 58 q 459 98 395 58 q 553 203 524 137 l 553 364 l 408 364 q 218 320 286 363 q 149 201 149 277 q 195 99 149 140 q 314 58 241 58 m 589 1013 q 535 886 589 935 q 393 838 482 838 q 251 886 304 838 q 197 1013 197 934 l 266 1013 q 299 926 266 956 q 393 897 333 897 q 486 928 452 897 q 519 1013 519 959 l 589 1013 m 282 -157 q 297 -118 282 -134 q 338 -102 312 -102 q 379 -118 364 -102 q 394 -157 394 -134 q 379 -195 394 -179 q 338 -210 364 -210 q 297 -195 312 -210 q 282 -157 282 -179 z "},\u1EB8:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 360 -150 q 375 -111 360 -127 q 416 -95 390 -95 q 457 -111 442 -95 q 472 -150 472 -127 q 457 -188 472 -172 q 416 -203 442 -203 q 375 -188 390 -203 q 360 -150 360 -172 z "},\u1EB9:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 324 -155 q 339 -116 324 -132 q 380 -100 354 -100 q 421 -116 406 -100 q 436 -155 436 -132 q 421 -193 436 -178 q 380 -209 406 -209 q 339 -193 354 -209 q 324 -155 324 -178 z "},\u1EBA:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 391 1074 l 391 1159 q 477 1177 450 1164 q 504 1223 504 1190 q 467 1270 504 1253 q 368 1287 430 1287 l 372 1339 q 518 1308 465 1339 q 572 1222 572 1276 q 541 1149 572 1177 q 452 1116 510 1121 l 452 1074 l 391 1074 z "},\u1EBB:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 355 856 l 355 941 q 441 959 414 945 q 468 1004 468 972 q 431 1052 468 1035 q 332 1069 394 1069 l 336 1121 q 483 1089 429 1121 q 536 1004 536 1057 q 505 931 536 959 q 416 898 474 903 l 416 856 l 355 856 z "},\u1EBC:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 651 1231 q 613 1126 651 1166 q 519 1086 574 1086 q 418 1124 467 1086 q 330 1161 369 1161 q 277 1140 298 1161 q 256 1081 256 1119 l 195 1083 q 232 1186 195 1145 q 327 1227 269 1227 q 382 1215 359 1227 q 426 1190 406 1204 q 467 1164 446 1175 q 515 1152 488 1152 q 569 1175 547 1152 q 591 1235 591 1197 l 651 1231 z "},\u1EBD:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 615 1013 q 577 908 615 947 q 483 868 538 868 q 382 905 431 868 q 294 943 333 943 q 241 922 262 943 q 220 863 220 901 l 159 865 q 196 968 159 927 q 291 1008 233 1008 q 347 997 323 1008 q 390 971 370 985 q 431 945 410 957 q 479 934 452 934 q 533 956 511 934 q 555 1017 555 979 l 615 1013 z "},\u1EBE:{ha:790,x_min:125,x_max:791,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 379 1217 l 458 1217 l 640 1053 l 545 1053 l 418 1171 l 292 1053 l 196 1053 l 379 1217 m 698 1323 l 791 1323 l 667 1166 l 598 1166 l 698 1323 z "},\u1EBF:{ha:718,x_min:61,x_max:755,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 343 1000 l 422 1000 l 604 836 l 509 836 l 382 953 l 256 836 l 160 836 l 343 1000 m 662 1105 l 755 1105 l 631 949 l 562 949 l 662 1105 z "},\u1EC0:{ha:790,x_min:46,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 640 1052 l 544 1052 l 417 1169 l 290 1052 l 195 1052 l 378 1216 l 456 1216 l 640 1052 m 237 1165 l 169 1165 l 46 1322 l 138 1322 l 237 1165 z "},\u1EC1:{ha:718,x_min:10,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 604 833 l 508 833 l 381 951 l 254 833 l 159 833 l 342 998 l 420 998 l 604 833 m 201 947 l 133 947 l 10 1103 l 102 1103 l 201 947 z "},\u1EC2:{ha:790,x_min:125,x_max:768,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 642 1065 l 556 1065 l 420 1191 l 284 1065 l 198 1065 l 374 1229 l 465 1229 l 642 1065 m 612 1150 l 612 1226 q 684 1239 663 1230 q 705 1275 705 1249 q 593 1327 705 1327 l 597 1377 q 722 1350 675 1377 q 768 1277 768 1322 q 667 1185 768 1196 l 667 1150 l 612 1150 z "},\u1EC3:{ha:718,x_min:61,x_max:732,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 606 847 l 520 847 l 384 973 l 248 847 l 162 847 l 338 1011 l 429 1011 l 606 847 m 576 932 l 576 1008 q 648 1022 627 1012 q 669 1057 669 1031 q 557 1109 669 1109 l 561 1160 q 686 1132 640 1160 q 732 1059 732 1105 q 631 968 732 978 l 631 932 l 576 932 z "},\u1EC4:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 640 1048 l 554 1048 l 418 1164 l 282 1048 l 196 1048 l 386 1206 l 450 1206 l 640 1048 m 594 1348 q 566 1277 594 1307 q 496 1247 537 1247 q 458 1254 474 1247 q 417 1279 442 1260 q 380 1302 392 1298 q 354 1307 369 1307 q 316 1288 332 1307 q 300 1243 300 1270 l 256 1252 q 286 1328 256 1296 q 354 1360 315 1360 q 428 1330 387 1360 q 496 1300 469 1300 q 535 1316 519 1300 q 551 1358 551 1332 l 594 1348 z "},\u1EC5:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 604 830 l 518 830 l 382 947 l 246 830 l 160 830 l 350 988 l 414 988 l 604 830 m 558 1130 q 530 1059 558 1089 q 460 1029 501 1029 q 422 1036 438 1029 q 381 1061 406 1042 q 345 1085 356 1080 q 318 1089 333 1089 q 280 1070 296 1089 q 264 1025 264 1052 l 220 1034 q 250 1110 220 1078 q 318 1142 279 1142 q 392 1112 351 1142 q 460 1082 433 1082 q 499 1098 483 1082 q 515 1140 515 1114 l 558 1130 z "},\u1EC6:{ha:790,x_min:125,x_max:739,o:"m 670 473 l 208 473 l 208 71 l 739 71 l 739 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 544 l 670 544 l 670 473 m 609 1078 l 609 1071 l 534 1071 l 420 1195 l 307 1071 l 233 1071 l 233 1080 l 394 1253 l 446 1253 l 609 1078 m 360 -150 q 375 -111 360 -127 q 416 -95 390 -95 q 457 -111 442 -95 q 472 -150 472 -127 q 457 -188 472 -172 q 416 -203 442 -203 q 375 -188 390 -203 q 360 -150 360 -172 z "},\u1EC7:{ha:718,x_min:61,x_max:665,o:"m 390 -14 q 221 33 296 -14 q 103 161 145 79 q 61 346 61 243 l 61 375 q 102 566 61 481 q 216 699 143 650 q 375 747 290 747 q 587 656 509 747 q 665 407 665 565 l 665 361 l 142 361 l 142 346 q 213 138 142 221 q 393 55 285 55 q 508 79 458 55 q 599 155 558 102 l 650 116 q 390 -14 560 -14 m 375 678 q 221 611 283 678 q 144 431 158 544 l 585 431 l 585 439 q 524 612 581 545 q 375 678 467 678 m 573 860 l 573 853 l 498 853 l 384 977 l 271 853 l 197 853 l 197 862 l 358 1035 l 410 1035 l 573 860 m 324 -155 q 339 -116 324 -132 q 380 -100 354 -100 q 421 -116 406 -100 q 436 -155 436 -132 q 421 -193 436 -178 q 380 -209 406 -209 q 339 -193 354 -209 q 324 -155 324 -178 z "},\u1EC8:{ha:370,x_min:133,x_max:337,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 156 1074 l 156 1159 q 242 1177 215 1164 q 269 1223 269 1190 q 232 1270 269 1253 q 133 1287 195 1287 l 138 1339 q 284 1308 231 1339 q 337 1222 337 1276 q 306 1149 337 1177 q 218 1116 275 1121 l 217 1074 l 156 1074 z "},\u1EC9:{ha:309,x_min:104,x_max:308,o:"m 195 0 l 114 0 l 114 734 l 195 734 l 195 0 m 127 848 l 127 932 q 213 950 186 937 q 240 996 240 964 q 203 1044 240 1027 q 104 1061 166 1061 l 109 1113 q 255 1081 201 1113 q 308 996 308 1049 q 277 923 308 951 q 189 890 246 895 l 188 848 l 127 848 z "},\u1ECA:{ha:370,x_min:125,x_max:237,o:"m 227 0 l 143 0 l 143 987 l 227 987 l 227 0 m 125 -154 q 140 -115 125 -131 q 181 -99 155 -99 q 222 -115 208 -99 q 237 -154 237 -131 q 222 -192 237 -176 q 181 -208 208 -208 q 140 -192 155 -208 q 125 -154 125 -176 z "},\u1ECB:{ha:311,x_min:96,x_max:213,o:"m 197 0 l 115 0 l 115 734 l 197 734 l 197 0 m 101 946 q 116 985 101 969 q 157 1001 131 1001 q 198 985 182 1001 q 213 946 213 969 q 198 907 213 923 q 157 892 182 892 q 116 907 131 892 q 101 946 101 923 m 96 -150 q 111 -111 96 -127 q 151 -95 125 -95 q 193 -111 178 -95 q 208 -150 208 -127 q 193 -188 208 -172 q 151 -203 178 -203 q 111 -188 125 -203 q 96 -150 96 -172 z "},\u1ECC:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 412 -157 q 427 -118 412 -134 q 467 -102 441 -102 q 509 -118 494 -102 q 524 -157 524 -134 q 509 -195 524 -179 q 467 -210 494 -210 q 427 -195 441 -210 q 412 -157 412 -179 z "},\u1ECD:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 330 -159 q 345 -120 330 -136 q 386 -104 360 -104 q 427 -120 412 -104 q 442 -159 442 -136 q 427 -197 442 -182 q 386 -213 412 -213 q 345 -197 360 -213 q 330 -159 330 -182 z "},\u1ECE:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 439 1078 l 439 1163 q 526 1181 498 1168 q 553 1227 553 1194 q 516 1274 553 1257 q 416 1291 479 1291 l 421 1343 q 567 1312 514 1343 q 621 1226 621 1280 q 590 1153 621 1181 q 501 1120 559 1125 l 500 1078 l 439 1078 z "},\u1ECF:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 358 856 l 358 941 q 444 959 417 945 q 471 1004 471 972 q 434 1052 471 1035 q 335 1069 397 1069 l 340 1121 q 486 1089 433 1121 q 539 1004 539 1057 q 508 931 539 959 q 420 898 477 903 l 419 856 l 358 856 z "},\u1ED0:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 428 1221 l 507 1221 l 689 1057 l 594 1057 l 467 1175 l 340 1057 l 245 1057 l 428 1221 m 747 1327 l 840 1327 l 716 1171 l 647 1171 l 747 1327 z "},\u1ED1:{ha:778,x_min:61,x_max:758,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 347 1000 l 425 1000 l 608 836 l 513 836 l 386 953 l 259 836 l 163 836 l 347 1000 m 665 1105 l 758 1105 l 635 949 l 566 949 l 665 1105 z "},\u1ED2:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 688 1056 l 593 1056 l 466 1173 l 339 1056 l 244 1056 l 427 1220 l 505 1220 l 688 1056 m 286 1169 l 218 1169 l 95 1326 l 186 1326 l 286 1169 z "},\u1ED3:{ha:778,x_min:14,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 607 833 l 511 833 l 385 951 l 258 833 l 163 833 l 345 998 l 424 998 l 607 833 m 205 947 l 136 947 l 14 1103 l 105 1103 l 205 947 z "},\u1ED4:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 691 1069 l 605 1069 l 469 1195 l 333 1069 l 247 1069 l 423 1233 l 514 1233 l 691 1069 m 661 1154 l 661 1230 q 732 1243 711 1234 q 753 1279 753 1253 q 642 1331 753 1331 l 646 1381 q 770 1354 724 1381 q 817 1281 817 1326 q 715 1190 817 1200 l 715 1154 l 661 1154 z "},\u1ED5:{ha:778,x_min:61,x_max:735,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 610 847 l 524 847 l 387 973 l 252 847 l 165 847 l 342 1011 l 433 1011 l 610 847 m 580 932 l 579 1008 q 651 1022 630 1012 q 672 1057 672 1031 q 561 1109 672 1109 l 564 1160 q 689 1132 643 1160 q 735 1059 735 1105 q 634 968 735 978 l 634 932 l 580 932 z "},\u1ED6:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 689 1052 l 603 1052 l 467 1168 l 331 1052 l 245 1052 l 435 1210 l 499 1210 l 689 1052 m 643 1352 q 614 1281 643 1311 q 545 1251 586 1251 q 507 1258 523 1251 q 466 1283 491 1264 q 429 1306 441 1302 q 403 1311 418 1311 q 365 1292 380 1311 q 349 1247 349 1274 l 305 1256 q 335 1332 305 1300 q 403 1364 364 1364 q 477 1334 436 1364 q 545 1304 517 1304 q 584 1320 568 1304 q 600 1362 600 1336 l 643 1352 z "},\u1ED7:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 608 830 l 522 830 l 385 947 l 250 830 l 163 830 l 353 988 l 418 988 l 608 830 m 562 1130 q 533 1059 562 1089 q 463 1029 505 1029 q 426 1036 441 1029 q 385 1061 410 1042 q 348 1085 359 1080 q 321 1089 336 1089 q 283 1070 299 1089 q 267 1025 267 1052 l 224 1034 q 253 1110 224 1078 q 321 1142 283 1142 q 395 1112 355 1142 q 463 1082 436 1082 q 502 1098 486 1082 q 518 1140 518 1114 l 562 1130 z "},\u1ED8:{ha:940,x_min:85,x_max:854,o:"m 854 440 q 807 201 854 304 q 673 42 760 98 q 471 -14 585 -14 q 191 110 298 -14 q 85 444 85 234 l 85 546 q 133 785 85 681 q 268 945 180 889 q 469 1001 355 1001 q 670 946 583 1001 q 805 791 758 891 q 854 558 852 690 l 854 440 m 771 547 q 690 827 771 726 q 469 928 610 928 q 250 826 332 928 q 168 543 168 725 l 168 440 q 250 162 168 264 q 471 59 331 59 q 692 160 612 59 q 771 443 771 262 l 771 547 m 658 1082 l 658 1075 l 583 1075 l 469 1199 l 355 1075 l 281 1075 l 281 1084 l 443 1257 l 494 1257 l 658 1082 m 412 -157 q 427 -118 412 -134 q 467 -102 441 -102 q 509 -118 494 -102 q 524 -157 524 -134 q 509 -195 524 -179 q 467 -210 494 -210 q 427 -195 441 -210 q 412 -157 412 -179 z "},\u1ED9:{ha:778,x_min:61,x_max:716,o:"m 61 378 q 102 568 61 484 q 218 700 143 653 q 388 747 293 747 q 625 645 534 747 q 716 372 716 542 l 716 355 q 675 164 716 249 q 559 33 634 79 q 389 -14 485 -14 q 152 89 243 -14 q 61 361 61 192 l 61 378 m 142 355 q 211 139 142 224 q 389 55 279 55 q 567 139 499 55 q 635 362 635 224 l 635 378 q 604 532 635 462 q 517 640 573 602 q 388 678 460 678 q 211 593 279 678 q 142 370 142 508 l 142 355 m 576 860 l 576 853 l 501 853 l 387 977 l 274 853 l 200 853 l 200 862 l 361 1035 l 413 1035 l 576 860 m 330 -159 q 345 -120 330 -136 q 386 -104 360 -104 q 427 -120 412 -104 q 442 -159 442 -136 q 427 -197 442 -182 q 386 -213 412 -213 q 345 -197 360 -213 q 330 -159 330 -182 z "},\u1EDA:{ha:968,x_min:90,x_max:982,o:"m 859 440 q 812 201 859 304 q 677 42 765 98 q 475 -14 590 -14 q 274 42 362 -14 q 138 200 186 98 q 90 435 90 302 l 90 546 q 137 784 90 680 q 272 944 184 888 q 474 1001 360 1001 q 638 966 566 1001 q 762 867 711 931 q 871 915 835 870 q 907 1061 907 959 l 982 1061 q 939 886 982 951 q 801 807 896 821 q 859 555 857 701 l 859 440 m 777 547 q 696 827 777 726 q 474 928 615 928 q 255 826 336 928 q 173 543 173 725 l 173 440 q 254 162 173 264 q 475 59 336 59 q 696 160 616 59 q 777 442 777 261 l 777 547 m 566 1257 l 664 1257 l 507 1067 l 436 1067 l 566 1257 z "},\u1EDB:{ha:777,x_min:60,x_max:803,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 620 650 530 747 q 707 689 681 654 q 733 812 733 724 l 803 812 q 767 661 803 713 q 660 596 732 608 q 715 386 713 506 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 141 355 q 209 139 141 224 q 389 55 277 55 q 566 139 498 55 q 634 362 634 224 l 634 378 q 566 593 634 508 q 387 678 497 678 q 210 593 278 678 q 141 370 141 508 l 141 355 m 476 1042 l 574 1042 l 418 852 l 347 852 l 476 1042 z "},\u1EDC:{ha:968,x_min:90,x_max:982,o:"m 859 440 q 812 201 859 304 q 677 42 765 98 q 475 -14 590 -14 q 274 42 362 -14 q 138 200 186 98 q 90 435 90 302 l 90 546 q 137 784 90 680 q 272 944 184 888 q 474 1001 360 1001 q 638 966 566 1001 q 762 867 711 931 q 871 915 835 870 q 907 1061 907 959 l 982 1061 q 939 886 982 951 q 801 807 896 821 q 859 555 857 701 l 859 440 m 777 547 q 696 827 777 726 q 474 928 615 928 q 255 826 336 928 q 173 543 173 725 l 173 440 q 254 162 173 264 q 475 59 336 59 q 696 160 616 59 q 777 442 777 261 l 777 547 m 534 1067 l 460 1067 l 307 1257 l 405 1257 l 534 1067 z "},\u1EDD:{ha:777,x_min:60,x_max:803,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 620 650 530 747 q 707 689 681 654 q 733 812 733 724 l 803 812 q 767 661 803 713 q 660 596 732 608 q 715 386 713 506 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 141 355 q 209 139 141 224 q 389 55 277 55 q 566 139 498 55 q 634 362 634 224 l 634 378 q 566 593 634 508 q 387 678 497 678 q 210 593 278 678 q 141 370 141 508 l 141 355 m 445 852 l 371 852 l 218 1042 l 315 1042 l 445 852 z "},\u1EDE:{ha:968,x_min:90,x_max:982,o:"m 859 440 q 812 201 859 304 q 677 42 765 98 q 475 -14 590 -14 q 274 42 362 -14 q 138 200 186 98 q 90 435 90 302 l 90 546 q 137 784 90 680 q 272 944 184 888 q 474 1001 360 1001 q 638 966 566 1001 q 762 867 711 931 q 871 915 835 870 q 907 1061 907 959 l 982 1061 q 939 886 982 951 q 801 807 896 821 q 859 555 857 701 l 859 440 m 777 547 q 696 827 777 726 q 474 928 615 928 q 255 826 336 928 q 173 543 173 725 l 173 440 q 254 162 173 264 q 475 59 336 59 q 696 160 616 59 q 777 442 777 261 l 777 547 m 455 1072 l 455 1156 q 541 1174 514 1161 q 568 1220 568 1187 q 531 1267 568 1251 q 432 1284 494 1284 l 437 1337 q 583 1305 530 1337 q 636 1219 636 1273 q 605 1146 636 1175 q 517 1114 574 1118 l 516 1072 l 455 1072 z "},\u1EDF:{ha:777,x_min:60,x_max:803,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 620 650 530 747 q 707 689 681 654 q 733 812 733 724 l 803 812 q 767 661 803 713 q 660 596 732 608 q 715 386 713 506 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 141 355 q 209 139 141 224 q 389 55 277 55 q 566 139 498 55 q 634 362 634 224 l 634 378 q 566 593 634 508 q 387 678 497 678 q 210 593 278 678 q 141 370 141 508 l 141 355 m 366 856 l 366 941 q 452 959 425 945 q 479 1004 479 972 q 442 1052 479 1035 q 342 1069 405 1069 l 347 1121 q 493 1089 440 1121 q 547 1004 547 1057 q 516 931 547 959 q 427 898 485 903 l 427 856 l 366 856 z "},\u1EE0:{ha:968,x_min:90,x_max:982,o:"m 859 440 q 812 201 859 304 q 677 42 765 98 q 475 -14 590 -14 q 274 42 362 -14 q 138 200 186 98 q 90 435 90 302 l 90 546 q 137 784 90 680 q 272 944 184 888 q 474 1001 360 1001 q 638 966 566 1001 q 762 867 711 931 q 871 915 835 870 q 907 1061 907 959 l 982 1061 q 939 886 982 951 q 801 807 896 821 q 859 555 857 701 l 859 440 m 777 547 q 696 827 777 726 q 474 928 615 928 q 255 826 336 928 q 173 543 173 725 l 173 440 q 254 162 173 264 q 475 59 336 59 q 696 160 616 59 q 777 442 777 261 l 777 547 m 715 1228 q 677 1123 715 1163 q 583 1084 639 1084 q 483 1121 532 1084 q 395 1158 433 1158 q 341 1137 363 1158 q 320 1078 320 1116 l 259 1080 q 296 1183 259 1143 q 391 1224 333 1224 q 447 1213 424 1224 q 490 1187 470 1201 q 531 1161 511 1173 q 580 1149 552 1149 q 633 1172 611 1149 q 655 1232 655 1194 l 715 1228 z "},\u1EE1:{ha:777,x_min:60,x_max:803,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 620 650 530 747 q 707 689 681 654 q 733 812 733 724 l 803 812 q 767 661 803 713 q 660 596 732 608 q 715 386 713 506 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 141 355 q 209 139 141 224 q 389 55 277 55 q 566 139 498 55 q 634 362 634 224 l 634 378 q 566 593 634 508 q 387 678 497 678 q 210 593 278 678 q 141 370 141 508 l 141 355 m 626 1013 q 588 908 626 947 q 494 868 549 868 q 393 905 442 868 q 305 943 344 943 q 252 922 273 943 q 231 863 231 901 l 170 865 q 207 968 170 927 q 302 1008 243 1008 q 357 997 334 1008 q 401 971 380 985 q 442 945 421 957 q 490 934 463 934 q 544 956 522 934 q 566 1017 566 979 l 626 1013 z "},\u1EE2:{ha:968,x_min:90,x_max:982,o:"m 859 440 q 812 201 859 304 q 677 42 765 98 q 475 -14 590 -14 q 274 42 362 -14 q 138 200 186 98 q 90 435 90 302 l 90 546 q 137 784 90 680 q 272 944 184 888 q 474 1001 360 1001 q 638 966 566 1001 q 762 867 711 931 q 871 915 835 870 q 907 1061 907 959 l 982 1061 q 939 886 982 951 q 801 807 896 821 q 859 555 857 701 l 859 440 m 777 547 q 696 827 777 726 q 474 928 615 928 q 255 826 336 928 q 173 543 173 725 l 173 440 q 254 162 173 264 q 475 59 336 59 q 696 160 616 59 q 777 442 777 261 l 777 547 m 410 -157 q 425 -118 410 -134 q 465 -102 439 -102 q 507 -118 492 -102 q 522 -157 522 -134 q 507 -195 522 -179 q 465 -210 492 -210 q 425 -195 439 -210 q 410 -157 410 -179 z "},\u1EE3:{ha:777,x_min:60,x_max:803,o:"m 60 378 q 101 568 60 484 q 217 700 142 653 q 387 747 292 747 q 620 650 530 747 q 707 689 681 654 q 733 812 733 724 l 803 812 q 767 661 803 713 q 660 596 732 608 q 715 386 713 506 l 715 355 q 674 164 715 250 q 558 33 633 79 q 389 -14 484 -14 q 151 90 241 -14 q 60 361 60 193 l 60 378 m 141 355 q 209 139 141 224 q 389 55 277 55 q 566 139 498 55 q 634 362 634 224 l 634 378 q 566 593 634 508 q 387 678 497 678 q 210 593 278 678 q 141 370 141 508 l 141 355 m 335 -163 q 350 -124 335 -140 q 391 -108 365 -108 q 432 -124 417 -108 q 447 -163 447 -140 q 432 -201 447 -185 q 391 -216 417 -216 q 350 -201 365 -216 q 335 -163 335 -185 z "},\u1EE4:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 397 -157 q 412 -118 397 -134 q 453 -102 427 -102 q 494 -118 479 -102 q 509 -157 509 -134 q 494 -195 509 -179 q 453 -210 479 -210 q 412 -195 427 -210 q 397 -157 397 -179 z "},\u1EE5:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 287 -157 q 302 -118 287 -134 q 342 -102 317 -102 q 384 -118 369 -102 q 399 -157 399 -134 q 384 -195 399 -179 q 342 -210 369 -210 q 302 -195 317 -210 q 287 -157 287 -179 z "},\u1EE6:{ha:913,x_min:110,x_max:805,o:"m 805 987 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 433 1070 l 433 1155 q 519 1173 492 1160 q 547 1219 547 1186 q 510 1266 547 1249 q 410 1283 473 1283 l 415 1335 q 561 1303 508 1335 q 614 1218 614 1272 q 584 1145 614 1173 q 495 1112 553 1117 l 494 1070 l 433 1070 z "},\u1EE7:{ha:763,x_min:103,x_max:658,o:"m 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 0 l 579 0 l 578 93 m 359 857 l 359 941 q 446 959 418 946 q 473 1005 473 972 q 436 1053 473 1036 q 336 1069 399 1069 l 341 1122 q 487 1090 434 1122 q 541 1004 541 1058 q 510 931 541 960 q 421 899 479 903 l 420 857 l 359 857 z "},\u1EE8:{ha:945,x_min:110,x_max:1028,o:"m 805 987 l 805 844 q 921 896 886 850 q 956 1047 956 942 l 1028 1047 q 973 849 1028 913 q 805 781 918 786 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 542 1259 l 640 1259 l 484 1069 l 412 1069 l 542 1259 z "},\u1EE9:{ha:814,x_min:103,x_max:842,o:"m 842 800 q 797 640 842 688 q 658 587 753 591 l 658 0 l 579 0 l 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 644 q 764 703 743 648 q 774 800 774 730 l 842 800 m 475 1027 l 573 1027 l 416 838 l 345 838 l 475 1027 z "},\u1EEA:{ha:945,x_min:110,x_max:1028,o:"m 805 987 l 805 844 q 921 896 886 850 q 956 1047 956 942 l 1028 1047 q 973 849 1028 913 q 805 781 918 786 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 511 1069 l 437 1069 l 283 1259 l 381 1259 l 511 1069 z "},\u1EEB:{ha:814,x_min:103,x_max:842,o:"m 842 800 q 797 640 842 688 q 658 587 753 591 l 658 0 l 579 0 l 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 644 q 764 703 743 648 q 774 800 774 730 l 842 800 m 444 838 l 370 838 l 216 1027 l 314 1027 l 444 838 z "},\u1EEC:{ha:945,x_min:110,x_max:1028,o:"m 805 987 l 805 844 q 921 896 886 850 q 956 1047 956 942 l 1028 1047 q 973 849 1028 913 q 805 781 918 786 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 431 1074 l 431 1159 q 517 1177 490 1164 q 545 1223 545 1190 q 508 1270 545 1253 q 408 1287 471 1287 l 413 1339 q 559 1308 506 1339 q 612 1222 612 1276 q 582 1149 612 1177 q 493 1116 551 1121 l 492 1074 l 431 1074 z "},\u1EED:{ha:814,x_min:103,x_max:842,o:"m 842 800 q 797 640 842 688 q 658 587 753 591 l 658 0 l 579 0 l 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 644 q 764 703 743 648 q 774 800 774 730 l 842 800 m 364 842 l 364 926 q 450 944 423 931 q 477 990 477 958 q 440 1038 477 1021 q 341 1055 404 1055 l 346 1107 q 492 1075 439 1107 q 545 989 545 1043 q 514 917 545 945 q 426 884 484 888 l 425 842 l 364 842 z "},\u1EEE:{ha:945,x_min:110,x_max:1028,o:"m 805 987 l 805 844 q 921 896 886 850 q 956 1047 956 942 l 1028 1047 q 973 849 1028 913 q 805 781 918 786 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 692 1231 q 653 1126 692 1166 q 559 1086 615 1086 q 459 1124 508 1086 q 371 1161 410 1161 q 318 1140 339 1161 q 296 1081 296 1119 l 235 1083 q 272 1186 235 1145 q 368 1227 309 1227 q 423 1215 400 1227 q 467 1190 446 1204 q 508 1164 487 1175 q 556 1152 528 1152 q 609 1175 587 1152 q 631 1235 631 1197 l 692 1231 z "},\u1EEF:{ha:814,x_min:103,x_max:842,o:"m 842 800 q 797 640 842 688 q 658 587 753 591 l 658 0 l 579 0 l 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 644 q 764 703 743 648 q 774 800 774 730 l 842 800 m 625 999 q 586 894 625 934 q 492 854 548 854 q 392 892 441 854 q 304 929 342 929 q 251 908 272 929 q 229 849 229 887 l 168 851 q 205 954 168 913 q 300 995 242 995 q 356 983 333 995 q 399 958 379 972 q 440 932 420 943 q 489 920 461 920 q 542 943 520 920 q 564 1003 564 965 l 625 999 z "},\u1EF0:{ha:945,x_min:110,x_max:1028,o:"m 805 987 l 805 844 q 921 896 886 850 q 956 1047 956 942 l 1028 1047 q 973 849 1028 913 q 805 781 918 786 l 805 313 q 761 140 804 214 q 638 26 718 66 q 457 -14 559 -14 q 207 72 301 -14 q 110 307 113 157 l 110 987 l 193 987 l 193 319 q 264 126 193 195 q 457 57 335 57 q 650 126 579 57 q 721 319 721 195 l 721 987 l 805 987 m 395 -159 q 410 -120 395 -136 q 451 -104 425 -104 q 492 -120 477 -104 q 507 -159 507 -136 q 492 -197 507 -181 q 451 -212 477 -212 q 410 -197 425 -212 q 395 -159 395 -181 z "},\u1EF1:{ha:814,x_min:103,x_max:842,o:"m 842 800 q 797 640 842 688 q 658 587 753 591 l 658 0 l 579 0 l 578 93 q 344 -14 505 -14 q 165 55 227 -14 q 103 256 104 123 l 103 734 l 184 734 l 184 267 q 353 57 184 57 q 576 203 530 57 l 576 734 l 658 734 l 658 644 q 764 703 743 648 q 774 800 774 730 l 842 800 m 321 -157 q 336 -118 321 -134 q 376 -102 351 -102 q 418 -118 403 -102 q 433 -157 433 -134 q 418 -195 433 -179 q 376 -210 403 -210 q 336 -195 351 -210 q 321 -157 321 -179 z "},\u1EF4:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 m 356 -153 q 371 -114 356 -130 q 412 -98 386 -98 q 453 -114 438 -98 q 468 -153 468 -130 q 453 -191 468 -176 q 412 -207 438 -207 q 371 -191 386 -207 q 356 -153 356 -176 z "},\u1EF5:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 425 -263 q 439 -224 425 -240 q 480 -208 454 -208 q 522 -224 507 -208 q 536 -263 536 -240 q 522 -301 536 -286 q 480 -317 507 -317 q 439 -301 454 -317 q 425 -263 425 -286 z "},\u1EF6:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 m 386 1066 l 386 1151 q 472 1169 445 1156 q 499 1215 499 1182 q 462 1262 499 1245 q 363 1279 425 1279 l 368 1331 q 514 1299 460 1331 q 567 1214 567 1267 q 536 1141 567 1169 q 448 1108 505 1113 l 447 1066 l 386 1066 z "},\u1EF7:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 319 857 l 319 941 q 405 959 378 946 q 432 1005 432 972 q 395 1053 432 1036 q 296 1069 358 1069 l 300 1122 q 447 1090 393 1122 q 500 1004 500 1058 q 469 931 500 960 q 380 899 438 903 l 380 857 l 319 857 z "},\u1EF8:{ha:831,x_min:16,x_max:812,o:"m 414 449 l 716 987 l 812 987 l 456 372 l 456 0 l 372 0 l 372 372 l 16 987 l 115 987 l 414 449 m 646 1223 q 608 1118 646 1158 q 514 1078 570 1078 q 413 1116 463 1078 q 326 1153 364 1153 q 272 1132 294 1153 q 251 1073 251 1111 l 190 1075 q 227 1178 190 1137 q 322 1219 264 1219 q 378 1207 355 1219 q 421 1181 401 1196 q 462 1156 441 1167 q 511 1144 483 1144 q 564 1166 542 1144 q 586 1227 586 1189 l 646 1223 z "},\u1EF9:{ha:660,x_min:22,x_max:640,o:"m 338 117 l 553 734 l 640 734 l 327 -125 l 311 -163 q 124 -296 250 -296 q 62 -287 95 -296 l 61 -220 l 103 -224 q 200 -194 163 -224 q 262 -93 237 -165 l 298 6 l 22 734 l 111 734 l 338 117 m 579 1013 q 541 908 579 948 q 447 869 503 869 q 346 906 395 869 q 258 943 297 943 q 205 922 227 943 q 184 863 184 901 l 123 865 q 160 968 123 928 q 255 1009 197 1009 q 311 998 288 1009 q 354 972 334 986 q 395 946 374 958 q 444 935 416 935 q 497 957 475 935 q 519 1017 519 979 l 579 1013 z "},"\u20AB":{ha:792,x_min:73,x_max:783,o:"m 73 374 q 150 646 73 545 q 357 747 226 747 q 583 630 505 747 l 583 1042 l 664 1042 l 664 0 l 588 0 l 585 98 q 355 -14 507 -14 q 151 89 229 -14 q 73 364 73 191 l 73 374 m 155 359 q 212 138 155 219 q 370 57 268 57 q 583 189 520 57 l 583 534 q 372 677 520 677 q 212 596 269 677 q 155 359 155 516 m 783 852 l 368 852 l 368 922 l 783 922 l 783 852 m 713 -174 l 115 -174 l 115 -106 l 713 -106 l 713 -174 z "},\u04AC:{ha:829,x_min:35,x_max:795,o:"m 795 916 l 456 916 l 456 0 l 373 0 l 373 916 l 35 916 l 35 987 l 795 987 l 795 916 m 528 -241 l 446 -241 l 446 83 l 528 83 l 528 -241 z "},\u04AD:{ha:660,x_min:27,x_max:633,o:"m 633 665 l 366 665 l 366 0 l 284 0 l 284 665 l 27 665 l 27 734 l 633 734 l 633 665 m 439 -241 l 358 -241 l 358 83 l 439 83 l 439 -241 z "},\u04CB:{ha:924,x_min:117,x_max:798,o:"m 798 987 l 798 0 l 714 0 l 714 449 q 447 410 575 410 q 199 483 279 410 q 117 706 119 555 l 117 987 l 201 987 l 201 711 q 260 536 201 591 q 447 481 319 481 q 714 520 576 481 l 714 987 l 798 987 m 722 -241 l 641 -241 l 641 83 l 722 83 l 722 -241 z "},\u04CC:{ha:739,x_min:75,x_max:628,o:"m 628 0 l 547 0 l 547 309 q 355 272 446 272 q 143 336 209 272 q 75 536 77 400 l 75 734 l 155 734 l 155 540 q 202 388 157 435 q 355 342 247 342 q 547 377 453 345 l 547 734 l 628 734 l 628 0 m 553 -241 l 472 -241 l 472 83 l 553 83 l 553 -241 z "},"\u04F6":{ha:766,x_min:125,x_max:721,o:"m 721 916 l 209 916 l 209 0 l 125 0 l 125 987 l 721 987 l 721 916 m 281 -241 l 200 -241 l 200 83 l 281 83 l 281 -241 z "},"\u04F7":{ha:585,x_min:111,x_max:563,o:"m 563 664 l 192 664 l 192 0 l 111 0 l 111 734 l 563 734 l 563 664 m 264 -241 l 183 -241 l 183 83 l 264 83 l 264 -241 z "},\u04BE:{ha:1048,x_min:24,x_max:966,o:"m 640 -14 q 343 95 452 -14 q 234 399 234 205 l 234 497 q 78 568 132 508 q 24 730 24 629 l 95 730 q 129 617 95 661 q 234 563 163 573 l 234 585 q 282 798 234 702 q 414 947 330 894 q 600 1000 498 1000 q 869 884 772 1000 q 966 564 966 768 l 966 495 l 318 495 l 318 393 q 402 146 318 235 q 640 56 486 56 q 905 137 793 56 l 930 75 q 640 -14 825 -14 m 318 560 l 882 560 l 882 589 q 806 837 882 747 q 600 928 730 928 q 396 831 473 928 q 318 578 318 735 l 318 560 m 670 -302 l 589 -302 l 589 22 l 670 22 l 670 -302 z "},\u04BF:{ha:819,x_min:-7,x_max:751,o:"m 475 -14 q 306 33 382 -14 q 189 161 231 79 q 146 346 146 243 l 146 375 q 32 443 71 391 q -7 579 -7 495 l 62 579 q 151 439 62 466 q 256 662 169 577 q 460 747 342 747 q 672 656 594 747 q 751 407 751 565 l 751 361 l 227 361 l 227 346 q 299 138 227 221 q 479 55 370 55 q 594 79 544 55 q 684 155 644 102 l 735 116 q 475 -14 646 -14 m 460 678 q 306 611 369 678 q 230 431 243 544 l 670 431 l 670 439 q 610 612 667 545 q 460 678 553 678 m 515 -286 l 433 -286 l 433 39 l 515 39 l 515 -286 z "},\u04BB:{ha:762,x_min:106,x_max:659,o:"m 186 610 q 289 711 227 675 q 425 747 351 747 q 601 681 543 747 q 659 481 659 614 l 659 0 l 578 0 l 578 482 q 537 629 578 581 q 406 677 496 677 q 272 630 330 677 q 186 503 214 583 l 186 0 l 106 0 l 106 1042 l 186 1042 l 186 610 z "},\u048C:{ha:850,x_min:-2,x_max:776,o:"m 413 764 l 204 764 l 204 559 l 449 559 q 624 525 550 559 q 737 429 698 492 q 776 281 776 366 q 688 75 776 150 q 446 0 601 0 l 121 0 l 121 764 l -2 764 l -2 833 l 121 833 l 121 987 l 204 987 l 204 833 l 413 833 l 413 764 m 204 488 l 204 71 l 448 71 q 627 127 563 71 q 692 282 692 184 q 629 431 692 376 q 454 488 567 486 l 204 488 z "},\u0462:{ha:850,x_min:-2,x_max:776,o:"m 413 764 l 204 764 l 204 559 l 449 559 q 624 525 550 559 q 737 429 698 492 q 776 281 776 366 q 688 75 776 150 q 446 0 601 0 l 121 0 l 121 764 l -2 764 l -2 833 l 121 833 l 121 987 l 204 987 l 204 833 l 413 833 l 413 764 m 204 488 l 204 71 l 448 71 q 627 127 563 71 q 692 282 692 184 q 629 431 692 376 q 454 488 567 486 l 204 488 z "},\u0492:{ha:766,x_min:29,x_max:721,o:"m 444 479 l 209 479 l 209 0 l 125 0 l 125 479 l 29 479 l 29 549 l 125 549 l 125 987 l 721 987 l 721 916 l 209 916 l 209 549 l 444 549 l 444 479 z "},\u0493:{ha:585,x_min:0,x_max:563,o:"m 415 340 l 192 340 l 192 0 l 111 0 l 111 340 l 0 340 l 0 410 l 111 410 l 111 734 l 563 734 l 563 664 l 192 664 l 192 410 l 415 410 l 415 340 z "},\u049E:{ha:901,x_min:-9,x_max:873,o:"m 361 463 l 225 463 l 225 0 l 142 0 l 142 740 l -9 740 l -9 809 l 142 809 l 142 987 l 225 987 l 225 809 l 406 809 l 406 740 l 225 740 l 225 534 l 357 534 l 739 987 l 844 987 l 438 502 l 873 0 l 770 0 l 361 463 z "},\u049F:{ha:696,x_min:-7,x_max:690,o:"m 296 357 l 203 357 l 203 0 l 121 0 l 121 841 l -7 841 l -7 910 l 121 910 l 121 1042 l 203 1042 l 203 910 l 408 910 l 408 841 l 203 841 l 203 427 l 288 427 l 562 734 l 661 734 l 363 399 l 690 0 l 593 0 l 296 357 z "},\u04B0:{ha:831,x_min:16,x_max:812,o:"m 621 365 l 456 365 l 456 0 l 372 0 l 372 365 l 206 365 l 206 434 l 336 434 l 16 987 l 115 987 l 414 449 l 716 987 l 812 987 l 492 434 l 621 434 l 621 365 z "},\u04B1:{ha:680,x_min:30,x_max:653,o:"m 549 -3 l 382 -3 l 382 -281 l 301 -281 l 301 -3 l 134 -3 l 134 66 l 283 66 l 30 734 l 114 734 l 328 162 l 342 102 l 359 162 l 569 734 l 653 734 l 399 66 l 549 66 l 549 -3 z "},"\u04FE":{ha:850,x_min:37,x_max:813,o:"m 632 472 l 495 472 l 813 0 l 713 0 l 425 431 l 136 0 l 37 0 l 355 472 l 217 472 l 217 541 l 347 541 l 47 987 l 147 987 l 425 570 l 703 987 l 803 987 l 503 541 l 632 541 l 632 472 z "},"\u04FF":{ha:675,x_min:33,x_max:642,o:"m 548 342 l 404 342 l 642 0 l 546 0 l 337 311 l 128 0 l 33 0 l 269 342 l 133 342 l 133 411 l 266 411 l 43 734 l 138 734 l 336 436 l 534 734 l 631 734 l 408 411 l 548 411 l 548 342 z "},"\u0511":{ha:755,x_min:73,x_max:678,o:"m 73 201 q 225 376 73 337 q 122 443 158 400 q 85 538 85 486 q 162 692 85 637 q 373 747 239 747 q 582 687 498 747 q 666 536 666 627 l 585 536 q 524 638 585 597 q 373 678 463 678 q 223 642 278 678 q 168 540 168 605 q 376 408 168 408 l 496 408 l 496 340 l 366 340 q 209 307 262 340 q 155 200 155 273 q 214 95 155 134 q 373 55 273 55 q 533 99 470 55 q 597 210 597 143 l 678 210 q 592 47 678 109 q 373 -14 507 -14 q 155 45 238 -14 q 73 201 73 104 z "},"\u20A3":{ha:781,x_min:17,x_max:736,o:"m 669 461 l 208 461 l 208 0 l 125 0 l 125 987 l 736 987 l 736 916 l 208 916 l 208 532 l 669 532 l 669 461 m 432 196 l 17 196 l 17 265 l 432 265 l 432 196 z "},"\u2015":{ha:1072,x_min:85,x_max:991,o:"m 991 465 l 85 465 l 85 534 l 991 534 l 991 465 z "},\u1F4D:{ha:987,x_min:-258,x_max:902,o:"m 902 440 q 855 201 902 304 q 720 42 808 98 q 518 -14 633 -14 q 239 110 345 -14 q 132 444 132 234 l 132 546 q 180 785 132 681 q 315 945 228 889 q 517 1001 403 1001 q 718 946 631 1001 q 852 791 805 891 q 902 558 900 690 l 902 440 m 819 547 q 738 827 819 726 q 517 928 657 928 q 297 826 379 928 q 216 543 216 725 l 216 440 q 297 162 216 264 q 518 59 378 59 q 739 160 660 59 q 819 443 819 262 l 819 547 m -86 793 l 5 1009 l 92 1009 l 92 995 l -38 785 l -86 785 l -86 793 m -258 1009 l -182 1009 l -182 943 q -118 810 -180 859 l -151 777 q -230 846 -202 801 q -258 945 -258 890 l -258 1009 z "}},GK="Roboto Light",yK=1289,BK=-339,ZK=-102,vK=68,xK={yMin:-376,xMin:-1020,yMax:1467,xMax:1580},qK=1e3,wK={format:0,copyright:"Copyright 2011 Google Inc. All Rights Reserved.",fontFamily:"Roboto Light",fontSubfamily:"Regular",uniqueID:"Roboto Light",fullName:"Roboto Light",version:"Version 2.137; 2017",postScriptName:"Roboto-Light",trademark:"Roboto is a trademark of Google.",designer:"Google",manufacturerURL:"Google.com",designerURL:"Christian Robertson",licence:"Licensed under the Apache License, Version 2.0",licenceURL:"http://www.apache.org/licenses/LICENSE-2.0",preferredFamily:"Roboto",preferredSubfamily:"Light"},WK="normal",SK="normal",cs={glyphs:bK,familyName:GK,ascender:yK,descender:BK,underlinePosition:ZK,underlineThickness:vK,boundingBox:xK,resolution:qK,original_font_information:wK,cssFontWeight:WK,cssFontStyle:SK};function VK(){let i=Ht(Qt,"./src/3DImports/Tree/pine_tree/scene.gltf").scene,e=Ht(Qt,"./src/3DImports/signs/scene.gltf").scene,t=Ht(Qt,"./src/3DImports/grass_ground/scene.gltf").scene,n=Ht(Qt,"./src/3DImports/Pillar/greek/scene.gltf"),l=Ht(Qt,"./src/3DImports/Rock/scene.gltf").scene,s=Ht(Qt,"./src/3DImports/BigRock/scene.gltf").scene,o=Ht(Qt,"./src/3DImports/slide/scene.gltf").scene,g=Ht(Qt,"./src/3DImports/ShibaDog/scene.gltf").scene,r=Ht(Qt,"./src/3DImports/hologram_projector/scene.gltf");const[I,C]=Ce.exports.useState(),[u,d]=Ce.exports.useState();if(!I){const B=n.scene.clone(!0);C(B)}if(!u){const B=r.scene.clone(!0);d(B)}const[A,m]=Ce.exports.useState(!1),[f,p]=Ce.exports.useState(!1),b="location=yes,height=1670,width=1120,scrollbars=yes,status=yes";return lg(()=>{u.rotation.y-=.02}),Ce.exports.useEffect(()=>{I.scale.set(.003,.003,.003),s.scale.set(.0045,.0045,.0045),l.scale.set(5,5,5),e.scale.set(1.4,1.4,1.4),o.scale.set(.6,.6,.6),t.scale.set(.22,.09,.177),document.body.style.cursor=f?"pointer":"auto"},[f]),ln(no,{children:[Be("primitive",{object:I,rotation:[0,.3,0],position:[-7.06,.2,-6.9]}),Be("primitive",{object:l,position:[-9.5,.3,-4]}),Be("primitive",{object:s,rotation:[0,9.8,0],position:[-12.9,.2,-13]}),Be("primitive",{object:i,rotation:[0,7,0],position:[-7.1,-.19,-11]}),Be("primitive",{object:t,rotation:[0,0,0],position:[-3.4,.1,-4.6]}),Be("primitive",{object:o,rotation:[0,2,0],position:[-3.9,-.05,-12]}),Be("primitive",{object:g,rotation:[.3,0,0],position:[-9.5,2.3,-3.2]}),Be("primitive",{object:e,rotation:[0,.3,0],position:[-3,0,-7]}),Be("primitive",{onClick:B=>{m(!A)},onPointerOver:()=>p(!0),onPointerOut:()=>p(!1),object:u,rotation:[0,.3,0],position:[-7.15,2.31,-6.9]}),ln(Is,{font:cs,size:A?.5:0,height:.2,position:[-9.2,3,-6.4],rotation:[0,.4,0],children:["Projects Setion",Be("meshLambertMaterial",{color:16116704})]}),ln(Is,{onPointerOver:()=>p(!0),onPointerOut:()=>p(!1),onClick:B=>window.open("https://thehero9.github.io/Portfolio3.0/","_blank",b),font:cs,size:A?.5:0,height:.15,position:[-1.7,1.5,-7.3],rotation:[0,.3,0],children:["CV",Be("meshLambertMaterial",{color:16116704})]}),ln(Is,{onPointerOver:()=>p(!0),onPointerOut:()=>p(!1),onClick:B=>window.open("https://thehero9.github.io/NumberLe-The-Game/","_blank",b),font:cs,size:A?.4:0,height:.15,position:[-3.7,1.5,-6.7],rotation:[0,.3,0],children:["Game",Be("meshLambertMaterial",{color:16116704})]}),ln(Is,{onPointerOver:()=>p(!0),onPointerOut:()=>p(!1),onClick:B=>window.open("https://thehero9.github.io/Blog-react/","_blank",b),font:cs,size:A?.4:0,height:.15,position:[-5.3,1.7,-6.2],rotation:[0,.3,0],children:["Blog",Be("meshLambertMaterial",{color:16116704})]})]})}function RK(){let i=Ht(Qt,"./src/3DImports/calm_lake/scene.gltf").scene,e=Ht(Qt,"./src/3DImports/mystery_block/scene.gltf").scene,t=Ht(Qt,"./src/3DImports/Piranhas/scene.gltf").scene,n=Ht(Qt,"./src/3DImports/mario/scene.gltf").scene,l=Ht(Qt,"./src/3DImports/Pillar/greek/scene.gltf"),s=Ht(Qt,"./src/3DImports/hologram_projector/scene.gltf");const[o,g]=Ce.exports.useState(),[r,I]=Ce.exports.useState();if(!o){const f=l.scene.clone(!0);g(f)}if(!r){const f=s.scene.clone(!0);I(f)}const[C,u]=Ce.exports.useState(!1),[d,A]=Ce.exports.useState(!1);return lg(()=>{r.rotation.y+=.02}),Ce.exports.useEffect(()=>{o.scale.set(.003,.002,.003),i.scale.set(.11,.11,.11),t.scale.set(.01,.01,.01),e.scale.set(2,2,2),document.body.style.cursor=d?"pointer":"auto"},[d]),ln(no,{children:[Be("primitive",{object:i,rotation:[0,0,0],position:[8.1,-1.4,-8.1]}),Be("primitive",{object:e,rotation:[0,-.3,0],position:[5.6,4.4,-13]}),Be("primitive",{object:t,rotation:[0,0,0],position:[13.3,2.2,-12]}),Be("primitive",{object:o,rotation:[0,0,0],position:[5.47,1.7,-2.6]}),Be("primitive",{object:n,rotation:[0,0,0],position:[9.17,.2,-2.3]}),Be("primitive",{object:r,onClick:f=>{u(!C)},onPointerOver:()=>A(!0),onPointerOut:()=>A(!1),rotation:[0,0,0],position:[5.35,3.11,-2.6]}),ln(Is,{font:cs,size:C?.5:0,castShadow:"true",height:.1,...{},position:[2.9,3.71,-2.6],children:["Education Section",Be("meshLambertMaterial",{color:4691})]})]})}function XK(){let i=Ht(Qt,"./src/3DImports/road_straight/scene.gltf");const[e,t]=Ce.exports.useState(),[n,l]=Ce.exports.useState();if(!e){const s=i.scene.clone(!0);t(s);const o=i.scene.clone(!0);l(o)}return Ce.exports.useEffect(()=>{e.scale.set(.115,.115,.25)}),Be(no,{children:Be("primitive",{object:e,rotation:[0,Math.PI/2,0],position:[0,.1,2.3]})})}const Lp="/ThreeJsReactFiber/assets/wallTexture.2dc560c9.jpg",YK="/ThreeJsReactFiber/assets/githubProfile.6a04712e.jpg";function zK(){let i=Ht(Qt,"./src/3DImports/Myroom/wooden_shelf/scene.gltf");const[e,t]=Ce.exports.useState(),[n,l]=Ce.exports.useState(),[s,o]=Ce.exports.useState();if(!e){const X=i.scene.clone(!0);t(X);const k=i.scene.clone(!0);l(k);const $=i.scene.clone(!0);o($)}let g=Ht(Qt,"./src/3DImports/Myroom/computer_desk/scene.gltf").scene,r=Ht(Qt,"./src/3DImports/Myroom/tiles/scene.gltf").scene,I=Ht(Qt,"./src/3DImports/Myroom/laptop/scene.gltf").scene,C=Ht(Qt,"./src/3DImports/Myroom/mousepad/scene.gltf").scene,u=Ht(Qt,"./src/3DImports/Myroom/office_chair/scene.gltf").scene,d=Ht(Qt,"./src/3DImports/Myroom/shelf/scene.gltf").scene,A=Ht(Qt,"./src/3DImports/Pillar/greek/scene.gltf"),m=Ht(Qt,"./src/3DImports/hologram_projector/scene.gltf");const[f,p]=Ce.exports.useState(),[b,B]=Ce.exports.useState();if(!f){const X=A.scene.clone(!0);p(X)}if(!b){const X=m.scene.clone(!0);B(X)}const y=Ht(eI,Lp);Ht(eI,Lp);const[Z,q]=Ce.exports.useState(!1),[W,S]=Ce.exports.useState(!1),x="location=yes,height=1670,width=1120,scrollbars=yes,status=yes",V=Ht(eI,YK);return lg(()=>{b.rotation.y+=.02}),Ce.exports.useEffect(()=>{g.scale.set(1.4,1.4,1.4),I.scale.set(.1,.1,.1),C.scale.set(1.3,1.1,1.3),u.scale.set(.06,.06,.06),r.scale.set(.1,.05,.032),d.scale.set(5,5,5),e.scale.set(3,3,3),n.scale.set(3,3,3),s.scale.set(3,3,3),f.scale.set(.002,.0015,.002),b.scale.set(.6,.6,.6),document.body.style.cursor=W?"pointer":"auto"},[W]),ln(no,{children:[Be("primitive",{object:g,rotation:[0,-1*Math.PI,0],position:[-11,4.1,13]}),Be("primitive",{object:I,rotation:[0,-1*Math.PI,0],position:[-11.25,4.16,13.5]}),Be("primitive",{object:C,rotation:[0,-1*Math.PI,0],position:[-10.73,4.2,13.5]}),Be("primitive",{object:u,rotation:[0,-.35*Math.PI,0],position:[-18,.75,13]}),Be("primitive",{object:d,rotation:[0,-1*Math.PI,0],position:[-5.4,-.1,14]}),Be("primitive",{object:e,rotation:[0,-1*Math.PI,0],position:[-11.1,6.5,14.25]}),Be("primitive",{object:n,rotation:[0,-1*Math.PI,0],position:[-11.1,8.4,14.25]}),Be("primitive",{object:s,rotation:[0,-1*Math.PI,0],position:[-11.1,10.3,14.25]}),Be("primitive",{object:r,rotation:[0,-1*Math.PI,0],position:[-10,.3,10.2]}),Be("primitive",{object:f,rotation:[0,-.9,0],position:[-13.7,4.23,11.7]}),Be("primitive",{object:b,onClick:X=>{q(!Z)},onPointerOver:()=>S(!0),onPointerOut:()=>S(!1),rotation:[0,0,0],position:[-13.72,5.29,11.63]}),ln(Is,{font:cs,size:Z?.35:0,castShadow:"true",height:.1,position:[-13.1,5.71,12.3],rotation:[0,2.5,0],children:["Cotacts",Be("meshLambertMaterial",{color:"black"})]}),ln("mesh",{position:[-11.25,5.24,14.56],rotation:[0,1*Math.PI,0],children:[Be("planeBufferGeometry",{attach:"geometry",args:[2.94,1.71]}),Be("meshLambertMaterial",{attach:"material",side:Hl,map:V})]}),ln("mesh",{position:[-8.5,5,15.01],rotation:[0,1*Math.PI,0],children:[Be("planeBufferGeometry",{attach:"geometry",args:[13,15]}),Be("meshLambertMaterial",{attach:"material",map:y,color:"aqua"})]}),ln("mesh",{position:[-15,5,10.7],rotation:[0,-1.5*Math.PI,0],children:[Be("planeBufferGeometry",{attach:"geometry",args:[10,15]}),Be("meshLambertMaterial",{attach:"material",map:y,color:"aqua"})]}),ln(Is,{onPointerOver:()=>S(!0),onPointerOut:()=>S(!1),onClick:X=>window.open("https://www.linkedin.com/in/demetrios-vlassis/","_blank",x),font:cs,size:Z?.5:0,height:.25,position:[-3.5,5.3,14.2],rotation:[0,1*Math.PI,0],children:["LinkedIn",Be("meshLambertMaterial",{color:673})]}),ln(Is,{onPointerOver:()=>S(!0),onPointerOut:()=>S(!1),onClick:X=>window.open("https://www.facebook.com/dimi.v.02/","_blank",x),font:cs,size:Z?.5:0,height:.25,position:[-3.4,7.5,14.2],rotation:[0,1*Math.PI,0],children:["Facebook",Be("meshLambertMaterial",{color:3354576})]}),ln(Is,{onPointerOver:()=>S(!0),onPointerOut:()=>S(!1),onClick:X=>window.open("https://www.instagram.com/dimi.v.9/","_blank",x),font:cs,size:Z?.5:0,height:.25,position:[-3.3,9.3,14.2],rotation:[0,1*Math.PI,0],children:["Instagram",Be("meshLambertMaterial",{color:8407196})]}),ln(Is,{onPointerOver:()=>S(!0),onPointerOut:()=>S(!1),onClick:X=>window.open("https://github.com/TheHero9/","_blank",x),font:cs,size:Z?.5:0,height:.25,position:[-3.7,3.3,14.2],rotation:[0,1*Math.PI,0],children:["GitHub",Be("meshLambertMaterial",{color:"black"})]})]})}function KK(){return Be($X,{children:Be(Ce.exports.Suspense,{fallback:Be(kz,{}),children:ln(Mz,{broadphase:"SAP",gravity:[0,-2.6,0],children:[Be(bY,{makeDefault:!0,fov:40,zoom:1,position:[0,7,15]}),Be(Fz,{}),Be(_z,{}),Be(Lz,{}),Be(RK,{}),Be(VK,{}),Be(zK,{}),Be(XK,{}),Be("ambientLight",{}),Be(ZY,{}),Be(GY,{}),Be("pointLight",{position:[7,0,-7]})]})})})}A5.createRoot(document.getElementById("root")).render(Be(no,{children:Be(KK,{})}));
